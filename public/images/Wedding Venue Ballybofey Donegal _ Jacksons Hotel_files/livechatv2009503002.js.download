function visibleChangeHandler(){var e;void 0!==document.hidden?(e="hidden",visibilityChangeEvent="visibilitychange"):void 0!==document.mozHidden?(e="mozHidden",visibilityChangeEvent="mozvisibilitychange"):void 0!==document.msHidden?(e="msHidden",visibilityChangeEvent="msvisibilitychange"):void 0!==document.webkitHidden&&(e="webkitHidden",visibilityChangeEvent="webkitvisibilitychange"),document[e]?window.isWindowActive=!1:window.isWindowActive=!0}var pubblebot;!function(){if(!pubblebot||!pubblebot.requirejs){pubblebot?require=pubblebot:pubblebot={};var requirejs,require,define;!function(global){function isFunction(e){return e instanceof Function}function isArray(e){return e instanceof Array}function each(e,t){if(e){var n;for(n=0;n<e.length&&(!e[n]||!t(e[n],n,e));n+=1);}}function eachReverse(e,t){if(e){var n;for(n=e.length-1;n>-1&&(!e[n]||!t(e[n],n,e));n-=1);}}function hasProp(e,t){return t in e}function getOwn(e,t){return hasProp(e,t)&&e[t]}function eachProp(e,t){var n;for(n in e)if(hasProp(e,n)&&t(e[n],n))break}function mixin(e,t,n,i){return t&&eachProp(t,function(t,a){!n&&hasProp(e,a)||(i&&"string"!=typeof t?(e[a]||(e[a]={}),mixin(e[a],t,n,i)):e[a]=t)}),e}function bind(e,t){return function(){return t.apply(e,arguments)}}function scripts(){return document.getElementsByTagName("script")}function defaultOnError(e){throw e}function getGlobal(e){if(!e)return e;var t=global;return each(e.split("."),function(e){t=t[e]}),t}function makeError(e,t,n,i){var a=new Error(t+"\nhttp://requirejs.org/docs/errors.html#"+e);return a.requireType=e,a.requireModules=i,n&&(a.originalError=n),a}function newContext(e){function t(e){var t,n;for(t=0;e[t];t+=1)if("."===(n=e[t]))e.splice(t,1),t-=1;else if(".."===n){if(1===t&&(".."===e[2]||".."===e[0]))break;t>0&&(e.splice(t-1,2),t-=2)}}function n(e,n,i){var a,o,r,s,l,c,u,p,d,b,f,h=n&&n.split("/"),m=h,v=k.map,g=v&&v["*"];if(e&&"."===e.charAt(0)&&(n?(m=getOwn(k.pkgs,n)?h=[n]:h.slice(0,h.length-1),e=m.concat(e.split("/")),t(e),o=getOwn(k.pkgs,a=e[0]),e=e.join("/"),o&&e===a+"/"+o.main&&(e=a)):0===e.indexOf("./")&&(e=e.substring(2))),i&&v&&(h||g)){for(s=e.split("/"),l=s.length;l>0;l-=1){if(u=s.slice(0,l).join("/"),h)for(c=h.length;c>0;c-=1)if((r=getOwn(v,h.slice(0,c).join("/")))&&(r=getOwn(r,u))){p=r,d=l;break}if(p)break;!b&&g&&getOwn(g,u)&&(b=getOwn(g,u),f=l)}!p&&b&&(p=b,d=f),p&&(s.splice(0,d,p),e=s.join("/"))}return e}function i(e){isBrowser&&each(scripts(),function(t){if(t.getAttribute("data-requiremodule")===e&&t.getAttribute("data-requirecontext")===y.contextName)return t.parentNode.removeChild(t),1})}function a(e){var t=getOwn(k.paths,e);if(t&&isArray(t)&&t.length>1)return i(e),t.shift(),y.require.undef(e),y.require([e]),1}function o(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function r(e,t,i,a){var r,s,l,c,u=null,p=t?t.name:null,d=e,b=!0,f="";return e||(b=!1,e="_@r"+(A+=1)),c=o(e),u=c[0],e=c[1],u&&(u=n(u,p,a),s=getOwn(q,u)),e&&(u?f=s&&s.normalize?s.normalize(e,function(e){return n(e,p,a)}):n(e,p,a):(f=n(e,p,a),c=o(f),u=c[0],f=c[1],i=!0,r=y.nameToUrl(f))),l=!u||s||i?"":"_unnormalized"+(D+=1),{prefix:u,name:f,parentMap:t,unnormalized:!!l,url:r,originalName:d,isDefine:b,id:(u?u+"!"+f:f)+l}}function s(e){var t=e.id,n=getOwn(I,t);return n||(n=I[t]=new y.Module(e)),n}function l(e,t,n){var i=e.id,a=getOwn(I,i);!hasProp(q,i)||a&&!a.defineEmitComplete?(a=s(e),a.error&&"error"===t?n(a.error):a.on(t,n)):"defined"===t&&n(q[i])}function c(e,t){var n=e.requireModules,i=!1;t?t(e):(each(n,function(t){var n=getOwn(I,t);n&&(n.error=e,n.events.error&&(i=!0,n.emit("error",e)))}),i||req.onError(e))}function u(){globalDefQueue.length&&(apsp.apply(S,[S.length-1,0].concat(globalDefQueue)),globalDefQueue=[])}function p(e){delete I[e],delete T[e]}function d(e,t,n){var i=e.map.id;e.error?e.emit("error",e.error):(t[i]=!0,each(e.depMaps,function(i,a){var o=i.id,r=getOwn(I,o);!r||e.depMatched[a]||n[o]||(getOwn(t,o)?(e.defineDep(a,q[o]),e.check()):d(r,t,n))}),n[i]=!0)}function b(){var e,t,n,o,r=1e3*k.waitSeconds,s=r&&y.startTime+r<(new Date).getTime(),l=[],u=[],p=!1,f=!0;if(!g){if(g=!0,eachProp(T,function(n){if(e=n.map,t=e.id,n.enabled&&(e.isDefine||u.push(n),!n.error))if(!n.inited&&s)a(t)?(o=!0,p=!0):(l.push(t),i(t));else if(!n.inited&&n.fetched&&e.isDefine&&(p=!0,!e.prefix))return f=!1}),s&&l.length)return n=makeError("timeout","Load timeout for modules: "+l,null,l),n.contextName=y.contextName,c(n);f&&each(u,function(e){d(e,{},{})}),s&&!o||!p||!isBrowser&&!isWebWorker||x||(x=setTimeout(function(){x=0,b()},50)),g=!1}}function f(e){hasProp(q,e[0])||s(r(e[0],null,!0)).init(e[1],e[2])}function h(e,t,n,i){e.detachEvent&&!isOpera?i&&e.detachEvent(i,t):e.removeEventListener(n,t,!1)}function m(e){var t=e.currentTarget||e.srcElement;return h(t,y.onScriptLoad,"load","onreadystatechange"),h(t,y.onScriptError,"error"),{node:t,id:t&&t.getAttribute("data-requiremodule")}}function v(){var e;for(u();S.length;){if(e=S.shift(),null===e[0])return c(makeError("mismatch","Mismatched anonymous define() module: "+e[e.length-1]));f(e)}}var g,w,y,C,x,k={waitSeconds:7,baseUrl:"./",paths:{},pkgs:{},shim:{},config:{}},I={},T={},$={},S=[],q={},P={},A=1,D=1;return C={require:function(e){return e.require?e.require:e.require=y.makeRequire(e.map)},exports:function(e){if(e.usingExports=!0,e.map.isDefine)return e.exports?e.exports:e.exports=q[e.map.id]={}},module:function(e){return e.module?e.module:e.module={id:e.map.id,uri:e.map.url,config:function(){var t=getOwn(k.pkgs,e.map.id);return(t?getOwn(k.config,e.map.id+"/"+t.main):getOwn(k.config,e.map.id))||{}},exports:q[e.map.id]}}},w=function(e){this.events=getOwn($,e.id)||{},this.map=e,this.shim=getOwn(k.shim,e.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0},w.prototype={init:function(e,t,n,i){i=i||{},this.inited||(this.factory=t,n?this.on("error",n):this.events.error&&(n=bind(this,function(e){this.emit("error",e)})),this.depMaps=e&&e.slice(0),this.errback=n,this.inited=!0,this.ignore=i.ignore,i.enabled||this.enabled?this.enable():this.check())},defineDep:function(e,t){this.depMatched[e]||(this.depMatched[e]=!0,this.depCount-=1,this.depExports[e]=t)},fetch:function(){if(!this.fetched){this.fetched=!0,y.startTime=(new Date).getTime();var e=this.map;if(!this.shim)return e.prefix?this.callPlugin():this.load();y.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],bind(this,function(){return e.prefix?this.callPlugin():this.load()}))}},load:function(){var e=this.map.url;P[e]||(P[e]=!0,y.load(this.map.id,e))},check:function(){if(this.enabled&&!this.enabling){var e,t,n=this.map.id,i=this.depExports,a=this.exports,o=this.factory;if(this.inited){if(this.error)this.emit("error",this.error);else if(!this.defining){if(this.defining=!0,this.depCount<1&&!this.defined){if(isFunction(o)){if(this.events.error&&this.map.isDefine||req.onError!==defaultOnError)try{a=y.execCb(n,o,i,a)}catch(t){e=t}else a=y.execCb(n,o,i,a);if(this.map.isDefine&&(t=this.module,t&&void 0!==t.exports&&t.exports!==this.exports?a=t.exports:void 0===a&&this.usingExports&&(a=this.exports)),e)return e.requireMap=this.map,e.requireModules=this.map.isDefine?[this.map.id]:null,e.requireType=this.map.isDefine?"define":"require",c(this.error=e)}else a=o;this.exports=a,this.map.isDefine&&!this.ignore&&(q[n]=a,req.onResourceLoad&&req.onResourceLoad(y,this.map,this.depMaps)),p(n),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else this.fetch()}},callPlugin:function(){var e=this.map,t=e.id,i=r(e.prefix);this.depMaps.push(i),l(i,"defined",bind(this,function(i){var a,o,u,d=this.map.name,b=this.map.parentMap?this.map.parentMap.name:null,f=y.makeRequire(e.parentMap,{enableBuildCallback:!0});if(this.map.unnormalized)return i.normalize&&(d=i.normalize(d,function(e){return n(e,b,!0)})||""),o=r(e.prefix+"!"+d,this.map.parentMap),l(o,"defined",bind(this,function(e){this.init([],function(){return e},null,{enabled:!0,ignore:!0})})),void((u=getOwn(I,o.id))&&(this.depMaps.push(o),this.events.error&&u.on("error",bind(this,function(e){this.emit("error",e)})),u.enable()));a=bind(this,function(e){this.init([],function(){return e},null,{enabled:!0})}),a.error=bind(this,function(e){this.inited=!0,this.error=e,e.requireModules=[t],eachProp(I,function(e){0===e.map.id.indexOf(t+"_unnormalized")&&p(e.map.id)}),c(e)}),a.fromText=bind(this,function(n,i){var o=e.name,l=r(o),u=useInteractive;i&&(n=i),u&&(useInteractive=!1),s(l),hasProp(k.config,t)&&(k.config[o]=k.config[t]);try{req.exec(n)}catch(e){return c(makeError("fromtexteval","fromText eval for "+t+" failed: "+e,e,[t]))}u&&(useInteractive=!0),this.depMaps.push(l),y.completeLoad(o),f([o],a)}),i.load(e.name,f,a,k)})),y.enable(i,this),this.pluginMaps[i.id]=i},enable:function(){T[this.map.id]=this,this.enabled=!0,this.enabling=!0,each(this.depMaps,bind(this,function(e,t){var n,i,a;if("string"==typeof e){if(e=r(e,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[t]=e,a=getOwn(C,e.id))return void(this.depExports[t]=a(this));this.depCount+=1,l(e,"defined",bind(this,function(e){this.defineDep(t,e),this.check()})),this.errback&&l(e,"error",bind(this,this.errback))}n=e.id,i=I[n],hasProp(C,n)||!i||i.enabled||y.enable(e,this)})),eachProp(this.pluginMaps,bind(this,function(e){var t=getOwn(I,e.id);t&&!t.enabled&&y.enable(e,this)})),this.enabling=!1,this.check()},on:function(e,t){var n=this.events[e];n||(n=this.events[e]=[]),n.push(t)},emit:function(e,t){each(this.events[e],function(e){e(t)}),"error"===e&&delete this.events[e]}},y={config:k,contextName:e,registry:I,defined:q,urlFetched:P,defQueue:S,Module:w,makeModuleMap:r,nextTick:req.nextTick,onError:c,configure:function(e){e.baseUrl&&"/"!==e.baseUrl.charAt(e.baseUrl.length-1)&&(e.baseUrl+="/");var t=k.pkgs,n=k.shim,i={paths:!0,config:!0,map:!0};eachProp(e,function(e,t){i[t]?"map"===t?(k.map||(k.map={}),mixin(k[t],e,!0,!0)):mixin(k[t],e,!0):k[t]=e}),e.shim&&(eachProp(e.shim,function(e,t){isArray(e)&&(e={deps:e}),!e.exports&&!e.init||e.exportsFn||(e.exportsFn=y.makeShimExports(e)),n[t]=e}),k.shim=n),e.packages&&(each(e.packages,function(e){var n;e="string"==typeof e?{name:e}:e,n=e.location,t[e.name]={name:e.name,location:n||e.name,main:(e.main||"main").replace(currDirRegExp,"").replace(jsSuffixRegExp,"")}}),k.pkgs=t),eachProp(I,function(e,t){e.inited||e.map.unnormalized||(e.map=r(t))}),(e.deps||e.callback)&&y.require(e.deps||[],e.callback)},makeShimExports:function(e){function t(){var t;return e.init&&(t=e.init.apply(global,arguments)),t||e.exports&&getGlobal(e.exports)}return t},makeRequire:function(t,i){function a(n,o,l){var u,p,d;return i.enableBuildCallback&&o&&isFunction(o)&&(o.__requireJsBuild=!0),"string"==typeof n?isFunction(o)?c(makeError("requireargs","Invalid require call"),l):t&&hasProp(C,n)?C[n](I[t.id]):req.get?req.get(y,n,t,a):(p=r(n,t,!1,!0),u=p.id,hasProp(q,u)?q[u]:c(makeError("notloaded",'Module name "'+u+'" has not been loaded yet for context: '+e+(t?"":". Use require([])")))):(v(),y.nextTick(function(){v(),d=s(r(null,t)),d.skipMap=i.skipMap,d.init(n,o,l,{enabled:!0}),b()}),a)}return i=i||{},mixin(a,{isBrowser:isBrowser,toUrl:function(e){var i,a=e.lastIndexOf("."),o=e.split("/")[0],r="."===o||".."===o;return-1!==a&&(!r||a>1)&&(i=e.substring(a,e.length),e=e.substring(0,a)),y.nameToUrl(n(e,t&&t.id,!0),i,!0)},defined:function(e){return hasProp(q,r(e,t,!1,!0).id)},specified:function(e){return e=r(e,t,!1,!0).id,hasProp(q,e)||hasProp(I,e)}}),t||(a.undef=function(e){u();var n=r(e,t,!0),i=getOwn(I,e);delete q[e],delete P[n.url],delete $[e],i&&(i.events.defined&&($[e]=i.events),p(e))}),a},enable:function(e){getOwn(I,e.id)&&s(e).enable()},completeLoad:function(e){var t,n,i,o=getOwn(k.shim,e)||{},r=o.exports;for(u();S.length;){if(n=S.shift(),null===n[0]){if(n[0]=e,t)break;t=!0}else n[0]===e&&(t=!0);f(n)}if(i=getOwn(I,e),!t&&!hasProp(q,e)&&i&&!i.inited){if(!(!k.enforceDefine||r&&getGlobal(r)))return a(e)?void 0:c(makeError("nodefine","No define call for "+e,null,[e]));f([e,o.deps||[],o.exportsFn])}b()},nameToUrl:function(e,t,n){var i,a,o,r,s,l,c,u,p;if(req.jsExtRegExp.test(e))u=e+(t||"");else{for(i=k.paths,a=k.pkgs,s=e.split("/"),l=s.length;l>0;l-=1){if(c=s.slice(0,l).join("/"),o=getOwn(a,c),p=getOwn(i,c)){isArray(p)&&(p=p[0]),s.splice(0,l,p);break}if(o){r=e===o.name?o.location+"/"+o.main:o.location,s.splice(0,l,r);break}}u=s.join("/"),u+=t||(/\?/.test(u)||n?"":".js"),u=("/"===u.charAt(0)||u.match(/^[\w\+\.\-]+:/)?"":k.baseUrl)+u}return k.urlArgs?u+(-1===u.indexOf("?")?"?":"&")+k.urlArgs:u},load:function(e,t){req.load(y,e,t)},execCb:function(e,t,n,i){return t.apply(i,n)},onScriptLoad:function(e){if("load"===e.type||readyRegExp.test((e.currentTarget||e.srcElement).readyState)){interactiveScript=null;var t=m(e);y.completeLoad(t.id)}},onScriptError:function(e){var t=m(e);if(!a(t.id))return c(makeError("scripterror","Script error for: "+t.id,e,[t.id]))}},y.require=y.makeRequire(),y}function getInteractiveScript(){return interactiveScript&&"interactive"===interactiveScript.readyState?interactiveScript:(eachReverse(scripts(),function(e){if("interactive"===e.readyState)return interactiveScript=e}),interactiveScript)}var req,s,head,baseElement,dataMain,src,interactiveScript,currentlyAddingScript,mainScript,subPath,version="2.1.8",commentRegExp=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/gm,cjsRequireRegExp=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,jsSuffixRegExp=/\.js$/,currDirRegExp=/^\.\//,ap=Array.prototype,apsp=ap.splice,isBrowser=!("undefined"==typeof window||!navigator||!window.document),isWebWorker=!isBrowser&&"undefined"!=typeof importScripts,readyRegExp=isBrowser&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,defContextName="_",isOpera="undefined"!=typeof opera&&"[object Opera]"===opera.toString(),contexts={},cfg={},globalDefQueue=[],useInteractive=0;requirejs=void 0,require=void 0,req=requirejs=function(e,t,n,i){var a,o,r=defContextName;return isArray(e)||"string"==typeof e||(o=e,isArray(t)?(e=t,t=n,n=i):e=[]),o&&o.context&&(r=o.context),a=getOwn(contexts,r),a||(a=contexts[r]=req.s.newContext(r)),o&&a.configure(o),a.require(e,t,n)},req.config=function(e){return req(e)},req.nextTick="undefined"!=typeof setTimeout?function(e){setTimeout(e,4)}:function(e){e()},require||(require=req),req.version=version,req.jsExtRegExp=/^\/|:|\?|\.js$/,req.isBrowser=isBrowser,s=req.s={contexts:contexts,newContext:newContext},req({}),each(["toUrl","undef","defined","specified"],function(e){req[e]=function(){var t=contexts[defContextName];return t.require[e].apply(t,arguments)}}),isBrowser&&(head=s.head=document.getElementsByTagName("head")[0],(baseElement=document.getElementsByTagName("base")[0])&&(head=s.head=baseElement.parentNode)),req.onError=defaultOnError,req.createNode=function(e,t,n){var i=e.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");return i.type=e.scriptType||"text/javascript",i.charset="utf-8",i.async=!0,i},req.load=function(e,t,n){var i,a=e&&e.config||{};if(isBrowser)return i=req.createNode(a,t,n),i.setAttribute("data-requirecontext",e.contextName),i.setAttribute("data-requiremodule",t),!i.attachEvent||i.attachEvent.toString&&i.attachEvent.toString().indexOf("[native code")<0||isOpera?(i.addEventListener("load",e.onScriptLoad,!1),i.addEventListener("error",e.onScriptError,!1)):(useInteractive=!0,i.attachEvent("onreadystatechange",e.onScriptLoad)),i.src=n,currentlyAddingScript=i,baseElement?head.insertBefore(i,baseElement):head.appendChild(i),currentlyAddingScript=null,i;if(isWebWorker)try{importScripts(n),e.completeLoad(t)}catch(i){e.onError(makeError("importscripts","importScripts failed for "+t+" at "+n,i,[t]))}},isBrowser&&eachReverse(scripts(),function(e){if(head||(head=e.parentNode),dataMain=e.getAttribute("data-main"))return mainScript=dataMain,cfg.baseUrl||(src=mainScript.split("/"),mainScript=src.pop(),subPath=src.length?src.join("/")+"/":"./",cfg.baseUrl=subPath),mainScript=mainScript.replace(jsSuffixRegExp,""),req.jsExtRegExp.test(mainScript)&&(mainScript=dataMain),cfg.deps=cfg.deps?cfg.deps.concat(mainScript):[mainScript],1}),define=function(e,t,n){var i,a;"string"!=typeof e&&(n=t,t=e,e=null),isArray(t)||(n=t,t=null),!t&&isFunction(n)&&(t=[],n.length&&(n.toString().replace(commentRegExp,"").replace(cjsRequireRegExp,function(e,n){t.push(n)}),t=(1===n.length?["require"]:["require","exports","module"]).concat(t))),useInteractive&&(i=currentlyAddingScript||getInteractiveScript())&&(e||(e=i.getAttribute("data-requiremodule")),a=contexts[i.getAttribute("data-requirecontext")]),(a?a.defQueue:globalDefQueue).push([e,t,n])},define.amd={jquery:!0},req.exec=function(text){return eval(text)},req(cfg)}(this),pubblebot.requirejs=requirejs,pubblebot.require=require,pubblebot.define=define,pubblebot.require.config({baseUrl:"https://cdn.pubble.io/newui/mod/vendor/",waitSeconds:120,paths:{underscore:"underscore",backbone:"backbone-minx",jQueryPB:"jquery-1.9.1x",text:"text"},shim:{underscore:{exports:"_"},backbone:{deps:["underscore","jQueryPB"],exports:"Backbone"}}}),pubblebot.require(["app","underscore","utils/utils","utils/appConfig"],function(e,t,n,i){var a=navigator.userAgent;if(a.indexOf("Slurp")>-1||a.indexOf("Spider")>-1||a.indexOf("Bot")>-1||a.indexOf("bot")>-1||a.indexOf("spider")>-1||a.indexOf("feedburner")>-1)return!1;var o=window.jQueryPBm;if(o){var r=o("#pubble_app_"+i.config.appID),s=r.attr("data-mobile-disable");if(s&&null!=s&&"true"==s&&n.isMobile())return!1}e.startup()})}}(),pubblebot.define("main",function(){}),function(){var e=this,t=e._,n={},i=Array.prototype,a=Object.prototype,o=Function.prototype,r=i.push,s=i.slice,l=i.concat,c=a.toString,u=a.hasOwnProperty,p=i.forEach,d=i.map,b=i.reduce,f=i.reduceRight,h=i.filter,m=i.every,v=i.some,g=i.indexOf,w=i.lastIndexOf,y=Array.isArray,C=Object.keys,x=o.bind,k=function(e){return e instanceof k?e:this instanceof k?void(this._wrapped=e):new k(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=k),exports._=k):e._=k,k.VERSION="1.4.3";var I=k.each=k.forEach=function(e,t,i){if(null!=e)if(p&&e.forEach===p)e.forEach(t,i);else if(e.length===+e.length){for(var a=0,o=e.length;a<o;a++)if(t.call(i,e[a],a,e)===n)return}else for(var r in e)if(k.has(e,r)&&t.call(i,e[r],r,e)===n)return};k.map=k.collect=function(e,t,n){var i=[];return null==e?i:d&&e.map===d?e.map(t,n):(I(e,function(e,a,o){i[i.length]=t.call(n,e,a,o)}),i)};var T="Reduce of empty array with no initial value";k.reduce=k.foldl=k.inject=function(e,t,n,i){var a=arguments.length>2;if(null==e&&(e=[]),b&&e.reduce===b)return i&&(t=k.bind(t,i)),a?e.reduce(t,n):e.reduce(t);if(I(e,function(e,o,r){a?n=t.call(i,n,e,o,r):(n=e,a=!0)}),!a)throw new TypeError(T);return n},k.reduceRight=k.foldr=function(e,t,n,i){var a=arguments.length>2;if(null==e&&(e=[]),f&&e.reduceRight===f)return i&&(t=k.bind(t,i)),a?e.reduceRight(t,n):e.reduceRight(t);var o=e.length;if(o!==+o){var r=k.keys(e);o=r.length}if(I(e,function(s,l,c){l=r?r[--o]:--o,a?n=t.call(i,n,e[l],l,c):(n=e[l],a=!0)}),!a)throw new TypeError(T);return n},k.find=k.detect=function(e,t,n){var i;return $(e,function(e,a,o){if(t.call(n,e,a,o))return i=e,!0}),i},k.filter=k.select=function(e,t,n){var i=[];return null==e?i:h&&e.filter===h?e.filter(t,n):(I(e,function(e,a,o){t.call(n,e,a,o)&&(i[i.length]=e)}),i)},k.reject=function(e,t,n){return k.filter(e,function(e,i,a){return!t.call(n,e,i,a)},n)},k.every=k.all=function(e,t,i){t||(t=k.identity);var a=!0;return null==e?a:m&&e.every===m?e.every(t,i):(I(e,function(e,o,r){if(!(a=a&&t.call(i,e,o,r)))return n}),!!a)};var $=k.some=k.any=function(e,t,i){t||(t=k.identity);var a=!1;return null==e?a:v&&e.some===v?e.some(t,i):(I(e,function(e,o,r){if(a||(a=t.call(i,e,o,r)))return n}),!!a)};k.contains=k.include=function(e,t){return null!=e&&(g&&e.indexOf===g?-1!=e.indexOf(t):$(e,function(e){return e===t}))},k.invoke=function(e,t){var n=s.call(arguments,2);return k.map(e,function(e){return(k.isFunction(t)?t:e[t]).apply(e,n)})},k.pluck=function(e,t){return k.map(e,function(e){return e[t]})},k.where=function(e,t){return k.isEmpty(t)?[]:k.filter(e,function(e){for(var n in t)if(t[n]!==e[n])return!1;return!0})},k.max=function(e,t,n){if(!t&&k.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.max.apply(Math,e);if(!t&&k.isEmpty(e))return-1/0;var i={computed:-1/0,value:-1/0};return I(e,function(e,a,o){var r=t?t.call(n,e,a,o):e;r>=i.computed&&(i={value:e,computed:r})}),i.value},k.min=function(e,t,n){if(!t&&k.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.min.apply(Math,e);if(!t&&k.isEmpty(e))return 1/0;var i={computed:1/0,value:1/0};return I(e,function(e,a,o){var r=t?t.call(n,e,a,o):e;r<i.computed&&(i={value:e,computed:r})}),i.value},k.shuffle=function(e){var t,n=0,i=[];return I(e,function(e){t=k.random(n++),i[n-1]=i[t],i[t]=e}),i};var S=function(e){return k.isFunction(e)?e:function(t){return t[e]}};k.sortBy=function(e,t,n){var i=S(t);return k.pluck(k.map(e,function(e,t,a){return{value:e,index:t,criteria:i.call(n,e,t,a)}}).sort(function(e,t){var n=e.criteria,i=t.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(n<i||void 0===i)return-1}return e.index<t.index?-1:1}),"value")};var q=function(e,t,n,i){var a={},o=S(t||k.identity);return I(e,function(t,r){var s=o.call(n,t,r,e);i(a,s,t)}),a};k.groupBy=function(e,t,n){return q(e,t,n,function(e,t,n){(k.has(e,t)?e[t]:e[t]=[]).push(n)})},k.countBy=function(e,t,n){return q(e,t,n,function(e,t){k.has(e,t)||(e[t]=0),e[t]++})},k.sortedIndex=function(e,t,n,i){n=null==n?k.identity:S(n);for(var a=n.call(i,t),o=0,r=e.length;o<r;){var s=o+r>>>1;n.call(i,e[s])<a?o=s+1:r=s}return o},k.toArray=function(e){return e?k.isArray(e)?s.call(e):e.length===+e.length?k.map(e,k.identity):k.values(e):[]},k.size=function(e){return null==e?0:e.length===+e.length?e.length:k.keys(e).length},k.first=k.head=k.take=function(e,t,n){if(null!=e)return null==t||n?e[0]:s.call(e,0,t)},k.initial=function(e,t,n){return s.call(e,0,e.length-(null==t||n?1:t))},k.last=function(e,t,n){if(null!=e)return null==t||n?e[e.length-1]:s.call(e,Math.max(e.length-t,0))},k.rest=k.tail=k.drop=function(e,t,n){return s.call(e,null==t||n?1:t)},k.compact=function(e){return k.filter(e,k.identity)};var P=function(e,t,n){return I(e,function(e){k.isArray(e)?t?r.apply(n,e):P(e,t,n):n.push(e)}),n};k.flatten=function(e,t){return P(e,t,[])},k.without=function(e){return k.difference(e,s.call(arguments,1))},k.uniq=k.unique=function(e,t,n,i){k.isFunction(t)&&(i=n,n=t,t=!1);var a=n?k.map(e,n,i):e,o=[],r=[];return I(a,function(n,i){(t?i&&r[r.length-1]===n:k.contains(r,n))||(r.push(n),o.push(e[i]))}),o},k.union=function(){return k.uniq(l.apply(i,arguments))},k.intersection=function(e){var t=s.call(arguments,1);return k.filter(k.uniq(e),function(e){return k.every(t,function(t){return k.indexOf(t,e)>=0})})},k.difference=function(e){var t=l.apply(i,s.call(arguments,1));return k.filter(e,function(e){return!k.contains(t,e)})},k.zip=function(){for(var e=s.call(arguments),t=k.max(k.pluck(e,"length")),n=new Array(t),i=0;i<t;i++)n[i]=k.pluck(e,""+i);return n},k.object=function(e,t){if(null==e)return{};for(var n={},i=0,a=e.length;i<a;i++)t?n[e[i]]=t[i]:n[e[i][0]]=e[i][1];return n},k.indexOf=function(e,t,n){if(null==e)return-1;var i=0,a=e.length;if(n){if("number"!=typeof n)return i=k.sortedIndex(e,t),e[i]===t?i:-1;i=n<0?Math.max(0,a+n):n}if(g&&e.indexOf===g)return e.indexOf(t,n);for(;i<a;i++)if(e[i]===t)return i;return-1},k.lastIndexOf=function(e,t,n){if(null==e)return-1;var i=null!=n;if(w&&e.lastIndexOf===w)return i?e.lastIndexOf(t,n):e.lastIndexOf(t);for(var a=i?n:e.length;a--;)if(e[a]===t)return a;return-1},k.range=function(e,t,n){arguments.length<=1&&(t=e||0,e=0),n=arguments[2]||1;for(var i=Math.max(Math.ceil((t-e)/n),0),a=0,o=new Array(i);a<i;)o[a++]=e,e+=n;return o};var A=function(){};k.bind=function(e,t){var n,i;if(e.bind===x&&x)return x.apply(e,s.call(arguments,1));if(!k.isFunction(e))throw new TypeError;return n=s.call(arguments,2),i=function(){if(!(this instanceof i))return e.apply(t,n.concat(s.call(arguments)));A.prototype=e.prototype;var a=new A;A.prototype=null;var o=e.apply(a,n.concat(s.call(arguments)));return Object(o)===o?o:a}},k.bindAll=function(e){var t=s.call(arguments,1);return 0==t.length&&(t=k.functions(e)),I(t,function(t){e[t]=k.bind(e[t],e)}),e},k.memoize=function(e,t){var n={};return t||(t=k.identity),function(){var i=t.apply(this,arguments);return k.has(n,i)?n[i]:n[i]=e.apply(this,arguments)}},k.delay=function(e,t){var n=s.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},k.defer=function(e){return k.delay.apply(k,[e,1].concat(s.call(arguments,1)))},k.throttle=function(e,t){var n,i,a,o,r=0,s=function(){r=new Date,a=null,o=e.apply(n,i)};return function(){var l=new Date,c=t-(l-r);return n=this,i=arguments,c<=0?(clearTimeout(a),a=null,r=l,o=e.apply(n,i)):a||(a=setTimeout(s,c)),o}},k.debounce=function(e,t,n){var i,a;return function(){var o=this,r=arguments,s=function(){i=null,n||(a=e.apply(o,r))},l=n&&!i;return clearTimeout(i),i=setTimeout(s,t),l&&(a=e.apply(o,r)),a}},k.once=function(e){var t,n=!1;return function(){return n?t:(n=!0,t=e.apply(this,arguments),e=null,t)}},k.wrap=function(e,t){return function(){var n=[e];return r.apply(n,arguments),t.apply(this,n)}},k.compose=function(){var e=arguments;return function(){for(var t=arguments,n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},k.after=function(e,t){return e<=0?t():function(){if(--e<1)return t.apply(this,arguments)}},k.keys=C||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var n in e)k.has(e,n)&&(t[t.length]=n);return t},k.values=function(e){var t=[];for(var n in e)k.has(e,n)&&t.push(e[n]);return t},k.pairs=function(e){var t=[];for(var n in e)k.has(e,n)&&t.push([n,e[n]]);return t},k.invert=function(e){var t={};for(var n in e)k.has(e,n)&&(t[e[n]]=n);return t},k.functions=k.methods=function(e){var t=[];for(var n in e)k.isFunction(e[n])&&t.push(n);return t.sort()},k.extend=function(e){return I(s.call(arguments,1),function(t){if(t)for(var n in t)e[n]=t[n]}),e},k.pick=function(e){var t={},n=l.apply(i,s.call(arguments,1));return I(n,function(n){n in e&&(t[n]=e[n])}),t},k.omit=function(e){var t={},n=l.apply(i,s.call(arguments,1));for(var a in e)k.contains(n,a)||(t[a]=e[a]);return t},k.defaults=function(e){return I(s.call(arguments,1),function(t){if(t)for(var n in t)null==e[n]&&(e[n]=t[n])}),e},k.clone=function(e){return k.isObject(e)?k.isArray(e)?e.slice():k.extend({},e):e},k.tap=function(e,t){return t(e),e};var D=function(e,t,n,i){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;e instanceof k&&(e=e._wrapped),t instanceof k&&(t=t._wrapped);var a=c.call(e);if(a!=c.call(t))return!1;switch(a){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if("object"!=typeof e||"object"!=typeof t)return!1;for(var o=n.length;o--;)if(n[o]==e)return i[o]==t;n.push(e),i.push(t);var r=0,s=!0;if("[object Array]"==a){if(r=e.length,s=r==t.length)for(;r--&&(s=D(e[r],t[r],n,i)););}else{var l=e.constructor,u=t.constructor;if(l!==u&&!(k.isFunction(l)&&l instanceof l&&k.isFunction(u)&&u instanceof u))return!1;for(var p in e)if(k.has(e,p)&&(r++,!(s=k.has(t,p)&&D(e[p],t[p],n,i))))break;if(s){for(p in t)if(k.has(t,p)&&!r--)break;s=!r}}return n.pop(),i.pop(),s};k.isEqual=function(e,t){return D(e,t,[],[])},k.isEmpty=function(e){if(null==e)return!0;if(k.isArray(e)||k.isString(e))return 0===e.length;for(var t in e)if(k.has(e,t))return!1;return!0},k.isElement=function(e){return!(!e||1!==e.nodeType)},k.isArray=y||function(e){return"[object Array]"==c.call(e)},k.isObject=function(e){return e===Object(e)},I(["Arguments","Function","String","Number","Date","RegExp"],function(e){k["is"+e]=function(t){return c.call(t)=="[object "+e+"]"}}),k.isArguments(arguments)||(k.isArguments=function(e){return!(!e||!k.has(e,"callee"))}),"function"!=typeof/./&&(k.isFunction=function(e){return"function"==typeof e}),k.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},k.isNaN=function(e){return k.isNumber(e)&&e!=+e},k.isBoolean=function(e){return!0===e||!1===e||"[object Boolean]"==c.call(e)},k.isNull=function(e){return null===e},k.isUndefined=function(e){return void 0===e},k.has=function(e,t){return u.call(e,t)},k.noConflict=function(){return e._=t,this},k.identity=function(e){return e},k.times=function(e,t,n){for(var i=Array(e),a=0;a<e;a++)i[a]=t.call(n,a);return i},k.random=function(e,t){return null==t&&(t=e,e=0),e+(0|Math.random()*(t-e+1))};var j={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};j.unescape=k.invert(j.escape);var _={escape:new RegExp("["+k.keys(j.escape).join("")+"]","g"),unescape:new RegExp("("+k.keys(j.unescape).join("|")+")","g")};k.each(["escape","unescape"],function(e){k[e]=function(t){return null==t?"":(""+t).replace(_[e],function(t){return j[e][t]})}}),k.result=function(e,t){if(null==e)return null;var n=e[t];return k.isFunction(n)?n.call(e):n},k.mixin=function(e){I(k.functions(e),function(t){var n=k[t]=e[t];k.prototype[t]=function(){var e=[this._wrapped];return r.apply(e,arguments),O.call(this,n.apply(k,e))}})};var E=0;k.uniqueId=function(e){var t=""+ ++E;return e?e+t:t},k.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var N=/(.)^/,L={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"},M=/\\|'|\r|\n|\t|\u2028|\u2029/g;k.template=function(e,t,n){n=k.defaults({},n,k.templateSettings);var i=new RegExp([(n.escape||N).source,(n.interpolate||N).source,(n.evaluate||N).source].join("|")+"|$","g"),a=0,o="__p+='";e.replace(i,function(t,n,i,r,s){return o+=e.slice(a,s).replace(M,function(e){return"\\"+L[e]}),n&&(o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),i&&(o+="'+\n((__t=("+i+"))==null?'':__t)+\n'"),r&&(o+="';\n"+r+"\n__p+='"),a=s+t.length,t}),o+="';\n",n.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{var r=new Function(n.variable||"obj","_",o)}catch(e){throw e.source=o,e}if(t)return r(t,k);var s=function(e){return r.call(this,e,k)};return s.source="function("+(n.variable||"obj")+"){\n"+o+"}",s},k.chain=function(e){return k(e).chain()};var O=function(e){return this._chain?k(e).chain():e};k.mixin(k),I(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=i[e];k.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!=e&&"splice"!=e||0!==n.length||delete n[0],O.call(this,n)}}),I(["concat","join","slice"],function(e){var t=i[e];k.prototype[e]=function(){return O.call(this,t.apply(this._wrapped,arguments))}}),k.extend(k.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),window.$UScore=k.noConflict()}.call(this),pubblebot.define("underscore",function(e){return function(){return e._}}(this)),function(e,t){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){function n(e,t,n){n=n||Ce;var i,a,o=n.createElement("script");if(o.text=e,t)for(i in xe)(a=t[i]||t.getAttribute&&t.getAttribute(i))&&o.setAttribute(i,a);n.head.appendChild(o).parentNode.removeChild(o)}function i(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?be[fe.call(e)]||"object":typeof e}function a(e){var t=!!e&&"length"in e&&e.length,n=i(e);return!we(e)&&!ye(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}function o(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}
function r(e,t,n){return we(t)?ke.grep(e,function(e,i){return!!t.call(e,i,e)!==n}):t.nodeType?ke.grep(e,function(e){return e===t!==n}):"string"!=typeof t?ke.grep(e,function(e){return de.call(t,e)>-1!==n}):ke.filter(t,e,n)}function s(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function l(e){var t={};return ke.each(e.match(_e)||[],function(e,n){t[n]=!0}),t}function c(e){return e}function u(e){throw e}function p(e,t,n,i){var a;try{e&&we(a=e.promise)?a.call(e).done(t).fail(n):e&&we(a=e.then)?a.call(e,t,n):t.apply(void 0,[e].slice(i))}catch(e){n.apply(void 0,[e])}}function d(){Ce.removeEventListener("DOMContentLoaded",d),e.removeEventListener("load",d),ke.ready()}function b(e,t){return t.toUpperCase()}function f(e){return e.replace(Me,"ms-").replace(Oe,b)}function h(){this.expando=ke.expando+h.uid++}function m(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:Ue.test(e)?JSON.parse(e):e)}function v(e,t,n){var i;if(void 0===n&&1===e.nodeType)if(i="data-"+t.replace(He,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(i))){try{n=m(n)}catch(e){}Be.set(e,t,n)}else n=void 0;return n}function g(e,t,n,i){var a,o,r=20,s=i?function(){return i.cur()}:function(){return ke.css(e,t,"")},l=s(),c=n&&n[3]||(ke.cssNumber[t]?"":"px"),u=e.nodeType&&(ke.cssNumber[t]||"px"!==c&&+l)&&ze.exec(ke.css(e,t));if(u&&u[3]!==c){for(l/=2,c=c||u[3],u=+l||1;r--;)ke.style(e,t,u+c),(1-o)*(1-(o=s()/l||.5))<=0&&(r=0),u/=o;u*=2,ke.style(e,t,u+c),n=n||[]}return n&&(u=+u||+l||0,a=n[1]?u+(n[1]+1)*n[2]:+n[2],i&&(i.unit=c,i.start=u,i.end=a)),a}function w(e){var t,n=e.ownerDocument,i=e.nodeName,a=Ke[i];return a||(t=n.body.appendChild(n.createElement(i)),a=ke.css(t,"display"),t.parentNode.removeChild(t),"none"===a&&(a="block"),Ke[i]=a,a)}function y(e,t){for(var n,i,a=[],o=0,r=e.length;o<r;o++)i=e[o],i.style&&(n=i.style.display,t?("none"===n&&(a[o]=Fe.get(i,"display")||null,a[o]||(i.style.display="")),""===i.style.display&&Je(i)&&(a[o]=w(i))):"none"!==n&&(a[o]="none",Fe.set(i,"display",n)));for(o=0;o<r;o++)null!=a[o]&&(e[o].style.display=a[o]);return e}function C(e,t){var n;return n=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&o(e,t)?ke.merge([e],n):n}function x(e,t){for(var n=0,i=e.length;n<i;n++)Fe.set(e[n],"globalEval",!t||Fe.get(t[n],"globalEval"))}function k(e,t,n,a,o){for(var r,s,l,c,u,p,d=t.createDocumentFragment(),b=[],f=0,h=e.length;f<h;f++)if((r=e[f])||0===r)if("object"===i(r))ke.merge(b,r.nodeType?[r]:r);else if(nt.test(r)){for(s=s||d.appendChild(t.createElement("div")),l=(Ze.exec(r)||["",""])[1].toLowerCase(),c=tt[l]||tt._default,s.innerHTML=c[1]+ke.htmlPrefilter(r)+c[2],p=c[0];p--;)s=s.lastChild;ke.merge(b,s.childNodes),s=d.firstChild,s.textContent=""}else b.push(t.createTextNode(r));for(d.textContent="",f=0;r=b[f++];)if(a&&ke.inArray(r,a)>-1)o&&o.push(r);else if(u=We(r),s=C(d.appendChild(r),"script"),u&&x(s),n)for(p=0;r=s[p++];)et.test(r.type||"")&&n.push(r);return d}function I(){return!0}function T(){return!1}function $(e,t){return e===S()==("focus"===t)}function S(){try{return Ce.activeElement}catch(e){}}function q(e,t,n,i,a,o){var r,s;if("object"==typeof t){"string"!=typeof n&&(i=i||n,n=void 0);for(s in t)q(e,s,n,i,t[s],o);return e}if(null==i&&null==a?(a=n,i=n=void 0):null==a&&("string"==typeof n?(a=i,i=void 0):(a=i,i=n,n=void 0)),!1===a)a=T;else if(!a)return e;return 1===o&&(r=a,a=function(e){return ke().off(e),r.apply(this,arguments)},a.guid=r.guid||(r.guid=ke.guid++)),e.each(function(){ke.event.add(this,t,a,i,n)})}function P(e,t,n){if(!n)return void(void 0===Fe.get(e,t)&&ke.event.add(e,t,I));Fe.set(e,t,!1),ke.event.add(e,t,{namespace:!1,handler:function(e){var i,a,o=Fe.get(this,t);if(1&e.isTrigger&&this[t]){if(o.length)(ke.event.special[t]||{}).delegateType&&e.stopPropagation();else if(o=ce.call(arguments),Fe.set(this,t,o),i=n(this,t),this[t](),a=Fe.get(this,t),o!==a||i?Fe.set(this,t,!1):a={},o!==a)return e.stopImmediatePropagation(),e.preventDefault(),a&&a.value}else o.length&&(Fe.set(this,t,{value:ke.event.trigger(ke.extend(o[0],ke.Event.prototype),o.slice(1),this)}),e.stopImmediatePropagation())}})}function A(e,t){return o(e,"table")&&o(11!==t.nodeType?t:t.firstChild,"tr")?ke(e).children("tbody")[0]||e:e}function D(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function j(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function _(e,t){var n,i,a,o,r,s,l;if(1===t.nodeType){if(Fe.hasData(e)&&(o=Fe.get(e),l=o.events)){Fe.remove(t,"handle events");for(a in l)for(n=0,i=l[a].length;n<i;n++)ke.event.add(t,a,l[a][n])}Be.hasData(e)&&(r=Be.access(e),s=ke.extend({},r),Be.set(t,s))}}function E(e,t){var n=t.nodeName.toLowerCase();"input"===n&&Ye.test(e.type)?t.checked=e.checked:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}function N(e,t,i,a){t=ue(t);var o,r,s,l,c,u,p=0,d=e.length,b=d-1,f=t[0],h=we(f);if(h||d>1&&"string"==typeof f&&!ge.checkClone&&ot.test(f))return e.each(function(n){var o=e.eq(n);h&&(t[0]=f.call(this,n,o.html())),N(o,t,i,a)});if(d&&(o=k(t,e[0].ownerDocument,!1,e,a),r=o.firstChild,1===o.childNodes.length&&(o=r),r||a)){for(s=ke.map(C(o,"script"),D),l=s.length;p<d;p++)c=o,p!==b&&(c=ke.clone(c,!0,!0),l&&ke.merge(s,C(c,"script"))),i.call(e[p],c,p);if(l)for(u=s[s.length-1].ownerDocument,ke.map(s,j),p=0;p<l;p++)c=s[p],et.test(c.type||"")&&!Fe.access(c,"globalEval")&&ke.contains(u,c)&&(c.src&&"module"!==(c.type||"").toLowerCase()?ke._evalUrl&&!c.noModule&&ke._evalUrl(c.src,{nonce:c.nonce||c.getAttribute("nonce")},u):n(c.textContent.replace(rt,""),c,u))}return e}function L(e,t,n){for(var i,a=t?ke.filter(t,e):e,o=0;null!=(i=a[o]);o++)n||1!==i.nodeType||ke.cleanData(C(i)),i.parentNode&&(n&&We(i)&&x(C(i,"script")),i.parentNode.removeChild(i));return e}function M(e,t,n){var i,a,o,r,s=lt.test(t),l=e.style;return n=n||ct(e),n&&(r=n.getPropertyValue(t)||n[t],s&&r&&(r=r.replace(dt,"$1")||void 0),""!==r||We(e)||(r=ke.style(e,t)),!ge.pixelBoxStyles()&&st.test(r)&&pt.test(t)&&(i=l.width,a=l.minWidth,o=l.maxWidth,l.minWidth=l.maxWidth=l.width=r,r=n.width,l.width=i,l.minWidth=a,l.maxWidth=o)),void 0!==r?r+"":r}function O(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}function R(e){for(var t=e[0].toUpperCase()+e.slice(1),n=bt.length;n--;)if((e=bt[n]+t)in ft)return e}function F(e){var t=ke.cssProps[e]||ht[e];return t||(e in ft?e:ht[e]=R(e)||e)}function B(e,t,n){var i=ze.exec(t);return i?Math.max(0,i[2]-(n||0))+(i[3]||"px"):t}function U(e,t,n,i,a,o){var r="width"===t?1:0,s=0,l=0;if(n===(i?"border":"content"))return 0;for(;r<4;r+=2)"margin"===n&&(l+=ke.css(e,n+Ve[r],!0,a)),i?("content"===n&&(l-=ke.css(e,"padding"+Ve[r],!0,a)),"margin"!==n&&(l-=ke.css(e,"border"+Ve[r]+"Width",!0,a))):(l+=ke.css(e,"padding"+Ve[r],!0,a),"padding"!==n?l+=ke.css(e,"border"+Ve[r]+"Width",!0,a):s+=ke.css(e,"border"+Ve[r]+"Width",!0,a));return!i&&o>=0&&(l+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-o-l-s-.5))||0),l}function H(e,t,n){var i=ct(e),a=!ge.boxSizingReliable()||n,r=a&&"border-box"===ke.css(e,"boxSizing",!1,i),s=r,l=M(e,t,i),c="offset"+t[0].toUpperCase()+t.slice(1);if(st.test(l)){if(!n)return l;l="auto"}return(!ge.boxSizingReliable()&&r||!ge.reliableTrDimensions()&&o(e,"tr")||"auto"===l||!parseFloat(l)&&"inline"===ke.css(e,"display",!1,i))&&e.getClientRects().length&&(r="border-box"===ke.css(e,"boxSizing",!1,i),(s=c in e)&&(l=e[c])),(l=parseFloat(l)||0)+U(e,t,n||(r?"border":"content"),s,i,l)+"px"}function G(e,t,n,i,a){return new G.prototype.init(e,t,n,i,a)}function z(){yt&&(!1===Ce.hidden&&e.requestAnimationFrame?e.requestAnimationFrame(z):e.setTimeout(z,ke.fx.interval),ke.fx.tick())}function V(){return e.setTimeout(function(){wt=void 0}),wt=Date.now()}function Q(e,t){var n,i=0,a={height:e};for(t=t?1:0;i<4;i+=2-t)n=Ve[i],a["margin"+n]=a["padding"+n]=e;return t&&(a.opacity=a.width=e),a}function W(e,t,n){for(var i,a=(K.tweeners[t]||[]).concat(K.tweeners["*"]),o=0,r=a.length;o<r;o++)if(i=a[o].call(n,t,e))return i}function X(e,t,n){var i,a,o,r,s,l,c,u,p="width"in t||"height"in t,d=this,b={},f=e.style,h=e.nodeType&&Je(e),m=Fe.get(e,"fxshow");n.queue||(r=ke._queueHooks(e,"fx"),null==r.unqueued&&(r.unqueued=0,s=r.empty.fire,r.empty.fire=function(){r.unqueued||s()}),r.unqueued++,d.always(function(){d.always(function(){r.unqueued--,ke.queue(e,"fx").length||r.empty.fire()})}));for(i in t)if(a=t[i],Ct.test(a)){if(delete t[i],o=o||"toggle"===a,a===(h?"hide":"show")){if("show"!==a||!m||void 0===m[i])continue;h=!0}b[i]=m&&m[i]||ke.style(e,i)}if((l=!ke.isEmptyObject(t))||!ke.isEmptyObject(b)){p&&1===e.nodeType&&(n.overflow=[f.overflow,f.overflowX,f.overflowY],c=m&&m.display,null==c&&(c=Fe.get(e,"display")),u=ke.css(e,"display"),"none"===u&&(c?u=c:(y([e],!0),c=e.style.display||c,u=ke.css(e,"display"),y([e]))),("inline"===u||"inline-block"===u&&null!=c)&&"none"===ke.css(e,"float")&&(l||(d.done(function(){f.display=c}),null==c&&(u=f.display,c="none"===u?"":u)),f.display="inline-block")),n.overflow&&(f.overflow="hidden",d.always(function(){f.overflow=n.overflow[0],f.overflowX=n.overflow[1],f.overflowY=n.overflow[2]})),l=!1;for(i in b)l||(m?"hidden"in m&&(h=m.hidden):m=Fe.access(e,"fxshow",{display:c}),o&&(m.hidden=!h),h&&y([e],!0),d.done(function(){h||y([e]),Fe.remove(e,"fxshow");for(i in b)ke.style(e,i,b[i])})),l=W(h?m[i]:0,i,d),i in m||(m[i]=l.start,h&&(l.end=l.start,l.start=0))}}function J(e,t){var n,i,a,o,r;for(n in e)if(i=f(n),a=t[i],o=e[n],Array.isArray(o)&&(a=o[1],o=e[n]=o[0]),n!==i&&(e[i]=o,delete e[n]),(r=ke.cssHooks[i])&&"expand"in r){o=r.expand(o),delete e[i];for(n in o)n in e||(e[n]=o[n],t[n]=a)}else t[i]=a}function K(e,t,n){var i,a,o=0,r=K.prefilters.length,s=ke.Deferred().always(function(){delete l.elem}),l=function(){if(a)return!1;for(var t=wt||V(),n=Math.max(0,c.startTime+c.duration-t),i=n/c.duration||0,o=1-i,r=0,l=c.tweens.length;r<l;r++)c.tweens[r].run(o);return s.notifyWith(e,[c,o,n]),o<1&&l?n:(l||s.notifyWith(e,[c,1,0]),s.resolveWith(e,[c]),!1)},c=s.promise({elem:e,props:ke.extend({},t),opts:ke.extend(!0,{specialEasing:{},easing:ke.easing._default},n),originalProperties:t,originalOptions:n,startTime:wt||V(),duration:n.duration,tweens:[],createTween:function(t,n){var i=ke.Tween(e,c.opts,t,n,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(i),i},stop:function(t){var n=0,i=t?c.tweens.length:0;if(a)return this;for(a=!0;n<i;n++)c.tweens[n].run(1);return t?(s.notifyWith(e,[c,1,0]),s.resolveWith(e,[c,t])):s.rejectWith(e,[c,t]),this}}),u=c.props;for(J(u,c.opts.specialEasing);o<r;o++)if(i=K.prefilters[o].call(c,e,u,c.opts))return we(i.stop)&&(ke._queueHooks(c.elem,c.opts.queue).stop=i.stop.bind(i)),i;return ke.map(u,W,c),we(c.opts.start)&&c.opts.start.call(e,c),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always),ke.fx.timer(ke.extend(l,{elem:e,anim:c,queue:c.opts.queue})),c}function Y(e){return(e.match(_e)||[]).join(" ")}function Z(e){return e.getAttribute&&e.getAttribute("class")||""}function ee(e){return Array.isArray(e)?e:"string"==typeof e?e.match(_e)||[]:[]}function te(e,t,n,a){var o;if(Array.isArray(t))ke.each(t,function(t,i){n||_t.test(e)?a(e,i):te(e+"["+("object"==typeof i&&null!=i?t:"")+"]",i,n,a)});else if(n||"object"!==i(t))a(e,t);else for(o in t)te(e+"["+o+"]",t[o],n,a)}function ne(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var i,a=0,o=t.toLowerCase().match(_e)||[];if(we(n))for(;i=o[a++];)"+"===i[0]?(i=i.slice(1)||"*",(e[i]=e[i]||[]).unshift(n)):(e[i]=e[i]||[]).push(n)}}function ie(e,t,n,i){function a(s){var l;return o[s]=!0,ke.each(e[s]||[],function(e,s){var c=s(t,n,i);return"string"!=typeof c||r||o[c]?r?!(l=c):void 0:(t.dataTypes.unshift(c),a(c),!1)}),l}var o={},r=e===zt;return a(t.dataTypes[0])||!o["*"]&&a("*")}function ae(e,t){var n,i,a=ke.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((a[n]?e:i||(i={}))[n]=t[n]);return i&&ke.extend(!0,e,i),e}function oe(e,t,n){for(var i,a,o,r,s=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===i&&(i=e.mimeType||t.getResponseHeader("Content-Type"));if(i)for(a in s)if(s[a]&&s[a].test(i)){l.unshift(a);break}if(l[0]in n)o=l[0];else{for(a in n){if(!l[0]||e.converters[a+" "+l[0]]){o=a;break}r||(r=a)}o=o||r}if(o)return o!==l[0]&&l.unshift(o),n[o]}function re(e,t,n,i){var a,o,r,s,l,c={},u=e.dataTypes.slice();if(u[1])for(r in e.converters)c[r.toLowerCase()]=e.converters[r];for(o=u.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!l&&i&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=o,o=u.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(!(r=c[l+" "+o]||c["* "+o]))for(a in c)if(s=a.split(" "),s[1]===o&&(r=c[l+" "+s[0]]||c["* "+s[0]])){!0===r?r=c[a]:!0!==c[a]&&(o=s[0],u.unshift(s[1]));break}if(!0!==r)if(r&&e.throws)t=r(t);else try{t=r(t)}catch(e){return{state:"parsererror",error:r?e:"No conversion from "+l+" to "+o}}}return{state:"success",data:t}}var se=[],le=Object.getPrototypeOf,ce=se.slice,ue=se.flat?function(e){return se.flat.call(e)}:function(e){return se.concat.apply([],e)},pe=se.push,de=se.indexOf,be={},fe=be.toString,he=be.hasOwnProperty,me=he.toString,ve=me.call(Object),ge={},we=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType&&"function"!=typeof e.item},ye=function(e){return null!=e&&e===e.window},Ce=e.document,xe={type:!0,src:!0,nonce:!0,noModule:!0},ke=function(e,t){return new ke.fn.init(e,t)};ke.fn=ke.prototype={jquery:"3.6.3",constructor:ke,length:0,toArray:function(){return ce.call(this)},get:function(e){return null==e?ce.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=ke.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return ke.each(this,e)},map:function(e){return this.pushStack(ke.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(ce.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(ke.grep(this,function(e,t){return(t+1)%2}))},odd:function(){return this.pushStack(ke.grep(this,function(e,t){return t%2}))},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:pe,sort:se.sort,splice:se.splice},ke.extend=ke.fn.extend=function(){var e,t,n,i,a,o,r=arguments[0]||{},s=1,l=arguments.length,c=!1;for("boolean"==typeof r&&(c=r,r=arguments[s]||{},s++),"object"==typeof r||we(r)||(r={}),s===l&&(r=this,s--);s<l;s++)if(null!=(e=arguments[s]))for(t in e)i=e[t],"__proto__"!==t&&r!==i&&(c&&i&&(ke.isPlainObject(i)||(a=Array.isArray(i)))?(n=r[t],o=a&&!Array.isArray(n)?[]:a||ke.isPlainObject(n)?n:{},a=!1,r[t]=ke.extend(c,o,i)):void 0!==i&&(r[t]=i));return r},ke.extend({expando:"jQuery"+("3.6.3"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==fe.call(e))&&(!(t=le(e))||"function"==typeof(n=he.call(t,"constructor")&&t.constructor)&&me.call(n)===ve)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,i){n(e,{nonce:t&&t.nonce},i)},each:function(e,t){var n,i=0;if(a(e))for(n=e.length;i<n&&!1!==t.call(e[i],i,e[i]);i++);else for(i in e)if(!1===t.call(e[i],i,e[i]))break;return e},makeArray:function(e,t){var n=t||[];return null!=e&&(a(Object(e))?ke.merge(n,"string"==typeof e?[e]:e):pe.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:de.call(t,e,n)},merge:function(e,t){for(var n=+t.length,i=0,a=e.length;i<n;i++)e[a++]=t[i];return e.length=a,e},grep:function(e,t,n){for(var i=[],a=0,o=e.length,r=!n;a<o;a++)!t(e[a],a)!==r&&i.push(e[a]);return i},map:function(e,t,n){var i,o,r=0,s=[];if(a(e))for(i=e.length;r<i;r++)null!=(o=t(e[r],r,n))&&s.push(o);else for(r in e)null!=(o=t(e[r],r,n))&&s.push(o);return ue(s)},guid:1,support:ge}),"function"==typeof Symbol&&(ke.fn[Symbol.iterator]=se[Symbol.iterator]),ke.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){be["[object "+t+"]"]=t.toLowerCase()});var Ie=function(e){function t(e,t,n,i){var a,o,r,s,l,u,d,b=t&&t.ownerDocument,f=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==f&&9!==f&&11!==f)return n;if(!i&&(A(t),t=t||D,_)){if(11!==f&&(l=ve.exec(e)))if(a=l[1]){if(9===f){if(!(r=t.getElementById(a)))return n;if(r.id===a)return n.push(r),n}else if(b&&(r=b.getElementById(a))&&M(t,r)&&r.id===a)return n.push(r),n}else{if(l[2])return K.apply(n,t.getElementsByTagName(e)),n;if((a=l[3])&&y.getElementsByClassName&&t.getElementsByClassName)return K.apply(n,t.getElementsByClassName(a)),n}if(y.qsa&&!z[e+" "]&&(!E||!E.test(e))&&(1!==f||"object"!==t.nodeName.toLowerCase())){if(d=e,b=t,1===f&&(ce.test(e)||le.test(e))){for(b=ge.test(e)&&c(t.parentNode)||t,b===t&&y.scope||((s=t.getAttribute("id"))?s=s.replace(Ce,xe):t.setAttribute("id",s=O)),u=I(e),o=u.length;o--;)u[o]=(s?"#"+s:":scope")+" "+p(u[o]);d=u.join(",")}try{if(y.cssSupportsSelector&&!CSS.supports("selector(:is("+d+"))"))throw new Error;return K.apply(n,b.querySelectorAll(d)),n}catch(t){z(e,!0)}finally{s===O&&t.removeAttribute("id")}}}return $(e.replace(re,"$1"),t,n,i)}function n(){function e(n,i){return t.push(n+" ")>C.cacheLength&&delete e[t.shift()],e[n+" "]=i}var t=[];return e}function i(e){return e[O]=!0,e}function a(e){var t=D.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function o(e,t){for(var n=e.split("|"),i=n.length;i--;)C.attrHandle[n[i]]=t}function r(e,t){var n=t&&e,i=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(i)return i;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function s(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&Ie(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function l(e){return i(function(t){return t=+t,i(function(n,i){for(var a,o=e([],n.length,t),r=o.length;r--;)n[a=o[r]]&&(n[a]=!(i[a]=n[a]))})})}function c(e){return e&&void 0!==e.getElementsByTagName&&e}function u(){}function p(e){for(var t=0,n=e.length,i="";t<n;t++)i+=e[t].value;return i}function d(e,t,n){var i=t.dir,a=t.next,o=a||i,r=n&&"parentNode"===o,s=B++;return t.first?function(t,n,a){for(;t=t[i];)if(1===t.nodeType||r)return e(t,n,a);return!1}:function(t,n,l){var c,u,p,d=[F,s];if(l){for(;t=t[i];)if((1===t.nodeType||r)&&e(t,n,l))return!0}else for(;t=t[i];)if(1===t.nodeType||r)if(p=t[O]||(t[O]={}),u=p[t.uniqueID]||(p[t.uniqueID]={}),a&&a===t.nodeName.toLowerCase())t=t[i]||t;else{if((c=u[o])&&c[0]===F&&c[1]===s)return d[2]=c[2];if(u[o]=d,d[2]=e(t,n,l))return!0}return!1}}function b(e){return e.length>1?function(t,n,i){for(var a=e.length;a--;)if(!e[a](t,n,i))return!1;return!0}:e[0]}function f(e,n,i){for(var a=0,o=n.length;a<o;a++)t(e,n[a],i);return i}function h(e,t,n,i,a){for(var o,r=[],s=0,l=e.length,c=null!=t;s<l;s++)(o=e[s])&&(n&&!n(o,i,a)||(r.push(o),c&&t.push(s)));return r}function m(e,t,n,a,o,r){return a&&!a[O]&&(a=m(a)),o&&!o[O]&&(o=m(o,r)),i(function(i,r,s,l){var c,u,p,d=[],b=[],m=r.length,v=i||f(t||"*",s.nodeType?[s]:s,[]),g=!e||!i&&t?v:h(v,d,e,s,l),w=n?o||(i?e:m||a)?[]:r:g;if(n&&n(g,w,s,l),a)for(c=h(w,b),a(c,[],s,l),u=c.length;u--;)(p=c[u])&&(w[b[u]]=!(g[b[u]]=p));if(i){if(o||e){if(o){for(c=[],u=w.length;u--;)(p=w[u])&&c.push(g[u]=p);o(null,w=[],c,l)}for(u=w.length;u--;)(p=w[u])&&(c=o?Z(i,p):d[u])>-1&&(i[c]=!(r[c]=p))}}else w=h(w===r?w.splice(m,w.length):w),o?o(null,r,w,l):K.apply(r,w)})}function v(e){for(var t,n,i,a=e.length,o=C.relative[e[0].type],r=o||C.relative[" "],s=o?1:0,l=d(function(e){return e===t},r,!0),c=d(function(e){return Z(t,e)>-1},r,!0),u=[function(e,n,i){var a=!o&&(i||n!==S)||((t=n).nodeType?l(e,n,i):c(e,n,i));return t=null,a}];s<a;s++)if(n=C.relative[e[s].type])u=[d(b(u),n)];else{if(n=C.filter[e[s].type].apply(null,e[s].matches),n[O]){for(i=++s;i<a&&!C.relative[e[i].type];i++);return m(s>1&&b(u),s>1&&p(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(re,"$1"),n,s<i&&v(e.slice(s,i)),i<a&&v(e=e.slice(i)),i<a&&p(e))}u.push(n)}return b(u)}function g(e,n){var a=n.length>0,o=e.length>0,r=function(i,r,s,l,c){var u,p,d,b=0,f="0",m=i&&[],v=[],g=S,w=i||o&&C.find.TAG("*",c),y=F+=null==g?1:Math.random()||.1,x=w.length;for(c&&(S=r==D||r||c);f!==x&&null!=(u=w[f]);f++){if(o&&u){for(p=0,r||u.ownerDocument==D||(A(u),s=!_);d=e[p++];)if(d(u,r||D,s)){l.push(u);break}c&&(F=y)}a&&((u=!d&&u)&&b--,i&&m.push(u))}if(b+=f,a&&f!==b){for(p=0;d=n[p++];)d(m,v,r,s);if(i){if(b>0)for(;f--;)m[f]||v[f]||(v[f]=X.call(l));v=h(v)}K.apply(l,v),c&&!i&&v.length>0&&b+n.length>1&&t.uniqueSort(l)}return c&&(F=y,S=g),m};return a?i(r):r}var w,y,C,x,k,I,T,$,S,q,P,A,D,j,_,E,N,L,M,O="sizzle"+1*new Date,R=e.document,F=0,B=0,U=n(),H=n(),G=n(),z=n(),V=function(e,t){return e===t&&(P=!0),0},Q={}.hasOwnProperty,W=[],X=W.pop,J=W.push,K=W.push,Y=W.slice,Z=function(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1},ee="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",te="[\\x20\\t\\r\\n\\f]",ne="(?:\\\\[\\da-fA-F]{1,6}"+te+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",ie="\\["+te+"*("+ne+")(?:"+te+"*([*^$|!~]?=)"+te+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+ne+"))|)"+te+"*\\]",ae=":("+ne+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+ie+")*)|.*)\\)|)",oe=new RegExp(te+"+","g"),re=new RegExp("^"+te+"+|((?:^|[^\\\\])(?:\\\\.)*)"+te+"+$","g"),se=new RegExp("^"+te+"*,"+te+"*"),le=new RegExp("^"+te+"*([>+~]|"+te+")"+te+"*"),ce=new RegExp(te+"|>"),ue=new RegExp(ae),pe=new RegExp("^"+ne+"$"),de={ID:new RegExp("^#("+ne+")"),CLASS:new RegExp("^\\.("+ne+")"),TAG:new RegExp("^("+ne+"|[*])"),ATTR:new RegExp("^"+ie),PSEUDO:new RegExp("^"+ae),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+te+"*(even|odd|(([+-]|)(\\d*)n|)"+te+"*(?:([+-]|)"+te+"*(\\d+)|))"+te+"*\\)|)","i"),bool:new RegExp("^(?:"+ee+")$","i"),needsContext:new RegExp("^"+te+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+te+"*((?:-\\d)?\\d*)"+te+"*\\)|)(?=[^-]|$)","i")},be=/HTML$/i,fe=/^(?:input|select|textarea|button)$/i,he=/^h\d$/i,me=/^[^{]+\{\s*\[native \w/,ve=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ge=/[+~]/,we=new RegExp("\\\\[\\da-fA-F]{1,6}"+te+"?|\\\\([^\\r\\n\\f])","g"),ye=function(e,t){var n="0x"+e.slice(1)-65536;return t||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},Ce=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,xe=function(e,t){return t?"\0"===e?"":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},ke=function(){A()},Ie=d(function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{K.apply(W=Y.call(R.childNodes),R.childNodes),W[R.childNodes.length].nodeType}catch(e){K={apply:W.length?function(e,t){J.apply(e,Y.call(t))}:function(e,t){for(var n=e.length,i=0;e[n++]=t[i++];);e.length=n-1}}}y=t.support={},k=t.isXML=function(e){var t=e&&e.namespaceURI,n=e&&(e.ownerDocument||e).documentElement;return!be.test(t||n&&n.nodeName||"HTML")},A=t.setDocument=function(e){var t,n,i=e?e.ownerDocument||e:R;return i!=D&&9===i.nodeType&&i.documentElement?(D=i,j=D.documentElement,_=!k(D),R!=D&&(n=D.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",ke,!1):n.attachEvent&&n.attachEvent("onunload",ke)),y.scope=a(function(e){return j.appendChild(e).appendChild(D.createElement("div")),void 0!==e.querySelectorAll&&!e.querySelectorAll(":scope fieldset div").length}),y.cssSupportsSelector=a(function(){return CSS.supports("selector(*)")&&D.querySelectorAll(":is(:jqfake)")&&!CSS.supports("selector(:is(*,:jqfake))")}),y.attributes=a(function(e){return e.className="i",!e.getAttribute("className")}),y.getElementsByTagName=a(function(e){return e.appendChild(D.createComment("")),!e.getElementsByTagName("*").length}),y.getElementsByClassName=me.test(D.getElementsByClassName),y.getById=a(function(e){return j.appendChild(e).id=O,!D.getElementsByName||!D.getElementsByName(O).length}),y.getById?(C.filter.ID=function(e){var t=e.replace(we,ye);return function(e){return e.getAttribute("id")===t}},C.find.ID=function(e,t){if(void 0!==t.getElementById&&_){var n=t.getElementById(e);return n?[n]:[]}}):(C.filter.ID=function(e){var t=e.replace(we,ye);return function(e){var n=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}},C.find.ID=function(e,t){if(void 0!==t.getElementById&&_){var n,i,a,o=t.getElementById(e);if(o){if((n=o.getAttributeNode("id"))&&n.value===e)return[o];for(a=t.getElementsByName(e),i=0;o=a[i++];)if((n=o.getAttributeNode("id"))&&n.value===e)return[o]}return[]}}),C.find.TAG=y.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):y.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,i=[],a=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[a++];)1===n.nodeType&&i.push(n);return i}return o},C.find.CLASS=y.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&_)return t.getElementsByClassName(e)},N=[],E=[],(y.qsa=me.test(D.querySelectorAll))&&(a(function(e){var t;j.appendChild(e).innerHTML="<a id='"+O+"'></a><select id='"+O+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&E.push("[*^$]="+te+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||E.push("\\["+te+"*(?:value|"+ee+")"),e.querySelectorAll("[id~="+O+"-]").length||E.push("~="),t=D.createElement("input"),t.setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||E.push("\\["+te+"*name"+te+"*="+te+"*(?:''|\"\")"),e.querySelectorAll(":checked").length||E.push(":checked"),e.querySelectorAll("a#"+O+"+*").length||E.push(".#.+[+~]"),e.querySelectorAll("\\\f"),E.push("[\\r\\n\\f]")}),a(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=D.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&E.push("name"+te+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&E.push(":enabled",":disabled"),j.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&E.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),E.push(",.*:")})),(y.matchesSelector=me.test(L=j.matches||j.webkitMatchesSelector||j.mozMatchesSelector||j.oMatchesSelector||j.msMatchesSelector))&&a(function(e){y.disconnectedMatch=L.call(e,"*"),L.call(e,"[s!='']:x"),N.push("!=",ae)}),y.cssSupportsSelector||E.push(":has"),E=E.length&&new RegExp(E.join("|")),N=N.length&&new RegExp(N.join("|")),t=me.test(j.compareDocumentPosition),M=t||me.test(j.contains)?function(e,t){var n=9===e.nodeType&&e.documentElement||e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},V=t?function(e,t){if(e===t)return P=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(n=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&n||!y.sortDetached&&t.compareDocumentPosition(e)===n?e==D||e.ownerDocument==R&&M(R,e)?-1:t==D||t.ownerDocument==R&&M(R,t)?1:q?Z(q,e)-Z(q,t):0:4&n?-1:1)}:function(e,t){if(e===t)return P=!0,0;var n,i=0,a=e.parentNode,o=t.parentNode,s=[e],l=[t];if(!a||!o)return e==D?-1:t==D?1:a?-1:o?1:q?Z(q,e)-Z(q,t):0;if(a===o)return r(e,t);for(n=e;n=n.parentNode;)s.unshift(n);for(n=t;n=n.parentNode;)l.unshift(n);for(;s[i]===l[i];)i++;return i?r(s[i],l[i]):s[i]==R?-1:l[i]==R?1:0},D):D},t.matches=function(e,n){return t(e,null,null,n)},t.matchesSelector=function(e,n){if(A(e),y.matchesSelector&&_&&!z[n+" "]&&(!N||!N.test(n))&&(!E||!E.test(n)))try{var i=L.call(e,n);if(i||y.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(e){z(n,!0)}return t(n,D,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!=D&&A(e),M(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!=D&&A(e);var n=C.attrHandle[t.toLowerCase()],i=n&&Q.call(C.attrHandle,t.toLowerCase())?n(e,t,!_):void 0;return void 0!==i?i:y.attributes||!_?e.getAttribute(t):(i=e.getAttributeNode(t))&&i.specified?i.value:null},t.escape=function(e){return(e+"").replace(Ce,xe)},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,n=[],i=0,a=0;if(P=!y.detectDuplicates,q=!y.sortStable&&e.slice(0),e.sort(V),P){for(;t=e[a++];)t===e[a]&&(i=n.push(a));for(;i--;)e.splice(n[i],1)}return q=null,e},x=t.getText=function(e){var t,n="",i=0,a=e.nodeType;if(a){if(1===a||9===a||11===a){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=x(e)}else if(3===a||4===a)return e.nodeValue}else for(;t=e[i++];)n+=x(t);return n},C=t.selectors={cacheLength:50,createPseudo:i,match:de,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(we,ye),e[3]=(e[3]||e[4]||e[5]||"").replace(we,ye),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return de.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&ue.test(n)&&(t=I(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(we,ye).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=U[e+" "];return t||(t=new RegExp("(^|"+te+")"+e+"("+te+"|$)"))&&U(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,n,i){return function(a){var o=t.attr(a,e);return null==o?"!="===n:!n||(o+="","="===n?o===i:"!="===n?o!==i:"^="===n?i&&0===o.indexOf(i):"*="===n?i&&o.indexOf(i)>-1:"$="===n?i&&o.slice(-i.length)===i:"~="===n?(" "+o.replace(oe," ")+" ").indexOf(i)>-1:"|="===n&&(o===i||o.slice(0,i.length+1)===i+"-"))}},CHILD:function(e,t,n,i,a){var o="nth"!==e.slice(0,3),r="last"!==e.slice(-4),s="of-type"===t;return 1===i&&0===a?function(e){return!!e.parentNode}:function(t,n,l){var c,u,p,d,b,f,h=o!==r?"nextSibling":"previousSibling",m=t.parentNode,v=s&&t.nodeName.toLowerCase(),g=!l&&!s,w=!1;if(m){if(o){for(;h;){for(d=t;d=d[h];)if(s?d.nodeName.toLowerCase()===v:1===d.nodeType)return!1;f=h="only"===e&&!f&&"nextSibling"}return!0}if(f=[r?m.firstChild:m.lastChild],r&&g){for(d=m,p=d[O]||(d[O]={}),u=p[d.uniqueID]||(p[d.uniqueID]={}),c=u[e]||[],b=c[0]===F&&c[1],w=b&&c[2],d=b&&m.childNodes[b];d=++b&&d&&d[h]||(w=b=0)||f.pop();)if(1===d.nodeType&&++w&&d===t){u[e]=[F,b,w];break}}else if(g&&(d=t,p=d[O]||(d[O]={}),u=p[d.uniqueID]||(p[d.uniqueID]={}),c=u[e]||[],b=c[0]===F&&c[1],w=b),!1===w)for(;(d=++b&&d&&d[h]||(w=b=0)||f.pop())&&((s?d.nodeName.toLowerCase()!==v:1!==d.nodeType)||!++w||(g&&(p=d[O]||(d[O]={}),u=p[d.uniqueID]||(p[d.uniqueID]={}),u[e]=[F,w]),d!==t)););return(w-=a)===i||w%i==0&&w/i>=0}}},PSEUDO:function(e,n){var a,o=C.pseudos[e]||C.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return o[O]?o(n):o.length>1?(a=[e,e,"",n],C.setFilters.hasOwnProperty(e.toLowerCase())?i(function(e,t){for(var i,a=o(e,n),r=a.length;r--;)i=Z(e,a[r]),e[i]=!(t[i]=a[r])}):function(e){return o(e,0,a)}):o}},pseudos:{not:i(function(e){var t=[],n=[],a=T(e.replace(re,"$1"));return a[O]?i(function(e,t,n,i){for(var o,r=a(e,null,i,[]),s=e.length;s--;)(o=r[s])&&(e[s]=!(t[s]=o))}):function(e,i,o){return t[0]=e,a(t,null,o,n),t[0]=null,!n.pop()}}),
has:i(function(e){return function(n){return t(e,n).length>0}}),contains:i(function(e){return e=e.replace(we,ye),function(t){return(t.textContent||x(t)).indexOf(e)>-1}}),lang:i(function(e){return pe.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(we,ye).toLowerCase(),function(t){var n;do{if(n=_?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===j},focus:function(e){return e===D.activeElement&&(!D.hasFocus||D.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:s(!1),disabled:s(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!C.pseudos.empty(e)},header:function(e){return he.test(e.nodeName)},input:function(e){return fe.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:l(function(){return[0]}),last:l(function(e,t){return[t-1]}),eq:l(function(e,t,n){return[n<0?n+t:n]}),even:l(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:l(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:l(function(e,t,n){for(var i=n<0?n+t:n>t?t:n;--i>=0;)e.push(i);return e}),gt:l(function(e,t,n){for(var i=n<0?n+t:n;++i<t;)e.push(i);return e})}},C.pseudos.nth=C.pseudos.eq;for(w in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})C.pseudos[w]=function(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}(w);for(w in{submit:!0,reset:!0})C.pseudos[w]=function(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}(w);return u.prototype=C.filters=C.pseudos,C.setFilters=new u,I=t.tokenize=function(e,n){var i,a,o,r,s,l,c,u=H[e+" "];if(u)return n?0:u.slice(0);for(s=e,l=[],c=C.preFilter;s;){i&&!(a=se.exec(s))||(a&&(s=s.slice(a[0].length)||s),l.push(o=[])),i=!1,(a=le.exec(s))&&(i=a.shift(),o.push({value:i,type:a[0].replace(re," ")}),s=s.slice(i.length));for(r in C.filter)!(a=de[r].exec(s))||c[r]&&!(a=c[r](a))||(i=a.shift(),o.push({value:i,type:r,matches:a}),s=s.slice(i.length));if(!i)break}return n?s.length:s?t.error(e):H(e,l).slice(0)},T=t.compile=function(e,t){var n,i=[],a=[],o=G[e+" "];if(!o){for(t||(t=I(e)),n=t.length;n--;)o=v(t[n]),o[O]?i.push(o):a.push(o);o=G(e,g(a,i)),o.selector=e}return o},$=t.select=function(e,t,n,i){var a,o,r,s,l,u="function"==typeof e&&e,d=!i&&I(e=u.selector||e);if(n=n||[],1===d.length){if(o=d[0]=d[0].slice(0),o.length>2&&"ID"===(r=o[0]).type&&9===t.nodeType&&_&&C.relative[o[1].type]){if(!(t=(C.find.ID(r.matches[0].replace(we,ye),t)||[])[0]))return n;u&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(a=de.needsContext.test(e)?0:o.length;a--&&(r=o[a],!C.relative[s=r.type]);)if((l=C.find[s])&&(i=l(r.matches[0].replace(we,ye),ge.test(o[0].type)&&c(t.parentNode)||t))){if(o.splice(a,1),!(e=i.length&&p(o)))return K.apply(n,i),n;break}}return(u||T(e,d))(i,t,!_,n,!t||ge.test(e)&&c(t.parentNode)||t),n},y.sortStable=O.split("").sort(V).join("")===O,y.detectDuplicates=!!P,A(),y.sortDetached=a(function(e){return 1&e.compareDocumentPosition(D.createElement("fieldset"))}),a(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||o("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),y.attributes&&a(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||o("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),a(function(e){return null==e.getAttribute("disabled")})||o(ee,function(e,t,n){var i;if(!n)return!0===e[t]?t.toLowerCase():(i=e.getAttributeNode(t))&&i.specified?i.value:null}),t}(e);ke.find=Ie,ke.expr=Ie.selectors,ke.expr[":"]=ke.expr.pseudos,ke.uniqueSort=ke.unique=Ie.uniqueSort,ke.text=Ie.getText,ke.isXMLDoc=Ie.isXML,ke.contains=Ie.contains,ke.escapeSelector=Ie.escape;var Te=function(e,t,n){for(var i=[],a=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(a&&ke(e).is(n))break;i.push(e)}return i},$e=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},Se=ke.expr.match.needsContext,qe=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;ke.filter=function(e,t,n){var i=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?ke.find.matchesSelector(i,e)?[i]:[]:ke.find.matches(e,ke.grep(t,function(e){return 1===e.nodeType}))},ke.fn.extend({find:function(e){var t,n,i=this.length,a=this;if("string"!=typeof e)return this.pushStack(ke(e).filter(function(){for(t=0;t<i;t++)if(ke.contains(a[t],this))return!0}));for(n=this.pushStack([]),t=0;t<i;t++)ke.find(e,a[t],n);return i>1?ke.uniqueSort(n):n},filter:function(e){return this.pushStack(r(this,e||[],!1))},not:function(e){return this.pushStack(r(this,e||[],!0))},is:function(e){return!!r(this,"string"==typeof e&&Se.test(e)?ke(e):e||[],!1).length}});var Pe,Ae=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(ke.fn.init=function(e,t,n){var i,a;if(!e)return this;if(n=n||Pe,"string"==typeof e){if(!(i="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:Ae.exec(e))||!i[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(i[1]){if(t=t instanceof ke?t[0]:t,ke.merge(this,ke.parseHTML(i[1],t&&t.nodeType?t.ownerDocument||t:Ce,!0)),qe.test(i[1])&&ke.isPlainObject(t))for(i in t)we(this[i])?this[i](t[i]):this.attr(i,t[i]);return this}return a=Ce.getElementById(i[2]),a&&(this[0]=a,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):we(e)?void 0!==n.ready?n.ready(e):e(ke):ke.makeArray(e,this)}).prototype=ke.fn,Pe=ke(Ce);var De=/^(?:parents|prev(?:Until|All))/,je={children:!0,contents:!0,next:!0,prev:!0};ke.fn.extend({has:function(e){var t=ke(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(ke.contains(this,t[e]))return!0})},closest:function(e,t){var n,i=0,a=this.length,o=[],r="string"!=typeof e&&ke(e);if(!Se.test(e))for(;i<a;i++)for(n=this[i];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(r?r.index(n)>-1:1===n.nodeType&&ke.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(o.length>1?ke.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?de.call(ke(e),this[0]):de.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(ke.uniqueSort(ke.merge(this.get(),ke(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),ke.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return Te(e,"parentNode")},parentsUntil:function(e,t,n){return Te(e,"parentNode",n)},next:function(e){return s(e,"nextSibling")},prev:function(e){return s(e,"previousSibling")},nextAll:function(e){return Te(e,"nextSibling")},prevAll:function(e){return Te(e,"previousSibling")},nextUntil:function(e,t,n){return Te(e,"nextSibling",n)},prevUntil:function(e,t,n){return Te(e,"previousSibling",n)},siblings:function(e){return $e((e.parentNode||{}).firstChild,e)},children:function(e){return $e(e.firstChild)},contents:function(e){return null!=e.contentDocument&&le(e.contentDocument)?e.contentDocument:(o(e,"template")&&(e=e.content||e),ke.merge([],e.childNodes))}},function(e,t){ke.fn[e]=function(n,i){var a=ke.map(this,t,n);return"Until"!==e.slice(-5)&&(i=n),i&&"string"==typeof i&&(a=ke.filter(i,a)),this.length>1&&(je[e]||ke.uniqueSort(a),De.test(e)&&a.reverse()),this.pushStack(a)}});var _e=/[^\x20\t\r\n\f]+/g;ke.Callbacks=function(e){e="string"==typeof e?l(e):ke.extend({},e);var t,n,a,o,r=[],s=[],c=-1,u=function(){for(o=o||e.once,a=t=!0;s.length;c=-1)for(n=s.shift();++c<r.length;)!1===r[c].apply(n[0],n[1])&&e.stopOnFalse&&(c=r.length,n=!1);e.memory||(n=!1),t=!1,o&&(r=n?[]:"")},p={add:function(){return r&&(n&&!t&&(c=r.length-1,s.push(n)),function t(n){ke.each(n,function(n,a){we(a)?e.unique&&p.has(a)||r.push(a):a&&a.length&&"string"!==i(a)&&t(a)})}(arguments),n&&!t&&u()),this},remove:function(){return ke.each(arguments,function(e,t){for(var n;(n=ke.inArray(t,r,n))>-1;)r.splice(n,1),n<=c&&c--}),this},has:function(e){return e?ke.inArray(e,r)>-1:r.length>0},empty:function(){return r&&(r=[]),this},disable:function(){return o=s=[],r=n="",this},disabled:function(){return!r},lock:function(){return o=s=[],n||t||(r=n=""),this},locked:function(){return!!o},fireWith:function(e,n){return o||(n=n||[],n=[e,n.slice?n.slice():n],s.push(n),t||u()),this},fire:function(){return p.fireWith(this,arguments),this},fired:function(){return!!a}};return p},ke.extend({Deferred:function(t){var n=[["notify","progress",ke.Callbacks("memory"),ke.Callbacks("memory"),2],["resolve","done",ke.Callbacks("once memory"),ke.Callbacks("once memory"),0,"resolved"],["reject","fail",ke.Callbacks("once memory"),ke.Callbacks("once memory"),1,"rejected"]],i="pending",a={state:function(){return i},always:function(){return o.done(arguments).fail(arguments),this},catch:function(e){return a.then(null,e)},pipe:function(){var e=arguments;return ke.Deferred(function(t){ke.each(n,function(n,i){var a=we(e[i[4]])&&e[i[4]];o[i[1]](function(){var e=a&&a.apply(this,arguments);e&&we(e.promise)?e.promise().progress(t.notify).done(t.resolve).fail(t.reject):t[i[0]+"With"](this,a?[e]:arguments)})}),e=null}).promise()},then:function(t,i,a){function o(t,n,i,a){return function(){var s=this,l=arguments,p=function(){var e,p;if(!(t<r)){if((e=i.apply(s,l))===n.promise())throw new TypeError("Thenable self-resolution");p=e&&("object"==typeof e||"function"==typeof e)&&e.then,we(p)?a?p.call(e,o(r,n,c,a),o(r,n,u,a)):(r++,p.call(e,o(r,n,c,a),o(r,n,u,a),o(r,n,c,n.notifyWith))):(i!==c&&(s=void 0,l=[e]),(a||n.resolveWith)(s,l))}},d=a?p:function(){try{p()}catch(e){ke.Deferred.exceptionHook&&ke.Deferred.exceptionHook(e,d.stackTrace),t+1>=r&&(i!==u&&(s=void 0,l=[e]),n.rejectWith(s,l))}};t?d():(ke.Deferred.getStackHook&&(d.stackTrace=ke.Deferred.getStackHook()),e.setTimeout(d))}}var r=0;return ke.Deferred(function(e){n[0][3].add(o(0,e,we(a)?a:c,e.notifyWith)),n[1][3].add(o(0,e,we(t)?t:c)),n[2][3].add(o(0,e,we(i)?i:u))}).promise()},promise:function(e){return null!=e?ke.extend(e,a):a}},o={};return ke.each(n,function(e,t){var r=t[2],s=t[5];a[t[1]]=r.add,s&&r.add(function(){i=s},n[3-e][2].disable,n[3-e][3].disable,n[0][2].lock,n[0][3].lock),r.add(t[3].fire),o[t[0]]=function(){return o[t[0]+"With"](this===o?void 0:this,arguments),this},o[t[0]+"With"]=r.fireWith}),a.promise(o),t&&t.call(o,o),o},when:function(e){var t=arguments.length,n=t,i=Array(n),a=ce.call(arguments),o=ke.Deferred(),r=function(e){return function(n){i[e]=this,a[e]=arguments.length>1?ce.call(arguments):n,--t||o.resolveWith(i,a)}};if(t<=1&&(p(e,o.done(r(n)).resolve,o.reject,!t),"pending"===o.state()||we(a[n]&&a[n].then)))return o.then();for(;n--;)p(a[n],r(n),o.reject);return o.promise()}});var Ee=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;ke.Deferred.exceptionHook=function(t,n){e.console&&e.console.warn&&t&&Ee.test(t.name)&&e.console.warn("jQuery.Deferred exception: "+t.message,t.stack,n)},ke.readyException=function(t){e.setTimeout(function(){throw t})};var Ne=ke.Deferred();ke.fn.ready=function(e){return Ne.then(e).catch(function(e){ke.readyException(e)}),this},ke.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--ke.readyWait:ke.isReady)||(ke.isReady=!0,!0!==e&&--ke.readyWait>0||Ne.resolveWith(Ce,[ke]))}}),ke.ready.then=Ne.then,"complete"===Ce.readyState||"loading"!==Ce.readyState&&!Ce.documentElement.doScroll?e.setTimeout(ke.ready):(Ce.addEventListener("DOMContentLoaded",d),e.addEventListener("load",d));var Le=function(e,t,n,a,o,r,s){var l=0,c=e.length,u=null==n;if("object"===i(n)){o=!0;for(l in n)Le(e,t,l,n[l],!0,r,s)}else if(void 0!==a&&(o=!0,we(a)||(s=!0),u&&(s?(t.call(e,a),t=null):(u=t,t=function(e,t,n){return u.call(ke(e),n)})),t))for(;l<c;l++)t(e[l],n,s?a:a.call(e[l],l,t(e[l],n)));return o?e:u?t.call(e):c?t(e[0],n):r},Me=/^-ms-/,Oe=/-([a-z])/g,Re=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};h.uid=1,h.prototype={cache:function(e){var t=e[this.expando];return t||(t={},Re(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var i,a=this.cache(e);if("string"==typeof t)a[f(t)]=n;else for(i in t)a[f(i)]=t[i];return a},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][f(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,i=e[this.expando];if(void 0!==i){if(void 0!==t){Array.isArray(t)?t=t.map(f):(t=f(t),t=t in i?[t]:t.match(_e)||[]),n=t.length;for(;n--;)delete i[t[n]]}(void 0===t||ke.isEmptyObject(i))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!ke.isEmptyObject(t)}};var Fe=new h,Be=new h,Ue=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,He=/[A-Z]/g;ke.extend({hasData:function(e){return Be.hasData(e)||Fe.hasData(e)},data:function(e,t,n){return Be.access(e,t,n)},removeData:function(e,t){Be.remove(e,t)},_data:function(e,t,n){return Fe.access(e,t,n)},_removeData:function(e,t){Fe.remove(e,t)}}),ke.fn.extend({data:function(e,t){var n,i,a,o=this[0],r=o&&o.attributes;if(void 0===e){if(this.length&&(a=Be.get(o),1===o.nodeType&&!Fe.get(o,"hasDataAttrs"))){for(n=r.length;n--;)r[n]&&(i=r[n].name,0===i.indexOf("data-")&&(i=f(i.slice(5)),v(o,i,a[i])));Fe.set(o,"hasDataAttrs",!0)}return a}return"object"==typeof e?this.each(function(){Be.set(this,e)}):Le(this,function(t){var n;if(o&&void 0===t){if(void 0!==(n=Be.get(o,e)))return n;if(void 0!==(n=v(o,e)))return n}else this.each(function(){Be.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){Be.remove(this,e)})}}),ke.extend({queue:function(e,t,n){var i;if(e)return t=(t||"fx")+"queue",i=Fe.get(e,t),n&&(!i||Array.isArray(n)?i=Fe.access(e,t,ke.makeArray(n)):i.push(n)),i||[]},dequeue:function(e,t){t=t||"fx";var n=ke.queue(e,t),i=n.length,a=n.shift(),o=ke._queueHooks(e,t),r=function(){ke.dequeue(e,t)};"inprogress"===a&&(a=n.shift(),i--),a&&("fx"===t&&n.unshift("inprogress"),delete o.stop,a.call(e,r,o)),!i&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return Fe.get(e,n)||Fe.access(e,n,{empty:ke.Callbacks("once memory").add(function(){Fe.remove(e,[t+"queue",n])})})}}),ke.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?ke.queue(this[0],e):void 0===t?this:this.each(function(){var n=ke.queue(this,e,t);ke._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&ke.dequeue(this,e)})},dequeue:function(e){return this.each(function(){ke.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,i=1,a=ke.Deferred(),o=this,r=this.length,s=function(){--i||a.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";r--;)(n=Fe.get(o[r],e+"queueHooks"))&&n.empty&&(i++,n.empty.add(s));return s(),a.promise(t)}});var Ge=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ze=new RegExp("^(?:([+-])=|)("+Ge+")([a-z%]*)$","i"),Ve=["Top","Right","Bottom","Left"],Qe=Ce.documentElement,We=function(e){return ke.contains(e.ownerDocument,e)},Xe={composed:!0};Qe.getRootNode&&(We=function(e){return ke.contains(e.ownerDocument,e)||e.getRootNode(Xe)===e.ownerDocument});var Je=function(e,t){return e=t||e,"none"===e.style.display||""===e.style.display&&We(e)&&"none"===ke.css(e,"display")},Ke={};ke.fn.extend({show:function(){return y(this,!0)},hide:function(){return y(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){Je(this)?ke(this).show():ke(this).hide()})}});var Ye=/^(?:checkbox|radio)$/i,Ze=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,et=/^$|^module$|\/(?:java|ecma)script/i;!function(){var e=Ce.createDocumentFragment(),t=e.appendChild(Ce.createElement("div")),n=Ce.createElement("input");n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),t.appendChild(n),ge.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",ge.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue,t.innerHTML="<option></option>",ge.option=!!t.lastChild}();var tt={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};tt.tbody=tt.tfoot=tt.colgroup=tt.caption=tt.thead,tt.th=tt.td,ge.option||(tt.optgroup=tt.option=[1,"<select multiple='multiple'>","</select>"]);var nt=/<|&#?\w+;/,it=/^([^.]*)(?:\.(.+)|)/;ke.event={global:{},add:function(e,t,n,i,a){var o,r,s,l,c,u,p,d,b,f,h,m=Fe.get(e);if(Re(e))for(n.handler&&(o=n,n=o.handler,a=o.selector),a&&ke.find.matchesSelector(Qe,a),n.guid||(n.guid=ke.guid++),(l=m.events)||(l=m.events=Object.create(null)),(r=m.handle)||(r=m.handle=function(t){return void 0!==ke&&ke.event.triggered!==t.type?ke.event.dispatch.apply(e,arguments):void 0}),t=(t||"").match(_e)||[""],c=t.length;c--;)s=it.exec(t[c])||[],b=h=s[1],f=(s[2]||"").split(".").sort(),b&&(p=ke.event.special[b]||{},b=(a?p.delegateType:p.bindType)||b,p=ke.event.special[b]||{},u=ke.extend({type:b,origType:h,data:i,handler:n,guid:n.guid,selector:a,needsContext:a&&ke.expr.match.needsContext.test(a),namespace:f.join(".")},o),(d=l[b])||(d=l[b]=[],d.delegateCount=0,p.setup&&!1!==p.setup.call(e,i,f,r)||e.addEventListener&&e.addEventListener(b,r)),p.add&&(p.add.call(e,u),u.handler.guid||(u.handler.guid=n.guid)),a?d.splice(d.delegateCount++,0,u):d.push(u),ke.event.global[b]=!0)},remove:function(e,t,n,i,a){var o,r,s,l,c,u,p,d,b,f,h,m=Fe.hasData(e)&&Fe.get(e);if(m&&(l=m.events)){for(t=(t||"").match(_e)||[""],c=t.length;c--;)if(s=it.exec(t[c])||[],b=h=s[1],f=(s[2]||"").split(".").sort(),b){for(p=ke.event.special[b]||{},b=(i?p.delegateType:p.bindType)||b,d=l[b]||[],s=s[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),r=o=d.length;o--;)u=d[o],!a&&h!==u.origType||n&&n.guid!==u.guid||s&&!s.test(u.namespace)||i&&i!==u.selector&&("**"!==i||!u.selector)||(d.splice(o,1),u.selector&&d.delegateCount--,p.remove&&p.remove.call(e,u));r&&!d.length&&(p.teardown&&!1!==p.teardown.call(e,f,m.handle)||ke.removeEvent(e,b,m.handle),delete l[b])}else for(b in l)ke.event.remove(e,b+t[c],n,i,!0);ke.isEmptyObject(l)&&Fe.remove(e,"handle events")}},dispatch:function(e){var t,n,i,a,o,r,s=new Array(arguments.length),l=ke.event.fix(e),c=(Fe.get(this,"events")||Object.create(null))[l.type]||[],u=ke.event.special[l.type]||{};for(s[0]=l,t=1;t<arguments.length;t++)s[t]=arguments[t];if(l.delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,l)){for(r=ke.event.handlers.call(this,l,c),t=0;(a=r[t++])&&!l.isPropagationStopped();)for(l.currentTarget=a.elem,n=0;(o=a.handlers[n++])&&!l.isImmediatePropagationStopped();)l.rnamespace&&!1!==o.namespace&&!l.rnamespace.test(o.namespace)||(l.handleObj=o,l.data=o.data,void 0!==(i=((ke.event.special[o.origType]||{}).handle||o.handler).apply(a.elem,s))&&!1===(l.result=i)&&(l.preventDefault(),l.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,l),l.result}},handlers:function(e,t){var n,i,a,o,r,s=[],l=t.delegateCount,c=e.target;if(l&&c.nodeType&&!("click"===e.type&&e.button>=1))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==e.type||!0!==c.disabled)){for(o=[],r={},n=0;n<l;n++)i=t[n],a=i.selector+" ",void 0===r[a]&&(r[a]=i.needsContext?ke(a,this).index(c)>-1:ke.find(a,this,null,[c]).length),r[a]&&o.push(i);o.length&&s.push({elem:c,handlers:o})}return c=this,l<t.length&&s.push({elem:c,handlers:t.slice(l)}),s},addProp:function(e,t){Object.defineProperty(ke.Event.prototype,e,{enumerable:!0,configurable:!0,get:we(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[ke.expando]?e:new ke.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return Ye.test(t.type)&&t.click&&o(t,"input")&&P(t,"click",I),!1},trigger:function(e){var t=this||e;return Ye.test(t.type)&&t.click&&o(t,"input")&&P(t,"click"),!0},_default:function(e){var t=e.target;return Ye.test(t.type)&&t.click&&o(t,"input")&&Fe.get(t,"click")||o(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},ke.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},ke.Event=function(e,t){if(!(this instanceof ke.Event))return new ke.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?I:T,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&ke.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[ke.expando]=!0},ke.Event.prototype={constructor:ke.Event,isDefaultPrevented:T,isPropagationStopped:T,isImmediatePropagationStopped:T,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=I,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=I,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=I,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},ke.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},ke.event.addProp),ke.each({focus:"focusin",blur:"focusout"},function(e,t){ke.event.special[e]={setup:function(){return P(this,e,$),!1},trigger:function(){return P(this,e),!0},_default:function(t){return Fe.get(t.target,e)},delegateType:t}}),ke.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){ke.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,i=this,a=e.relatedTarget,o=e.handleObj;return a&&(a===i||ke.contains(i,a))||(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),ke.fn.extend({on:function(e,t,n,i){return q(this,e,t,n,i)},one:function(e,t,n,i){return q(this,e,t,n,i,1)},off:function(e,t,n){var i,a;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,ke(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(a in e)this.off(a,t,e[a]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=T),this.each(function(){ke.event.remove(this,e,n,t)})}});var at=/<script|<style|<link/i,ot=/checked\s*(?:[^=]|=\s*.checked.)/i,rt=/^\s*<!\[CDATA\[|\]\]>\s*$/g;ke.extend({htmlPrefilter:function(e){return e},clone:function(e,t,n){var i,a,o,r,s=e.cloneNode(!0),l=We(e);if(!(ge.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||ke.isXMLDoc(e)))for(r=C(s),o=C(e),i=0,a=o.length;i<a;i++)E(o[i],r[i]);if(t)if(n)for(o=o||C(e),r=r||C(s),i=0,a=o.length;i<a;i++)_(o[i],r[i]);else _(e,s);return r=C(s,"script"),r.length>0&&x(r,!l&&C(e,"script")),s},cleanData:function(e){for(var t,n,i,a=ke.event.special,o=0;void 0!==(n=e[o]);o++)if(Re(n)){if(t=n[Fe.expando]){if(t.events)for(i in t.events)a[i]?ke.event.remove(n,i):ke.removeEvent(n,i,t.handle);n[Fe.expando]=void 0}n[Be.expando]&&(n[Be.expando]=void 0)}}}),ke.fn.extend({detach:function(e){return L(this,e,!0)},remove:function(e){return L(this,e)},text:function(e){return Le(this,function(e){return void 0===e?ke.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return N(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){A(this,e).appendChild(e)}})},prepend:function(){return N(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=A(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return N(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return N(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(ke.cleanData(C(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return ke.clone(this,e,t)})},html:function(e){return Le(this,function(e){var t=this[0]||{},n=0,i=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!at.test(e)&&!tt[(Ze.exec(e)||["",""])[1].toLowerCase()]){e=ke.htmlPrefilter(e);try{for(;n<i;n++)t=this[n]||{},1===t.nodeType&&(ke.cleanData(C(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return N(this,arguments,function(t){var n=this.parentNode;ke.inArray(this,e)<0&&(ke.cleanData(C(this)),n&&n.replaceChild(t,this))},e)}}),ke.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){ke.fn[e]=function(e){for(var n,i=[],a=ke(e),o=a.length-1,r=0;r<=o;r++)n=r===o?this:this.clone(!0),ke(a[r])[t](n),pe.apply(i,n.get());return this.pushStack(i)}});var st=new RegExp("^("+Ge+")(?!px)[a-z%]+$","i"),lt=/^--/,ct=function(t){var n=t.ownerDocument.defaultView;return n&&n.opener||(n=e),n.getComputedStyle(t)},ut=function(e,t,n){var i,a,o={};for(a in t)o[a]=e.style[a],e.style[a]=t[a];i=n.call(e);for(a in t)e.style[a]=o[a];return i},pt=new RegExp(Ve.join("|"),"i"),dt=new RegExp("^[\\x20\\t\\r\\n\\f]+|((?:^|[^\\\\])(?:\\\\.)*)[\\x20\\t\\r\\n\\f]+$","g");!function(){function t(){if(u){c.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",u.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",Qe.appendChild(c).appendChild(u);var t=e.getComputedStyle(u);i="1%"!==t.top,l=12===n(t.marginLeft),u.style.right="60%",r=36===n(t.right),a=36===n(t.width),u.style.position="absolute",o=12===n(u.offsetWidth/3),Qe.removeChild(c),u=null}}function n(e){return Math.round(parseFloat(e))}var i,a,o,r,s,l,c=Ce.createElement("div"),u=Ce.createElement("div");u.style&&(u.style.backgroundClip="content-box",u.cloneNode(!0).style.backgroundClip="",ge.clearCloneStyle="content-box"===u.style.backgroundClip,ke.extend(ge,{boxSizingReliable:function(){return t(),a},pixelBoxStyles:function(){return t(),r},pixelPosition:function(){return t(),i},reliableMarginLeft:function(){return t(),l},scrollboxSize:function(){return t(),o},reliableTrDimensions:function(){var t,n,i,a;return null==s&&(t=Ce.createElement("table"),n=Ce.createElement("tr"),i=Ce.createElement("div"),t.style.cssText="position:absolute;left:-11111px;border-collapse:separate",n.style.cssText="border:1px solid",n.style.height="1px",i.style.height="9px",i.style.display="block",Qe.appendChild(t).appendChild(n).appendChild(i),a=e.getComputedStyle(n),s=parseInt(a.height,10)+parseInt(a.borderTopWidth,10)+parseInt(a.borderBottomWidth,10)===n.offsetHeight,Qe.removeChild(t)),s}}))}();var bt=["Webkit","Moz","ms"],ft=Ce.createElement("div").style,ht={},mt=/^(none|table(?!-c[ea]).+)/,vt={position:"absolute",visibility:"hidden",display:"block"},gt={letterSpacing:"0",fontWeight:"400"};ke.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=M(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var a,o,r,s=f(t),l=lt.test(t),c=e.style;if(l||(t=F(s)),r=ke.cssHooks[t]||ke.cssHooks[s],void 0===n)return r&&"get"in r&&void 0!==(a=r.get(e,!1,i))?a:c[t];o=typeof n,"string"===o&&(a=ze.exec(n))&&a[1]&&(n=g(e,t,a),o="number"),null!=n&&n===n&&("number"!==o||l||(n+=a&&a[3]||(ke.cssNumber[s]?"":"px")),ge.clearCloneStyle||""!==n||0!==t.indexOf("background")||(c[t]="inherit"),r&&"set"in r&&void 0===(n=r.set(e,n,i))||(l?c.setProperty(t,n):c[t]=n))}},css:function(e,t,n,i){var a,o,r,s=f(t);return lt.test(t)||(t=F(s)),r=ke.cssHooks[t]||ke.cssHooks[s],r&&"get"in r&&(a=r.get(e,!0,n)),void 0===a&&(a=M(e,t,i)),"normal"===a&&t in gt&&(a=gt[t]),""===n||n?(o=parseFloat(a),!0===n||isFinite(o)?o||0:a):a}}),ke.each(["height","width"],function(e,t){ke.cssHooks[t]={get:function(e,n,i){if(n)return!mt.test(ke.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?H(e,t,i):ut(e,vt,function(){return H(e,t,i)})},set:function(e,n,i){var a,o=ct(e),r=!ge.scrollboxSize()&&"absolute"===o.position,s=r||i,l=s&&"border-box"===ke.css(e,"boxSizing",!1,o),c=i?U(e,t,i,l,o):0;return l&&r&&(c-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(o[t])-U(e,t,"border",!1,o)-.5)),c&&(a=ze.exec(n))&&"px"!==(a[3]||"px")&&(e.style[t]=n,n=ke.css(e,t)),B(e,n,c)}}}),ke.cssHooks.marginLeft=O(ge.reliableMarginLeft,function(e,t){if(t)return(parseFloat(M(e,"marginLeft"))||e.getBoundingClientRect().left-ut(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),ke.each({margin:"",padding:"",border:"Width"},function(e,t){ke.cssHooks[e+t]={expand:function(n){for(var i=0,a={},o="string"==typeof n?n.split(" "):[n];i<4;i++)a[e+Ve[i]+t]=o[i]||o[i-2]||o[0];return a}},"margin"!==e&&(ke.cssHooks[e+t].set=B)}),ke.fn.extend({css:function(e,t){return Le(this,function(e,t,n){var i,a,o={},r=0;if(Array.isArray(t)){for(i=ct(e),a=t.length;r<a;r++)o[t[r]]=ke.css(e,t[r],!1,i);return o}return void 0!==n?ke.style(e,t,n):ke.css(e,t)},e,t,arguments.length>1)}}),ke.Tween=G,G.prototype={constructor:G,init:function(e,t,n,i,a,o){this.elem=e,this.prop=n,this.easing=a||ke.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=o||(ke.cssNumber[n]?"":"px")},cur:function(){var e=G.propHooks[this.prop];return e&&e.get?e.get(this):G.propHooks._default.get(this)},run:function(e){var t,n=G.propHooks[this.prop];return this.options.duration?this.pos=t=ke.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):G.propHooks._default.set(this),this}},G.prototype.init.prototype=G.prototype,G.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=ke.css(e.elem,e.prop,""),t&&"auto"!==t?t:0)},set:function(e){ke.fx.step[e.prop]?ke.fx.step[e.prop](e):1!==e.elem.nodeType||!ke.cssHooks[e.prop]&&null==e.elem.style[F(e.prop)]?e.elem[e.prop]=e.now:ke.style(e.elem,e.prop,e.now+e.unit)}}},G.propHooks.scrollTop=G.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},ke.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},
ke.fx=G.prototype.init,ke.fx.step={};var wt,yt,Ct=/^(?:toggle|show|hide)$/,xt=/queueHooks$/;ke.Animation=ke.extend(K,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return g(n.elem,e,ze.exec(t),n),n}]},tweener:function(e,t){we(e)?(t=e,e=["*"]):e=e.match(_e);for(var n,i=0,a=e.length;i<a;i++)n=e[i],K.tweeners[n]=K.tweeners[n]||[],K.tweeners[n].unshift(t)},prefilters:[X],prefilter:function(e,t){t?K.prefilters.unshift(e):K.prefilters.push(e)}}),ke.speed=function(e,t,n){var i=e&&"object"==typeof e?ke.extend({},e):{complete:n||!n&&t||we(e)&&e,duration:e,easing:n&&t||t&&!we(t)&&t};return ke.fx.off?i.duration=0:"number"!=typeof i.duration&&(i.duration in ke.fx.speeds?i.duration=ke.fx.speeds[i.duration]:i.duration=ke.fx.speeds._default),null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){we(i.old)&&i.old.call(this),i.queue&&ke.dequeue(this,i.queue)},i},ke.fn.extend({fadeTo:function(e,t,n,i){return this.filter(Je).css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(e,t,n,i){var a=ke.isEmptyObject(e),o=ke.speed(t,n,i),r=function(){var t=K(this,ke.extend({},e),o);(a||Fe.get(this,"finish"))&&t.stop(!0)};return r.finish=r,a||!1===o.queue?this.each(r):this.queue(o.queue,r)},stop:function(e,t,n){var i=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&this.queue(e||"fx",[]),this.each(function(){var t=!0,a=null!=e&&e+"queueHooks",o=ke.timers,r=Fe.get(this);if(a)r[a]&&r[a].stop&&i(r[a]);else for(a in r)r[a]&&r[a].stop&&xt.test(a)&&i(r[a]);for(a=o.length;a--;)o[a].elem!==this||null!=e&&o[a].queue!==e||(o[a].anim.stop(n),t=!1,o.splice(a,1));!t&&n||ke.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||"fx"),this.each(function(){var t,n=Fe.get(this),i=n[e+"queue"],a=n[e+"queueHooks"],o=ke.timers,r=i?i.length:0;for(n.finish=!0,ke.queue(this,e,[]),a&&a.stop&&a.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;t<r;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete n.finish})}}),ke.each(["toggle","show","hide"],function(e,t){var n=ke.fn[t];ke.fn[t]=function(e,i,a){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(Q(t,!0),e,i,a)}}),ke.each({slideDown:Q("show"),slideUp:Q("hide"),slideToggle:Q("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){ke.fn[e]=function(e,n,i){return this.animate(t,e,n,i)}}),ke.timers=[],ke.fx.tick=function(){var e,t=0,n=ke.timers;for(wt=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||ke.fx.stop(),wt=void 0},ke.fx.timer=function(e){ke.timers.push(e),ke.fx.start()},ke.fx.interval=13,ke.fx.start=function(){yt||(yt=!0,z())},ke.fx.stop=function(){yt=null},ke.fx.speeds={slow:600,fast:200,_default:400},ke.fn.delay=function(t,n){return t=ke.fx?ke.fx.speeds[t]||t:t,n=n||"fx",this.queue(n,function(n,i){var a=e.setTimeout(n,t);i.stop=function(){e.clearTimeout(a)}})},function(){var e=Ce.createElement("input"),t=Ce.createElement("select"),n=t.appendChild(Ce.createElement("option"));e.type="checkbox",ge.checkOn=""!==e.value,ge.optSelected=n.selected,e=Ce.createElement("input"),e.value="t",e.type="radio",ge.radioValue="t"===e.value}();var kt,It=ke.expr.attrHandle;ke.fn.extend({attr:function(e,t){return Le(this,ke.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){ke.removeAttr(this,e)})}}),ke.extend({attr:function(e,t,n){var i,a,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===e.getAttribute?ke.prop(e,t,n):(1===o&&ke.isXMLDoc(e)||(a=ke.attrHooks[t.toLowerCase()]||(ke.expr.match.bool.test(t)?kt:void 0)),void 0!==n?null===n?void ke.removeAttr(e,t):a&&"set"in a&&void 0!==(i=a.set(e,n,t))?i:(e.setAttribute(t,n+""),n):a&&"get"in a&&null!==(i=a.get(e,t))?i:(i=ke.find.attr(e,t),null==i?void 0:i))},attrHooks:{type:{set:function(e,t){if(!ge.radioValue&&"radio"===t&&o(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,i=0,a=t&&t.match(_e);if(a&&1===e.nodeType)for(;n=a[i++];)e.removeAttribute(n)}}),kt={set:function(e,t,n){return!1===t?ke.removeAttr(e,n):e.setAttribute(n,n),n}},ke.each(ke.expr.match.bool.source.match(/\w+/g),function(e,t){var n=It[t]||ke.find.attr;It[t]=function(e,t,i){var a,o,r=t.toLowerCase();return i||(o=It[r],It[r]=a,a=null!=n(e,t,i)?r:null,It[r]=o),a}});var Tt=/^(?:input|select|textarea|button)$/i,$t=/^(?:a|area)$/i;ke.fn.extend({prop:function(e,t){return Le(this,ke.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[ke.propFix[e]||e]})}}),ke.extend({prop:function(e,t,n){var i,a,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&ke.isXMLDoc(e)||(t=ke.propFix[t]||t,a=ke.propHooks[t]),void 0!==n?a&&"set"in a&&void 0!==(i=a.set(e,n,t))?i:e[t]=n:a&&"get"in a&&null!==(i=a.get(e,t))?i:e[t]},propHooks:{tabIndex:{get:function(e){var t=ke.find.attr(e,"tabindex");return t?parseInt(t,10):Tt.test(e.nodeName)||$t.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),ge.optSelected||(ke.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),ke.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){ke.propFix[this.toLowerCase()]=this}),ke.fn.extend({addClass:function(e){var t,n,i,a,o,r;return we(e)?this.each(function(t){ke(this).addClass(e.call(this,t,Z(this)))}):(t=ee(e),t.length?this.each(function(){if(i=Z(this),n=1===this.nodeType&&" "+Y(i)+" "){for(o=0;o<t.length;o++)a=t[o],n.indexOf(" "+a+" ")<0&&(n+=a+" ");r=Y(n),i!==r&&this.setAttribute("class",r)}}):this)},removeClass:function(e){var t,n,i,a,o,r;return we(e)?this.each(function(t){ke(this).removeClass(e.call(this,t,Z(this)))}):arguments.length?(t=ee(e),t.length?this.each(function(){if(i=Z(this),n=1===this.nodeType&&" "+Y(i)+" "){for(o=0;o<t.length;o++)for(a=t[o];n.indexOf(" "+a+" ")>-1;)n=n.replace(" "+a+" "," ");r=Y(n),i!==r&&this.setAttribute("class",r)}}):this):this.attr("class","")},toggleClass:function(e,t){var n,i,a,o,r=typeof e,s="string"===r||Array.isArray(e);return we(e)?this.each(function(n){ke(this).toggleClass(e.call(this,n,Z(this),t),t)}):"boolean"==typeof t&&s?t?this.addClass(e):this.removeClass(e):(n=ee(e),this.each(function(){if(s)for(o=ke(this),a=0;a<n.length;a++)i=n[a],o.hasClass(i)?o.removeClass(i):o.addClass(i);else void 0!==e&&"boolean"!==r||(i=Z(this),i&&Fe.set(this,"__className__",i),this.setAttribute&&this.setAttribute("class",i||!1===e?"":Fe.get(this,"__className__")||""))}))},hasClass:function(e){var t,n,i=0;for(t=" "+e+" ";n=this[i++];)if(1===n.nodeType&&(" "+Y(Z(n))+" ").indexOf(t)>-1)return!0;return!1}});var St=/\r/g;ke.fn.extend({val:function(e){var t,n,i,a=this[0];{if(arguments.length)return i=we(e),this.each(function(n){var a;1===this.nodeType&&(a=i?e.call(this,n,ke(this).val()):e,null==a?a="":"number"==typeof a?a+="":Array.isArray(a)&&(a=ke.map(a,function(e){return null==e?"":e+""})),(t=ke.valHooks[this.type]||ke.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,a,"value")||(this.value=a))});if(a)return(t=ke.valHooks[a.type]||ke.valHooks[a.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(a,"value"))?n:(n=a.value,"string"==typeof n?n.replace(St,""):null==n?"":n)}}}),ke.extend({valHooks:{option:{get:function(e){var t=ke.find.attr(e,"value");return null!=t?t:Y(ke.text(e))}},select:{get:function(e){var t,n,i,a=e.options,r=e.selectedIndex,s="select-one"===e.type,l=s?null:[],c=s?r+1:a.length;for(i=r<0?c:s?r:0;i<c;i++)if(n=a[i],(n.selected||i===r)&&!n.disabled&&(!n.parentNode.disabled||!o(n.parentNode,"optgroup"))){if(t=ke(n).val(),s)return t;l.push(t)}return l},set:function(e,t){for(var n,i,a=e.options,o=ke.makeArray(t),r=a.length;r--;)i=a[r],(i.selected=ke.inArray(ke.valHooks.option.get(i),o)>-1)&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),ke.each(["radio","checkbox"],function(){ke.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=ke.inArray(ke(e).val(),t)>-1}},ge.checkOn||(ke.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),ge.focusin="onfocusin"in e;var qt=/^(?:focusinfocus|focusoutblur)$/,Pt=function(e){e.stopPropagation()};ke.extend(ke.event,{trigger:function(t,n,i,a){var o,r,s,l,c,u,p,d,b=[i||Ce],f=he.call(t,"type")?t.type:t,h=he.call(t,"namespace")?t.namespace.split("."):[];if(r=d=s=i=i||Ce,3!==i.nodeType&&8!==i.nodeType&&!qt.test(f+ke.event.triggered)&&(f.indexOf(".")>-1&&(h=f.split("."),f=h.shift(),h.sort()),c=f.indexOf(":")<0&&"on"+f,t=t[ke.expando]?t:new ke.Event(f,"object"==typeof t&&t),t.isTrigger=a?2:3,t.namespace=h.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=i),n=null==n?[t]:ke.makeArray(n,[t]),p=ke.event.special[f]||{},a||!p.trigger||!1!==p.trigger.apply(i,n))){if(!a&&!p.noBubble&&!ye(i)){for(l=p.delegateType||f,qt.test(l+f)||(r=r.parentNode);r;r=r.parentNode)b.push(r),s=r;s===(i.ownerDocument||Ce)&&b.push(s.defaultView||s.parentWindow||e)}for(o=0;(r=b[o++])&&!t.isPropagationStopped();)d=r,t.type=o>1?l:p.bindType||f,u=(Fe.get(r,"events")||Object.create(null))[t.type]&&Fe.get(r,"handle"),u&&u.apply(r,n),(u=c&&r[c])&&u.apply&&Re(r)&&(t.result=u.apply(r,n),!1===t.result&&t.preventDefault());return t.type=f,a||t.isDefaultPrevented()||p._default&&!1!==p._default.apply(b.pop(),n)||!Re(i)||c&&we(i[f])&&!ye(i)&&(s=i[c],s&&(i[c]=null),ke.event.triggered=f,t.isPropagationStopped()&&d.addEventListener(f,Pt),i[f](),t.isPropagationStopped()&&d.removeEventListener(f,Pt),ke.event.triggered=void 0,s&&(i[c]=s)),t.result}},simulate:function(e,t,n){var i=ke.extend(new ke.Event,n,{type:e,isSimulated:!0});ke.event.trigger(i,null,t)}}),ke.fn.extend({trigger:function(e,t){return this.each(function(){ke.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return ke.event.trigger(e,t,n,!0)}}),ge.focusin||ke.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){ke.event.simulate(t,e.target,ke.event.fix(e))};ke.event.special[t]={setup:function(){var i=this.ownerDocument||this.document||this,a=Fe.access(i,t);a||i.addEventListener(e,n,!0),Fe.access(i,t,(a||0)+1)},teardown:function(){var i=this.ownerDocument||this.document||this,a=Fe.access(i,t)-1;a?Fe.access(i,t,a):(i.removeEventListener(e,n,!0),Fe.remove(i,t))}}});var At=e.location,Dt={guid:Date.now()},jt=/\?/;ke.parseXML=function(t){var n,i;if(!t||"string"!=typeof t)return null;try{n=(new e.DOMParser).parseFromString(t,"text/xml")}catch(e){}return i=n&&n.getElementsByTagName("parsererror")[0],n&&!i||ke.error("Invalid XML: "+(i?ke.map(i.childNodes,function(e){return e.textContent}).join("\n"):t)),n};var _t=/\[\]$/,Et=/\r?\n/g,Nt=/^(?:submit|button|image|reset|file)$/i,Lt=/^(?:input|select|textarea|keygen)/i;ke.param=function(e,t){var n,i=[],a=function(e,t){var n=we(t)?t():t;i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!ke.isPlainObject(e))ke.each(e,function(){a(this.name,this.value)});else for(n in e)te(n,e[n],t,a);return i.join("&")},ke.fn.extend({serialize:function(){return ke.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=ke.prop(this,"elements");return e?ke.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!ke(this).is(":disabled")&&Lt.test(this.nodeName)&&!Nt.test(e)&&(this.checked||!Ye.test(e))}).map(function(e,t){var n=ke(this).val();return null==n?null:Array.isArray(n)?ke.map(n,function(e){return{name:t.name,value:e.replace(Et,"\r\n")}}):{name:t.name,value:n.replace(Et,"\r\n")}}).get()}});var Mt=/%20/g,Ot=/#.*$/,Rt=/([?&])_=[^&]*/,Ft=/^(.*?):[ \t]*([^\r\n]*)$/gm,Bt=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Ut=/^(?:GET|HEAD)$/,Ht=/^\/\//,Gt={},zt={},Vt="*/".concat("*"),Qt=Ce.createElement("a");Qt.href=At.href,ke.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:At.href,type:"GET",isLocal:Bt.test(At.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Vt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":ke.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?ae(ae(e,ke.ajaxSettings),t):ae(ke.ajaxSettings,e)},ajaxPrefilter:ne(Gt),ajaxTransport:ne(zt),ajax:function(t,n){function i(t,n,i,s){var c,d,b,y,C,x=n;u||(u=!0,l&&e.clearTimeout(l),a=void 0,r=s||"",k.readyState=t>0?4:0,c=t>=200&&t<300||304===t,i&&(y=oe(f,k,i)),!c&&ke.inArray("script",f.dataTypes)>-1&&ke.inArray("json",f.dataTypes)<0&&(f.converters["text script"]=function(){}),y=re(f,y,k,c),c?(f.ifModified&&(C=k.getResponseHeader("Last-Modified"),C&&(ke.lastModified[o]=C),(C=k.getResponseHeader("etag"))&&(ke.etag[o]=C)),204===t||"HEAD"===f.type?x="nocontent":304===t?x="notmodified":(x=y.state,d=y.data,b=y.error,c=!b)):(b=x,!t&&x||(x="error",t<0&&(t=0))),k.status=t,k.statusText=(n||x)+"",c?v.resolveWith(h,[d,x,k]):v.rejectWith(h,[k,x,b]),k.statusCode(w),w=void 0,p&&m.trigger(c?"ajaxSuccess":"ajaxError",[k,f,c?d:b]),g.fireWith(h,[k,x]),p&&(m.trigger("ajaxComplete",[k,f]),--ke.active||ke.event.trigger("ajaxStop")))}"object"==typeof t&&(n=t,t=void 0),n=n||{};var a,o,r,s,l,c,u,p,d,b,f=ke.ajaxSetup({},n),h=f.context||f,m=f.context&&(h.nodeType||h.jquery)?ke(h):ke.event,v=ke.Deferred(),g=ke.Callbacks("once memory"),w=f.statusCode||{},y={},C={},x="canceled",k={readyState:0,getResponseHeader:function(e){var t;if(u){if(!s)for(s={};t=Ft.exec(r);)s[t[1].toLowerCase()+" "]=(s[t[1].toLowerCase()+" "]||[]).concat(t[2]);t=s[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return u?r:null},setRequestHeader:function(e,t){return null==u&&(e=C[e.toLowerCase()]=C[e.toLowerCase()]||e,y[e]=t),this},overrideMimeType:function(e){return null==u&&(f.mimeType=e),this},statusCode:function(e){var t;if(e)if(u)k.always(e[k.status]);else for(t in e)w[t]=[w[t],e[t]];return this},abort:function(e){var t=e||x;return a&&a.abort(t),i(0,t),this}};if(v.promise(k),f.url=((t||f.url||At.href)+"").replace(Ht,At.protocol+"//"),f.type=n.method||n.type||f.method||f.type,f.dataTypes=(f.dataType||"*").toLowerCase().match(_e)||[""],null==f.crossDomain){c=Ce.createElement("a");try{c.href=f.url,c.href=c.href,f.crossDomain=Qt.protocol+"//"+Qt.host!=c.protocol+"//"+c.host}catch(e){f.crossDomain=!0}}if(f.data&&f.processData&&"string"!=typeof f.data&&(f.data=ke.param(f.data,f.traditional)),ie(Gt,f,n,k),u)return k;p=ke.event&&f.global,p&&0==ke.active++&&ke.event.trigger("ajaxStart"),f.type=f.type.toUpperCase(),f.hasContent=!Ut.test(f.type),o=f.url.replace(Ot,""),f.hasContent?f.data&&f.processData&&0===(f.contentType||"").indexOf("application/x-www-form-urlencoded")&&(f.data=f.data.replace(Mt,"+")):(b=f.url.slice(o.length),f.data&&(f.processData||"string"==typeof f.data)&&(o+=(jt.test(o)?"&":"?")+f.data,delete f.data),!1===f.cache&&(o=o.replace(Rt,"$1"),b=(jt.test(o)?"&":"?")+"_="+Dt.guid+++b),f.url=o+b),f.ifModified&&(ke.lastModified[o]&&k.setRequestHeader("If-Modified-Since",ke.lastModified[o]),ke.etag[o]&&k.setRequestHeader("If-None-Match",ke.etag[o])),(f.data&&f.hasContent&&!1!==f.contentType||n.contentType)&&k.setRequestHeader("Content-Type",f.contentType),k.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+Vt+"; q=0.01":""):f.accepts["*"]);for(d in f.headers)k.setRequestHeader(d,f.headers[d]);if(f.beforeSend&&(!1===f.beforeSend.call(h,k,f)||u))return k.abort();if(x="abort",g.add(f.complete),k.done(f.success),k.fail(f.error),a=ie(zt,f,n,k)){if(k.readyState=1,p&&m.trigger("ajaxSend",[k,f]),u)return k;f.async&&f.timeout>0&&(l=e.setTimeout(function(){k.abort("timeout")},f.timeout));try{u=!1,a.send(y,i)}catch(e){if(u)throw e;i(-1,e)}}else i(-1,"No Transport");return k},getJSON:function(e,t,n){return ke.get(e,t,n,"json")},getScript:function(e,t){return ke.get(e,void 0,t,"script")}}),ke.each(["get","post"],function(e,t){ke[t]=function(e,n,i,a){return we(n)&&(a=a||i,i=n,n=void 0),ke.ajax(ke.extend({url:e,type:t,dataType:a,data:n,success:i},ke.isPlainObject(e)&&e))}}),ke.ajaxPrefilter(function(e){var t;for(t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")}),ke._evalUrl=function(e,t,n){return ke.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){ke.globalEval(e,t,n)}})},ke.fn.extend({wrapAll:function(e){var t;return this[0]&&(we(e)&&(e=e.call(this[0])),t=ke(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(e){return we(e)?this.each(function(t){ke(this).wrapInner(e.call(this,t))}):this.each(function(){var t=ke(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=we(e);return this.each(function(n){ke(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(e){return this.parent(e).not("body").each(function(){ke(this).replaceWith(this.childNodes)}),this}}),ke.expr.pseudos.hidden=function(e){return!ke.expr.pseudos.visible(e)},ke.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},ke.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch(e){}};var Wt={0:200,1223:204},Xt=ke.ajaxSettings.xhr();ge.cors=!!Xt&&"withCredentials"in Xt,ge.ajax=Xt=!!Xt,ke.ajaxTransport(function(t){var n,i;if(ge.cors||Xt&&!t.crossDomain)return{send:function(a,o){var r,s=t.xhr();if(s.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(r in t.xhrFields)s[r]=t.xhrFields[r];t.mimeType&&s.overrideMimeType&&s.overrideMimeType(t.mimeType),t.crossDomain||a["X-Requested-With"]||(a["X-Requested-With"]="XMLHttpRequest");for(r in a)s.setRequestHeader(r,a[r]);n=function(e){return function(){n&&(n=i=s.onload=s.onerror=s.onabort=s.ontimeout=s.onreadystatechange=null,"abort"===e?s.abort():"error"===e?"number"!=typeof s.status?o(0,"error"):o(s.status,s.statusText):o(Wt[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=n(),i=s.onerror=s.ontimeout=n("error"),void 0!==s.onabort?s.onabort=i:s.onreadystatechange=function(){4===s.readyState&&e.setTimeout(function(){n&&i()})},n=n("abort");try{s.send(t.hasContent&&t.data||null)}catch(e){if(n)throw e}},abort:function(){n&&n()}}}),ke.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),ke.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return ke.globalEval(e),e}}}),ke.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),ke.ajaxTransport("script",function(e){if(e.crossDomain||e.scriptAttrs){var t,n;return{send:function(i,a){t=ke("<script>").attr(e.scriptAttrs||{}).prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&a("error"===e.type?404:200,e.type)}),Ce.head.appendChild(t[0])},abort:function(){n&&n()}}}});var Jt=[],Kt=/(=)\?(?=&|$)|\?\?/;ke.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Jt.pop()||ke.expando+"_"+Dt.guid++;return this[e]=!0,e}}),ke.ajaxPrefilter("json jsonp",function(t,n,i){var a,o,r,s=!1!==t.jsonp&&(Kt.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Kt.test(t.data)&&"data");if(s||"jsonp"===t.dataTypes[0])return a=t.jsonpCallback=we(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(Kt,"$1"+a):!1!==t.jsonp&&(t.url+=(jt.test(t.url)?"&":"?")+t.jsonp+"="+a),t.converters["script json"]=function(){return r||ke.error(a+" was not called"),r[0]},t.dataTypes[0]="json",o=e[a],e[a]=function(){r=arguments},i.always(function(){void 0===o?ke(e).removeProp(a):e[a]=o,t[a]&&(t.jsonpCallback=n.jsonpCallback,Jt.push(a)),r&&we(o)&&o(r[0]),r=o=void 0}),"script"}),ge.createHTMLDocument=function(){var e=Ce.implementation.createHTMLDocument("").body;return e.innerHTML="<form></form><form></form>",2===e.childNodes.length}(),ke.parseHTML=function(e,t,n){if("string"!=typeof e)return[];"boolean"==typeof t&&(n=t,t=!1);var i,a,o;return t||(ge.createHTMLDocument?(t=Ce.implementation.createHTMLDocument(""),i=t.createElement("base"),i.href=Ce.location.href,t.head.appendChild(i)):t=Ce),a=qe.exec(e),o=!n&&[],a?[t.createElement(a[1])]:(a=k([e],t,o),o&&o.length&&ke(o).remove(),ke.merge([],a.childNodes))},ke.fn.load=function(e,t,n){var i,a,o,r=this,s=e.indexOf(" ");return s>-1&&(i=Y(e.slice(s)),e=e.slice(0,s)),we(t)?(n=t,t=void 0):t&&"object"==typeof t&&(a="POST"),r.length>0&&ke.ajax({url:e,type:a||"GET",dataType:"html",data:t}).done(function(e){o=arguments,r.html(i?ke("<div>").append(ke.parseHTML(e)).find(i):e)}).always(n&&function(e,t){r.each(function(){n.apply(this,o||[e.responseText,t,e])})}),this},ke.expr.pseudos.animated=function(e){return ke.grep(ke.timers,function(t){return e===t.elem}).length},ke.offset={setOffset:function(e,t,n){var i,a,o,r,s,l,c,u=ke.css(e,"position"),p=ke(e),d={};"static"===u&&(e.style.position="relative"),s=p.offset(),o=ke.css(e,"top"),l=ke.css(e,"left"),c=("absolute"===u||"fixed"===u)&&(o+l).indexOf("auto")>-1,c?(i=p.position(),r=i.top,a=i.left):(r=parseFloat(o)||0,a=parseFloat(l)||0),we(t)&&(t=t.call(e,n,ke.extend({},s))),null!=t.top&&(d.top=t.top-s.top+r),null!=t.left&&(d.left=t.left-s.left+a),"using"in t?t.using.call(e,d):p.css(d)}},ke.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){ke.offset.setOffset(this,e,t)});var t,n,i=this[0];if(i)return i.getClientRects().length?(t=i.getBoundingClientRect(),n=i.ownerDocument.defaultView,{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var e,t,n,i=this[0],a={top:0,left:0};if("fixed"===ke.css(i,"position"))t=i.getBoundingClientRect();else{for(t=this.offset(),n=i.ownerDocument,e=i.offsetParent||n.documentElement;e&&(e===n.body||e===n.documentElement)&&"static"===ke.css(e,"position");)e=e.parentNode;e&&e!==i&&1===e.nodeType&&(a=ke(e).offset(),a.top+=ke.css(e,"borderTopWidth",!0),a.left+=ke.css(e,"borderLeftWidth",!0))}return{top:t.top-a.top-ke.css(i,"marginTop",!0),left:t.left-a.left-ke.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===ke.css(e,"position");)e=e.offsetParent;return e||Qe})}}),ke.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n="pageYOffset"===t;ke.fn[e]=function(i){return Le(this,function(e,i,a){var o;if(ye(e)?o=e:9===e.nodeType&&(o=e.defaultView),void 0===a)return o?o[t]:e[i];o?o.scrollTo(n?o.pageXOffset:a,n?a:o.pageYOffset):e[i]=a},e,i,arguments.length)}}),ke.each(["top","left"],function(e,t){ke.cssHooks[t]=O(ge.pixelPosition,function(e,n){if(n)return n=M(e,t),st.test(n)?ke(e).position()[t]+"px":n})}),ke.each({Height:"height",Width:"width"},function(e,t){ke.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,i){ke.fn[i]=function(a,o){var r=arguments.length&&(n||"boolean"!=typeof a),s=n||(!0===a||!0===o?"margin":"border");return Le(this,function(t,n,a){var o;return ye(t)?0===i.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(o=t.documentElement,Math.max(t.body["scroll"+e],o["scroll"+e],t.body["offset"+e],o["offset"+e],o["client"+e])):void 0===a?ke.css(t,n,s):ke.style(t,n,a,s)},t,r?a:void 0,r)}})}),ke.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){ke.fn[t]=function(e){return this.on(t,e)}}),ke.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),ke.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,t){ke.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}});var Yt=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;ke.proxy=function(e,t){var n,i,a;if("string"==typeof t&&(n=e[t],t=e,e=n),we(e))return i=ce.call(arguments,2),a=function(){return e.apply(t||this,i.concat(ce.call(arguments)))},a.guid=e.guid=e.guid||ke.guid++,a},ke.holdReady=function(e){e?ke.readyWait++:ke.ready(!0)},ke.isArray=Array.isArray,ke.parseJSON=JSON.parse,ke.nodeName=o,ke.isFunction=we,ke.isWindow=ye,ke.camelCase=f,ke.type=i,ke.now=Date.now,ke.isNumeric=function(e){var t=ke.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},ke.trim=function(e){return null==e?"":(e+"").replace(Yt,"$1")},"function"==typeof pubblebot.define&&pubblebot.define.amd&&pubblebot.define("jquery",[],function(){return ke});var Zt=e.jQuery,en=e.$;ke.noConflict=function(t){return e.$===ke&&(e.$=en),t&&e.jQuery===ke&&(e.jQuery=Zt),ke},e.jQueryPBm=ke.noConflict()}),pubblebot.define("jQueryPB",function(){}),function(){var e,t=this,n=t.Backbone,i=[],a=i.push,o=i.slice,r=i.splice;e="undefined"!=typeof exports?exports:t.Backbone={},e.VERSION="1.0.0";var s=$UScore;e.$=t.jQueryPBm||t.Zepto||t.ender||t.$,e.noConflict=function(){return t.Backbone=n,this},e.emulateHTTP=!1,e.emulateJSON=!1;var l=e.Events={on:function(e,t,n){return u(this,"on",e,[t,n])&&t?(this._events||(this._events={}),(this._events[e]||(this._events[e]=[])).push({callback:t,context:n,ctx:n||this}),this):this},once:function(e,t,n){if(!u(this,"once",e,[t,n])||!t)return this;var i=this,a=s.once(function(){i.off(e,a),t.apply(this,arguments)});return a._callback=t,this.on(e,a,n)},off:function(e,t,n){var i,a,o,r,l,c,p,d;if(!this._events||!u(this,"off",e,[t,n]))return this;if(!e&&!t&&!n)return this._events={},this;for(r=e?[e]:s.keys(this._events),l=0,c=r.length;l<c;l++)if(e=r[l],o=this._events[e]){if(this._events[e]=i=[],t||n)for(p=0,d=o.length;p<d;p++)a=o[p],(t&&t!==a.callback&&t!==a.callback._callback||n&&n!==a.context)&&i.push(a);i.length||delete this._events[e]}return this},trigger:function(e){if(!this._events)return this;var t=o.call(arguments,1);if(!u(this,"trigger",e,t))return this;var n=this._events[e],i=this._events.all;return n&&p(n,t),i&&p(i,arguments),this},stopListening:function(e,t,n){var i=this._listeners;if(!i)return this;var a=!t&&!n;"object"==typeof t&&(n=this),e&&((i={})[e._listenerId]=e);for(var o in i)i[o].off(t,n,this),a&&delete this._listeners[o];return this}},c=/\s+/,u=function(e,t,n,i){if(!n)return!0;if("object"==typeof n){for(var a in n)e[t].apply(e,[a,n[a]].concat(i));return!1}if(c.test(n)){for(var o=n.split(c),r=0,s=o.length;r<s;r++)e[t].apply(e,[o[r]].concat(i));return!1}return!0},p=function(e,t){var n,i=-1,a=e.length,o=t[0],r=t[1],s=t[2];switch(t.length){case 0:for(;++i<a;)(n=e[i]).callback.call(n.ctx);return;case 1:for(;++i<a;)(n=e[i]).callback.call(n.ctx,o);return;case 2:for(;++i<a;)(n=e[i]).callback.call(n.ctx,o,r);return;case 3:for(;++i<a;)(n=e[i]).callback.call(n.ctx,o,r,s);return;default:for(;++i<a;)(n=e[i]).callback.apply(n.ctx,t)}},d={listenTo:"on",listenToOnce:"once"};s.each(d,function(e,t){l[t]=function(t,n,i){return(this._listeners||(this._listeners={}))[t._listenerId||(t._listenerId=s.uniqueId("l"))]=t,"object"==typeof n&&(i=this),t[e](n,i,this),this}}),l.bind=l.on,l.unbind=l.off,s.extend(e,l);var b=e.Model=function(e,t){var n,i=e||{};t||(t={}),this.cid=s.uniqueId("c"),this.attributes={},s.extend(this,s.pick(t,f)),t.parse&&(i=this.parse(i,t)||{}),(n=s.result(this,"defaults"))&&(i=s.defaults({},i,n)),this.set(i,t),this.changed={},this.initialize.apply(this,arguments)},f=["url","urlRoot","collection"];s.extend(b.prototype,l,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(e){return s.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return s.escape(this.get(e))},has:function(e){return null!=this.get(e)},set:function(e,t,n){var i,a,o,r,l,c,u,p;if(null==e)return this;if("object"==typeof e?(a=e,n=t):(a={})[e]=t,n||(n={}),!this._validate(a,n))return!1;o=n.unset,l=n.silent,r=[],c=this._changing,this._changing=!0,c||(this._previousAttributes=s.clone(this.attributes),this.changed={}),p=this.attributes,u=this._previousAttributes,this.idAttribute in a&&(this.id=a[this.idAttribute]);for(i in a)t=a[i],s.isEqual(p[i],t)||r.push(i),s.isEqual(u[i],t)?delete this.changed[i]:this.changed[i]=t,o?delete p[i]:p[i]=t;if(!l){r.length&&(this._pending=!0);for(var d=0,b=r.length;d<b;d++)this.trigger("change:"+r[d],this,p[r[d]],n)}if(c)return this;if(!l)for(;this._pending;)this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,s.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var n in this.attributes)t[n]=void 0;return this.set(t,s.extend({},e,{unset:!0}))},hasChanged:function(e){return null==e?!s.isEmpty(this.changed):s.has(this.changed,e)},changedAttributes:function(e){if(!e)return!!this.hasChanged()&&s.clone(this.changed);var t,n=!1,i=this._changing?this._previousAttributes:this.attributes;for(var a in e)s.isEqual(i[a],t=e[a])||((n||(n={}))[a]=t);return n},previous:function(e){return null!=e&&this._previousAttributes?this._previousAttributes[e]:null},previousAttributes:function(){return s.clone(this._previousAttributes)},fetch:function(e){e=e?s.clone(e):{},void 0===e.parse&&(e.parse=!0);var t=this,n=e.success;return e.success=function(i){if(!t.set(t.parse(i,e),e))return!1;n&&n(t,i,e),t.trigger("sync",t,i,e)},M(this,e),this.sync("read",this,e)},save:function(e,t,n){var i,a,o,r=this.attributes;if(null==e||"object"==typeof e?(i=e,n=t):(i={})[e]=t,i&&(!n||!n.wait)&&!this.set(i,n))return!1;if(n=s.extend({validate:!0},n),!this._validate(i,n))return!1;i&&n.wait&&(this.attributes=s.extend({},r,i)),void 0===n.parse&&(n.parse=!0);var l=this,c=n.success;return n.success=function(e){l.attributes=r;var t=l.parse(e,n);if(n.wait&&(t=s.extend(i||{},t)),s.isObject(t)&&!l.set(t,n))return!1;c&&c(l,e,n),l.trigger("sync",l,e,n)},M(this,n),a=this.isNew()?"create":n.patch?"patch":"update","patch"===a&&(n.attrs=i),o=this.sync(a,this,n),i&&n.wait&&(this.attributes=r),o},destroy:function(e){e=e?s.clone(e):{};var t=this,n=e.success,i=function(){t.trigger("destroy",t,t.collection,e)};if(e.success=function(a){(e.wait||t.isNew())&&i(),n&&n(t,a,e),t.isNew()||t.trigger("sync",t,a,e)},this.isNew())return e.success(),!1;M(this,e);var a=this.sync("delete",this,e);return e.wait||i(),a},url:function(){var e=s.result(this,"urlRoot")||s.result(this.collection,"url")||L();return this.isNew()?e:e+("/"===e.charAt(e.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},isValid:function(e){return this._validate({},s.extend(e||{},{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=s.extend({},this.attributes,e);var n=this.validationError=this.validate(e,t)||null;return!n||(this.trigger("invalid",this,n,s.extend(t||{},{validationError:n})),!1)}});var h=["keys","values","pairs","invert","pick","omit"]
;s.each(h,function(e){b.prototype[e]=function(){var t=o.call(arguments);return t.unshift(this.attributes),s[e].apply(s,t)}});var m=e.Collection=function(e,t){t||(t={}),t.url&&(this.url=t.url),t.model&&(this.model=t.model),void 0!==t.comparator&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,s.extend({silent:!0},t))},v={add:!0,remove:!0,merge:!0},g={add:!0,merge:!1,remove:!1};s.extend(m.prototype,l,{model:b,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return e.sync.apply(this,arguments)},add:function(e,t){return this.set(e,s.defaults(t||{},g))},remove:function(e,t){e=s.isArray(e)?e.slice():[e],t||(t={});var n,i,a,o;for(n=0,i=e.length;n<i;n++)(o=this.get(e[n]))&&(delete this._byId[o.id],delete this._byId[o.cid],a=this.indexOf(o),this.models.splice(a,1),this.length--,t.silent||(t.index=a,o.trigger("remove",o,this,t)),this._removeReference(o));return this},set:function(e,t){t=s.defaults(t||{},v),t.parse&&(e=this.parse(e,t)),s.isArray(e)||(e=e?[e]:[]);var n,i,o,l,c,u=t.at,p=this.comparator&&null==u&&!1!==t.sort,d=s.isString(this.comparator)?this.comparator:null,b=[],f=[],h={};for(n=0,i=e.length;n<i;n++)(o=this._prepareModel(e[n],t))&&((l=this.get(o))?(t.remove&&(h[l.cid]=!0),t.merge&&(l.set(o.attributes,t),p&&!c&&l.hasChanged(d)&&(c=!0))):t.add&&(b.push(o),o.on("all",this._onModelEvent,this),this._byId[o.cid]=o,null!=o.id&&(this._byId[o.id]=o)));if(t.remove){for(n=0,i=this.length;n<i;++n)h[(o=this.models[n]).cid]||f.push(o);f.length&&this.remove(f,t)}if(b.length&&(p&&(c=!0),this.length+=b.length,null!=u?r.apply(this.models,[u,0].concat(b)):a.apply(this.models,b)),c&&this.sort({silent:!0}),t.silent)return this;for(n=0,i=b.length;n<i;n++)(o=b[n]).trigger("add",o,this,t);return c&&this.trigger("sort",this,t),this},reset:function(e,t){t||(t={});for(var n=0,i=this.models.length;n<i;n++)this._removeReference(this.models[n]);return t.previousModels=this.models,this._reset(),this.add(e,s.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),this},push:function(e,t){return e=this._prepareModel(e,t),this.add(e,s.extend({at:this.length},t)),e},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return e=this._prepareModel(e,t),this.add(e,s.extend({at:0},t)),e},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(e,t){return this.models.slice(e,t)},get:function(e){if(null!=e)return this._byId[null!=e.id?e.id:e.cid||e]},at:function(e){return this.models[e]},where:function(e,t){return s.isEmpty(e)?t?void 0:[]:this[t?"find":"filter"](function(t){for(var n in e)if(e[n]!==t.get(n))return!1;return!0})},findWhere:function(e){return this.where(e,!0)},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),s.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(s.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},sortedIndex:function(e,t,n){t||(t=this.comparator);var i=s.isFunction(t)?t:function(e){return e.get(t)};return s.sortedIndex(this.models,e,i,n)},pluck:function(e){return s.invoke(this.models,"get",e)},fetch:function(e){e=e?s.clone(e):{},void 0===e.parse&&(e.parse=!0);var t=e.success,n=this;return e.success=function(i){var a=e.reset?"reset":"set";n[a](i,e),t&&t(n,i,e),n.trigger("sync",n,i,e)},M(this,e),this.sync("read",this,e)},create:function(e,t){if(t=t?s.clone(t):{},!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var n=this,i=t.success;return t.success=function(a){t.wait&&n.add(e,t),i&&i(e,a,t)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(e instanceof b)return e.collection||(e.collection=this),e;t||(t={}),t.collection=this;var n=new this.model(e,t);return n._validate(e,t)?n:(this.trigger("invalid",this,e,t),!1)},_removeReference:function(e){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,i){("add"!==e&&"remove"!==e||n===this)&&("destroy"===e&&this.remove(t,i),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],null!=t.id&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments))}});var w=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","indexOf","shuffle","lastIndexOf","isEmpty","chain"];s.each(w,function(e){m.prototype[e]=function(){var t=o.call(arguments);return t.unshift(this.models),s[e].apply(s,t)}});var y=["groupBy","countBy","sortBy"];s.each(y,function(e){m.prototype[e]=function(t,n){var i=s.isFunction(t)?t:function(e){return e.get(t)};return s[e](this.models,i,n)}});var C=e.View=function(e){this.cid=s.uniqueId("view"),this._configure(e||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},x=/^(\S+)\s*(.*)$/,k=["model","collection","el","id","attributes","className","tagName","events"];s.extend(C.prototype,l,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(t,n){return this.$el&&this.undelegateEvents(),this.$el=t instanceof e.$?t:e.$(t),this.el=this.$el[0],!1!==n&&this.delegateEvents(),this},delegateEvents:function(e){if(!e&&!(e=s.result(this,"events")))return this;this.undelegateEvents();for(var t in e){var n=e[t];if(s.isFunction(n)||(n=this[e[t]]),n){var i=t.match(x),a=i[1],o=i[2];n=s.bind(n,this),a+=".delegateEvents"+this.cid,""===o?this.$el.on(a,n):this.$el.on(a,o,n)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_configure:function(e){this.options&&(e=s.extend({},s.result(this,"options"),e)),s.extend(this,s.pick(e,k)),this.options=e},_ensureElement:function(){if(this.el)this.setElement(s.result(this,"el"),!1);else{var t=s.extend({},s.result(this,"attributes"));this.id&&(t.id=s.result(this,"id")),this.className&&(t.class=s.result(this,"className"));var n=e.$("<"+s.result(this,"tagName")+">").attr(t);this.setElement(n,!1)}}}),e.sync=function(t,n,i){var a=I[t];s.defaults(i||(i={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var o={type:a,dataType:"json"};if(i.url||(o.url=s.result(n,"url")||L()),null!=i.data||!n||"create"!==t&&"update"!==t&&"patch"!==t||(o.contentType="application/json",o.data=JSON.stringify(i.attrs||n.toJSON(i))),i.emulateJSON&&(o.contentType="application/x-www-form-urlencoded",o.data=o.data?{model:o.data}:{}),i.emulateHTTP&&("PUT"===a||"DELETE"===a||"PATCH"===a)){o.type="POST",i.emulateJSON&&(o.data._method=a);var r=i.beforeSend;i.beforeSend=function(e){if(e.setRequestHeader("X-HTTP-Method-Override",a),r)return r.apply(this,arguments)}}"GET"===o.type||i.emulateJSON||(o.processData=!1),"PATCH"!==o.type||!window.ActiveXObject||window.external&&window.external.msActiveXFilteringEnabled||(o.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var l=i.xhr=e.ajax(s.extend(o,i));return n.trigger("request",n,l,i),l};var I={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var T=e.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},$=/\((.*?)\)/g,S=/(\(\?)?:\w+/g,q=/\*\w+/g,P=/[\-{}\[\]+?.,\\\^$|#\s]/g;s.extend(T.prototype,l,{initialize:function(){},route:function(t,n,i){s.isRegExp(t)||(t=this._routeToRegExp(t)),s.isFunction(n)&&(i=n,n=""),i||(i=this[n]);var a=this;return e.history.route(t,function(o){var r=a._extractParameters(t,o);i&&i.apply(a,r),a.trigger.apply(a,["route:"+n].concat(r)),a.trigger("route",n,r),e.history.trigger("route",a,n,r)}),this},navigate:function(t,n){return e.history.navigate(t,n),this},_bindRoutes:function(){if(this.routes){this.routes=s.result(this,"routes");for(var e,t=s.keys(this.routes);null!=(e=t.pop());)this.route(e,this.routes[e])}},_routeToRegExp:function(e){return e=e.replace(P,"\\$&").replace($,"(?:$1)?").replace(S,function(e,t){return t?e:"([^/]+)"}).replace(q,"(.*?)"),new RegExp("^"+e+"$")},_extractParameters:function(e,t){var n=e.exec(t).slice(1);return s.map(n,function(e){return e?decodeURIComponent(e):null})}});var A=e.History=function(){this.handlers=[],s.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},D=/^[#\/]|\s+$/g,j=/^\/+|\/+$/g,_=/msie [\w.]+/,E=/\/$/;A.started=!1,s.extend(A.prototype,l,{interval:50,getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(null==e)if(this._hasPushState||!this._wantsHashChange||t){e=this.location.pathname;var n=this.root.replace(E,"");e.indexOf(n)||(e=e.substr(n.length))}else e=this.getHash();return e.replace(D,"")},start:function(t){if(A.started)throw new Error("Backbone.history has already been started");A.started=!0,this.options=s.extend({},{root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=!1!==this.options.hashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var n=this.getFragment(),i=document.documentMode,a=_.exec(navigator.userAgent.toLowerCase())&&(!i||i<=7);this.root=("/"+this.root+"/").replace(j,"/"),a&&this._wantsHashChange&&(this.iframe=e.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(n)),this._hasPushState?e.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!a?e.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=n;var o=this.location,r=o.pathname.replace(/[^\/]$/,"$&/")===this.root;return this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!r?(this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0):(this._wantsPushState&&this._hasPushState&&r&&o.hash&&(this.fragment=this.getHash().replace(D,""),this.history.replaceState({},document.title,this.root+this.fragment+o.search)),this.options.silent?void 0:this.loadUrl())},stop:function(){e.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),A.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();if(t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe))),t===this.fragment)return!1;this.iframe&&this.navigate(t),this.loadUrl()||this.loadUrl(this.getHash())},loadUrl:function(e){var t=this.fragment=this.getFragment(e);return s.any(this.handlers,function(e){if(e.route.test(t))return e.callback(t),!0})},navigate:function(e,t){if(!A.started)return!1;if(t&&!0!==t||(t={trigger:t}),e=this.getFragment(e||""),this.fragment!==e){this.fragment=e;var n=this.root+e;if(this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}t.trigger&&this.loadUrl(e)}},_updateHash:function(e,t,n){if(n){var i=e.href.replace(/(javascript:|#).*$/,"");e.replace(i+"#"+t)}else e.hash="#"+t}}),e.history=new A;var N=function(e,t){var n,i=this;n=e&&s.has(e,"constructor")?e.constructor:function(){return i.apply(this,arguments)},s.extend(n,i,t);var a=function(){this.constructor=n};return a.prototype=i.prototype,n.prototype=new a,e&&s.extend(n.prototype,e),n.__super__=i.prototype,n};b.extend=m.extend=T.extend=C.extend=A.extend=N;var L=function(){throw new Error('A "url" property or function must be specified')},M=function(e,t){var n=t.error;t.error=function(i){n&&n(e,i,t),e.trigger("error",e,i,t)}};window.$pubbBackbone=e}.call(this),pubblebot.define("backbone",["underscore","jQueryPB"],function(e){return function(){return e.Backbone}}(this));var LZString=function(){function e(e,t){if(!a[e]){a[e]={};for(var n=0;n<e.length;n++)a[e][e.charAt(n)]=n}return a[e][t]}var t=String.fromCharCode,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",a={},o={compressToBase64:function(e){if(null==e)return"";var t=o._compress(e,6,function(e){return n.charAt(e)});switch(t.length%4){default:case 0:return t;case 1:return t+"===";case 2:return t+"==";case 3:return t+"="}},decompressFromBase64:function(t){return null==t?"":""==t?null:o._decompress(t.length,32,function(i){return e(n,t.charAt(i))})},compressToUTF16:function(e){return null==e?"":o._compress(e,15,function(e){return t(e+32)})+" "},decompressFromUTF16:function(e){return null==e?"":""==e?null:o._decompress(e.length,16384,function(t){return e.charCodeAt(t)-32})},compressToUint8Array:function(e){for(var t=o.compress(e),n=new Uint8Array(2*t.length),i=0,a=t.length;a>i;i++){var r=t.charCodeAt(i);n[2*i]=r>>>8,n[2*i+1]=r%256}return n},decompressFromUint8Array:function(e){if(null===e||void 0===e)return o.decompress(e);for(var n=new Array(e.length/2),i=0,a=n.length;a>i;i++)n[i]=256*e[2*i]+e[2*i+1];var r=[];return n.forEach(function(e){r.push(t(e))}),o.decompress(r.join(""))},compressToEncodedURIComponent:function(e){return null==e?"":o._compress(e,6,function(e){return i.charAt(e)})},decompressFromEncodedURIComponent:function(t){return null==t?"":""==t?null:(t=t.replace(/ /g,"+"),o._decompress(t.length,32,function(n){return e(i,t.charAt(n))}))},compress:function(e){return o._compress(e,16,function(e){return t(e)})},_compress:function(e,t,n){if(null==e)return"";var i,a,o,r={},s={},l="",c="",u="",p=2,d=3,b=2,f=[],h=0,m=0;for(o=0;o<e.length;o+=1)if(l=e.charAt(o),Object.prototype.hasOwnProperty.call(r,l)||(r[l]=d++,s[l]=!0),c=u+l,Object.prototype.hasOwnProperty.call(r,c))u=c;else{if(Object.prototype.hasOwnProperty.call(s,u)){if(u.charCodeAt(0)<256){for(i=0;b>i;i++)h<<=1,m==t-1?(m=0,f.push(n(h)),h=0):m++;for(a=u.charCodeAt(0),i=0;8>i;i++)h=h<<1|1&a,m==t-1?(m=0,f.push(n(h)),h=0):m++,a>>=1}else{for(a=1,i=0;b>i;i++)h=h<<1|a,m==t-1?(m=0,f.push(n(h)),h=0):m++,a=0;for(a=u.charCodeAt(0),i=0;16>i;i++)h=h<<1|1&a,m==t-1?(m=0,f.push(n(h)),h=0):m++,a>>=1}p--,0==p&&(p=Math.pow(2,b),b++),delete s[u]}else for(a=r[u],i=0;b>i;i++)h=h<<1|1&a,m==t-1?(m=0,f.push(n(h)),h=0):m++,a>>=1;p--,0==p&&(p=Math.pow(2,b),b++),r[c]=d++,u=String(l)}if(""!==u){if(Object.prototype.hasOwnProperty.call(s,u)){if(u.charCodeAt(0)<256){for(i=0;b>i;i++)h<<=1,m==t-1?(m=0,f.push(n(h)),h=0):m++;for(a=u.charCodeAt(0),i=0;8>i;i++)h=h<<1|1&a,m==t-1?(m=0,f.push(n(h)),h=0):m++,a>>=1}else{for(a=1,i=0;b>i;i++)h=h<<1|a,m==t-1?(m=0,f.push(n(h)),h=0):m++,a=0;for(a=u.charCodeAt(0),i=0;16>i;i++)h=h<<1|1&a,m==t-1?(m=0,f.push(n(h)),h=0):m++,a>>=1}p--,0==p&&(p=Math.pow(2,b),b++),delete s[u]}else for(a=r[u],i=0;b>i;i++)h=h<<1|1&a,m==t-1?(m=0,f.push(n(h)),h=0):m++,a>>=1;0==--p&&(p=Math.pow(2,b),b++)}for(a=2,i=0;b>i;i++)h=h<<1|1&a,m==t-1?(m=0,f.push(n(h)),h=0):m++,a>>=1;for(;;){if(h<<=1,m==t-1){f.push(n(h));break}m++}return f.join("")},decompress:function(e){return null==e?"":""==e?null:o._decompress(e.length,32768,function(t){return e.charCodeAt(t)})},_decompress:function(e,n,i){var a,o,r,s,l,c,u,p=[],d=4,b=4,f=3,h="",m=[],v={val:i(0),position:n,index:1};for(a=0;3>a;a+=1)p[a]=a;for(r=0,l=Math.pow(2,2),c=1;c!=l;)s=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=i(v.index++)),r|=(s>0?1:0)*c,c<<=1;switch(r){case 0:for(r=0,l=Math.pow(2,8),c=1;c!=l;)s=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=i(v.index++)),r|=(s>0?1:0)*c,c<<=1;u=t(r);break;case 1:for(r=0,l=Math.pow(2,16),c=1;c!=l;)s=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=i(v.index++)),r|=(s>0?1:0)*c,c<<=1;u=t(r);break;case 2:return""}for(p[3]=u,o=u,m.push(u);;){if(v.index>e)return"";for(r=0,l=Math.pow(2,f),c=1;c!=l;)s=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=i(v.index++)),r|=(s>0?1:0)*c,c<<=1;switch(u=r){case 0:for(r=0,l=Math.pow(2,8),c=1;c!=l;)s=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=i(v.index++)),r|=(s>0?1:0)*c,c<<=1;p[b++]=t(r),u=b-1,d--;break;case 1:for(r=0,l=Math.pow(2,16),c=1;c!=l;)s=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=i(v.index++)),r|=(s>0?1:0)*c,c<<=1;p[b++]=t(r),u=b-1,d--;break;case 2:return m.join("")}if(0==d&&(d=Math.pow(2,f),f++),p[u])h=p[u];else{if(u!==b)return null;h=o+o.charAt(0)}m.push(h),p[b++]=o+h.charAt(0),d--,o=h,0==d&&(d=Math.pow(2,f),f++)}}};return o}();"function"==typeof pubblebot.define&&pubblebot.define.amd?pubblebot.define("utils/zip",[],function(){return LZString}):"undefined"!=typeof module&&null!=module&&(module.exports=LZString);var Hashids=function(){"use strict";function e(e,t,n){var i,a,o,r,s,l,c;for(this.version="1.0.2",this.minAlphabetLength=16,this.sepDiv=3.5,this.guardDiv=12,this.errorAlphabetLength="error: alphabet must contain at least X unique characters",this.errorAlphabetSpace="error: alphabet cannot contain spaces",this.alphabet="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890",this.seps="cfhistuCFHISTU",this.minHashLength=parseInt(t,10)>0?t:0,this.salt="string"==typeof e?e:"","string"==typeof n&&(this.alphabet=n),i="",a=0,r=this.alphabet.length;a!==r;a++)-1===i.indexOf(this.alphabet.charAt(a))&&(i+=this.alphabet.charAt(a));if(this.alphabet=i,this.alphabet.length<this.minAlphabetLength)throw this.errorAlphabetLength.replace("X",this.minAlphabetLength);if(-1!==this.alphabet.search(" "))throw this.errorAlphabetSpace;for(a=0,r=this.seps.length;a!==r;a++)o=this.alphabet.indexOf(this.seps.charAt(a)),-1===o?this.seps=this.seps.substr(0,a)+" "+this.seps.substr(a+1):this.alphabet=this.alphabet.substr(0,o)+" "+this.alphabet.substr(o+1);this.alphabet=this.alphabet.replace(/ /g,""),this.seps=this.seps.replace(/ /g,""),this.seps=this.consistentShuffle(this.seps,this.salt),(!this.seps.length||this.alphabet.length/this.seps.length>this.sepDiv)&&(s=Math.ceil(this.alphabet.length/this.sepDiv),1===s&&s++,s>this.seps.length?(l=s-this.seps.length,this.seps+=this.alphabet.substr(0,l),this.alphabet=this.alphabet.substr(l)):this.seps=this.seps.substr(0,s)),this.alphabet=this.consistentShuffle(this.alphabet,this.salt),c=Math.ceil(this.alphabet.length/this.guardDiv),this.alphabet.length<3?(this.guards=this.seps.substr(0,c),this.seps=this.seps.substr(c)):(this.guards=this.alphabet.substr(0,c),this.alphabet=this.alphabet.substr(c))}return e.prototype.encode=function(){var e,t,n=Array.prototype.slice.call(arguments);if(!n.length)return"";for(n[0]instanceof Array&&(n=n[0]),e=0,t=n.length;e!==t;e++)if("number"!=typeof n[e]||n[e]%1!=0||n[e]<0)return"";return this._encode(n)},e.prototype.decode=function(e){var t=[];return e.length&&"string"==typeof e?this._decode(e,this.alphabet):t},e.prototype.encodeHex=function(e){var t,n,i;if(e=e.toString(),!/^[0-9a-fA-F]+$/.test(e))return"";for(i=e.match(/[\w\W]{1,12}/g),t=0,n=i.length;t!==n;t++)i[t]=parseInt("1"+i[t],16);return this.encode.apply(this,i)},e.prototype.decodeHex=function(e){var t,n,i=[],a=this.decode(e);for(t=0,n=a.length;t!==n;t++)i+=a[t].toString(16).substr(1);return i},e.prototype._encode=function(e){var t,n,i,a,o,r,s,l,c,u,p,d,b=this.alphabet,f=e.length,h=0;for(i=0,a=e.length;i!==a;i++)h+=e[i]%(i+100);for(n=t=b.charAt(h%b.length),i=0,a=e.length;i!==a;i++)o=e[i],r=n+this.salt+b,b=this.consistentShuffle(b,r.substr(0,b.length)),s=this.hash(o,b),t+=s,i+1<f&&(o%=s.charCodeAt(0)+i,l=o%this.seps.length,t+=this.seps.charAt(l));for(t.length<this.minHashLength&&(c=(h+t[0].charCodeAt(0))%this.guards.length,u=this.guards[c],t=u+t,t.length<this.minHashLength&&(c=(h+t[2].charCodeAt(0))%this.guards.length,u=this.guards[c],t+=u)),p=parseInt(b.length/2,10);t.length<this.minHashLength;)b=this.consistentShuffle(b,b),t=b.substr(p)+t+b.substr(0,p),(d=t.length-this.minHashLength)>0&&(t=t.substr(d/2,this.minHashLength));return t},e.prototype._decode=function(e,t){var n,i,a,o,r=[],s=0,l=new RegExp("["+this.guards+"]","g"),c=e.replace(l," "),u=c.split(" ");if(3!==u.length&&2!==u.length||(s=1),c=u[s],void 0!==c[0]){for(n=c[0],c=c.substr(1),l=new RegExp("["+this.seps+"]","g"),c=c.replace(l," "),u=c.split(" "),s=0,i=u.length;s!==i;s++)a=u[s],o=n+this.salt+t,t=this.consistentShuffle(t,o.substr(0,t.length)),r.push(this.unhash(a,t));this._encode(r)!==e&&(r=[])}return r},e.prototype.consistentShuffle=function(e,t){var n,i,a,o,r,s;if(!t.length)return e;for(o=e.length-1,r=0,s=0;o>0;o--,r++)r%=t.length,s+=n=t.charAt(r).charCodeAt(0),i=(n+r+s)%o,a=e.charAt(i),e=e.substr(0,i)+e.charAt(o)+e.substr(i+1),e=e.substr(0,o)+a+e.substr(o+1);return e},e.prototype.hash=function(e,t){var n="",i=t.length;do{n=t.charAt(e%i)+n,e=parseInt(e/i,10)}while(e);return n},e.prototype.unhash=function(e,t){var n,i,a=0;for(i=0;i<e.length;i++)n=t.indexOf(e[i]),a+=n*Math.pow(t.length,e.length-i-1);return a},"function"==typeof pubblebot.define&&"object"==typeof pubblebot.define.amd&&pubblebot.define.amd&&pubblebot.define("utils/hashids",[],function(){return e}),e}();pubblebot.define("utils/sizedecoder",["utils/hashids"],function(e){return new e("nodejsisawesome",8,"abcdefghijklmnopqrstuvwxyz1234567890")}),pubblebot.define("utils/storage",["jQueryPB","utils/zip","utils/sizedecoder"],function(e,t,n){function i(t){var n,i,a,o=arguments.length,r=window[t],s=arguments,l=s[1];if(o<2)throw new Error("Minimum 2 arguments must be given");if(e.isArray(l)){i={};for(var c in l){n=l[c];try{i[n]=JSON.parse(r.getItem(n))}catch(e){i[n]=r.getItem(n)}}return i}if(2!=o){try{i=JSON.parse(r.getItem(l))}catch(e){throw new ReferenceError(l+" is not defined in this storage")}for(var c=2;c<o-1;c++)if(void 0===(i=i[s[c]]))throw new ReferenceError([].slice.call(s,1,c+1).join(".")+" is not defined in this storage");if(e.isArray(s[c])){a=i,i={};for(var u in s[c])i[s[c][u]]=a[s[c][u]];return i}return i[s[c]]}try{return JSON.parse(r.getItem(l))}catch(e){return r.getItem(l)}}function a(t){var n,i,a=arguments.length,o=window[t],r=arguments,s=r[1],l=r[2],c={};if(a<2||!e.isPlainObject(s)&&a<3)throw new Error("Minimum 3 arguments must be given or second parameter must be an object");if(e.isPlainObject(s)){for(var u in s)n=s[u],e.isPlainObject(n)?o.setItem(u,JSON.stringify(n)):o.setItem(u,n);return s}if(3==a)return"object"==typeof l?o.setItem(s,JSON.stringify(l)):o.setItem(s,l),l;try{i=o.getItem(s),null!=i&&(c=JSON.parse(i))}catch(e){}i=c;for(var u=2;u<a-2;u++)n=r[u],i[n]&&e.isPlainObject(i[n])||(i[n]={}),i=i[n];return i[r[u]]=r[u+1],o.setItem(s,JSON.stringify(c)),c}function o(t){var n,i,a=arguments.length,o=window[t],r=arguments,s=r[1];if(a<2)throw new Error("Minimum 2 arguments must be given");if(e.isArray(s)){for(var l in s)o.removeItem(s[l]);return!0}if(2==a)return o.removeItem(s),!0;try{n=i=JSON.parse(o.getItem(s))}catch(e){throw new ReferenceError(s+" is not defined in this storage")}for(var l=2;l<a-1;l++)if(void 0===(i=i[r[l]]))throw new ReferenceError([].slice.call(r,1,l).join(".")+" is not defined in this storage");if(e.isArray(r[l]))for(var c in r[l])delete i[r[l][c]];else delete i[r[l]];return o.setItem(s,JSON.stringify(n)),!0}function r(t,n){var i=c(t);for(var a in i)o(t,i[a]);if(n)for(var a in e.namespaceStorages)u(a)}function s(t){var n=arguments.length,a=arguments,o=(window[t],a[1]);if(1==n)return 0==c(t).length;if(e.isArray(o)){for(var r=0;r<o.length;r++)if(!s(t,o[r]))return!1;return!0}try{var l=i.apply(this,arguments);e.isArray(a[n-1])||(l={totest:l});for(var r in l)if(!(e.isPlainObject(l[r])&&e.isEmptyObject(l[r])||e.isArray(l[r])&&!l[r].length)&&l[r])return!1;return!0}catch(e){return!0}}function l(t){var n=arguments.length,a=arguments,o=(window[t],a[1]);if(n<2)throw new Error("Minimum 2 arguments must be given");if(e.isArray(o)){for(var r=0;r<o.length;r++)if(!l(t,o[r]))return!1;return!0}try{var s=i.apply(this,arguments);e.isArray(a[n-1])||(s={totest:s});for(var r in s)if(void 0===s[r]||null===s[r])return!1;return!0}catch(e){return!1}}function c(t){var n=arguments.length,a=window[t],o=arguments,r=(o[1],[]),s={};if(s=n>1?i.apply(this,o):a,s._cookie)for(var l in e.cookie())""!=l&&r.push(l.replace(s._prefix,""));else for(var c in s)r.push(c);return r}function u(t){if(!t||"string"!=typeof t)throw new Error("First parameter must be a string");p?(window.localStorage.getItem(t)||window.localStorage.setItem(t,"{}"),window.sessionStorage.getItem(t)||window.sessionStorage.setItem(t,"{}")):(window.localCookieStorage.getItem(t)||window.localCookieStorage.setItem(t,"{}"),window.sessionCookieStorage.getItem(t)||window.sessionCookieStorage.setItem(t,"{}"));var n={localStorage:e.extend({},e.localStorage,{_ns:t}),sessionStorage:e.extend({},e.sessionStorage,{_ns:t})};return e.cookie&&(window.cookieStorage.getItem(t)||window.cookieStorage.setItem(t,"{}"),n.cookieStorage=e.extend({},e.cookieStorage,{_ns:t})),e.namespaceStorages[t]=n,n}var e=window.jQueryPBm,p=function(e){if(!window[e])return!1;try{return window[e].setItem("jsapi","jsapi"),window[e].removeItem("jsapi"),!0}catch(e){return!1}}("localStorage"),d={_type:"",_ns:"",_callMethod:function(e,t){var n=[this._type],t=Array.prototype.slice.call(t),i=t[0];return this._ns&&n.push(this._ns),"string"==typeof i&&-1!==i.indexOf(".")&&(t.shift(),[].unshift.apply(t,i.split("."))),[].push.apply(n,t),e.apply(this,n)},get:function(){return this._callMethod(i,arguments)},set:function(){var t=arguments.length,n=arguments,i=n[0];if(t<1||!e.isPlainObject(i)&&t<2)throw new Error("Minimum 2 arguments must be given or first parameter must be an object");if(e.isPlainObject(i)&&this._ns){for(var o in i)a(this._type,this._ns,o,i[o]);return i}var r=this._callMethod(a,n);return this._ns?r[i.split(".")[0]]:r},remove:function(){if(arguments.length<1)throw new Error("Minimum 1 argument must be given");return this._callMethod(o,arguments)},removeAll:function(e){return this._ns?(a(this._type,this._ns,{}),!0):r(this._type,e)},isEmpty:function(){return this._callMethod(s,arguments)},isSet:function(){if(arguments.length<1)throw new Error("Minimum 1 argument must be given");return this._callMethod(l,arguments)},keys:function(){return this._callMethod(c,arguments)}};if(e.cookie){window.name||(window.name=Math.floor(1e8*Math.random()));var b={_cookie:!0,_prefix:"",_expires:null,_path:null,_domain:null,setItem:function(t,n){e.cookie(this._prefix+t,n,{expires:this._expires,path:this._path,domain:this._domain})},getItem:function(t){return e.cookie(this._prefix+t)},removeItem:function(t){return e.removeCookie(this._prefix+t)},clear:function(){for(var t in e.cookie())""!=t&&(!this._prefix&&-1===t.indexOf("ls_")&&-1===t.indexOf("ss_")||this._prefix&&0===t.indexOf(this._prefix))&&e.removeCookie(t)},setExpires:function(e){return this._expires=e,this},setPath:function(e){return this._path=e,this},setDomain:function(e){return this._domain=e,this},setConf:function(e){return e.path&&(this._path=e.path),e.domain&&(this._domain=e.domain),e.expires&&(this._expires=e.expires),this},setDefaultConf:function(){this._path=this._domain=this._expires=null}};p||(window.localCookieStorage=e.extend({},b,{_prefix:"ls_",_expires:3650}),window.sessionCookieStorage=e.extend({},b,{_prefix:"ss_"+window.name+"_"})),window.cookieStorage=e.extend({},b),e.cookieStorage=e.extend({},d,{_type:"cookieStorage",setExpires:function(e){return window.cookieStorage.setExpires(e),this},setPath:function(e){return window.cookieStorage.setPath(e),this},setDomain:function(e){return window.cookieStorage.setDomain(e),this},setConf:function(e){return window.cookieStorage.setConf(e),this},setDefaultConf:function(){return window.cookieStorage.setDefaultConf(),this}})}e.initNamespaceStorage=function(e){return u(e)},p?(e.localStorage=e.extend({},d,{_type:"localStorage"}),e.sessionStorage=e.extend({},d,{_type:"sessionStorage"})):(e.localStorage=e.extend({},d,{_type:"localCookieStorage"}),e.sessionStorage=e.extend({},d,{_type:"sessionCookieStorage"})),e.namespaceStorages={},e.removeAllStorages=function(t){e.localStorage.removeAll(t),e.sessionStorage.removeAll(t),e.cookieStorage&&e.cookieStorage.removeAll(t),t||(e.namespaceStorages={})};var d={version:"v1223.01",dd:function(){return e.localStorage},remove:function(e){this.dd().remove(e)},clearAll:function(){for(var e in window.localStorage)if(window.localStorage.hasOwnProperty(e)&&"alert_version"!=e&&"init_app"!=e&&"bubbleStyle"!=e&&"selectedChannel"!=e&&"help_read"!=e&&"signincheck"!=e&&"mod_sound"!=e&&"tour_read"!=e&&"lastSeen"!=e&&"cachedTask"!=e&&"ma_token"!=e&&"no-desktop-notif"!=e){if("_"==e.substring(0,1))return!0;void 0!=this.dd()&&null!=this.dd()&&this.dd().remove(e)}},set:function(e,t){"pb-conversationId"==e&&(t=this.evalue(t,"761201")),this.dd().set(e,t)},get:function(e){var t=this.dd().get(e);return null==t?t:"pb-conversationId"==e?this.evalue(t,"761201"):t},evalue:function(e,t){var n="";e.toString();for(var i=0;i<e.length;i++){var a=e.charCodeAt(i),o=a^t;n+=String.fromCharCode(o)}return n}};return d}),pubblebot.define("utils/appConfig",["jQueryPB","utils/storage","utils/utils"],function(e,t,n){var i=(window.jQueryPBm,{get:function(e){var n=window.pubbleLoader;if(void 0==n)try{n=window.parent.pubbleLoader}catch(e){}if(void 0!=n&&n.apps)for(var a=n.apps,o=0;o<a.length;o++){var r=a[o];if(r.appType==e){window.lpQA||(lpQA={}),lpQA.config||(lpQA.config={});for(var s in r)lpQA.config[s]=r[s];i.config=r,i.invitePushed=0,i.servers=n.servers,i.config.appID=i.config.parameters.appId,i.config.parameters.title="Live Chat, Simplified.",i.config.parameters.conversations=[],i.config.parameters.desc="Make your website work harder for less with oureasy to use live chat software.",i.config.parameters.headerOption=1,"888"==i.config.communityId&&(i.isPubble=1);var l=t.get("visitor-id-"+i.config.appID);null!=l&&(i.config.visitorId=l),i.config.parameters.activeUsers&&null!=i.config.parameters.activeUsers||(i.config.parameters.activeUsers=[]),i.config.parameters.rules&&null!=i.config.parameters.rules||(i.config.parameters.rules=[]);var c=i.config.parameters.activeProfile;"azure-prod"==c&&(i.isAzureProd=1),i.config.eventCategory="pubble-messenger";var u=i.config.parameters.displayTitle;return u&&null!=u&&""!=u&&u.indexOf("###")>-1&&(i.config.parameters.displayTitle=u.replace("###",""),i.config.communityName=u.replace("###","")),i.config.appID}}else i.config=lpQA.config,i.servers=lpQA.servers;return null}});return i}),pubblebot.define("utils/i18n",["underscore","utils/utils","utils/appConfig"],function(e,t,n){var i=!1;return{getText:function(e){try{var t=window.chatify_i18n;if(void 0===t&&(t=window.parent.chatify_i18n),void 0===window.chatify_i18n)return window.chatify_i18n=[],window.chatify_i18n.qa=[],window.chatify_i18n.qa.strings=[],e;if(!i){i=!0,window.chatify_i18n.qa.strings2=[];for(var n in window.chatify_i18n.qa.strings)window.chatify_i18n.qa.strings2[n.toLowerCase()]=window.chatify_i18n.qa.strings[n]}return void 0!=t&&window.chatify_i18n.qa?window.chatify_i18n.qa.strings[e]&&null!==window.chatify_i18n.qa.strings[e]&&""!==window.chatify_i18n.qa.strings[e]?window.chatify_i18n.qa.strings[e]:""!==window.chatify_i18n.qa.strings2[e.toLowerCase()]&&window.chatify_i18n.qa.strings2[e.toLowerCase()]?window.chatify_i18n.qa.strings2[e.toLowerCase()]:e:e}catch(t){return e}}}}),pubblebot.define("utils/utils",["jQueryPB","utils/appConfig","utils/storage","utils/i18n"],function(e,t,n,i){var e=window.jQueryPBm,a=new Array(7);a[0]="Sunday",a[1]="Monday",a[2]="Tuesday",a[3]="Wednesday",a[4]="Thursday",a[5]="Friday",a[6]="Saturday",e.extend({
playSound:function(){try{document.getElementById("pqmq-beep").muted=!1,document.getElementById("pqmq-beep").play()}catch(e){}},stopSound:function(){e(".sound-player").remove()}}),Array.prototype.includes||(Array.prototype.includes=function(e){"use strict";if(null==this)throw new TypeError("Array.prototype.includes called on null or undefined");var t=Object(this),n=parseInt(t.length,10)||0;if(0===n)return!1;var i,a=parseInt(arguments[1],10)||0;a>=0?i=a:(i=n+a)<0&&(i=0);for(var o;i<n;){if(o=t[i],e===o||e!==e&&o!==o)return!0;i++}return!1}),String.prototype.replaceAll||(String.prototype.replaceAll=function(e,t){return this.replace(new RegExp(e,"gm"),t)}),String.prototype.contains||(String.prototype.contains=function(e){return this.indexOf(e)>-1}),String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return t=t||0,this.indexOf(e,t)===t}),String.prototype.endsWith||(String.prototype.endsWith=function(e,t){var n=this.toString();("number"!=typeof t||!isFinite(t)||Math.floor(t)!==t||t>n.length)&&(t=n.length),t-=e.length;var i=n.indexOf(e,t);return-1!==i&&i===t});var o={availToPost:function(){if(!t.config.parameters.disableOutOfHours)return 1;var e=new Date,n=t.config.parameters.operatingSchedule;if(null==n)return 1;if(null==n.operatingHours24HourClock||null==n.timezoneName)return 1;var i=n.operatingHours24HourClock,o=n.timezoneName,r=1;try{var s=e.toLocaleString("ja",{timeZone:o}),l=new Date(s).getDay(),c=s.split(/[/\s:]/);1==c[3].length&&(c[3]="0"+c[3]);var u=c[3]+":"+c[4],p=a[l],d=i[p];if(d){var b=d[0],f=d[1];r=u>=b&&u<f?1:0}else r=0}catch(e){}return r},myAddEvent:function(e,t,n){e.attachEvent?e.attachEvent("on"+t,n):e.addEventListener(t,n,!1)},showView:function(e,t){e.removeClass("pubble-hide"),e.removeClass("pubble-off"),o.addClass(e,"pubble-show"),e.attr("aria-hidden",!1),t&&"style"==t&&e.removeAttr("style")},hideView:function(e,t,n){e.removeClass("pubble-show"),t?o.addClass(e,"pubble-off"):o.addClass(e,"pubble-hide"),e.attr("aria-hidden",!0),n&&"style"==n&&e.attr("style","display:none")},safeContent:function(e){return e&&(e=e.replace("onerror=prompt(/XSSPOSED/)",""),e=e.replace("onload=prompt(/XSSPOSED/)",""),e=e.replace("prompt(/XSSPOSED/)","")),e},getFilterLandingPage:function(){var e=o.getLandingPage();return e||(e=document.referrer),e=decodeURIComponent(e.replace(/\+/g,"%20")),e=o.filterPubbleParas(e)},filterPubbleParas:function(e){return e=this.removeParameter(e,"PPBCID"),e=this.removeParameter(e,"visitor"),e=this.removeParameter(e,"PPBUID"),e=this.removeParameter(e,"PPBLINK"),e=this.removeParameter(e,"myenquiry"),e=this.removeParameter(e,"PPBCT"),e=this.removeParameter(e,"PPBCT"),e=this.removeParameter(e,"PPBLINK"),e=this.removeParameter(e,"PPBAID"),e=e.replace("#myenquiry",""),e=e.replace(/\?\s*$/,"")},removeParameter:function(e,t){var n=e.split("#"),i=new RegExp("([?&])"+t+"=.*?(&|#|$)","i");return n[0].match(i)&&(e=n[0].replace(i,"$1"),e=e.replace(/([?&])$/,""),void 0!==n[1]&&null!==n[1]&&(e+="#"+n[1])),e},isInside:function(e,t,n){return 1==e.parents(t).length||e.hasClass(t)||e.hasClass(n)},getTempId:function(){return Math.floor(999999999*Math.random())},contains:function(e,t){if(!e)return!1;for(var n=e.length;n--;)if(e[n]===t)return!0;return!1},fixMobileBody:function(t){o.isMobile()&&(t?o.addClass(e("body"),"pubble-mobile-body"):e("body").removeClass("pubble-mobile-body"))},getRefer:function(){var e="";try{e=window.top.document.referrer}catch(t){if(window.parent)try{e=window.parent.document.referrer}catch(t){e=""}}return""===e&&(e=document.referrer),e},getURL:function(){return window.parent?window.parent.location.href:window.location.href},isMobile:function(){var e=0;return function(t){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|android|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=1)}(navigator.userAgent||navigator.vendor||window.opera),e},mixlog:function(e,t,n){return!1},gtmTrack:function(e,n){try{var i;if(i=e?window[e]:window.dataLayer,i||window.location.href==window.parent.location.href||(i=e?window.parent[e]:window.parent.dataLayer),!i)return!1;var a="pubble_live_qa";"BL"==t.config.appType&&(a="pubble_live_blog"),i.push({event:a,chatifyEvent:n})}catch(e){}},handleUrlVal:function(e){return e=e.replace(/PPBUID\=([^&]+)/,"").replace(/PPBCID\=([^&]+)/,"").replace(/visitor\=false/,"").replace(/PPBLINK\=([^&]+)/,"").replace(/PPBPID\=([^&]+)/,""),e.endsWith("&")&&(e=e.substring(0,e.length-1)),e.endsWith("&")&&(e=e.substring(0,e.length-1)),e.endsWith("&")&&(e=e.substring(0,e.length-1)),e.endsWith("&")&&(e=e.substring(0,e.length-1)),e.endsWith("?")&&(e=e.substring(0,e.length-1)),e},handleURLBB:function(e){var t=/\[url=mailto:(.*?)\](.*?)\[\/url\]/g;e=e.replace(t,"$1"),t=/\[b\](.*?)\[\/b\]/g,e=e.replace(t,"<b>$1</b>"),t=/\[i\](.*?)\[\/i\]/g,e=e.replace(t,"<i>$1</i>"),t=/\[u\](.*?)\[\/u\]/g,e=e.replace(t,"<u>$1</u>"),t=/\[strike\](.*?)\[\/strike\]/g,e=e.replace(t,"<s>$1</s>");var t=/\[url=(.*?)\](.*?)\[\/url\]/g;return e=e.replace(t,'<a href="$1" class="pubui-inpost-link" target="_blank" tabindex="-1">$2</a>')},isMsStack:function(){var e=(t.config.parameters.activeProfile,t.config.parameters);return!(!e||"azure-ms"!=e.activeProfile)||(e&&(e=e.community),e&&(e=e.shortName),"microsoft"==e||"uat"==e||"include"==e||"learntv"==e||"inspire"==e||"opus"==e||"ignite"==e||"ces"==e)},handleURL:function(e){if(!e)return"";var t=/\[(\#\@\$faq)\|(.*?)\%\]/g;return e=e.replace(t,"FAQ"),t=/\[(%faq)\|(.*?)\%\]/g,e=e.replace(t,"FAQ"),e=o.handleURLBB(e),t=/\[(.*?)\|(.*?)\]/g,e=e.replace(t,'<a href="$1" target="_blank" tabindex="-1">$2</a>')},headerText:function(){var e=t.config.parameters.displayTitle;return e&&null!=e?e:t.config.communityName},playSound:function(){e.playSound()},invokeConversationHandler:function(e,t){try{var n=window.top.chatifyConversationHandler;"function"==typeof n&&n(e,t)}catch(e){}},getLandingPage:function(){var e=window.location.href;try{e=window.location.href!=window.parent.location.href?window.parent.location.href:window.location.href}catch(e){}return e},wrapEnterkey:function(t){t.keypress(function(t){if(t.stopPropagation(),13==(t.keyCode?t.keyCode:t.which))return e(t.target).trigger("click"),!1})},getPrevByCls:function(e,t,n,i){return i?(e=e.next(),e.hasClass(n)?e.hasClass(t)?e:this.getPrevByCls(e,t,n,i):null):(e=e.prev(),e.hasClass(n)?e.hasClass(t)?e:this.getPrevByCls(e,t,n,i):null)},eventWrapper:function(t){t.on("keydown",function(n){n.stopPropagation();var i=n.keyCode?n.keyCode:n.which,a=e(n.target);if(13==i&&!a.altKey)return t.trigger("click"),!1})},handleContainer:function(n,i){var a=t.isMobile;try{if(top.location!=location){var r=e(top.document).find(".pubble-iframe"),s="right:0;border: none; display: block;  position: fixed; top: auto;  bottom: 0px; visibility: visible; z-index: 2147483647; max-height: 100vh; max-width: 100vw; transition: none 0s ease 0s; background: none transparent; opacity: 1;",s="border: none; display: block;  position: fixed; top: auto; bottom: 0px; visibility: visible; z-index: 2147483647; max-height: 100vh;max-width: 100vw; transition: none 0s ease 0s; background: none transparent; opacity: 1;";"bl"!=t.config.parameters.sidebarPosition?s+="left: auto; right: 0px;":s+="right: auto; left: 0px;",i?(a&&r.attr("style","margin:0; border: none; display: block;  position: fixed; top: 0px;  bottom: 0px; visibility: visible; z-index: 2147483647; max-height: none; max-width: none; transition: none 0s ease 0s; background: none transparent; opacity: 1;left: 0px; right: 0px;height: 100% !important; width: 100% !important;"),o.addClass(r,"pubble-iframe-expanded")):(a&&r.attr("style",s),r.removeClass("pubble-iframe-expanded"))}}catch(e){}},getAppIdFromUrl:function(){var e=o.getLandingPage();e.indexOf("#")>-1&&(e=e.substring(0,e.indexOf("#")));var t=new RegExp("PPBAID=([^&]+)?","i");if(t.test(e)){var n=RegExp.$1;return n.indexOf("PPBAID")>-1?(t.test(n),RegExp.$1):n}return-1},getAppId:function(){var e=o.getLandingPage(),t=new RegExp("PPBAID=([^&]+)?","i");if(t.test(e)){var n=RegExp.$1;return n.indexOf("PPBAID")>-1?(t.test(n),RegExp.$1):n}return-1},getConverationToken:function(){var e=o.getLandingPage(),t=(o.getRefer(),new RegExp("PPBCT=([^&]+)?","i"));if(t.test(e)){var n=RegExp.$1,i="-1";return n.indexOf("PPBCT")>-1&&(t.test(n),i=RegExp.$1),i=n,unescape(i)}return-1},getConversationID:function(){var e=o.getLandingPage();e.indexOf("#")>-1&&(e=e.substring(0,e.indexOf("#")));var t=new RegExp("PPBCID=([^&]+)?","i");if(t.test(e)){var n=RegExp.$1;return n.indexOf("PPBCID")>-1?(t.test(n),RegExp.$1):n}return-1},ampTrack:function(){return!1},getPPBUID:function(){var e=new RegExp("PPBUID=([^&]+)","i");if(e.test(o.getLandingPage())){var t=RegExp.$1;return t.indexOf("PPBUID")>-1?(e.test(t),RegExp.$1):t}return""},uiGetText:function(e){return i.getText(e)},uiText:function(e,t,n){e.find(".pubble-lan-"+t).html(i.getText(n))},getPPBPID:function(){var e=new RegExp("PPBPID=([^&]+)","i");if(e.test(o.getLandingPage())){var t=RegExp.$1;return t.indexOf("PPBPID")>-1?(e.test(t),RegExp.$1):t}return""},getPPBLINK:function(){var e=new RegExp("PPBLINK=([^&]+)","i");if(e.test(o.getLandingPage())){var t=RegExp.$1;return t.indexOf("PPBLINK")>-1?(e.test(t),RegExp.$1):t}return""},addClass:function(e,t){e.hasClass(t)||e.addClass(t)},getTime:function(){var e=new Date;return this.formatAMPM(e)},escapeHtml:function(e){return e=this.htmlStep1(e),e=this.htmlStep2(e)},htmlStep2:function(e){return e=e.replaceAll("&amp;lt;","&lt;"),e=e.replaceAll("&amp;quot;","&quot;"),e=e.replaceAll("&amp;#39;","&#39;"),e=e.replaceAll("&amp;#x2F;","&#x2F;"),e=e.replaceAll("&amp;gt;","&gt;")},htmlStep1:function(e){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};return String(e).replace(/[&<>"']/g,function(e){return t[e]})},gettext:function(e){return t.config.strings[e]&&null!==t.config.strings[e]&&""!==t.config.strings[e]?t.config.strings[e]:e},removeBr:function(e){return e=this.ReplaceAll(e,"<br />","\n"),e=this.ReplaceAll(e,"<br><br>","\n"),e=this.ReplaceAll(e,"<br/><br/>","\n"),e=this.ReplaceAll(e,"<br />","\n")},executeFunctionByName:function(e,t){for(var n=Array.prototype.slice.call(arguments,2),i=e.split("."),a=i.pop(),o=0;o<i.length;o++)t=t[i[o]];return t[a].apply(t,n)},getEndpoints:function(){if(!t.config.isLoaded){var e=t.config.parameters.activeProfile;"aws-dev"==e?t.servers.actionDomain="//www.pubblebot.com":"aws-prod"==e?"undefined"!=typeof pubbleLoader&&pubbleLoader.servers.mainDomain&&"chatify"==pubbleLoader.servers.mainDomain?t.servers.actionDomain="//www.chatify.com":t.servers.actionDomain="//www.pubble.io":"azure-prod"==e?t.servers.actionDomain="//pubbleprod.pubble.io":t.isMsType&&(t.servers.actionDomain="//build.pubble.io"),t.config.isLoaded=!0}var n={conversation:t.servers.actionDomain+"/api/v2/stream/conversation",post:t.servers.actionDomain+"/api/v2/post/new",editName:t.servers.actionDomain+"/api/v2/post/update/name",editEmail:t.servers.actionDomain+"/api/v2/post/update/email",replying:t.servers.actionDomain+"/api/v2/post/replying",seq:t.servers.actionDomain+"/api/v2/post/seq",faq:t.servers.actionDomain+"/api/v2/post/seq",editPhone:t.servers.actionDomain+"/api/v2/post/update/phone",interaction:t.servers.actionDomain+"/api/v2/faq/interaction",close:t.servers.actionDomain+"/api/v2/post/close",openp:t.servers.actionDomain+"/api/v2/post/open",qinteraction:t.servers.actionDomain+"/api/v2/conversation/interaction",visitor:t.servers.actionDomain+"/api/v2/conversation/visitor",backvisit:t.servers.actionDomain+"/api/v2/stat/conversation/return",setCookie:t.servers.actionDomain+"/api/v2/account/cookie/reset",loadFaqs:t.servers.actionDomain+"/api/v2/faq/stream",assignees:t.servers.actionDomain+"/api/v2/stream/conversation/assignees",getIp:"https://media.pubble.io/ipsq/",tokenReset:t.servers.actionDomain+"/api/v2/conversation/token/reset",cookieDelete:t.servers.actionDomain+"/api/v2/cookie/delete",transcript:t.servers.actionDomain+"/api/v2/conversation/transcript",getBlock:t.servers.actionDomain+"/api/v2/blitzchain/block/get",submitform:t.servers.actionDomain+"/api/v2/post/form/submit",defaultAvatar:"https://avatar.pubble.io/pubble-avatars/",loadConversations:t.servers.actionDomain+"/api/v2/widget/conversations",faqSearch:t.servers.actionDomain+"/api/v2/widget/faq/stream"};return t.isAzureProd&&(n.defaultAvatar="https://appstate.azurewebsites.net/pubble-avatars/"),n},xssfilter:function(e){return e=e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r{0,}\n/g,"<br/>")},isMicrosoft:function(){var e=t.config.parameters;return e&&(e=e.community),e&&(e=e.shortName),"azure-ms"==t.config.parameters.activeProfile||"microsoft"==e||"uat"==e||"include"==e||"learntv"==e||"inspire"==e||"inspire"==e||"opus"==e||"ignite"==e||"ces"==e},handleCommunityAvtar:function(e){return e&&e.avatar?e.avatar:"https://cdn.pubble.io/resources/dashboard/img/community-default-ico.png"},getTimeFormat:function(){return{seconds:this.uiGetText("just now"),minutes:"%2m",hours:"%3h",days:"%4 days",months:"%5 months",years:"%6 year"}},timediff:function(e){if(void 0==e||null==e)return"";var t={seconds:((new Date).getTime()-e)/1e3},n=new Date(e);if(t.seconds<0&&(t.seconds=1),t.minutes=Math.round(t.seconds/60),"function"==typeof lpQA.Messages){var i=lpQA.Messages(n);return"string"==typeof i?[i,6e4]:["",5256e5]}return"object"==typeof this.getTimeFormat()?t.seconds<60?[this.formatDate(n,this.getTimeFormat().seconds,t)]:t.minutes<60?[this.formatDate(n,this.getTimeFormat().minutes,t)]+" ago":t.minutes<1440?[this.formatDate(n,this.getTimeFormat().hours,t)]+" ago":[this.formatDateTime(n)]+" ":[""]},date_format_regex:new RegExp(/(%[a-zA-Z0-9])/g),formatDate:function(e,t,n){var i=t,a=t.match(this.date_format_regex);if(null!==a)for(var o=0,r=a.length;o<r;o++)switch(a[o]){case"%1":i=i.replace("%1",Math.round(n.seconds));break;case"%2":i=i.replace("%2",n.minutes).replace("minutes",1==n.minutes?"minute":"minutes");break;case"%3":var s=Math.round(n.minutes/60);i=i.replace("%3",s).replace("hours",1==s?"hour":"hours");break;case"%4":var l=Math.round(n.minutes/1440);i=i.replace("%4",l).replace("days",1==l?"day":"days");break;case"%5":var c=Math.round(n.minutes/43200);i=i.replace("%5",c).replace("months",1==c?"month":"months");break;case"%6":i=i.replace("%6",Math.round(n.minutes/525600));break;case"%a":i=i.replace("%a",this.weekdays[e.getDay()][0]);break;case"%A":i=i.replace("%A",this.weekdays[e.getDay()][1]);break;case"%b":i=i.replace("%b",this.months[e.getMonth()-1][0]);break;case"%B":i=i.replace("%B",this.months[e.getMonth()-1][1]);break;case"%c":i=i.replace("%c",e.toLocaleString());break;case"%d":i=i.replace("%d",e.getDate());break;case"%H":i=i.replace("%H",e.getHours());break;case"%I":var s=e.getHours()+1;s>12&&(s-=12),i=i.replace("%I",s);break;case"%m":i=i.replace("%m","0"+(e.getMonth()+1));break;case"%M":var u=e.getMinutes();u<10&&(u="0"+u),i=i.replace("%M",u);break;case"%n":i=i.replace("%n",e.getMinutes());break;case"%p":var p="AM";e.getHours()>11&&(p="PM"),i=i.replace("%p",p);break;case"%s":i=i.replace("%s",e.getSeconds());break;case"%S":var u=e.getSeconds();u<10&&(u="0"+u),i=i.replace("%S",u);break;case"%w":i=i.replace("%w",e.getDay());break;case"%x":i=i.replace("%x",e.toLocaleDateString());break;case"%X":i=i.replace("%X",e.toLocaleTimeString());break;case"%y":i=i.replace("%y",e.getFullYear().toString().substring(2));break;case"%Y":i=i.replace("%Y",e.getFullYear())}return i},formatAMPM:function(e){var t=e.getHours(),n=e.getMinutes();return n=n<10?"0"+n:n,t+":"+n+" "},formatDateTime:function(e){var t=new Array("Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec");return e.getDate()+" "+t[e.getMonth()]},defaultAvatar:function(e,t){function n(e){return e.substring(0,1)}function i(e){if(e.indexOf(" ")>-1){var t=e.split(" ");return n(t[0])+n(t[1])}if(e.indexOf("%20")>-1){var t=e.split("%20");return n(t[0])+n(t[1])}if(e.indexOf(".")>-1){var t=e.split(".");return n(t[0])+n(t[1])}return e.length>1?e.substring(0,1)+e.substring(1,2):e}var a=e;a||(a="Guest");var e=function(e){return e+="",i(e).toUpperCase()}(a),o=n(e);return"<div class='pubui-genavatar-bg pubui-genavatar-code-"+(function(e){return"number"==typeof e&&!isNaN(e)}(o)?0:o.match(/[a-zA-Z]/)?function(e){for(var t="",n=0;n<e.length;n++){var i=e.toUpperCase().charCodeAt(n);i>64&&i<91&&(t+=i-64+"")}return t}(o):99)+"'> <div class='pubui-genavatar-letters'>"+e+"</div></div>"},imgwrapper:function(e){return e&&"guest"!=e&&e&&null!=e?e.indexOf("<div")>-1?e:"<img src='"+e+"' alt='Profile image'>":""},handleImg:function(e,n,i){if(null==e){if(n&&""!=n)return"Guest"==n?"guest":o.defaultAvatar(n,i);var a=t.config.parameters.activeProfile;return"azure-prod"==a?"https://azurecdn.pubble.io/resources/core/img/anon.png":"https://cdn.pubble.io/pubblebot/anon.png"}if(e){if(-1!=e.indexOf("anon.gif")||-1!=e.indexOf("img_who@2x")){if(n&&""!=n)return"Guest"==n?"guest":o.defaultAvatar(n,i);var a=t.config.parameters.activeProfile;return"azure-prod"==a?"https://azurecdn.pubble.io/resources/core/img/anon.png":"https://cdn.pubble.io/pubblebot/anon.png"}return e.startsWith("/")&&!e.startsWith("//www.pubble.co")?t.servers.mediaDomain+e+"?100":e.startsWith("resources")?t.servers.mediaDomain+"/"+e+"?100":e}if(""==e){if(n&&""!=n)return"Guest"==n?"guest":o.defaultAvatar(n,i);var a=t.config.parameters.activeProfile;return"azure-prod"==a?"https://azurecdn.pubble.io/resources/core/img/anon.png":"https://cdn.pubble.io/pubblebot/anon.png"}var a=t.config.parameters.activeProfile;return"azure-prod"==a?"https://azurecdn.pubble.io/resources/core/img/anon.png":"https://cdn.pubble.io/pubblebot/anon.png"},isValidEmail:function(e){if(null==e)return 0;var t=/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,10})$/;return""==e||e.length<3||0==t.test(e)?0:1},getGaTracker:function(){if(void 0!==window.ga&&void 0!==window.ga.getAll&&void 0!==window.ga.getAll()&&window.ga.getAll().length>0)return window.ga.getAll();try{if(void 0!==window.parent.ga&&void 0!==window.parent.ga.getAll&&void 0!==window.parent.ga.getAll()&&window.parent.ga.getAll().length>0)return window.parent.ga.getAll()}catch(e){}return[]},getGa:function(){var e;void 0!==window.ga&&(e=window.ga);try{void 0!==window.parent.ga&&(e=window.parent.ga)}catch(e){}return e},getGTMData:function(e,t){return e.cookie_id=t.config.user.cookieId,e.app_id=t.config.appID,e},addGTM:function(e,t,n){var i=n.config.parameters.gtmDataLayer;i&&(e=i);try{var a;if(a=e?window[e]:window.dataLayer,a||window.location==window.parent.location||(a=e?window.parent[e]:window.parent.dataLayer),!a)return!1;a.push({event:"chatify_live_chat",chatifyEvent:t})}catch(e){}},checkDate:function(e,n){if(void 0==e||null==e)return"";var i=e.split("T")[0],a=e.split("T")[1];if(null==i||null==a)return"";var o=new Date(i.split("-")[0],i.split("-")[1]-1,i.split("-")[2],a.split(":")[0],a.split(":")[1],a.split(":")[2].split("+")[0]);o.setMinutes(o.getMinutes()-(new Date).getTimezoneOffset());var r={seconds:((new Date).getTime()-o.getTime())/1e3};if(r.seconds<0&&(r.seconds=1),r.minutes=Math.round(r.seconds/60),"function"==typeof t.Messages){var s=t.Messages(o);return"string"==typeof s?[s,6e4]:["",5256e5]}return"object"==typeof this.getTimeFormat()?r.seconds<60?[this.formatDate(o,this.getTimeFormat().seconds,r)]:r.minutes<60?[this.formatDate(o,this.getTimeFormat().minutes,r)]:r.minutes<1440?[this.formatDate(o,this.getTimeFormat().hours,r)]:[this.formatDateTime(o)]:[""]},Xpost:function(t,n,i,a,o,r){var s="application/json";t&&(s="application/x-www-form-urlencoded"),e.ajax({url:n,data:i,contentType:s,xhrFields:{withCredentials:!0},dataType:"json",type:"POST",cache:0,crossDomain:!0,success:function(e){var t="success";e.code&&e.code>299&&(t="error"),a(e,r,t)},error:function(e){console.log(e)}})},XDR:function(t,n,i,a,o){e.ajax({url:t,data:n,type:"GET",cache:0,dataType:"jsonp",success:function(e){var t="success";e.code&&e.code>299&&(t="error"),i(e,o,t)},error:a})},setSessionCookie:function(e,t){var n=new Date;n.setTime(n.getTime()+18e5),document.cookie=e+"="+escape(t)+";expires="+n.toGMTString()+";Path=/"},isAuthor:function(e,t){var n=0;return(e.config.user.uid>0&&e.config.user.uid==t.id||e.config.user.cookieId==t.cookieId||o.getCookie("pubble_gen_uid")==t.cookieId)&&(n=1),n},setShortCookie:function(e,t){var n=new Date;n.setTime(n.getTime()+18e5),document.cookie=e+"="+escape(t)+";expires="+n.toGMTString()+";Path=/"},setCookieValue:function(e,t){n.set(e,t)},getCookieValue:function(e,t){var i=n.get(e);return null==i?o.getCookie(e):i},setCookie:function(e,t){var n=new Date;n.setTime(n.getTime()+2592e6),document.cookie=e+"="+escape(t)+";expires="+n.toGMTString()+";Path=/"},unescapeHTML:function(e){if(!e||null==e)return"";var t={"&amp;":"&","&#38;":"&","&#x26;":"&","&lt;":"<","&#60;":"<","&#x3C;":"<","&gt;":">","&#62;":">","&#x3E;":">","&quot;":'"',"&#34;":'"',"&#x22;":'"',"&apos;":"'","&#39;":"'","&#x27;":"'"};return e.replace(/&(?:amp|#38|#x26|lt|#60|#x3C|gt|#62|#x3E|apos|#39|#x27|quot|#34|#x22);/gi,function(e){return t[e]})},getCookie:function(e){var t=document.cookie.match(new RegExp("(^| )"+e+"=([^;]*)(;|$)"));return null!=t?unescape(t[2]):null},delCookie:function(e){var t=new Date;t.setTime(t.getTime()-1);var n=getCookie(e);null!=n&&(document.cookie=e+"="+n+";expires="+t.toGMTString())},Url:{encode:function(e){return escape(this._utf8_encode(e))},decode:function(e){return this._utf8_decode(unescape(e))},_utf8_encode:function(e){e=e.replace(/\r\n/g,"\n");for(var t="",n=0;n<e.length;n++){var i=e.charCodeAt(n);i<128?t+=String.fromCharCode(i):i>127&&i<2048?(t+=String.fromCharCode(i>>6|192),t+=String.fromCharCode(63&i|128)):(t+=String.fromCharCode(i>>12|224),t+=String.fromCharCode(i>>6&63|128),t+=String.fromCharCode(63&i|128))}return t},_utf8_decode:function(e){for(var t="",n=0,i=c1=c2=0;n<e.length;)i=e.charCodeAt(n),i<128?(t+=String.fromCharCode(i),n++):i>191&&i<224?(c2=e.charCodeAt(n+1),t+=String.fromCharCode((31&i)<<6|63&c2),n+=2):(c2=e.charCodeAt(n+1),c3=e.charCodeAt(n+2),t+=String.fromCharCode((15&i)<<12|(63&c2)<<6|63&c3),n+=3);return t}}};return o}),pubblebot.define("models/app",["backbone","utils/utils"],function(e,t){return window.$pubbBackbone.noConflict().Model.extend({defaults:{threadInfo:"How can we help?",currentConversation:0,comment_text:"",available:1,moderators:[],textlimit:150,logo:1,botAvatar:"",visitorAvatar:""},toJSON:function(){return window.$UScore.clone(this.attributes)}})}),pubblebot.define("text",["module"],function(e){"use strict";var t,n,i,a,o,r=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],s=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,l=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,c="undefined"!=typeof location&&location.href,u=c&&location.protocol&&location.protocol.replace(/\:/,""),p=c&&location.hostname,d=c&&(location.port||void 0),b={},f=e.config&&e.config()||{};return t={version:"2.0.14",strip:function(e){if(e){e=e.replace(s,"");var t=e.match(l);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:f.createXhr||function(){var e,t,n;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(t=0;t<3;t+=1){n=r[t];try{e=new ActiveXObject(n)}catch(e){}if(e){r=[n];break}}return e},parseName:function(e){var t,n,i,a=!1,o=e.lastIndexOf("."),r=0===e.indexOf("./")||0===e.indexOf("../");return-1!==o&&(!r||o>1)?(t=e.substring(0,o),n=e.substring(o+1)):t=e,i=n||t,o=i.indexOf("!"),-1!==o&&(a="strip"===i.substring(o+1),i=i.substring(0,o),n?n=i:t=i),{moduleName:t,ext:n,strip:a}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,n,i,a){var o,r,s,l=t.xdRegExp.exec(e);return!l||(o=l[2],r=l[3],r=r.split(":"),s=r[1],r=r[0],!(o&&o!==n||r&&r.toLowerCase()!==i.toLowerCase()||(s||r)&&s!==a))},finishLoad:function(e,n,i,a){i=n?t.strip(i):i,f.isBuild&&(b[e]=i),a(i)},load:function(e,n,i,a){if(a&&a.isBuild&&!a.inlineText)return void i();f.isBuild=a&&a.isBuild;var o=t.parseName(e),r=o.moduleName+(o.ext?"."+o.ext:""),s=n.toUrl(r),l=f.useXhr||t.useXhr;if(0===s.indexOf("empty:"))return void i();!c||l(s,u,p,d)?t.get(s,function(n){t.finishLoad(e,o.strip,n,i)},function(e){i.error&&i.error(e)}):n([r],function(e){t.finishLoad(o.moduleName+"."+o.ext,o.strip,e,i)})},write:function(e,n,i,a){if(b.hasOwnProperty(n)){var o=t.jsEscape(b[n]);i.asModule(e+"!"+n,"define(function () { return '"+o+"';});\n")}},writeFile:function(e,n,i,a,o){var r=t.parseName(n),s=r.ext?"."+r.ext:"",l=r.moduleName+s,c=i.toUrl(r.moduleName+s)+".js";t.load(l,i,function(n){var i=function(e){return a(c,e)};i.asModule=function(e,t){return a.asModule(e,c,t)},t.write(e,l,i,o)},o)}},"node"===f.env||!f.env&&"undefined"!=typeof process&&process.versions&&process.versions.node&&!process.versions["node-webkit"]&&!process.versions["atom-shell"]?(n=require.nodeRequire("fs"),t.get=function(e,t,i){try{var a=n.readFileSync(e,"utf8");"\ufeff"===a[0]&&(a=a.substring(1)),t(a)}catch(e){i&&i(e)}}):"xhr"===f.env||!f.env&&t.createXhr()?t.get=function(e,n,i,a){var o,r=t.createXhr();if(r.open("GET",e,!0),a)for(o in a)a.hasOwnProperty(o)&&r.setRequestHeader(o.toLowerCase(),a[o]);f.onXhr&&f.onXhr(r,e),r.onreadystatechange=function(t){var a,o;4===r.readyState&&(a=r.status||0,a>399&&a<600?(o=new Error(e+" HTTP status: "+a),o.xhr=r,i&&i(o)):n(r.responseText),f.onXhrComplete&&f.onXhrComplete(r,e))},r.send(null)}:"rhino"===f.env||!f.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?t.get=function(e,t){var n,i,a=new java.io.File(e),o=java.lang.System.getProperty("line.separator"),r=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(a),"utf-8")),s="";try{for(n=new java.lang.StringBuffer,i=r.readLine(),i&&i.length()&&65279===i.charAt(0)&&(i=i.substring(1)),null!==i&&n.append(i);null!==(i=r.readLine());)n.append(o),n.append(i);s=String(n.toString())}finally{r.close()}t(s)}:("xpconnect"===f.env||!f.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(i=Components.classes,a=Components.interfaces,Components.utils.import("resource://gre/modules/FileUtils.jsm"),o="@mozilla.org/windows-registry-key;1"in i,t.get=function(e,t){var n,r,s,l={};o&&(e=e.replace(/\//g,"\\")),s=new FileUtils.File(e);try{n=i["@mozilla.org/network/file-input-stream;1"].createInstance(a.nsIFileInputStream),n.init(s,1,0,!1),r=i["@mozilla.org/intl/converter-input-stream;1"].createInstance(a.nsIConverterInputStream),r.init(n,"utf-8",n.available(),a.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),r.readString(n.available(),l),r.close(),n.close(),t(l.value)}catch(e){throw new Error((s&&s.path||"")+": "+e)}}),t}),pubblebot.define("text!templates/app.tpl",[],function(){
return'\r\n\x3c!--googleoff: index--\x3e\r\n\x3c!-- MODAL --\x3e\r\n<div class="pubble-cw pubble-cw-modal pubble-hide">\r\n    <div class="pubble-cw pubble-cw-modal-shade"></div>\r\n    <div class="pubble-cw-modal-bar">\r\n        <div class="pubble-cw-modal-close-button"></div>\r\n    </div>\r\n    <div class="pubble-cw-modal-media-container pubble-cw-modal-img-container pubble-off">\r\n        <div class="pubble-cw-modal-img"></div>\r\n    </div>\r\n\r\n    <div class="pubble-cw-modal-media-container pubble-cw-modal-video-container pubble-off">\r\n        <div class="pubble-cw-modal-video"></div>\r\n        <div class="pubble-cw-modal-video-button"></div>\r\n    </div>\r\n</div>\r\n\r\n<div class="pubble-cw-shadow pubble-hide"></div>\r\n\r\n\r\n\x3c!-- PANEL --\x3e\r\n<div class="pubble-cw pubble-cw-panel  pubble-move">\r\n    <div class="pubble-sronly pubble-cw-main-arialive" aria-live="polite"></div> \r\n    <div class="pubble-cw-modal-cover pubble-cw-modal-expire pubble-hide" aria-hidden="true">\r\n        <div class="pubble-cw-expire-step1 pubble-show">\r\n            <div class="pubble-cw-expire-text pubble-lan-app-expire-text">For security reasons and to help protect your\r\n                data, the conversation link has expired.<br />Please use the button below to generate a new secure link\r\n                (which will be sent to you via email or Text), or ask a question.</div>\r\n            <div class="pubble-cw-expire-actionbar">\r\n                <div class="pubble-cw-expire-newlink pubble-lan-app-newlink">Generate link</div>\r\n                <div class="pubble-cw-expire-newquestion pubble-lan-app-newq">Ask a question</div>\r\n            </div>\r\n        </div>\r\n        <div class="pubble-cw-expire-step2 pubble-hide">\r\n            <div class="pubble-cw-expire-text pubble-lan-expire-text2">A new secure link to the conversation was sent to\r\n                you. Please access it from your email/Text to continue the conversation.</div>\r\n            <div class="pubble-cw-expire-actionbar">\r\n                <div class="pubble-cw-expire-killsession pubble-disabled">\r\n                    Close (<span class="pubble-cw-killsession-timer">5</span>)\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="pubble-cw-gdprmodal pubble-hide" aria-hidden="true">\r\n        <div class="pubble-cw-gdprmodal-close"></div>\r\n        <div class="pubble-cw-gdprmodal-title pubble-lan-app-gdpr-title">GDPR Privacy and Compliance</div>\r\n        <div class="pubble-cw-gdprmodal-text"></div>\r\n        <div class="pubble-cw-gdprmodal-deleteme">\r\n            <div class="pubble-cw-gdprmodal-deleteme-text pubble-lan-app-deleteme">In accordance with GDPR privacy law\r\n                listed above u can remove any contact details and personal data stored with Pubble system and a request\r\n                will be sent to all our data sharing services to do the same.<br /><br />To complete the delete me\r\n                procedure please follow the simple steps in the email/text sent to you\r\n            </div>\r\n            <div class="pubble-cw-gdprmodal-deleteme-btn pubble-lan-app-deleteme-btn">Delete me</div>\r\n            <div class="pubble-cw-gdprmodal-deleteme-confirm pubble-hide pubble-lan-app-deleteme-confirmtext">An\r\n                email/text was sent to you. If u want to continue the "delet me" process please follow instructions in\r\n                that message</div>\r\n        </div>\r\n    </div>\r\n    <div class="pubble-cw-powered-container" aria-hidden="true">\r\n        <div aria-label="Link to Chatify - provider of live chat solutions"\r\n            class="pubble-cw-powered">\r\n            <div class="pubble-cw-powered-ico"></div>\r\n            <a class="pubble-cw-powered-link"></a>\r\n        </div>\r\n    </div>\r\n\r\n    <div class="pubble-cw-panel-notifications" aria-hidden="true">\r\n        <div class="pubble-cw-panel-notif-container">\r\n            <div class="pubble-cw-panel-notif-author"></div>\r\n            <div class="pubble-cw-panel-notif-message"></div>\r\n        </div>\r\n    </div>\r\n\r\n    <div class="pubble-cw-panel-controls">\r\n        <div class="pubble-cw-panel-top-welcome">\r\n            <div class="pubble-cw-panel-top-welcome-pattern"></div>\r\n            <div class="pubble-cw-panel-top-welcome-bg"></div>\r\n            <div class="pubble-cw-panel-top-welcome-logo"></div>\r\n            <div class="pubble-cw-panel-top-welcome-title"><span></span></div>\r\n            <div class="pubble-cw-panel-top-welcome-msg"><span></span></div>\r\n        </div>\r\n\r\n        <div class="pubble-cw-panel-top pubble-col-background"> \r\n            <div class="pubble-cw-top-list pubble-cw-top">\r\n                <div class="pubble-cw-top-primary pubble-lan-app-prevchats">Livechat</div>\r\n                <div class="pubble-cw-top-secondary pubble-cw-top-secondary-1"></div>\r\n            </div>\r\n            <div class="pubble-cw-top-faq pubble-cw-top pubble-off">\r\n                <div class="pubble-cw-top-primary pubble-cw-top-faq-1">FAQs</div>\r\n                <div class="pubble-cw-top-secondary pubble-cw-top-faq-2">search our faqs</div>\r\n            </div>\r\n            <div class="pubble-cw-top-assign pubble-cw-top pubble-off">\r\n                <div class="pubble-cw-top-primary pubble-lan-app-privacy-opts">Please select an option below</div>\r\n                <div class="pubble-cw-top-secondary pubble-off pubble-lan-app-privacy-click">click tile to start\r\n                    messaging</div>\r\n            </div>\r\n            <div class="pubble-cw-top-conv pubble-cw-conv pubble-off">\r\n                <div class="pubble-cw-top-title pubble-client-color"></div>\r\n                <div class="pubble-cw-top-status"></div>\r\n                <div class="pubble-cw-top-status-community pubble-off">Community name</div>\r\n                <div class="pubble-cw-top-branding pubble-cw-ispubble"></div>\r\n            </div>\r\n\r\n        </div>\r\n        \x3c!--   END PANEL TOP --\x3e\r\n\r\n        <div class="pubble-cw-panel-info-container">\r\n            <div class="pubble-cw-panel-info pubble-cw-panel-info-list pubble-hide pubble-lan-app-panel-1">Revisit old\r\n                conversations</div>\r\n            <div class="pubble-cw-panel-info pubble-cw-panel-info-new pubble-hide pubble-lan-app-panel-2">Want to ask a\r\n                new question?</div>\r\n            <div class="pubble-cw-panel-info pubble-cw-panel-info-activity pubble-hide pubble-lan-app-panel-3">You have\r\n                a new reply to another question</div>\r\n        </div>\r\n\r\n        <button aria-disabled="false" aria-label="New Question" role="button" class="pubble-cw-panel-controls-newq">\r\n            <div class="pubble-cw-panel-controls-newq-bgico">\r\n                <span></span>\r\n            </div>\r\n            <div class="pubble-cw-panel-controls-newq-newico"></div>\r\n            <div class="pubble-cw-panel-controls-newq-number"></div>\r\n            <div class="pubble-cw-panel-controls-newq-add">+</div>\r\n            <div class="pubble-cw-panel-controls-newq-notif"></div>\r\n\r\n        </button>\r\n\r\n        <div class="pubble-cw-panel-helptext" aria-hidden="true">\r\n            <div class="pubble-cw-panel-helptext-bubble pubble-cw-panel-helptext-new pubble-hide">\r\n                <span class="pubble-lan-app-help-1">Click here to ask a question</span>\r\n            </div>\r\n            <div class="pubble-cw-panel-helptext-bubble pubble-cw-panel-helptext-list pubble-hide">\r\n                <span class="pubble-lan-app-help-2">Click to view your previous asked questions or ask a new one</span>\r\n            </div>\r\n        </div>\r\n        <div class="pubble-cw-panel-controls-hide" aria-hidden="true"></div>\r\n        <button aria-disabled="false" aria-label="Contact details and options" role="button"\r\n            class="pubble-cw-getnotif-handle pubble-off">\r\n            <div class="pubble-cw-getnotif-handle-ico-notif"></div>\r\n            <div class="pubble-cw-getnotif-handle-ico-hide"></div>\r\n        </button>\r\n        <div class="pubble-cw-panel-controls-close" aria-hidden="true">\r\n            <span class="pubble-cw-panel-controls-close-ico pubble-cw-panel-controls-close-ico-thick"></span>\r\n        </div>\r\n    </div>\r\n\r\n    <div class="pubble-cw-panel-content">\r\n        <div class="pubble-cw-panel-top-rating pubble-off" aria-hidden="true" style="display: none;">\r\n            <div class="pubble-cw-rating-text"></div>\r\n            <div class="pubble-cw-rating-stars">\r\n                <div class="pubble-cw-rating-stars-rating">\r\n                    <input type="radio" id="5-stars" name="pubble-cw-rating" value="5" />\r\n                    <label for="5-stars" class="pubble-cw-rating-star">&bigstar;</label>\r\n                    <input type="radio" id="4-stars" name="pubble-cw-rating" value="4" />\r\n                    <label for="4-stars" class="pubble-cw-rating-star">&bigstar;</label>\r\n                    <input type="radio" id="3-stars" name="pubble-cw-rating" value="3" />\r\n                    <label for="3-stars" class="pubble-cw-rating-star">&bigstar;</label>\r\n                    <input type="radio" id="2-stars" name="pubble-cw-rating" value="2" />\r\n                    <label for="2-stars" class="pubble-cw-rating-star">&bigstar;</label>\r\n                    <input type="radio" id="1-star" name="pubble-cw-rating" value="1" />\r\n                    <label for="1-star" class="pubble-cw-rating-star">&bigstar;</label>\r\n                </div>\r\n\r\n\r\n\r\n            </div>\r\n            <div class="pubble-cw-rating-voted pubble-off">\r\n                <div class="pubble-cw-rating-voted-text pubble-lan-app-rating-success">Thanks for taking the time to\r\n                    vote!</div>\r\n                <div class="pubble-cw-rating-voted-rating">\r\n                    <div class="pubble-cw-rating-voted-rating-icon"></div>\r\n                    <div class="pubble-cw-rating-voted-rating-mark">4.5</div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="pubble-cw-getnotif pubble-cw-getnotif-off pubble-off" style="display: none;" aria-hidden="true">\r\n            <div class="pubble-cw-getnotif-drawer">\r\n                <div class="pubble-cw-getnotif-content">\r\n                    <div class="pubble-cw-getnotif-content-logged">\r\n                        <div class="pubble-cw-logged-avatar"></div>\r\n                        <div class="pubble-cw-logged-username"></div>\r\n                        <div class="pubble-cw-logged-text"></div>\r\n                        <div class="pubble-cw-logged-back pubble-lan-app-back">Back</div>\r\n\r\n\r\n                        <div class="pubble-cw-getnotif-content-transcript">\r\n                            <div class="pubble-cw-getnotif-content-transcript-email pubble-cw-hasnoemail">\r\n                                <div\r\n                                    class="pubble-cw-getnotif-content-transcript-email-success pubble-off pubble-lan-app-transcript-1">\r\n                                    Transcript of conversation was sent to email address</div>\r\n                                <div\r\n                                    class="pubble-cw-getnotif-content-transcript-text pubble-cw-btn-transcript-email-yes pubble-lan-app-transcript-2">\r\n                                    Send transcript to email</div>\r\n                                <div\r\n                                    class="pubble-cw-getnotif-content-transcript-text pubble-cw-btn-transcript-email-no pubble-lan-app-transcript-3">\r\n                                    Please enter email above to send transcript via email</div>\r\n                                <button aria-disabled="true" aria-hidden="true" aria-label="Email transcript" role="button"\r\n                                    class="pubble-cw-getnotif-content-transcript-btn pubble-cw-btn-transcript-email pubble-lan-app-transcript-4">\r\n                                    Email transcript</button>\r\n                            </div>\r\n                            <div class="pubble-cw-getnotif-content-transcript-link">\r\n                                <div class="pubble-cw-getnotif-content-transcript-text pubble-lan-app-transcript-5">Open\r\n                                    link with the conversation transcript</div>\r\n                                <button aria-disabled="false" aria-label="View transcript"\r\n                                    class="pubble-cw-getnotif-content-transcript-btn pubble-cw-btn-transcript-link pubble-lan-app-transcript-6">\r\n                                    View transcript</button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class="pubble-cw-getnotif-content-main">\r\n                        <div class="pubble-cw-getnotif-text pubble-lan-app-transcript-7">Get notified when you receive a\r\n                            message to the questions you ask</div>\r\n                        <div class="pubble-cw-getnotif-card"></div>\r\n\r\n\r\n                        <div class="pubble-cw-getnotif-content-transcript">\r\n                            <div class="pubble-cw-getnotif-content-transcript-email pubble-cw-hasnoemail">\r\n                                <div\r\n                                    class="pubble-cw-getnotif-content-transcript-email-success pubble-off pubble-lan-app-transcript-8">\r\n                                    Transcript of conversation was sent to email address</div>\r\n                                <div\r\n                                    class="pubble-cw-getnotif-content-transcript-text pubble-cw-btn-transcript-email-yes pubble-lan-app-transcript-9">\r\n                                    Send transcript to email</div>\r\n                                <div\r\n                                    class="pubble-cw-getnotif-content-transcript-text pubble-cw-btn-transcript-email-no pubble-lan-app-transcript-10">\r\n                                    Please enter email above to send transcript via email</div>\r\n                                <button aria-disabled="false" aria-label="Email transcript" role="button"\r\n                                    class="pubble-cw-getnotif-content-transcript-btn pubble-cw-btn-transcript-email pubble-lan-app-transcript-11">\r\n                                    Email transcript</button>\r\n                            </div>\r\n                            <div class="pubble-cw-getnotif-content-transcript-link">\r\n                                <div class="pubble-cw-getnotif-content-transcript-text pubble-lan-app-transcript-12">\r\n                                    Open link with the conversation transcript</div>\r\n                                <button aria-disabled="false" aria-label="View transcript"\r\n                                    class="pubble-cw-getnotif-content-transcript-btn pubble-cw-btn-transcript-link pubble-lan-app-transcript-13">\r\n                                    View transcript</button>\r\n                            </div>\r\n\r\n\r\n                        </div>\r\n\r\n\r\n                        <div class="pubble-cw-getnotif-link pubble-off">\r\n                            <div class="pubble-cw-notif-text2 pubble-lan-app-transcript-14">You can revisit conversation\r\n                                by using this link </div>\r\n                            <div class="pubble-cw-notif-link"></div>\r\n                        </div>\r\n                        <div class="pubble-cw-getnotif-notme pubble-off">\r\n                            <div class="pubble-cw-getnotif-notme-text pubble-lan-app-transcript-15">If you are not this\r\n                                user you can clear all the data and all conversations and ask a new question</div>\r\n                            <div class="pubble-cw-getnotif-notme-btm pubble-lan-app-transcript-16">This is not me. Clear\r\n                                data.</div>\r\n                        </div>\r\n                    </div>\r\n                    \r\n                    <div class="pubble-cw-getnotif-content-close">\r\n                        <button aria-disabled="false" aria-label="Close" role="button"\r\n                            class="pubble-cw-getnotif-content-close-btn pubble-lan-app-transcript-16">Close</button>\r\n                    </div>\r\n                    \r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div id="pubble-cw-faq-container" class="pubble-cw-panel-main pubble-cw-faq-container pubble-hide pubble-cw-faq-container" style="display: none;" aria-hidden="true">\r\n            \r\n        </div>\r\n        <div class="pubble-cw-panel-main pubble-cw-homescreen-container pubble-show">\r\n            \r\n            <div class="pubble-cw-hs pubble-cw-scroll">\r\n                <div class="pubble-cw-hs-section pubble-cw-hs-section-isconvlist pubble-off" tabindex="0" aria-label="Question List">\r\n                    <div class="pubble-cw-hs-title pubble-lan-pubble-cw-hs-title-1">Previous conversations</div>\r\n                    <div class="pubble-cw-hs-content pubble-cw-scroll">\r\n                        <div class="pubble-cw-chat-list"></div>\r\n                    </div>\r\n                    \r\n                </div>\r\n                \r\n                <div class="pubble-cw-hs-section pubble-cw-hs-section-isfaq" tabindex="0" aria-label="Search FAQs">\r\n                    <div class="pubble-cw-hs-title pubble-lan-pubble-cw-hs-title-2">Search FAQs</div>\r\n                    <div class="pubble-cw-hs-content pubble-cw-hs-content-faqsearch">\r\n   \r\n                    </div>\r\n                </div>\r\n\r\n                <div class="pubble-cw-hs-section-isnewconv">\r\n                        <button aria-label="Ask a question" tabindex="0" class="pubble-cw-hs-button pubble-lan-pubble-cw-hs-button">Ask a question</button>\r\n                </div>\r\n\r\n            </div>\r\n        </div>\r\n        \r\n        <div class="pubble-cw-panel-main pubble-cw-form-container pubble-hide" aria-hidden="true"></div>\r\n        <div class="pubble-cw-panel-main pubble-cw-chat-container pubble-hide" aria-hidden="true">\r\n            <div aria-disabled="false" aria-label="Link to Chatify - provider of live chat solutions"\r\n                class="pubble-cw-powered">\r\n                <a class="pubble-cw-powered-link"></a>\r\n            </div>\r\n            <div class="pubble-cw-chat">\r\n                <div class="pubble-cw-panel-middle pubble-cw-scroll">\r\n                    <div class="pubble-cw-panel-dialog" tabindex="0" aria-label="conversation details"></div>\r\n                </div>\r\n                <div class="pubble-cw-panel-bottom pubble-cw-invalidq">\r\n                    <button aria-disabled="false" aria-label="Ask a question" role="button"\r\n                        class="pubble-cw-btn-newquestion pubble-cw-btn-newquestion-btn3 pubble-cw-btn-main pubble-lan-app-addnewq">\r\n                        Ask a question</button>\r\n                </div>\r\n                <div class="pubble-cw-panel-bottom pubble-cw-chatbox" style="height: 56px;">\r\n                    <div class="pubble-cw-input-outofoffice pubble-off">\r\n                        <span>We are currently out of office<br />Please try again later</span>\r\n                    </div>\r\n                    <div class="pubble-cw-input-presence pubble-hide">\r\n                        <div class="pubble-cw-input-presence-avatar"></div>\r\n                        <div class="pubble-cw-input-presence-typing">\r\n                            <span class="pubble-cw-input-presence-username pubble-lan-app-istyping"></span>\r\n                            is typing...\r\n                        </div>\r\n                    </div>\r\n                    <div class="pubble-cw-input-waiting">\r\n                        <div class="pubble-cw-input-waiting-left-progress-bar">\r\n                            <span class="pubble-cw-input-waiting-left-bar">\r\n                                <span class="pubble-cw-input-waiting-left-progress pubble-cw-background"></span>\r\n                            </span>\r\n                        </div>\r\n                        <div class="pubble-cw-input-waiting-right-progress-bar">\r\n                            <span class="pubble-cw-input-waiting-right-bar">\r\n                                <span class="pubble-cw-input-waiting-right-progress pubble-cw-background"></span>\r\n                            </span>\r\n                        </div>\r\n                    </div>\r\n                    <div class="pubble-cw-input-progress">\r\n                        <div class="pubble-cw-input-progress-default"></div>\r\n                        <div class="pubble-cw-input-progress-ie9"></div>\r\n                    </div>\r\n                    <div class="pubble-cw-input-filelist" style="display:none"></div>\r\n                   \r\n                    <div class="pubble-cw-input-textarea-emoji-list-container pubble-hide" style="display:none">\r\n                        <div class="pubble-emoji-list-container" tabindex="0" aria-label="emoji list" role="application">\r\n                            <div class="pubui-sronly pubble-emoji-sronly" aria-live="polite">Emoji list collapsed</div>\r\n                            <div class="pubble-emoji-list" role="list">\r\n                            </div>\r\n                        </div>\r\n                        <div class="pubble-cw-input-textarea-emoji-hover">\r\n                            <div class="pubble-cw-input-textarea-emoji-hover-default pubble-lan-app-emoji">Emoji</div>\r\n                            <div class="pubble-cw-input-textarea-emoji-hover-content pubble-off">\r\n                                <div class="pubble-cw-input-textarea-emoji-hover-ico"></div>\r\n                                <div class="pubble-cw-input-textarea-emoji-hover-code"></div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class="pubble-cw-input-container pubble-cw-input-default ">\r\n                        <div class="pubble-cw-input">\r\n                            <div class="pubble-cw-input-textarea-actual">\r\n                                <pre></pre>\r\n                                <label for="pubble-cw-input-textarea">Add msg below</label>\r\n                                <textarea id="pubble-cw-input-textarea" aria-invalid="false" type="text"\r\n                                    aria-label="Message textarea" placeholder="Message..."\r\n                                    class="pubble-cw-input-textarea pubble-cw-scroll" style="height:55px !important;"> </textarea>\r\n                                <div style="display:none;" id="pubjs-input-textarea-error" aria-hidden="true">Please add\r\n                                    message before submit</div>\r\n                            </div>\r\n                            <button aria-disabled="true" aria-label="Skip" role="button"\r\n                                class="pubble-cw-input-textarea-skip pubble-cw-input-textarea-skip-disabled pubble-cw-button-color-2 pubble-lan-app-skip">\r\n                                Skip</button>\r\n                            <button aria-disabled="true" aria-label="Send" role="button"\r\n                                class="pubble-cw-input-textarea-send pubble-cw-input-textarea-send-disabled pubble-cw-button-color-1 pubble-cw-btn-main pubble-lan-app-send">\r\n                                Send</button>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class="pubble-cw-input-container pubble-cw-input-iscredentials pubble-off">\r\n                        <div class="pubble-cw-input-buttonbar">\r\n                            <button aria-disabled="false" aria-label="Phone" role="button"\r\n                                class="pubble-cw-input-button-sms pubble-cw-button-color-1 pubble-cw-btn-main">\r\n                                <div class="pubble-cw-input-button-ico"></div>\r\n                                <div class="pubble-cw-input-button-text pubble-lan-app-sms">Text</div>\r\n                            </button>\r\n                            <button aria-disabled="false" aria-label="Email" role="button"\r\n                                class="pubble-cw-input-button-email pubble-cw-button-color-1 pubble-cw-btn-main">\r\n                                <div class="pubble-cw-input-button-ico"></div>\r\n                                <div class="pubble-cw-input-button-text pubble-lan-app-email">E-mail</div>\r\n                            </button>\r\n                            <button aria-disabled="false" aria-label="Link" role="button"\r\n                                class="pubble-cw-input-button-link pubble-cw-button-color-2 pubble-cw-btn-main">\r\n                                <div class="pubble-cw-input-button-ico"></div>\r\n                                <div class="pubble-cw-input-button-text pubble-lan-app-link">Link</div>\r\n                            </button>\r\n                            <button aria-disabled="false" aria-label="Skip" role="button"\r\n                                class="pubble-cw-input-button-skip pubble-cw-button-color-2">\r\n                                <div class="pubble-cw-input-button-ico"></div>\r\n                                <div class="pubble-cw-input-button-text pubble-lan-app-skip">Skip</div>\r\n                            </button>\r\n                        </div>\r\n\r\n                        <div class="pubble-cw-input-buttonbar-sms pubble-gdpr-parent  pubble-md-gdpr-off pubble-off">\r\n                            <button class="pubble-cw-input-buttonbar-back pubble-cw-button-color-2 pubble-cw-btn-main">\r\n                                <div class="pubble-cw-input-buttonbar-back-ico"></div>\r\n                            </button>\r\n                            <div class="pubble-cw-input-buttonbar-content">\r\n\r\n\r\n                                <div class="pubble-cw-input-buttonbar-phonewidget" style="width:90% !important">\r\n                                    <label for="mobile-number">Mobile number</label>\r\n                                    <input aria-label="Name textarea" aria-requiered="false" type="text"\r\n                                        placeholder="your phone" name="telphone" id="mobile-number"\r\n                                        class="pubble-cw-mobile-number" />\r\n                                    <div class="pubble-cw-input-phone-fail pubble-off pubble-lan-app-validnum">Please\r\n                                        add a valid number</div>\r\n                                </div>\r\n                               \r\n                            </div>\r\n                            <button class="pubble-cw-input-buttonbar-submit pubble-cw-input-buttonbar-form-submit pubble-cw-button-color-1 pubble-cw-input-buttonbar-phone-submit  pubble-cw-btn-main pubble-lan-app-submit" aria-disabled="true">\r\n                                Submit</button>\r\n                            <div class="pubble-gdpr">\r\n                                <div class="pubble-gdpr-error pubble-hide pubble-lan-app-gdpragree">In order to submit\r\n                                    contact details you have to agree to GDPR listed below</div>\r\n                                <div class="pubble-gdpr-action" aria-role="checkbox" aria-checked="false" tabindex="0"\r\n                                aria-labelledby="pubble-lan-cc-pconfirm"></div>\r\n                                <div class="pubble-gdpr-text">\r\n                                        <span class="pubble-lan-cc-pconfirm">I consent that any\r\n                                        personal data I provide can be processed in accordance with the </span> \r\n                                        <button aria-disabled="false" tabindex="0" role="button" aria-label="Privacy statement"\r\n                                        class="pubble-gdpr-text-link pubble-md-gdprmodal pubble-lan-cc-privacy">Privacy\r\n                                        Statement</button>.\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div class="pubble-cw-input-buttonbar-email pubble-gdpr-parent  pubble-md-gdpr-off  pubble-off">\r\n                            <button class="pubble-cw-input-buttonbar-back pubble-cw-button-color-2 pubble-cw-btn-main">\r\n                                <div class="pubble-cw-input-buttonbar-back-ico"></div>\r\n                            </button>\r\n                            <div class="pubble-cw-input-buttonbar-content">\r\n                                <div class="pubble-cw-input-ico"></div>\r\n                                <div class="pubble-cw-input-email" style="width:80% !important">\r\n                                    <label for="email2">Email</label>\r\n                                    <input aria-invalid="false" aria-describedby="pubjs-input-email-hint" id="email2"\r\n                                        type="text" aria-label="Email textarea" type="text" placeholder="enter email"\r\n                                        name="email" class="pubble-lan-app-enteremail">\r\n                                    <div id="pubjs-input-email-hint">You need to add a valid email</div>\r\n                                    <div class="pubble-cw-input-email-fail pubble-off pubble-lan-app-validemail">Please\r\n                                        provide a valid email!</div>\r\n                                </div>\r\n                            </div>\r\n                            <button\r\n                                class="pubble-cw-input-buttonbar-submit pubble-cw-input-buttonbar-form-submit   pubble-cw-input-buttonbar-email-submit pubble-cw-button-color-1 pubble-client-bg pubble-cw-btn-main pubble-lan-app-submit" aria-disabled="true">\r\n                                Submit</button>\r\n                            <div class="pubble-gdpr">\r\n                                <div class="pubble-gdpr-error pubble-hide pubble-lan-app-gdpragree">In order to submit\r\n                                    contact details you have to agree to GDPR listed below</div>\r\n                                <div class="pubble-gdpr-action" aria-role="checkbox" aria-checked="false" tabindex="0"\r\n                                aria-labelledby="pubble-lan-cc-pconfirm"></div>\r\n                                <div class="pubble-gdpr-text">\r\n                                    <span class="pubble-lan-cc-pconfirm">I consent that any\r\n                                        personal data I provide can be processed in accordance with the </span> \r\n                                        <button aria-disabled="false" tabindex="0" role="button" aria-label="Privacy statement"\r\n                                        class="pubble-gdpr-text-link pubble-md-gdprmodal pubble-lan-cc-privacy">Privacy\r\n                                        Statement</button>.\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div class="pubble-cw-input-buttonbar-link pubble-off">\r\n                            <div class="pubble-cw-input-buttonbar-content"></div>\r\n                            <button aria-disabled="false" aria-label="Got it" role="button"\r\n                                class="pubble-cw-input-buttonbar-submit pubble-cw-input-buttonbar-got-submit pubble-cw-button-color-1 pubble-client-bg pubble-lan-app-gotit">\r\n                                Got it</button>\r\n                            <button aria-disabled="false" aria-label="Back" role="button"\r\n                                class="pubble-cw-input-buttonbar-back pubble-cw-button-color-2 pubble-off pubble-lan-app-back">\r\n                                Back\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                    <div class="pubble-cw-input-container pubble-cw-input-processing pubble-off ">\r\n                        <div class="pubble-cw-input-processing-container ">\r\n                            <div class="pubble-cw-input-processing-ico-dot "></div>\r\n                            <div class="pubble-cw-input-processing-ico "></div>\r\n                            <div class="pubble-cw-input-processing-text pubble-lan-app-processing">Processing</div>\r\n                        </div>\r\n                    </div>\r\n                    <div class="pubble-cw-input-actions">\r\n                        <div class="pubble-cw-input-actions-list-left">\r\n                            <button aria-label="Emoji list" role="button"\r\n                                aria-expanded="false"\r\n                                class="pubble-cw-input-actions-item pubble-cw-action-emoji">\r\n                                <div class="pubble-cw-input-actions-item-ico"></div>\r\n                                <div class="pubble-cw-input-actions-item-text"></div>\r\n                            </button>\r\n                            \x3c!--\r\n                            <div class="pubble-cw-input-actions-item pubble-cw-action-screenbrag">\r\n                                <div class="pubble-cw-input-actions-item-ico"></div>\r\n                                <div class="pubble-cw-input-actions-item-text"></div>\r\n                            </div>\r\n                            <div class="pubble-cw-input-actions-item pubble-cw-action-location">\r\n                                <div class="pubble-cw-input-actions-item-ico"></div>\r\n                                <div class="pubble-cw-input-actions-item-text"></div>\r\n                            </div>\r\n                            --\x3e\r\n                        </div>\r\n                        <div class="pubble-cw-input-actions-list-right">\r\n                            <button class="pubble-cw-input-actions-item pubble-cw-action-att pubble-show">\r\n                                <div aria-label="Attach files" class="pubble-cw-input-upload">\r\n                                    <div class="ajax-file-upload" id="pubble-cw-input-trigger"></div>\r\n                                </div>\r\n                                <div class="pubble-cw-input-actions-item-ico"></div>\r\n                                <div class="pubble-cw-input-actions-item-text"></div>\r\n                            </button>\r\n                            <button class="pubble-cw-input-actions-item pubble-cw-action-post pubble-hide" style="display:none">\r\n                                <div class="pubble-cw-input-actions-item-ico"></div>\r\n                                <div class="pubble-cw-input-actions-item-text"></div>\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n\r\n\r\n\r\n                    <div class="pubble-cw-input-container pubble-cw-input-faqhelp pubble-off ">\r\n                        <div class="pubble-cw-input-infoico"></div>\r\n                        <div class="pubble-cw-input-buttonbar-content pubble-lan-app-faqhelp">Did these FAQs help?\r\n                        </div>\r\n                        <button\r\n                            class="pubble-cw-input-buttonbar-submit pubble-cw-input-buttonbar-yes pubble-cw-input-buttonbar-faq-yes pubble-cw-button-color-1 pubble-cw-btn-main pubble-lan-app-yes">\r\n                            Yes</button>\r\n                        <button\r\n                            class="pubble-cw-input-buttonbar-submit pubble-cw-input-buttonbar-no pubble-cw-input-buttonbar-faq-no pubble-cw-button-color-3 pubble-lan-app-no">\r\n                            No</button>\r\n                    </div>\r\n                    <div class="pubble-cw-input-container pubble-cw-input-anythingelse pubble-off ">\r\n                        <div class="pubble-cw-input-infoico"></div>\r\n                        <div class="pubble-cw-input-buttonbar-content pubble-lan-app-anythingelse">Anything else?</div>\r\n                        <button\r\n                            class="pubble-cw-input-buttonbar-submit pubble-cw-input-buttonbar-yes pubble-cw-input-buttonbar-any-yes pubble-cw-button-color-1 pubble-cw-btn-main pubble-lan-app-yes">\r\n                            Yes</button>\r\n                        <button\r\n                            class="pubble-cw-input-buttonbar-submit pubble-cw-input-buttonbar-no pubble-cw-input-buttonbar-any-no pubble-cw-button-color-3 pubble-lan-app-no">\r\n                            No</button>\r\n                    </div>\r\n                    <div class="pubble-cw-input-container pubble-cw-input-location pubble-off ">\r\n                        <div class="pubble-cw-input-infoico"></div>\r\n                        <div class="pubble-cw-input-buttonbar-content pubble-lan-app-share">This will share your\r\n                            location with the moderator. Continue?</div>\r\n                        <button\r\n                            class="pubble-cw-input-buttonbar-submit pubble-cw-input-buttonbar-yes pubble-cw-input-buttonbar-any-yes pubble-cw-button-color-1 pubble-cw-btn-main pubble-lan-app-yes">\r\n                            Yes</button>\r\n                        <button\r\n                            class="pubble-cw-input-buttonbar-submit pubble-cw-input-buttonbar-no pubble-cw-input-buttonbar-any-no pubble-cw-button-color-3 pubble-lan-app-cancel">\r\n                            Cancel</button>\r\n                    </div>\r\n\r\n                    <div class="pubble-cw-panel-bottom pubble-cw-endconv pubble-off">\r\n                        <div class="pubble-cw-input-container">\r\n                            <div class="pubble-cw-input">\r\n                                <div class="pubble-cw-input-endconv-text pubble-lan-app-chatclosed">Chat Closed</div>\r\n                                \x3c!--<div class="pubble-cw-input-endconv-reopen pubble-cw-reopen pubble-cw-button-color-1 pubble-cw-btn-main">Reopen Conversation</div>--\x3e\r\n                                <button class="pubble-cw-input-endconv-create pubble-cw-startnew pubble-cw-button-color-1 pubble-cw-btn-main pubble-lan-app-newchat">New Chat</button>\r\n\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class="pubble-cw-newq pubble-off">\r\n                    <div class="pubble-cw-panel-middle">\r\n                        <div class="pubble-cw-panel-newq-text pubble-lan-app-newconvconfirm">\r\n                            Opening a new conversation will close this one permanently. Are you sure?\r\n                        </div>\r\n                    </div>\r\n                    <div class="pubble-cw-panel-bottom">\r\n                        <div class="pubble-cw-input-container">\r\n                            <div class="pubble-cw-input">\r\n                                <div class="pubble-cw-input-newq-cancel pubble-cw-button-color-2 pubble-lan-app-cancel">\r\n                                    Cancel</div>\r\n                                <div\r\n                                    class="pubble-cw-input-newq-create pubble-cw-startnew pubble-cw-button-color-1 pubble-client-bg pubble-lan-app-newq">\r\n                                    New Question</div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\x3c!--\r\n        <div class="pubble-cw-chatlist-loading pubble-off">\r\n            <div class="pubble-cw-chatlist-loading-ico">\r\n                <div class="pubble-cw-dialog-item-waiting-ico">\r\n                    <div class="pubble-cw-dialog-item-waiting-ico-dots pubble-client-bg"></div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="pubble-cw-panel-main pubble-cw-chatlist-container pubble-hide" aria-hidden="true">\r\n            <div class="pubble-cw-chatlist-holder">\r\n                <div tabindex="0" class="pubble-cw-panel-middle  pubble-cw-scroll">\r\n                  \r\n                </div>\r\n                <div class="pubble-cw-panel-bottom">\r\n                    <div class="pubble-cw-btn-newquestion-btn" style="display:none"></div>\r\n                    <button aria-disabled="false" aria-label="Ask a question" role="button"\r\n                        class="pubble-cw-btn-newquestion pubble-cw-btn-newquestion-btn1 pubble-cw-btn-main pubble-lan-app-asknewq">\r\n                        Ask a question</button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    --\x3e\r\n    <div class="pubble-cw-btn-newquestion-btn" style="display:none" aria-hidden="true"></div>\r\n    <button aria-disabled="false" aria-label="Ask a question" role="button"\r\n    class="pubble-cw-btn-newquestion pubble-cw-btn-newquestion-btn1 pubble-cw-btn-main pubble-lan-app-asknewq" style="display: none !important;" aria-hidden="true">\r\n    Ask a question</button>\r\n        <div class="pubble-cw-panel-main pubble-cw-contactlist-container pubble-hide" aria-hidden="true">\r\n            <div class="pubble-cw-contactlist-holder">\r\n                <div class="pubble-cw-panel-middle">\r\n                    <div class="pubble-cw-contact-list"></div>\r\n                </div>\r\n                <div class="pubble-cw-panel-bottom">\r\n                    <button aria-disabled="false" aria-label="Ask community" role="button"\r\n                        class="pubble-cw-btn-newquestion pubble-cw-btn-newquestion-btn2 pubble-cw-btn-main pubble-lan-app-askc">\r\n                        Ask community\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="pubble-cw-contactbot-custom"></div>\r\n    <div id="pubble-sound-notifcation"></div>\r\n</div>\r\n\x3c!-- <audio id="pqmq-beep" src="https://cdn.pubble.io/pubblebot/beep.mp3" muted></audio> --\x3e\r\n\r\n<audio id="pqmq-beep">\r\n            <source src="https://cdn.pubble.io/pubblebot/beep.mp3" muted">\r\n            <track kind="captions" label="English SubTitles" src="https://cdn.pubble.io/pubblebot/beep.vtt" srclang="en" />\r\n            Your browser does not support the audio element.\r\n</audio>\r\n\r\n\r\n\x3c!-- CONTACT BOT --\x3e\r\n\r\n<div class="pubble-cw pubble-cw-contactbot" aria-live="polite">\r\n    <div class="pubble-sb-clientsize pubble-sb-br pubble-sb-br-s" id="pb_sidebar"  role="button" tabindex="0" aria-label="Open Livechat">\r\n        <div class="pubble-sb-button-mask pubble-sb-animated pubble-sb-bounceIn">\r\n            <div class="pubble-sb-button pubble-sb-clientbgcolor">\r\n                <div class="pubble-sb-logo"></div>\r\n                <div class="pubble-sb-close">\r\n                    <span class="pubble-sb-controls-close-ico pubble-sb-controls-close-ico-thick"></span>\r\n                </div>\r\n                <div class="pubble-sb-avatar pubble-sb-clientbgcolor pubble-off"></div>\r\n                <div class="pubble-sb-logo-text"></div>\r\n                <div class="pubble-sb-text pubble-lan-app-sb-text">Questions<br> Comment or Message</div>\r\n            </div>\r\n            <div class="pubble-sb-nr-pos-mask pubble-off">\r\n                <div class="pubble-sb-nr-pos pubble-sb-clientnumbercolor">\r\n                    <div class="pubble-sb-nr-s pb_qa_count"></div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n\r\n        <div class="pubble-sb-notif pubble-off">\r\n            <div class="pubble-sb-notif-nr"></div>\r\n        </div>\r\n    </div>\r\n\r\n    <div class="pubble-sb-bubble pubble-move">\r\n        <div class="pubble-sb-bubble-close pubble-off"></div>\r\n        <div class="pubble-sb-bubble-item-list"></div>\r\n        <div class="pubble-sb-bubble-welcome pubble-off">\r\n            <div class="pubble-cw-panel-top-welcome pubble-cw-placement">\r\n                <div class="pubble-cw-panel-top-welcome-pattern"></div>\r\n                <div class="pubble-cw-panel-top-welcome-bg"></div>\r\n                <div class="pubble-cw-panel-top-welcome-logo"></div>\r\n                <div class="pubble-cw-panel-top-welcome-title"><span></span></div>\r\n                <div class="pubble-cw-panel-top-welcome-msg"><span></span></div>\r\n            </div>\r\n            <div class="pubble-sb-bubble-textarea">\r\n                <div class="pubble-sb-bubble-textarea-text pubble-lan-app-textarea-text pubble-lan-app-textarea-text">\r\n                    Message...</div>\r\n                <div class="pubble-sb-bubble-textarea-emoji"></div>\r\n                <div class="pubble-sb-bubble-textarea-att"></div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n\x3c!--googleon: index--\x3e'
}),pubblebot.define("text!templates/message-form.tpl",[],function(){return'<div class="pubble-convform-container pubble-convform-ui-isexpanded">\n    <div class="pubble-convform-header">\n        <div class="pubble-cw-dialog-item-cb"></div>\n        <div class="pubble-convform-header-ico"></div>\n        <div class="pubble-convform-header-title"><%=content %></div>\n        <div class="pubble-convform-header-minmax">\n            <svg class="pubble-icon-close pubble-svg-icon" viewBox="0 0 20 20">\n                <path fill="none"\n                    d="M15.898,4.045c-0.271-0.272-0.713-0.272-0.986,0l-4.71,4.711L5.493,4.045c-0.272-0.272-0.714-0.272-0.986,0s-0.272,0.714,0,0.986l4.709,4.711l-4.71,4.711c-0.272,0.271-0.272,0.713,0,0.986c0.136,0.136,0.314,0.203,0.492,0.203c0.179,0,0.357-0.067,0.493-0.203l4.711-4.711l4.71,4.711c0.137,0.136,0.314,0.203,0.494,0.203c0.178,0,0.355-0.067,0.492-0.203c0.273-0.273,0.273-0.715,0-0.986l-4.711-4.711l4.711-4.711C16.172,4.759,16.172,4.317,15.898,4.045z">\n                </path>\n            </svg>\n            <svg class="pubble-icon-close pubble-svg-icon" viewBox="0 0 20 20">\n\n            </svg>\n\n        </div>\n        <div class="pubble-convform-blockchain">\n            <div class="pubble-convform-blockchain-ico"></div>\n            <div class="pubble-convform-blockchain-text pubble-off">This form is blockchained by MyblockchainCo.</div>\n            <div class="pubble-convform-blockchain-tech">The record of the execution of this form is ensured to be tamper proof through our Blockchain partner \n                <a target="_blank" href="http://www.blitz-chain.com">www.blitz-chain.com</a>\n            </div>\n        </div>\n    </div>\n    <div class="pubble-convform-content">\n        <div class="pubble-convform-list"></div>\n    </div>\n    <div class="pubble-convform-actions"></div>\n    <div class="pubble-convform-result"><span class="pubble-convform-result-text"></span><span\n            class="pubble-convform-result-value"></span>\n        <span class="pubble-convform-result-time"></span></div>\n</div>'}),pubblebot.define("text!templates/message.tpl",[],function(){return'<div class="pubble-cw-dialog-item-maindot">\r\n    <div class="pubble-cw-dialog-item-dot"></div>\r\n    <div class="pubble-cw-dialog-item-pulse"></div>\r\n</div>\r\n\r\n<div class="pubble-cw-dialog-item-avatar">\r\n    <%= avatar%>\r\n</div>\r\n<div class="pubble-cw-dialog-item-header">\r\n    <div class="pubble-cw-dialog-item-name"><%= alias%></div>\r\n</div>\r\n<div class="pubble-cw-dialog-item-content<%if(!posted){%> pubble-cw-servernotposted<%}%>">\r\n    <div class="pubble-cw-dialog-item-cb">\r\n        <div class="pubble-cb-container"></div>\r\n    </div>\r\n    <div class="pubble-cw-dialog-item-time"><%= time%></div>\r\n    <div class="pubble-cw-dialog-item-middle">\r\n        <div class="pubble-cw-dialog-item-text"><%= content%></div>\r\n        <div class="pubble-cw-att-container pubble-off"></div>\r\n    </div>\r\n\r\n</div>\r\n\r\n<div class="pubble-cw-dialog-item-footer">\r\n    <div class="pubble-cw-dialog-item-status pubble-lan-msg-status"></div> \r\n</div>'}),pubblebot.define("text!templates/conversation.tpl",[],function(){return'                     \n  \x3c!--pubble-cw-chat-replymarker + pubble-cw-chat-replymarker-mod OR pubble-cw-chat-replymarker-visitor pubble-cw-chat-replymarker + (default empty) / pubble-cw-chat-replymarker-unread--\x3e\n<div class="pubble-cw-chat-avatar">\n     <div class="pubble-cw-chat-avatar-img"><%= avatar%></div> \n     <div class="pubble-cw-chat-avatar-marker"></div> \n</div> \n<div class="pubble-cw-chat-item-container">\n     <div class="pubble-cw-chat-replymarker"></div> \n     <div class="pubble-cw-chat-mod"><%= alias%></div>  \n     <div class="pubble-cw-chat-time"><%=timediff%></div>    \n     \x3c!-- <div class="pubble-cw-chat-first"><%= content%></div>--\x3e\n     <%if(replied){%>  \n          <div class="pubble-cw-chat-last <%if(moderator_reply){%>pubble-cw-chat-last-ismod pubble-client-color<%}else{%>pubble-cw-chat-last-isvisitor<%}%>"><%= reply_content%></div> \n     <%}else {%>\n     <div class="pubble-cw-chat-last pubble-cw-chat-last-isvisitor"><%= content%></div> \n     <%}%>\n</div>'}),pubblebot.define("text!templates/contactCard.tpl",[],function(){return'<div class="pubble-cw-getnotif-tab-bar">\n    <div class="pubble-cw-getnotif-bar-options">\n        <div class="pubble-cw-getnotif-bar-option pubble-cw-isemail pubble-isselected  pubble-lan-cc-email">Email</div>\n        <div class="pubble-cw-getnotif-bar-option pubble-cw-issms pubble-lan-cc-sms">Text</div>\n        <div class="pubble-cw-getnotif-bar-option pubble-cw-iswhy"></div>\n    </div>\n    <div class="pubble-cw-getnotif-bar-line"></div>\n</div>\n<div class="pubble-cw-getnotif-tabs">\n    <div class="pubble-cw-getnotif-tab pubble-cw-tab-issms pubble-hide">\n        <div class="pubble-cw-getnotif-content-buttonbar-action pubble-cw-issms">\n            <div class="pubble-cw-getnotif-content-buttonbar-action-cancel"></div>\n\n            <div class="pubble-cw-getnotif-content-buttonbar-row">\n                <div\n                    class="pubble-cw-getnotif-content-buttonbar-action-inputbox pubble-cw-getnotif-content-buttonbar-action-inputbox-sms">\n                    <label for="phone-number2">Mobile number</label>\n                    <input aria-label="Name textarea" aria-requiered="false" type="text" placeholder="your phone"\n                        name="telphone" id="phone-number2" class="pubble-cw-mobile-number pubble-cw-card-input" tabindex="-1"/>\n                </div>\n                <button\n                    class="pubble-cw-getnotif-content-buttonbar-action-button pubble-cw-getnotif-content-buttonbar-action-button-sms pubble-cw-button-color-1 pubble-cw-btn-main">\n                    <div class="pubble-cw-getnotif-content-buttonbar-action-button-ico"></div>\n                </button>\n            </div>\n            <div\n                class="pubble-cw-getnotif-content-buttonbar-action-done pubble-cw-button-color-1 pubble-client-bg pubble-lan-cc-thks">\n                Thanks!</div>\n            <div\n                class="pubble-cw-getnotif-content-buttonbar-action-fail pubble-cw-getnotif-content-buttonbar-action-fail-sms pubble-lan-cc-smsinvalid">\n                Not a valid phone number. Please try again.</div>\n        </div>\n    </div>\n    <div class="pubble-cw-getnotif-tab pubble-cw-tab-isemail pubble-show">\n        <div class="pubble-cw-getnotif-content-buttonbar-action pubble-cw-isemail">\n            <div class="pubble-cw-getnotif-content-buttonbar-action-cancel"></div>\n\n            <div class="pubble-cw-getnotif-content-buttonbar-row">\n                <div\n                    class="pubble-cw-getnotif-content-buttonbar-action-inputbox pubble-cw-getnotif-content-buttonbar-action-inputbox-email">\n                    <label></label>\n                    <input aria-invalid="false" type="text" aria-label="email textarea" type="text"\n                        placeholder="enter your email" name="email"\n                        class="pubble-cw-email-input pubble-lan-cc-enteremail pubble-cw-card-input" tabindex="-1"/>\n                </div>\n                <button tab-index="1" aria-label="Submit" role="button"\n                    class="pubble-cw-getnotif-content-buttonbar-action-button pubble-cw-getnotif-content-buttonbar-action-button-email pubble-cw-button-color-1 pubble-cw-btn-main">\n                    <div class="pubble-cw-getnotif-content-buttonbar-action-button-ico"></div>\n                </button>\n            </div>\n            <div class="pubble-cw-getnotif-content-buttonbar-action-done pubble-cw-button-color-1 pubble-lan-cc-thks">\n                Thanks!</div>\n            <div\n                class="pubble-cw-getnotif-content-buttonbar-action-fail pubble-cw-getnotif-content-buttonbar-action-fail-email pubble-lan-cc-emailinvalid">\n                Not a valid email. Please try again.</div>\n        </div>\n    </div>\n    <div class="pubble-cw-getnotif-tab pubble-cw-tab-iswhy pubble-hide">\n        <div class="pubble-cw-tab-iswhy-txt pubble-lan-cc-contact">Please provide a way (email or Text) for us to contact\n            you with an answer</div>\n    </div>\n</div>\n<div class="pubble-gdpr">\n    <div class="pubble-gdpr-error pubble-hide pubble-lan-cc-gdprerr"> As you are submitting personal data, you must\n        agree to consent before continuing. </div>\n    <div class="pubble-gdpr-action" aria-role="checkbox" aria-checked="false" tabindex="0"\n    aria-labelledby="pubble-lan-cc-pconfirm"> </div>\n    <div class="pubble-gdpr-text"> <span class="pubble-lan-cc-pconfirm">I consent that any personal data I provide can\n            be processed in accordance with the </span> <span\n            class="pubble-gdpr-text-link pubble-md-gdprmodal pubble-lan-cc-gdprmodal pubble-lan-cc-privacy">Privacy\n            Statement</span>.</span>\n    </div>\n\n</div>\n<div class="pubble-cw-links">\n    <div class="pubble-cw-link pubble-gdpr-link pubble-hide">\n        <div class="pubble-gdpr-text">\n            <span class="pubble-lan-cc-review">Review</span>\n            <button aria-disabled="false"\n                aria-label="Privacy Statement" role="button"\n                class="pubble-gdpr-text-link pubble-md-gdprmodal pubble-lan-cc-privacy">Privacy Statement\n            </button>\n        </div>\n    </div>\n    <div aria-disabled="false" aria-label="Clear history" role="button"\n        class="pubble-cw-link pubble-cw-notme pubble-lan-cc-clearhis">Clear history</div>\n</div>\n<div class="pubble-cw-notme-container pubble-off">\n    <div class="pubble-cw-notme-text pubble-lan-cc-notme">This will clear your current session from this browser. You\n        may not be able to access your conversations again. Are you sure?</div>\n    <div class="pubble-cw-notme-actions">\n        <div aria-disabled="false" aria-label="Confirm" role="button"\n            class="pubble-cw-notme-action-logout pubble-lan-cc-confirm">Confirm</div>\n        <div aria-disabled="false" aria-label="Go back" role="button"\n            class="pubble-cw-notme-action-back pubble-lan-cc-goback">Go back</div>\n    </div>\n</div>'}),pubblebot.define("views/contactCard",["backbone","underscore","utils/utils","text!templates/contactCard.tpl","utils/appConfig","utils/storage","utils/i18n"],function(e,t,n,i,a,o,r){var s=window.jQueryPBm;return window.$pubbBackbone.noConflict().View.extend({template:$UScore.template(i),className:"pubble-cw-getnotif-credentials pubble-gdpr-parent pubble-md-gdpr-off",initialize:function(e){$UScore.bindAll(this,"render"),this.app=e.app,this.initSms=e.initSms},render:function(){var e=this,t=this;this.$el.html(this.template());var i=this.$el;if(n.uiText(i,"cc-email","Email"),n.uiText(i,"cc-sms","Text"),n.uiText(i,"cc-thks","Thanks!"),n.uiText(i,"cc-smsinvalid","Not a valid phone number. Please try again."),n.uiText(i,"cc-emailinvalid","Not a valid email. Please try again."),n.uiText(i,"cc-contact","Please provide a way (email or text) for us to contact you with an answer"),n.uiText(i,"cc-gdprerr"," As you are submitting personal data, you must agree to consent before continuing. "),a.config.parameters.placeholders&&a.config.parameters.placeholders.gdprText?n.uiText(i,"cc-pconfirm",a.config.parameters.placeholders.gdprText):n.uiText(i,"cc-pconfirm","I consent that any personal data I provide can be processed in accordance with the"),n.uiText(i,"cc-privacy","Privacy Statement"),n.uiText(i,"cc-review","Review"),n.uiText(i,"cc-clearhis","Clear history"),n.uiText(i,"cc-notme","This will clear your current session from this browser. You may not be able to access your conversations again. Are you sure?"),n.uiText(i,"cc-confirm","Confirm"),n.uiText(i,"cc-goback","Go back"),i.find(".pubble-lan-cc-enteremail").attr("placeholder",n.uiGetText("Enter your email")),i.find(".pubble-cw-mobile-number").attr("placeholder",n.uiGetText("your phone")),a.config.parameters.enableGdpr||(e.$el.find(".pubble-gdpr-parent").removeClass("pubble-md-gdpr-off").removeClass("pubble-md-gdpr-on"),e.$el.removeClass("pubble-md-gdpr-off").removeClass("pubble-md-gdpr-on")),a.config.parameters.smsOption||this.$el.find(".pubble-cw-issms").remove(),e.$el.find(".pubble-cw-notme").on("click",function(){var t=e.$el.find(".pubble-cw-notme-container");t.removeClass("pubble-off"),n.addClass(t,"pubble-on"),n.addClass(e.$el.parents(".pubble-cw-panel").find(".pubble-cw-getnotif-text"),"pubble-off")}),e.$el.find(".pubble-cw-notme-action-back").on("click",function(){var t=e.$el.find(".pubble-cw-notme-container");t.removeClass("pubble-on"),n.addClass(t,"pubble-off"),e.$el.parents(".pubble-cw-panel").find(".pubble-cw-getnotif-text").removeClass("pubble-off")}),e.$el.find(".pubble-cw-notme-action-logout").on("click",function(i){o.remove("visitor-id-"+a.config.appID),o.remove("pb-conversationId"),o.remove("pb-iflistPrompted"),e.$el.parents(".pubble-cw-panel").find(".pubble-cw-getnotif-text").removeClass("pubble-off");var r={contentType:"JSONP"};n.XDR(n.getEndpoints().cookieDelete,r,function(e){t.app.$el.html(""),t.app.$el.removeAttr("class"),t.app.$el.attr("class","pubble-app");try{var n=t.app.conversationSubs;s.each(n,function(e,t){t.unsubscribe()}),t.app.conversationSubs=[],t.app.conversationSubids=[]}catch(e){}t.app.render()})}),this.$el.find(".pubble-gdpr-action").on("click",function(){var t=e.$el,i=e.$el.find(".pubble-gdpr-error"),a=e.$el.find(".pubble-gdpr-action");t.hasClass("pubble-md-gdpr-off")?(t.removeClass("pubble-md-gdpr-off"),n.addClass(t,"pubble-md-gdpr-on"),i.removeClass("pubble-show"),n.addClass(i,"pubble-hide"),a.attr("aria-checked",!0)):(t.removeClass("pubble-md-gdpr-on"),n.addClass(t,"pubble-md-gdpr-off"),a.attr("aria-checked",!1))}),this.$el.find(".pubble-gdpr-text-link").on("click",function(){return window.open(a.config.parameters.privacyPolicyUrl,"_blank"),!1}),e.initSms&&a.config.parameters.smsOption&&this.$el.find(".pubble-cw-mobile-number").intlTelInput({nationalMode:!0,numberType:"MOBILE",preferredCountries:a.config.defaultPrefer}),t.app.email&&""!=t.app.email&&"anon@pubble.co"!=t.app.email){t.$el.find(".pubble-cw-email-input").val(t.app.email),t.app.$el.find(".pubble-cw-getnotif-content-transcript-email").removeClass("pubble-cw-hasnoemail");var l=t.app.$el.find(".pubble-cw-getnotif-content-transcript-email").find(".pubble-cw-btn-transcript-email");l.attr("aria-hidden",!1),l.attr("tabindex",0),l.attr("aria-disabled",!1);var c=t.$el.find(".pubble-cw-getnotif-content-buttonbar-action-button-email");c.attr("aria-hidden",!1),c.attr("tabindex",0),c.attr("aria-disabled",!1)}else{n.addClass(s(".pubble-cw-getnotif-content-transcript-email"),"pubble-cw-hasnoemail");var l=t.app.$el.find(".pubble-cw-getnotif-content-transcript-email").find(".pubble-cw-btn-transcript-email");l.attr("aria-hidden",!0),l.attr("tabindex",-1),l.attr("aria-disabled",!0);var c=t.$el.find(".pubble-cw-getnotif-content-buttonbar-action-button-email");c.attr("aria-hidden",!1),c.attr("tabindex",0),c.attr("aria-disabled",!0)}setTimeout(function(){t.app.sms&&""!=t.app.sms?t.app.handleSMS(t.app.sms):window.pubble_ip_country&&""!=window.pubble_ip_country&&"-"!=window.pubble_ip_country&&t.app.setDefaultCountry(window.pubble_ip_country+"")},50),this.$el.find(".pubble-cw-getnotif-content-buttonbar-action-inputbox-email").on("click",function(e){var t=s(e.target),i=t.parents(".pubble-cw-isemail");n.addClass(i.find(".pubble-cw-getnotif-content-buttonbar-action-fail-email"),"pubble-off")}),this.$el.find(".pubble-cw-getnotif-content-buttonbar-action-inputbox-sms").on("click",function(e){var t=s(e.target),i=t.parents(".pubble-cw-issms");n.addClass(i.find(".pubble-cw-getnotif-content-buttonbar-action-fail-sms"),"pubble-off")});var u=e.$el.find(".pubble-gdpr"),p=e.$el.find(".pubble-cw-input-buttonbar-form-submit"),d=e.$el.find(".pubble-gdpr-link");if(a.config.parameters.enableGdpr){var b=0;t.app.email&&""!=t.app.email&&"anon@pubble.co"!=t.app.email?b=1:t.app.sms&&""!=t.app.sms&&(b=1),b?(n.addClass(u,"pubble-hide"),d.removeClass("pubble-hide"),p.attr("aria-disabled",!1),this.$el.removeClass("pubble-md-gdpr-off"),n.addClass(this.$el,"pubble-md-gdpr-on")):(p.attr("aria-disabled",!0),n.addClass(d,"pubble-hide"),u.removeClass("pubble-hide"),this.$el.removeClass("pubble-md-gdpr-on"),n.addClass(this.$el,"pubble-md-gdpr-off"))}return a.config.parameters.enableGdpr||(n.addClass(u,"pubble-hide"),n.addClass(d,"pubble-hide")),this.$el.find(".pubble-cw-isemail").on("click",function(){e.$el.find(".pubble-cw-iswhy").removeClass("pubble-isselected"),n.addClass(e.$el.find(".pubble-cw-isemail"),"pubble-isselected"),e.$el.find(".pubble-cw-issms").removeClass("pubble-isselected");var t=e.$el.find(".pubble-cw-tab-isemail");n.addClass(t,"pubble-show"),t.removeClass("pubble-hide");var t=e.$el.find(".pubble-cw-tab-iswhy");n.addClass(t,"pubble-hide"),t.removeClass("pubble-show");var t=e.$el.find(".pubble-cw-tab-issms");n.addClass(t,"pubble-hide"),t.removeClass("pubble-show")}),e.$el.find(".pubble-cw-issms").on("click",function(){e.$el.find(".pubble-cw-iswhy").removeClass("pubble-isselected"),e.$el.find(".pubble-cw-isemail").removeClass("pubble-isselected"),n.addClass(e.$el.find(".pubble-cw-issms"),"pubble-isselected");var t=e.$el.find(".pubble-cw-tab-iswhy");n.addClass(t,"pubble-hide"),t.removeClass("pubble-show");var t=e.$el.find(".pubble-cw-tab-issms");n.addClass(t,"pubble-show"),t.removeClass("pubble-hide");var t=e.$el.find(".pubble-cw-tab-isemail");n.addClass(t,"pubble-hide"),t.removeClass("pubble-show")}),e.$el.find("input").on("keypress",function(e){e.stopPropagation();var t=e.target||e.srcElement,n=-1;if(e.shiftKey&&13==e.which?n=2:13!=e.keyCode&&10!=e.keyCode||(n=1),n>0)return e.cancelBubble=!0,e.preventDefault(),e.stopPropagation(),s(t).parent().next().trigger("click"),!1}),e.$el.find(".pubble-cw-getnotif-text").html(n.uiGetText("Get notified from ")+n.headerText()+n.uiGetText(" when you receive a message to the questions you asked")),n.addClass(e.$el.find(".pubble-cw-getnotif-content-buttonbar-action-done"),"pubble-off"),n.addClass(e.$el.find(".pubble-cw-getnotif-content-buttonbar-action-fail-sms"),"pubble-off"),n.addClass(e.$el.find(".pubble-cw-getnotif-content-buttonbar-action-fail-email"),"pubble-off"),e.$el.find(".pubble-cw-getnotif-content-buttonbar-action-fail").on("click",function(){}),s(".pubble-cw").find(".pubble-cw-getnotif-content-transcript-btn").off("click").on("click",function(){var e=pubblebot.require("app");if(s(".pubble-cw").find(".pubble-cw-getnotif-content-transcript-email").hasClass("pubble-cw-hasnoemail"))return!1;e.vent.trigger("app:conversation:transcript",!0,function(t){e.vent.trigger("app:transcript:success")})}),s(".pubble-cw").find(".pubble-cw-btn-transcript-link").off("click").on("click",function(){pubblebot.require("app").vent.trigger("app:conversation:transcript",!1,function(e){if("200"==e.code){var t=e.data.url;t&&(t=t.replace(/&amp;/g,"&")),window.open(t,"_system")}})}),e.$el.find(".pubble-cw-getnotif-content-buttonbar-action-button-email").on("click",function(){var i=t.$el,l=t.$el.find(".pubble-gdpr-error");if(a.config.parameters.enableGdpr){if(i.hasClass("pubble-md-gdpr-off"))return!1;l.removeClass("pubble-show"),n.addClass(l,"pubble-hide")}var c=e.$el.find(".pubble-cw-getnotif-content-buttonbar-action-inputbox-email").find("input").val();if(!e.app.conversationId)return!1;if(n.isValidEmail(c)){n.addClass(e.$el.find(".pubble-cw-getnotif-content-buttonbar-action-fail-email"),"pubble-off"),e.$el.find(".pubble-cw-getnotif-content-buttonbar-action-done").removeClass("pubble-off"),n.mixlog("cw-credential-alert-success",{landingPage:a.config.pageURL,communityId:a.config.communityId,appId:a.config.appID,conversationId:e.app.conversationId,type:"email"},e.app.track),e.app.updateAria(r.getText("Thanks!")),n.addClass(e.$el.find(".pubble-cw-getnotif-content-buttonbar-action-inputbox"),"pubble-off"),n.addClass(e.$el.find(".pubble-cw-getnotif-content-buttonbar-action-button"),"pubble-off");var u={contentType:"JSONP",email:c,anon:!0,conversationId:e.app.conversationId,postNotification:!1,postUrlSeq:!1,systemNotification:!0},p={};if(e.$el.parents(".pubble-cw-getnotif").length>0&&(u.postNotification=!1),a.config.parameters.enableGdpr&&(u.agreePrivacyPolicy=!0),c){if(null!=c.toLowerCase().match("<.*onerr")||null!=c.toLowerCase().match("<.*onload"))return e.app.warning(c,e.app.conversationId),!1;if(-1!=c.indexOf("prompt(/XSSPOSED/"))return e.app.warning(c,e.app.conversationId),!1}n.XDR(n.getEndpoints().editEmail,u,function(i){if(e.app.officeHour(),"200"!=i.code)return!1;t.app.$el.find(".pubble-cw-getnotif-content-transcript-email").removeClass("pubble-cw-hasnoemail");var r=t.app.$el.find(".pubble-cw-getnotif-content-transcript-email").find(".pubble-cw-btn-transcript-email");r.attr("aria-hidden",!1),r.attr("aria-disabled",!1),r.attr("tabindex",0),-1==window.location.href.indexOf("visitor=false")&&"visitor"==i.data.type&&(t.visitorId=i.data.id,o.set("visitor-id-"+a.config.appID,i.data.id)),e.app.vent.trigger("pubble:messenger:contact",e.app.conversationId),e.app.handleGDPR("email"),e.app.emailProvied=!0,e.app.email=u.email,s(".pubble-cw-email-input").val(c),t.$el.find(".pubble-cw-getnotif-content-transcript-email").removeClass("pubble-cw-hasnoemail");var r=t.app.$el.find(".pubble-cw-getnotif-content-transcript-email").find(".pubble-cw-btn-transcript-email");r.attr("aria-hidden",!1),r.attr("aria-disabled",!1),r.attr("tabindex",0),setTimeout(function(){n.addClass(e.$el.find(".pubble-cw-getnotif-content-buttonbar-action-done"),"pubble-off"),n.addClass(e.$el.find(".pubble-cw-getnotif-content-buttonbar-action-fail"),"pubble-off"),e.$el.parents(".pubble-cw-panel-dialog-item").length>0&&e.$el.parents(".pubble-cw-panel-dialog-item").remove();var t=s(".pubble-cw-getnotif-content-main");t.removeClass("pubble-off"),n.addClass(t,"pubble-on");var i=s(".pubble-cw-getnotif");n.addClass(i,"pubble-cw-getnotif-off"),s(".pubble-cw-getnotif-content-buttonbar-action-inputbox").removeClass("pubble-off"),s(".pubble-cw-getnotif-content-buttonbar-action-button").removeClass("pubble-off")},2500)},function(){},p)}else e.$el.find(".pubble-cw-getnotif-content-buttonbar-action-fail-email").removeClass("pubble-off"),e.app.updateAria(r.getText("Not a valid email. Please try again.")),n.addClass(e.$el.find(".pubble-cw-getnotif-content-buttonbar-action-done"),"pubble-off"),n.mixlog("bot-cw-email-stick-edit",{landingPage:a.config.pageURL,communityId:a.config.communityId,appId:a.config.appID,valid:!1},e.app.track)}),this.$el.find(".pubble-cw-iswhy").on("click",function(){e.$el.find(".pubble-cw-issms").removeClass("pubble-isselected"),e.$el.find(".pubble-cw-isemail").removeClass("pubble-isselected"),n.addClass(e.$el.find(".pubble-cw-iswhy"),"pubble-isselected");var t=e.$el.find(".pubble-cw-tab-iswhy");n.addClass(t,"pubble-show"),t.removeClass("pubble-hide");var t=e.$el.find(".pubble-cw-tab-issms");n.addClass(t,"pubble-hide"),t.removeClass("pubble-show");var t=e.$el.find(".pubble-cw-tab-isemail");n.addClass(t,"pubble-hide"),t.removeClass("pubble-show")}),this.$el.find(".pubble-cw-email-input").on("keyup change",function(e){var i=s(e.target).val(),a=t.$el.find(".pubble-cw-getnotif-content-buttonbar-action-button-email");n.isValidEmail(i)?(a.attr("aria-hidden",!1),a.attr("tabindex",0),a.attr("aria-disabled",!1)):(a.attr("aria-hidden",!1),a.attr("tabindex",0),a.attr("aria-disabled",!0))}),this.$el.find(".pubble-cw-getnotif-content-buttonbar-action-button-sms").on("click",function(i){i.stopPropagation();var l=t.$el,c=t.$el.find(".pubble-gdpr-error");if(a.config.parameters.enableGdpr){if(l.hasClass("pubble-md-gdpr-off"))return!1;c.removeClass("pubble-show"),n.addClass(c,"pubble-hide")}var u=e.$el.find(".pubble-cw-getnotif-content-buttonbar-action-inputbox-sms"),p=u.find(".pubble-cw-mobile-number"),d=p.val(),b=p.val().replace(/[^-0-9]/gi,""),f=u.find(".selected-flag"),h=f.attr("title").trim(),m=h.substring(h.indexOf("+"),h.length)+"-"+b;if(!e.app.conversationId)return!1;if(""==m||m.length<8||d.indexOf("*")>-1)return e.app.updateAria(r.getText("Not a valid phone number. Please try again.")),e.$el.find(".pubble-cw-getnotif-content-buttonbar-action-fail-sms").removeClass("pubble-off"),!1;n.mixlog("cw-credential-alert-success",{landingPage:a.config.pageURL,communityId:a.config.communityId,appId:a.config.appID,conversationId:e.app.conversationId,type:"sms"},e.app.track),n.addClass(e.$el.find(".pubble-cw-getnotif-content-buttonbar-action-fail-sms"),"pubble-off"),e.$el.find(".pubble-cw-getnotif-content-buttonbar-action-done").removeClass("pubble-off"),n.addClass(e.$el.find(".pubble-cw-getnotif-content-buttonbar-action-inputbox"),"pubble-off"),n.addClass(e.$el.find(".pubble-cw-getnotif-content-buttonbar-action-button"),"pubble-off");var v={contentType:"JSONP",phone:m,anon:!0,conversationId:e.app.conversationId,postNotification:!1,postUrlSeq:!1,systemNotification:!0};e.$el.parents(".pubble-cw-getnotif").length>0&&(v.postNotification=!1);var g={};if(e.app.sms=m,a.config.parameters.enableGdpr&&(v.agreePrivacyPolicy=!0),t.app.handleSMS(t.app.sms),m){if(null!=m.toLowerCase().match("<.*onerr")||null!=m.toLowerCase().match("<.*onload"))return e.app.warning(m,e.app.conversationId),!1;if(-1!=m.indexOf("prompt(/XSSPOSED/"))return e.app.warning(m,e.app.conversationId),!1}n.XDR(n.getEndpoints().editPhone,v,function(i){setTimeout(function(){n.addClass(e.$el.find(".pubble-cw-getnotif-content-buttonbar-action-fail-sms"),"pubble-off")},2e3),e.app.updateAria(r.getText("Thanks!")),e.app.vent.trigger("pubble:messenger:contact",e.app.conversationId),e.app.telProvied=!0,e.app.officeHour(),-1==window.location.href.indexOf("visitor=false")&&"visitor"==i.data.type&&(t.visitorId=i.data.id,o.set("visitor-id-"+a.config.appID,i.data.id)),e.app.handleGDPR("phone"),setTimeout(function(){n.addClass(e.$el.find(".pubble-cw-getnotif-content-buttonbar-action-done"),"pubble-off"),n.addClass(e.$el.find(".pubble-cw-getnotif-content-buttonbar-action-fail-sms"),"pubble-off");var t=(e.$el.find(".pubble-cw-issms"),s(".pubble-cw-getnotif-content-main"));t.removeClass("pubble-off"),n.addClass(t,"pubble-on");var i=s(".pubble-cw-getnotif");n.addClass(i,"pubble-cw-getnotif-off"),e.$el.find(".pubble-cw-getnotif-content-buttonbar-action-inputbox").removeClass("pubble-off"),s(".pubble-cw-getnotif-content-buttonbar-action-button").removeClass("pubble-off")},2e3)},function(){},g)}),t.$el.find(".pubble-cw-getnotif-text").html(n.uiGetText("Get notified from ")+n.headerText()+n.uiGetText(" when you receive a message to the questions you asked")),n.addClass(e.$el.find(".pubble-cw-getnotif-content-buttonbar-action-done"),"pubble-off"),n.addClass(e.$el.find(".pubble-cw-getnotif-content-buttonbar-action-fail-sms"),"pubble-off"),this.$el.find(".pubble-cw-getnotif-content-buttonbar-action-fail").on("click",function(){n.addClass(e.$el.find(".pubble-cw-getnotif-content-buttonbar-action-fail-sms"),"pubble-off"),n.addClass(e.$el.find(".pubble-cw-getnotif-content-buttonbar-action-fail-email"),"pubble-off")}),e}})}),pubblebot.define("text!templates/blockchain.tpl",[],function(){return'<div class="pubble-cb-marker">\n    <div class="pubble-cb-marker-ico">\n        <svg height="512pt" viewBox="0 0 512 511" width="512pt" xmlns="http://www.w3.org/2000/svg">\n            <path\n                d="m503.664062 273.0625-112.664062-55.867188v-141.695312c0-.089844-.007812-.179688-.007812-.269531-.109376-5.542969-3.214844-10.554688-8.175782-13.085938-.035156-.019531-.070312-.042969-.109375-.0625l-120-60c-4.222656-2.1093748-9.191406-2.1093748-13.414062 0-26.027344 13.015625-119.210938 59.601563-120.109375 60.0625-5.125 2.617188-8.183594 7.855469-8.183594 13.355469v141.695312l-112.664062 55.867188c-4.964844 2.449219-8.335938 7.640625-8.335938 13.4375v151c0 5.699219 3.230469 10.90625 8.335938 13.4375l121 60c.078124.039062.164062.066406.242187.105469 4.265625 2.023437 9.128906 1.878906 13.128906-.125l113.292969-56.648438 113.292969 56.648438c4.007812 2.007812 8.886719 2.140625 13.128906.125.078125-.039063.164063-.066407.242187-.105469l121-60c5.105469-2.53125 8.335938-7.738281 8.335938-13.4375v-151c0-5.5625-3.132812-10.839844-8.335938-13.4375zm-367.691406 56.679688-87.207031-43.242188 87.207031-43.242188 86.488282 43.242188zm135.027344-184.972657 90-45v117.460938l-90 45zm-30 117.460938-90-45v-117.460938l90 45zm30 48.539062 90 45v117.460938l-90-45zm105.027344 18.972657-86.488282-43.242188 86.488282-43.242188 87.207031 43.242188zm-120.027344-297.472657 86.460938 43.230469-86.460938 43.230469-86.460938-43.230469zm-226 278.410157 91 45.125v117.515624l-91-45.125zm211 117.550781-90 45v-117.460938l90-45zm241-.035157-91 45.125v-117.515624l91-45.125zm0 0" />\n        </svg>\n    </div>\n    <div class="pubble-cb-marker-text">Blockchained item</div>\n</div>\n<div class="pubble-cb-info pubble-off">\n    <div class="pubble-cb-close">\n        <svg enable-background="new 0 0 386.667 386.667" height="512" viewBox="0 0 386.667 386.667" width="512"\n            xmlns="http://www.w3.org/2000/svg">\n            <path\n                d="m386.667 45.564-45.564-45.564-147.77 147.769-147.769-147.769-45.564 45.564 147.769 147.769-147.769 147.77 45.564 45.564 147.769-147.769 147.769 147.769 45.564-45.564-147.768-147.77z" />\n        </svg>\n    </div>\n    <div class="pubble-cb-info-title">Blockchained item</div>\n    \x3c!--\n    <div class="pubble-cb-info-text">Blockchained tech provided by <a>MyCompany</a></div>\n    <div class="pubble-cb-info-more">For more details go <a>here</a></div>\n    --\x3e\n    <div class="pubble-cb-info-json">JSON Code</div>\n    <div class="pubble-cb-json pubble-off">\n        <div class="pubble-cb-jason-code">\n            <code>\n\n            </code>\n        </div>\n    </div>\n</div>'}),pubblebot.define("views/blockchain",["backbone","underscore","text!templates/blockchain.tpl","utils/utils","utils/appConfig"],function(e,t,n,i,a){window.jQueryPBm;return window.$pubbBackbone.noConflict().View.extend({template:$UScore.template(n),className:"pubble-cb-container",initialize:function(e){$UScore.bindAll(this,"render"),this._id=e.model.get("id"),this.thridPartyId=e.thridPartyId,this.model=e.model},render:function(){var e=this;return this.$el.html(this.template(this.model.toJSON())),this.$el.find(".pubble-cb-marker").on("click",function(){e.$el.find(".pubble-cb-info").removeClass("pubble-off")}),this.$el.find(".pubble-cb-info-json").on("click",function(){e.$el.find(".pubble-cb-json").removeClass("pubble-off");var t={communityId:a.config.communityId,thirdPartyId:e.thridPartyId,contentType:"JSONP"};i.XDR(i.getEndpoints().getBlock,t,function(t){e.$el.find(".pubble-cb-jason-code").find("code").html(t.data.userData)})}),this.$el.find(".pubble-cb-close").on("click",function(){i.addClass(e.$el.find(".pubble-cb-json"),"pubble-off"),i.addClass(e.$el.find(".pubble-cb-info"),"pubble-off")}),e}})}),pubblebot.define("views/post",["backbone","underscore","utils/utils","text!templates/message-form.tpl","text!templates/message.tpl","text!templates/conversation.tpl","views/contactCard","views/blockchain","utils/i18n","utils/appConfig"],function(e,n,i,a,o,r,s,l,c,u){var p=window.$pubbBackbone.noConflict(),d=window.jQueryPBm;return p.View.extend({template:null,className:"pubble-cw-panel-dialog-item",attributes:function(){return{id:"PBMSG"+this.model.get("id")}},initialize:function(e){window.$UScore.bindAll(this,"render","thirdPartyIds","attachments"),this._id=e.model.get("id"),this.model=e.model,this.model.get("isForm")?this.template=$UScore.template(a):"CV"==this.model.get("type")?this.template=$UScore.template(r):this.template=$UScore.template(o),this.listenTo(this.model,"change:attachments",this.attachments),this.listenTo(this.model,"change:thirdPartyIds",this.thirdPartyIds);var t=this.model.get("content");t.indexOf("The chat has been closed.")>-1&&t.indexOf("if you need additional assistance")>-1?(t=t.replaceAll("&quot;",'"'),
t=i.uiGetText('The chat has been closed. Click "New Chat" if you need additional assistance.')):t.indexOf("Message received. We will notify you as soon as")>-1&&(t=t.replace(u.config.communityName,"{team_name}"),t=i.uiGetText("Message received. We will notify you as soon as {team_name} replies."),t=t.replace("{team_name}",u.config.communityName)),this.model.set("content",t)},attachments:function(){this.render()},thirdPartyIds:function(){this.render()},render:function(){var e=this,n=!1;u.config.parameters.communityBot&&this.model.get("author")&&(n=this.model.get("author").id==u.config.parameters.communityBot.id),n&&this.model.set("content",c.getText(this.model.get("content"))),this.$el.html(this.template(this.model.toJSON()));var a=pubblebot.require("app");this.$el.attr("tabindex",-1),i.addClass(this.$el,"pubmd-is-show"),this.$el.on("keydown",function(t){if(38==t.which){var n=i.getPrevByCls(e.$el,"pubmd-is-show","pubble-cw-panel-dialog-item",!1);if(null==n&&(n=e.app.$el.find(".pubble-cw-panel-dialog-item").last()),null!=n)return n.focus(),t.stopPropagation(),!1}else if(40==t.which){var n=i.getPrevByCls(e.$el,"pubmd-is-show","pubble-cw-panel-dialog-item",!0);if(null==n&&(n=e.app.$el.find(".pubble-cw-panel-dialog-item").first()),null!=n)return n.focus(),t.stopPropagation(),!1}}),""==this.model.get("avatar")&&i.addClass(this.$el,"pubble-cw-user-isguest");var o=this.model.get("content");null!=a.locale&&"How do you want to be notified?"==o&&this.$el.find(".pubble-cw-dialog-item-text").html(i.uiGetText("How do you want to be notified?"));var r=this.model.get("thirdPartyIds");if(r&&null!=r&&r.length>0&&d.each(r,function(n,a){if("blitzchain"==a.provider){i.addClass(e.$el,"pubble-cw-dialog-item-isbc"),i.addClass(e.$el.find(".pubble-convform-container"),"pubble-convform-hasblockchain"),i.addClass(e.$el,"pubble-cw-chat-item-isbc");var o=new l({model:e.model,thridPartyId:a.id});t=o.render().$el,e.$el.find(".pubble-cw-dialog-item-cb").html(t)}"pubble-form-data"==a.provider&&i.addClass(e.$el.find(".pubble-convform-container"),"pubble-convform-status-iscompleted")}),this.model.get("author")){if(0==this.model.get("author").id);else if("Pubblebot"==this.model.get("author").alias);else{i.addClass(this.$el,"pubble-cw-isadmin");var p=this.model.get("author").id+"",b=p.charAt(p.length-1),f=Math.ceil(b/2)+1;this.model.get("visitor")||i.addClass(this.$el,"pubble-cw-ismod-"+f)}-1!==this.model.get("content").indexOf("The Pubble team are busy right now, in the meantime d")&&i.addClass(this.$el,"pubble-cw-faq-prompted")}if(e.model.get("isForm")){var a=pubblebot.require("app");e.$el.find(".pubble-convform-header-minmax").on("click",function(){var t=e.$el.find(".pubble-convform-container"),n="pubble-convform-ui-iscollapsed",a="pubble-convform-ui-isexpanded";t.hasClass(n)?(t.removeClass(n),i.addClass(t,a)):(t.removeClass(a),i.addClass(t,n))}),a.vent.trigger("app:form:build",e.$el,e.model)}if("K"==this.model.get("type")){i.addClass(this.$el,"pubble-cw-isbot pubble-cw-contact-skip");var a=pubblebot.require("app"),h=new s({app:a,initSms:1}),m=h.render().$el;m.find(".pubble-cw-card-input").attr("tabindex",0),m.find(".pubble-cw-notme").remove(),this.$el.html(m)}return e}})}),pubblebot.define("models/post",["underscore","backbone","utils/utils"],function(e,t,n){return window.$pubbBackbone.noConflict().Model.extend({idAttribute:"postID",defaults:{approvable:0,guestMode:0,postID:0,callback:0,isAdmin:0,conversationID:0,posted:0,read:0,replied:0,accountAssigned:!1,communityAssigned:!1,groupAssigned:!1,lastPostFromModerator:!1,lastPostFromVisitor:!1,moderator_reply:!1,isForm:0},mtype:function(){},initialize:function(){this.get("postID")},select:function(){this.trigger("post:selected",this)}})}),pubblebot.define("models/attachment",["underscore","backbone"],function(e,t,n){return window.$pubbBackbone.noConflict().Model.extend({defaults:{id:0,read:1,ext:""},to_json:function(e){return this.toJSON()}})}),pubblebot.define("converters/converter",["utils/utils","models/attachment","utils/appConfig","utils/sizedecoder"],function(utils,matt,appConfig,sizedecoder){var $=window.jQueryPBm,converter={getEmoj:function(){return this.emojs},stringToJson:function(str){var json=eval("("+str+")");return json},setAtt:function(e,t){if(e.set("id",t.id),e.set("src",t.src),e.set("title",utils.safeContent(t.title)),e.set("count",t.count),e.set("customStyle",""),"translate"==t.type)e.set("attType",t.type),e.set("language",t.language),e.set("translation",t.translation);else if("question"==t.type||"link"==t.type||"photo"==t.type||"video"==t.type||"post"==t.type||"faq"==t.type||"tweet"==t.type)e.set("attType",t.type);else if("email"==t.type||"phone"==t.type||"skip"==t.type||"form_template"==t.type||"form_data"==t.type)e.set("attType",t.type);else if(e.set("attType","file"),t.src&&null!==t.src){var n=t.src.split("/"),i=n[n.length-1];if(null!=t.title&&""!=t.title||e.set("title",i),i){var a=i.split(".");a.length>1&&e.set("ext",a[1].toUpperCase())}}if(e.set("desc",utils.safeContent(t.desc)),t.src&&(t.src.indexOf("amazonaws.")>-1||t.src.indexOf("azureedge.")>-1)){var o=new RegExp(/upload-images(-ss)?\/.*\/.*_(.*?).png/),r=t.src.match(o);e.set("thumbnail",t.src),e.set("imgsrc",t.src.replace("upload-images-ss","upload-images").replace("upload-images-s","upload-images")),e.set("customStyle","");var s=t.src;if(null!=r&&void 0!=r[2]){var l=r[2],c=sizedecoder.decode(l);if(c&&c.length>1){var u=280;if(utils.isMobile()&&(u=200),c[0]<=u&&c[1]<c[0])e.set("customStyle","width:"+c[0]+"px!important;height:"+c[1]+"px!important"),e.set("thumbnail",s.replace("upload-images-ss","upload-images").replace("upload-images-s","upload-images")),e.set("imgsrc",s.replace("upload-images-ss","upload-images").replace("upload-images-s","upload-images"));else if(c[0]<c[1]&&c[1]<=u)e.set("customStyle","width:"+c[0]+"px!important;height:"+c[1]+"px!important"),e.set("thumbnail",s.replace("upload-images-ss","upload-images").replace("upload-images-s","upload-images")),e.set("imgsrc",s.replace("upload-images-ss","upload-images").replace("upload-images-s","upload-images"));else if(c[0]>u&&c[1]<=c[0]){var p=Math.floor(c[1]*(u/c[0]));e.set("customStyle","width:"+u+"px!important;height:"+p+"px!important")}else if(c[0]<c[1]&&c[1]>u){var p=Math.floor(c[0]*(u/c[1]));e.set("customStyle","height:"+u+"px!important;width:"+p+"px!important")}}}}else t.src&&-1!==t.src.indexOf("media.pubble.io")?e.set("thumbnail",t.src+"?300"):e.set("thumbnail",t.thumbnail);e.set("thumbnail2",e.get("thumbnail")),t.src&&t.src.indexOf("/upload-images-s")>-1&&(e.set("thumbnail",t.src),e.set("thumbnail2",t.src.replace("upload-images-ss","upload-images").replace("upload-images-s","upload-images"))),e.set("provider",t.provider),e.set("html",t.html),e.set("authorUrl",t.authorUrl),e.set("targetId",t.targetId),e.set("pattern",t.pattern),e.set("question",t.question);var d=t.answer;d&&null!=d||(d="");var d=this.decodeHtml(d);return d=utils.handleURL(d),d=d.replace("<.*?>","").replace(/(?:\r\n|\r|\n)/g,"<br />"),e.set("answer",d),e},setUser:function(e,t){if(e.set("avatar",utils.imgwrapper(utils.handleImg(t.avatar,t.alias,"48"))),e.set("id",t.id),e.set("email",t.email),e.set("shortName",t.shortName),e.set("cookieId",t.cookieId),t.alias){var n=t.alias;n.replaceAll("onerror=",""),n=utils.xssfilter(n),t.alias=n}return e.set("name",t.alias),appConfig.config.parameters.postAsCommunity?e.set("alias",utils.headerText()):e.set("alias",t.alias),e.set("id",t.id),e.set("title",""),e.set("bot",t.bot),void 0!==t.bio&&null!==t.bio?t.bio.length>20?e.set("title",t.bio.substring(0,20)+"..."):e.set("title",t.bio):e.set("title",""),e},decodeHtml:function(e){return e&&null!=e?$("<div>").html(e).text():""},setPost2:function(e,t,n){if(e.set("id",t.id),t.author){var i=t.author.alias;i.replaceAll("onerror=",""),i=utils.xssfilter(i),t.author.alias=i}var a=t.content;e.set("content2",a),e.set("thirdPartyIds",t.thirdPartyIds),a=a.replaceAll("\n\n+","\n\n"),a=a.replaceAll("<","&lt;"),a=a.replaceAll(">","&gt;"),a=utils.safeContent(a),"C"==t.type&&t.thirdPartyIds&&$.each(t.thirdPartyIds,function(t,n){"pubble-form-template"==n.provider&&e.set("isForm",!0)});try{a=decodeURI(a)}catch(e){}a=a.replace("#@$","%"),e.set("assignees",t.assignees),e.set("status",t.status),e.set("tilelink",""),e.set("tilelinktype",""),e.set("attachments",t.attachments),e.set("count",t.count);var o=[];return a=a.replaceAll("&lt;%","<%").replaceAll("%&gt;","%>"),t.attachments&&$.each(t.attachments,function(t,i){if("post"==i.type)e.set("tilelink",i.targetId),e.set("tilelinktype","post"),e.set("tilepattern",i.pattern),a=a.replaceAll(i.pattern.replace("|","\\|"),i.fallback);else if("account"==i.type){var r=i.html;n&&$.each(n.models,function(e,t){if(t.get("id")==i.targetId)return r=t.get("alias"),!0}),a=a.replaceAll(i.pattern,'<a class="bot-post-user" data="'+i.targetId+'">'+r+"</a>")}else if("faq"==i.type)a=a.replace(i.pattern,"");else{var s=new matt;s=converter.setAtt(s,i),o.push(s)}}),e.set("atts",o),n&&$.each(n.models,function(n,i){if(i.get("id")==t.author.id)return t.author.alias=i.get("alias"),t.author.avatar=i.get("avatar"),e.set("user",i),!0}),e.set("content",utils.handleURL(a)),e.set("conversationId",t.conversationId),e.set("dateCreated",t.dateCreated),e.set("lastUpdated",t.lastUpdated),e.set("type",t.type),e.set("voted",t.voted),e.set("votes",t.votes),t.author.alias=converter.decodeHtml(t.author.alias),e.set("author",t.author),e.set("avatar",utils.imgwrapper(utils.handleImg(t.author.avatar+"?72",t.author.alias,"48"))),e.set("anonymous",t.anonymous),e.set("timer2",t.lastUpdated),e.set("time2",utils.formatAMPM(new Date(t.lastUpdated)),"r"),e.set("timer",t.dateCreated),e.set("time",utils.formatAMPM(new Date(t.dateCreated)),"r"),e.set("appId",t.appId),t.tempId?e.set("tempId",t.tempId):e.set("tempId",0),t.landingPage?e.set("landingPage",t.landingPage.replace("%3A",":")):e.set("landingPage",""),e},setFaq:function(e,t,n){e.set("id",t.id);var i=this,a=t.question;a=converter.handleCC(a);var o=converter.handleCC(t.answer);if(e.set("question",a),e.set("answer",o),t.attachments){var r=[];e.set("attachments",r)}else e.set("attachments",[]);return e.set("acountId",t.acountId),e.set("tags",t.tags),e.set("dateCreated",t.dateCreated),e.set("lastUpdated",t.lastUpdated),e.set("url",t.url),e.set("internal",t.internal),e.set("communityId",t.communityId),e.set("count",t.count),e.set("scope",t.scope),e.set("name",""),e.set("avatar",""),e.set("accountId",t.accountId),n&&$.each(n.models,function(n,a){if(a.get("id")==t.accountId)return a.alias=converter.decodeHtml(a.alias),e.set("author",a),e.set("avatar",a.get("avatar")),e.set("avatarUrl",utils.imgwrapper(e.get("avatar"))),e.set("name",i.filterName(a.get("alias"))),!0}),e},setContent:function(e){e=e.replaceAll("\n\n+","\n\n"),e=e.replaceAll("<","&lt;"),e=e.replaceAll(">","&gt;");try{e=decodeURI(e)}catch(e){}return e=e.replace("#@$","%"),e=e.replaceAll("\n","<br/>"),e=utils.handleURL(e),e=utils.safeContent(e)},handleCC:function(e){e=e.replaceAll("<","&lt;"),e=e.replaceAll(">","&gt;"),e=e.replaceAll("\n\n+","\n\n"),e=e.replaceAll("<script","&lt;script"),e=e.replaceAll("<div","&lt;div"),e=e.replaceAll("></div>","&gt;&lt;/div&gt;"),e=e.replaceAll("<iframe>","&lt;iframe&gt;"),e=e.replaceAll("<style>","&lt;style&gt;"),e=e.replaceAll("<frame>","&lt;frame&gt;"),e=e.replaceAll("</style>","&lt;/style&gt;"),e=e.replaceAll("<\/script>","&lt;/script&gt;"),e=e.replaceAll("</iframe>","&lt;/iframe&gt;"),e=e.replaceAll("</frame>","&lt;/frame&gt;"),e=e.replaceAll("&#x2F;","/"),e=e.replace("%","#@$"),e=e.replaceAll("\n","<br/>"),e=e.replaceAll("&lt;%","<%").replaceAll("%&gt;","%>"),e=utils.safeContent(e),e=utils.handleURL(e);try{e=decodeURI(e)}catch(e){}return e=e.replace("#@$","%"),e=emjos.shortnameToImage(e)},setPost:function(e,t,n){e.set("id",t.id),e.set("postID",t.id),e.set("thirdPartyIds",t.thirdPartyIds);var i=t.content;if(t.author){var a=t.author.alias;a.replaceAll("onerror=",""),a=utils.xssfilter(a),t.author.alias=a}"E"!=t.type&&"S"!=t.type&&"P"!=t.type||(t.visitor=1),i=converter.handleCC(i),e.set("assignees",t.assignees),e.set("status",t.status),e.set("read",t.read),e.set("tilelink",""),e.set("tilelinktype",""),e.set("count",t.count),e.set("attachments",t.attachments);var o=[];return i=i.replaceAll("&lt;%","<%").replaceAll("%&gt;","%>"),t.attachments&&$.each(t.attachments,function(t,a){if("post"==a.type)e.set("tilelink",a.targetId),e.set("tilelinktype","post"),e.set("tilepattern",a.pattern),i=i.replaceAll(a.pattern.replace("|","\\|"),a.fallback);else if("account"==a.type){var r=a.html;n&&$.each(n.models,function(e,t){if(t.get("id")==a.targetId)return r=t.get("alias"),!0}),i=i.replace(a.pattern,'<a class="bot-post-user" data="'+a.targetId+'">@'+r+"</a>")}else{"faq"==a.type&&(i=i.replace(a.pattern,'<span class="pubble-mod-faqid"><span class="pubble-mod-faqid-mark-id">'+a.fallback+"</span></span>"));var s=new matt;s=converter.setAtt(s,a);var l=[],c=a.attachments;c&&$.each(c,function(e,t){var n=new matt;n=converter.setAtt(n,t),l.push(n)}),s.set("attachments",l),o.push(s)}}),e.set("atts",o),o&&$.each(o,function(t,n){if("translate"==n.type){var i={};i.sourceLanguage=n.sourceLanguage,i.targetLanguage=n.targetLanguage,e.set("translation",i)}}),n&&$.each(n.models,function(n,i){if(i.get("id")==t.author.id)return t.author.alias=i.get("alias"),t.author.avatar=i.get("avatar"),e.set("user",i),!0}),e.set("content",utils.handleURL(i)),e.set("conversationId",t.conversationId),e.set("dateCreated",t.dateCreated),e.set("lastUpdated",t.lastUpdated),e.set("timediff",utils.timediff(t.lastUpdated)),e.set("type",t.type),e.set("voted",t.voted),e.set("votes",t.votes),t.author.alias=converter.decodeHtml(t.author.alias),e.set("author",t.author),e.set("lastPostFromModerator",t.lastPostFromModerator),e.set("lastPostFromVisitor",t.lastPostFromVisitor),e.set("subscriber",t.subscriber),"C"==t.type&&t.thirdPartyIds&&$.each(t.thirdPartyIds,function(t,n){"pubble-form-template"==n.provider&&e.set("isForm",!0)}),e.set("avatar",utils.imgwrapper(utils.handleImg(t.author.avatar,t.author.alias,"48"))),t.visitor?(e.set("alias","You"),e.set("visitor",!0)):t.moderator?(appConfig.config.parameters.postAsCommunity?e.set("alias",utils.headerText()):e.set("alias",t.author.alias),e.set("visitor",t.visitor)):(e.set("alias",t.author.alias),e.set("visitor",t.visitor)),t.visitor||"Q"!=e.get("type")&&appConfig.config.parameters.postAsCommunity&&(e.get("author").alias=utils.headerText(),e.set("alias",utils.headerText()),e.set("isAppModerator",1),e.set("avatar",utils.imgwrapper(utils.handleCommunityAvtar(appConfig.config.parameters.community)))),"//contact"!=t.content||e.get("visitor")||(e.set("type","K"),e.set("content"," requested contact details")),e.set("anonymous",t.anonymous),e.set("timer",t.dateCreated),e.set("time",utils.formatAMPM(new Date(t.dateCreated))),e.set("appId",t.appId),t.tempId?e.set("tempId",t.tempId):e.set("tempId",0),e.set("shortUrl",t.shortUrl),e}},emjos=new Object;emjos.put=function(e,t){emjos[e]=t},emjos.get=function(e){return emjos[e]},emjos.list="smile,tongue-out,big-smile,joy,sleeping,confused,smiling-imp,innocent,zipper-mouth,frowning,hushed,wink,relaxed,yum,rolling-eyes,heart-eyes,sunglasses,money-face,scream,worried,sob,angry-imp,weary,sweat,thinking,grimacing,sick,star,running,beer,lunch,pistol,bomb,see-no-evil,hear-no-evil,speak-no-evil,thumbsup,thumbsdown,ok-hand,the-horns,raised-hands,clap,wave,pray,secret,coffee,lucky,calendar,idea,celebrating,flower,broken-heart,heart,sun";for(var ll=emjos.list.split(","),i=0;i<ll.length;i++)emjos.put(":"+ll[i]+":",ll[i]);return emjos.getEmoji=function(e){return emjos[e]},emjos.shortnameToImage=function(e){var t,n,i=":([-+\\w]+):";return i=":([a-zA-Z-]+):",e=e.replace(new RegExp("("+i+")","gi"),function(e){return void 0===e||""===e||void 0==emjos.getEmoji(e)?t='<span class="pubble-emoji-ico-text pubble-emoji-smile"></span>':(n=emjos.getEmoji(e),t='<span class="pubble-emoji-ico-text pubble-emoji-'+n+'"></span>')})},converter.emjos=emjos,converter}),pubblebot.define("text!templates/attachment.tpl",[],function(){return'<%if(attType =="translate"){%>\n<div class="pubble-cw-att-translate-info">Translation</div>\n<div class="pubble-cw-att-translate-text"> <%=translation%></div>\n\n<%}%>  \n \n <%if(attType =="faq"){%><div class="pubble-cw-dialog-item-att-faq">\n    <div class="pubble-cw-dialog-item-att-ico"></div>\n    <div class="pubble-cw-dialog-item-att-q"><%=question%></div>\n    <div class="pubble-cw-dialog-item-att-details pubble-off">\n        <div class="pubble-cw-dialog-item-att-a" id="pb-faq-<%=targetId%>"><%=answer%></div>\n        <div class="pubble-att-container">\n\n        </div>\n        <button class="pubble-cw-dialog-item-att-like pubble-cw-btn-main"> This Helped!</button>\n        <div class="pubble-cw-dialog-item-att-collapse">Collapse</div>\n    </div>\n</div><%}%><%if(attType =="link"){%><div class="pubble-cw-dialog-item-att-info">\n    <div class="pubble-cw-dialog-item-att-arrow pubble-arrow-on"></div>\n</div>\n<div class="pubble-cw-dialog-item-att-content">\n    <div class="pubble-cw-dialog-item-att-link-name"><%=src%></div>\n    <div class="pubble-cw-dialog-item-att-link-title"><%=title%></div>\n    <div class="pubble-cw-dialog-item-att-link-description"><%=desc%></div>\n</div><%}%>\n    <%if(attType =="file"){%><div class="pubble-cw-dialog-item-att-info">\n    <div class="pubble-cw-dialog-item-att-arrow pubble-arrow-on"></div>\n    <div class="pubble-cw-dialog-item-att-file-ico"><%=ext%></div>\n    <div class="pubble-cw-dialog-item-att-file-name"><%=title%></div>\n</div>\n<div class="pubble-cw-dialog-item-att-content">\n    <div class="pubble-cw-dialog-item-att-file-description"></div>\n</div><%}%><%if(attType =="video"){%><div class="pubble-cw-dialog-item-att-info">\n    <div class="pubble-cw-dialog-item-att-arrow pubble-arrow-on"></div>\n    <div class="pubble-cw-dialog-item-att-video-name"><%=title%></div>\n</div>\n<div class="pubble-cw-dialog-item-att-content">\n    <div class="pubble-cw-dialog-item-att-video-canvas"><img src="<%=thumbnail%>"></div>\n</div><%}%><%if(attType =="photo"){%><div class="pubble-cw-dialog-item-att-info">\n    <div class="pubble-cw-dialog-item-att-arrow pubble-arrow-on"></div>\n    <div class="pubble-cw-dialog-item-att-image-name">\n        <%if(title){%><%=title%><%}%></div></div><div class="pubble-cw-dialog-item-att-content"><div class="pubble-cw-dialog-item-att-image-canvas"<%if(customStyle!=\'\'){%>style=\'<%=customStyle%>\'<%}%>><img src="<%=thumbnail%>">\n    </div>\n</div><%}%><%if(attType =="post"){%><div class="pubble-cw-dialog-item-att-info">\n    <div class="pubble-cw-dialog-item-att-arrow pubble-arrow-on"></div>\n    <div class="pubble-cw-dialog-item-att-question-name">\n        <div class="pubble-cw-dialog-item-att-question-ico"></div>Qid34243\n    </div>\n</div>\n<div class="pubble-cw-dialog-item-att-content">\n    <div class="pubble-cw-dialog-item-att-question-text">How are u today? All ok?</div>\n</div><%}%> '}),pubblebot.define("views/attachment",["backbone","underscore","utils/utils","text!templates/attachment.tpl","utils/appConfig"],function(e,t,n,i,a){var o=window.jQueryPBm;return window.$pubbBackbone.noConflict().View.extend({template:$UScore.template(i),className:"pubble-cw-att",attributes:function(){return{id:"att"+this.model.get("id")}},initialize:function(e){$UScore.bindAll(this,"render"),this._id=e.model.get("id"),this.model=e.model},render:function(){var e=this;return this.$el.html(this.template(this.model.toJSON())),"link"==this.model.get("attType")?this.$el.addClass("pubble-cw-att-islink"):"file"==this.model.get("attType")?this.$el.addClass("pubble-cw-att-isfile"):"video"==this.model.get("attType")?this.$el.addClass("pubble-cw-att-isvideo"):"photo"==this.model.get("attType")?this.$el.addClass("pubble-cw-att-isimage"):"question"==this.model.get("attType")?this.$el.addClass("pubble-cw-att-isquestion"):"translate"==this.model.get("attType")&&this.$el.addClass("pubmd-att-istranslation"),"faq"==this.model.get("attType")?(this.$el.find(".pubble-cw-dialog-item-att-a").find("img").on("click",function(e){e.stopPropagation();var t=o(".pubble-cw-modal");t.removeClass("pubble-hide"),n.addClass(t,"pubble-show"),t.find(".pubble-cw-modal-img").html("<image class='' src='"+o(e.target).attr("src")+"'/>"),n.addClass(t.find(".pubble-cw-modal-video-container"),"pubble-off"),t.find(".pubble-cw-modal-img-container").removeClass("pubble-off")}),this.$el.find(".pubble-cw-dialog-item-att-q").on("click",function(){var t=o(".pubble-cw-dialog-item-att-details");e.model.get("clicked")||(pubblebot.require("app").faqExpand(e.model),e.model.set("clicked","true")),o.each(t,function(t,i){window.faqclicked&&window.faqclicked===e.model.get("targetId")||n.addClass(o(i),"pubble-off")}),o.each(o(".pubble-cw-isexpanded"),function(t,n){window.faqclicked&&window.faqclicked===e.model.get("targetId")||o(n).removeClass("pubble-cw-isexpanded")});var i=e.$el.find(".pubble-cw-dialog-item-att-details");e.$el.hasClass("pubble-cw-isexpanded")?(n.addClass(i,"pubble-off"),e.$el.removeClass("pubble-cw-isexpanded")):(i.removeClass("pubble-off"),n.addClass(e.$el,"pubble-cw-isexpanded")),window.faqclicked=e.model.get("targetId")}),this.$el.find(".pubble-cw-dialog-item-att-like").on("click",function(t){var n=pubblebot.require("app");e.$el.find(".pubble-cw-dialog-item-att-like").slideUp(),n.resolveQuestion(e.model.get("targetId")),n.$el.find(".pubble-cw-input-buttonbar-faq-yes").trigger("click")})):this.$el.on("click",function(){if("translate"==e.model.get("attType"))return!1;if("video"==e.model.get("attType")){var t=o(".pubble-cw-modal");t.removeClass("pubble-hide"),n.addClass(t,"pubble-show"),t.find(".pubble-cw-modal-video").html(e.model.get("html")),t.find(".pubble-mod-att-isvideo").find(".embedly-embed").attr("height","auto").attr("width","100%"),n.addClass(t.find(".pubble-cw-modal-img-container"),"pubble-off"),t.find(".pubble-cw-modal-video-container").removeClass("pubble-off")}else{if("photo"!=e.model.get("attType"))return window.open(e.model.get("src")),!1;if(a.config.parameters.iFrame)return window.open(e.model.get("thumbnail2")),!1;var t=o(".pubble-cw-modal");t.removeClass("pubble-hide"),n.addClass(t,"pubble-show"),t.find(".pubble-cw-modal-img").html("<image class='' src='"+e.model.get("thumbnail2")+"'/>"),n.addClass(t.find(".pubble-cw-modal-video-container"),"pubble-off"),t.find(".pubble-cw-modal-img-container").removeClass("pubble-off")}}),e}})}),pubblebot.define("utils/tel",["jQueryPB"],function(){function e(e,n){this.element=e,this.options=t.extend({},s,n),this._defaults=s,this.ns="."+o+r++,this.isGoodBrowser=Boolean(e.setSelectionRange),this.hadInitialPlaceholder=Boolean(t(e).attr("placeholder")),this._name=o}for(var t=window.jQueryPBm,n=[["Afghanistan ()","af","93"],["Albania (Shqipri)","al","355"],["Algeria ()","dz","213"],["American Samoa","as","1684"],["Andorra","ad","376"],["Angola","ao","244"],["Anguilla","ai","1264"],["Antigua and Barbuda","ag","1268"],["Argentina","ar","54"],["Armenia ()","am","374"],["Aruba","aw","297"],["Australia","au","61"],["Austria (sterreich)","at","43"],["Azerbaijan (Azrbaycan)","az","994"],["Bahamas","bs","1242"],["Bahrain ()","bh","973"],["Bangladesh ()","bd","880"],["Barbados","bb","1246"],["Belarus ()","by","375"],["Belgium (Belgi)","be","32"],["Belize","bz","501"],["Benin (Bnin)","bj","229"],["Bermuda","bm","1441"],["Bhutan ()","bt","975"],["Bolivia","bo","591"],["Bosnia and Herzegovina (  )","ba","387"],["Botswana","bw","267"],["Brazil (Brasil)","br","55"],["British Indian Ocean Territory","io","246"],["British Virgin Islands","vg","1284"],["Brunei","bn","673"],["Bulgaria ()","bg","359"],["Burkina Faso","bf","226"],["Burundi (Uburundi)","bi","257"],["Cambodia ()","kh","855"],["Cameroon (Cameroun)","cm","237"],["Canada","ca","1",1,["204","226","236","249","250","289","306","343","365","387","403","416","418","431","437","438","450","506","514","519","548","579","581","587","604","613","639","647","672","705","709","742","778","780","782","807","819","825","867","873","902","905"]],["Cape Verde (Kabu Verdi)","cv","238"],["Caribbean Netherlands","bq","599",1],["Cayman Islands","ky","1345"],["Central African Republic (Rpublique centrafricaine)","cf","236"],["Chad (Tchad)","td","235"],["Chile","cl","56"],["China ()","cn","86"],["Colombia","co","57"],["Comoros ( )","km","269"],["Congo (DRC) (Jamhuri ya Kidemokrasia ya Kongo)","cd","243"],["Congo (Republic) (Congo-Brazzaville)","cg","242"],["Cook Islands","ck","682"],["Costa Rica","cr","506"],["Cte dIvoire","ci","225"],["Croatia (Hrvatska)","hr","385"],["Cuba","cu","53"],["Curaao","cw","599",0],["Cyprus ()","cy","357"],["Czech Republic (esk republika)","cz","420"],["Denmark (Danmark)","dk","45"],["Djibouti","dj","253"],["Dominica","dm","1767"],["Dominican Republic (Repblica Dominicana)","do","1",2,["809","829","849"]],["Ecuador","ec","593"],["Egypt ()","eg","20"],["El Salvador","sv","503"],["Equatorial Guinea (Guinea Ecuatorial)","gq","240"],["Eritrea","er","291"],["Estonia (Eesti)","ee","372"],["Ethiopia","et","251"],["Falkland Islands (Islas Malvinas)","fk","500"],["Faroe Islands (Froyar)","fo","298"],["Fiji","fj","679"],["Finland (Suomi)","fi","358"],["France","fr","33"],["French Guiana (Guyane franaise)","gf","594"],["French Polynesia (Polynsie franaise)","pf","689"],["Gabon","ga","241"],["Gambia","gm","220"],["Georgia ()","ge","995"],["Germany (Deutschland)","de","49"],["Ghana (Gaana)","gh","233"],["Gibraltar","gi","350"],["Greece ()","gr","30"],["Greenland (Kalaallit Nunaat)","gl","299"],["Grenada","gd","1473"],["Guadeloupe","gp","590",0],["Guam","gu","1671"],["Guatemala","gt","502"],["Guinea (Guine)","gn","224"],["Guinea-Bissau (Guin Bissau)","gw","245"],["Guyana","gy","592"],["Haiti","ht","509"],["Honduras","hn","504"],["Hong Kong ()","hk","852"],["Hungary (Magyarorszg)","hu","36"],["Iceland (sland)","is","354"],["India ()","in","91"],["Indonesia","id","62"],["Iran ()","ir","98"],["Iraq ()","iq","964"],["Ireland","ie","353"],["Israel ()","il","972"],["Italy (Italia)","it","39",0],["Jamaica","jm","1876"],["Japan ()","jp","81"],["Jordan ()","jo","962"],["Kazakhstan ()","kz","7",1],["Kenya","ke","254"],["Kiribati","ki","686"],["Kuwait ()","kw","965"],["Kyrgyzstan ()","kg","996"],["Laos ()","la","856"],["Latvia (Latvija)","lv","371"],["Lebanon ()","lb","961"],["Lesotho","ls","266"],["Liberia","lr","231"],["Libya ()","ly","218"],["Liechtenstein","li","423"],["Lithuania (Lietuva)","lt","370"],["Luxembourg","lu","352"],["Macau ()","mo","853"],["Macedonia (FYROM) ()","mk","389"],["Madagascar (Madagasikara)","mg","261"],["Malawi","mw","265"],["Malaysia","my","60"],["Maldives","mv","960"],["Mali","ml","223"],["Malta","mt","356"],["Marshall Islands","mh","692"],["Martinique","mq","596"],["Mauritania ()","mr","222"],["Mauritius (Moris)","mu","230"],["Mexico (Mxico)","mx","52"],["Micronesia","fm","691"],["Moldova (Republica Moldova)","md","373"],["Monaco","mc","377"],["Mongolia ()","mn","976"],["Montenegro (Crna Gora)","me","382"],["Montserrat","ms","1664"],["Morocco ()","ma","212"],["Mozambique (Moambique)","mz","258"],["Myanmar (Burma) ()","mm","95"],["Namibia (Namibi)","na","264"],["Nauru","nr","674"],["Nepal ()","np","977"],["Netherlands (Nederland)","nl","31"],["New Caledonia (Nouvelle-Caldonie)","nc","687"],["New Zealand","nz","64"],["Nicaragua","ni","505"],["Niger (Nijar)","ne","227"],["Nigeria","ng","234"],["Niue","nu","683"],["Norfolk Island","nf","672"],["North Korea (   )","kp","850"],["Northern Mariana Islands","mp","1670"],["Norway (Norge)","no","47"],["Oman ()","om","968"],["Pakistan ()","pk","92"],["Palau","pw","680"],["Palestine ()","ps","970"],["Panama (Panam)","pa","507"],["Papua New Guinea","pg","675"],["Paraguay","py","595"],["Peru (Per)","pe","51"],["Philippines","ph","63"],["Poland (Polska)","pl","48"],["Portugal","pt","351"],["Puerto Rico","pr","1",3,["787","939"]],["Qatar ()","qa","974"],["Runion (La Runion)","re","262"],["Romania (Romnia)","ro","40"],["Russia ()","ru","7",0],["Rwanda","rw","250"],["Saint Barthlemy (Saint-Barthlemy)","bl","590",1],["Saint Helena","sh","290"],["Saint Kitts and Nevis","kn","1869"],["Saint Lucia","lc","1758"],["Saint Martin (Saint-Martin (partie franaise))","mf","590",2],["Saint Pierre and Miquelon (Saint-Pierre-et-Miquelon)","pm","508"],["Saint Vincent and the Grenadines","vc","1784"],["Samoa","ws","685"],["San Marino","sm","378"],["So Tom and Prncipe (So Tom e Prncipe)","st","239"],["Saudi Arabia (  )","sa","966"],["Senegal (Sngal)","sn","221"],["Serbia ()","rs","381"],["Seychelles","sc","248"],["Sierra Leone","sl","232"],["Singapore","sg","65"],["Sint Maarten","sx","1721"],["Slovakia (Slovensko)","sk","421"],["Slovenia (Slovenija)","si","386"],["Solomon Islands","sb","677"],["Somalia (Soomaaliya)","so","252"],["South Africa","za","27"],["South Korea ()","kr","82"],["South Sudan ( )","ss","211"],["Spain (Espaa)","es","34"],["Sri Lanka ( )","lk","94"],["Sudan ()","sd","249"],["Suriname","sr","597"],["Swaziland","sz","268"],["Sweden (Sverige)","se","46"],["Switzerland (Schweiz)","ch","41"],["Syria ()","sy","963"],["Taiwan ()","tw","886"],["Tajikistan","tj","992"],["Tanzania","tz","255"],["Thailand ()","th","66"],["Timor-Leste","tl","670"],["Togo","tg","228"],["Tokelau","tk","690"],["Tonga","to","676"],["Trinidad and Tobago","tt","1868"],["Tunisia ()","tn","216"],["Turkey (Trkiye)","tr","90"],["Turkmenistan","tm","993"],["Turks and Caicos Islands","tc","1649"],["Tuvalu","tv","688"],["U.S. Virgin Islands","vi","1340"],["Uganda","ug","256"],["Ukraine ()","ua","380"],["United Arab Emirates (  )","ae","971"],["United Kingdom","gb","44"],["United States","us","1",0],["Uruguay","uy","598"],["Uzbekistan (Ozbekiston)","uz","998"],["Vanuatu","vu","678"],["Vatican City (Citt del Vaticano)","va","39",1],["Venezuela","ve","58"],["Vietnam (Vit Nam)","vn","84"],["Wallis and Futuna","wf","681"],["Yemen ()","ye","967"],["Zambia","zm","260"],["Zimbabwe","zw","263"]],i=0;i<n.length;i++){var a=n[i];n[i]={name:a[0],iso2:a[1],dialCode:a[2],priority:a[3]||0,areaCodes:a[4]||null}}var o="intlTelInput",r=1,s={allowExtensions:!1,autoFormat:!0,autoHideDialCode:!0,autoPlaceholder:!0,defaultCountry:"",geoIpLookup:null,nationalMode:!0,numberType:"MOBILE",onlyCountries:[],preferredCountries:["us","gb"],utilsScript:""},l={UP:38,DOWN:40,ENTER:13,ESC:27,PLUS:43,A:65,Z:90,ZERO:48,NINE:57,SPACE:32,BSPACE:8,TAB:9,DEL:46,CTRL:17,CMD1:91,CMD2:224},c=!1;t(window).on("load",function(){c=!0}),e.prototype={_init:function(){return this.options.nationalMode&&(this.options.autoHideDialCode=!1),navigator.userAgent.match(/IEMobile/i)&&(this.options.autoFormat=!1),this.isMobile=/Android.+Mobile|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),this.autoCountryDeferred=new t.Deferred,this.utilsScriptDeferred=new t.Deferred,this._processCountryData(),this._generateMarkup(),this._setInitialState(),this._initListeners(),this._initRequests(),[this.autoCountryDeferred,this.utilsScriptDeferred]},_processCountryData:function(){this._setInstanceCountryData(),this._setPreferredCountries()},_addCountryCode:function(e,t,n){t in this.countryCodes||(this.countryCodes[t]=[]);var i=n||0;this.countryCodes[t][i]=e},_setInstanceCountryData:function(){var e;if(this.options.onlyCountries.length){for(e=0;e<this.options.onlyCountries.length;e++)this.options.onlyCountries[e]=this.options.onlyCountries[e].toLowerCase();for(this.countries=[],e=0;e<n.length;e++)-1!=t.inArray(n[e].iso2,this.options.onlyCountries)&&this.countries.push(n[e])}else this.countries=n;for(this.countryCodes={},
e=0;e<this.countries.length;e++){var i=this.countries[e];if(this._addCountryCode(i.iso2,i.dialCode,i.priority),i.areaCodes)for(var a=0;a<i.areaCodes.length;a++)this._addCountryCode(i.iso2,i.dialCode+i.areaCodes[a])}},_setPreferredCountries:function(){this.preferredCountries=[];for(var e=0;e<this.options.preferredCountries.length;e++){var t=this.options.preferredCountries[e].toLowerCase(),n=this._getCountryData(t,!1,!0);n&&this.preferredCountries.push(n)}},_generateMarkup:function(){this.telInput=t(this.element),this.telInput.attr("autocomplete","off"),this.telInput.wrap(t("<div>",{class:"intl-tel-input"})),this.flagsContainer=t("<div>",{class:"flag-dropdown"}).insertBefore(this.telInput);var e=t("<div>",{tabindex:"0",class:"selected-flag"}).appendTo(this.flagsContainer);this.selectedFlagInner=t("<div>",{class:"iti-flag"}).appendTo(e),t("<div>",{class:"arrow"}).appendTo(e),this.isMobile?this.countryList=t("<select>",{class:"iti-mobile-select"}).appendTo(this.flagsContainer):(this.countryList=t("<ul>",{class:"country-list pubble-cw-scroll v-hide"}).appendTo(this.flagsContainer),this.preferredCountries.length&&!this.isMobile&&(this._appendListItems(this.preferredCountries,"preferred"),t("<li>",{class:"divider"}).appendTo(this.countryList))),this._appendListItems(this.countries,""),this.isMobile||(this.dropdownHeight=this.countryList.outerHeight(),this.countryList.removeClass("v-hide").addClass("hide"),this.countryListItems=this.countryList.children(".country"))},_appendListItems:function(e,t){for(var n="",i=0;i<e.length;i++){var a=e[i];this.isMobile?(n+="<option data-dial-code='"+a.dialCode+"' value='"+a.iso2+"'>",n+=a.name+" +"+a.dialCode,n+="</option>"):(n+="<li class='country "+t+"' data-dial-code='"+a.dialCode+"' data-country-code='"+a.iso2+"'>",n+="<div class='flag'><div class='iti-flag "+a.iso2+"'>+"+a.dialCode+"</div></div>",n+="<span class='country-name'>"+a.name+"</span>",n+="<span class='dial-code'>+"+a.dialCode+"</span>",n+="</li>")}this.countryList.append(n)},_setInitialState:function(){var e=this.telInput.val();this._getDialCode(e)?this._updateFlagFromNumber(e,!0):"auto"!=this.options.defaultCountry&&(this.options.defaultCountry?this.options.defaultCountry=this._getCountryData(this.options.defaultCountry.toLowerCase(),!1,!1):this.options.defaultCountry=this.preferredCountries.length?this.preferredCountries[0]:this.countries[0],this._selectFlag(this.options.defaultCountry.iso2),e||this._updateDialCode(this.options.defaultCountry.dialCode,!1)),e&&this._updateVal(e)},_initListeners:function(){var e=this;if(this._initKeyListeners(),(this.options.autoHideDialCode||this.options.autoFormat)&&this._initFocusListeners(),this.isMobile)this.countryList.on("change"+this.ns,function(n){e._selectListItem(t(this).find("option:selected"))});else{var n=this.telInput.closest("label");n.length&&n.on("click"+this.ns,function(t){e.countryList.hasClass("hide")?e.telInput.focus():t.preventDefault()});this.selectedFlagInner.parent().on("click"+this.ns,function(t){!e.countryList.hasClass("hide")||e.telInput.prop("disabled")||e.telInput.prop("readonly")||e._showDropdown()})}this.flagsContainer.on("keydown"+e.ns,function(t){!e.countryList.hasClass("hide")||t.which!=l.UP&&t.which!=l.DOWN&&t.which!=l.SPACE&&t.which!=l.ENTER||(t.preventDefault(),t.stopPropagation(),e._showDropdown()),t.which==l.TAB&&e._closeDropdown()})},_initRequests:function(){var e=this;this.options.utilsScript?c?this.loadUtils():t(window).on("load",function(){e.loadUtils()}):this.utilsScriptDeferred.resolve(),"auto"==this.options.defaultCountry?this._loadAutoCountry():this.autoCountryDeferred.resolve()},_loadAutoCountry:function(){var e=t.cookie?t.cookie("itiAutoCountry"):"";e&&(t.fn[o].autoCountry=e),t.fn[o].autoCountry?this.autoCountryLoaded():t.fn[o].startedLoadingAutoCountry||(t.fn[o].startedLoadingAutoCountry=!0,"function"==typeof this.options.geoIpLookup&&this.options.geoIpLookup(function(e){t.fn[o].autoCountry=e.toLowerCase(),t.cookie&&t.cookie("itiAutoCountry",t.fn[o].autoCountry,{path:"/"}),setTimeout(function(){t(".intl-tel-input input").intlTelInput("autoCountryLoaded")})}))},_initKeyListeners:function(){var e=this;this.options.autoFormat&&this.telInput.on("keypress"+this.ns,function(t){if(t.which>=l.SPACE&&!t.ctrlKey&&!t.metaKey&&window.intlTelInputUtils&&!e.telInput.prop("readonly")){t.preventDefault();var n=t.which>=l.ZERO&&t.which<=l.NINE||t.which==l.PLUS,i=e.telInput[0],a=e.isGoodBrowser&&i.selectionStart==i.selectionEnd,o=e.telInput.attr("maxlength"),r=e.telInput.val();if((!o||r.length<o)&&(n||a)){var s=n?String.fromCharCode(t.which):null;e._handleInputKey(s,!0,n),r!=e.telInput.val()&&e.telInput.trigger("input")}n||e._handleInvalidKey()}}),this.telInput.on("cut"+this.ns+" paste"+this.ns,function(){setTimeout(function(){if(e.options.autoFormat&&window.intlTelInputUtils){var t=e.isGoodBrowser&&e.telInput[0].selectionStart==e.telInput.val().length;e._handleInputKey(null,t),e._ensurePlus()}else e._updateFlagFromNumber(e.telInput.val())})}),this.telInput.on("keyup"+this.ns,function(t){if(t.which==l.ENTER||e.telInput.prop("readonly"));else if(e.options.autoFormat&&window.intlTelInputUtils){var n=e.isGoodBrowser&&e.telInput[0].selectionStart==e.telInput.val().length;e.telInput.val()?(t.which==l.DEL&&!n||t.which==l.BSPACE)&&e._handleInputKey():e._updateFlagFromNumber("",!1),e._ensurePlus()}else e._updateFlagFromNumber(e.telInput.val(),!1)})},_ensurePlus:function(){if(!this.options.nationalMode){var e=this.telInput.val(),t=this.telInput[0];if("+"!=e.charAt(0)){var n=this.isGoodBrowser?t.selectionStart+1:0;this.telInput.val("+"+e),this.isGoodBrowser&&t.setSelectionRange(n,n)}}},_handleInvalidKey:function(){var e=this;this.telInput.trigger("invalidkey").addClass("iti-invalid-key"),setTimeout(function(){e.telInput.removeClass("iti-invalid-key")},100)},_handleInputKey:function(e,t,n){var i,a=this.telInput.val(),o=(this._getClean(a),this.telInput[0]),r=0;if(this.isGoodBrowser?(r=this._getDigitsOnRight(a,o.selectionEnd),e?a=a.substr(0,o.selectionStart)+e+a.substring(o.selectionEnd,a.length):i=a.substr(o.selectionStart-2,2)):e&&(a+=e),this.setNumber(a,null,t,!0,n),this.isGoodBrowser){var s;a=this.telInput.val(),r?(s=this._getCursorFromDigitsOnRight(a,r),e||(s=this._getCursorFromLeftChar(a,s,i))):s=a.length,o.setSelectionRange(s,s)}},_getCursorFromLeftChar:function(e,n,i){for(var a=n;a>0;a--){var o=e.charAt(a-1);if(t.isNumeric(o)||e.substr(a-2,2)==i)return a}return 0},_getCursorFromDigitsOnRight:function(e,n){for(var i=e.length-1;i>=0;i--)if(t.isNumeric(e.charAt(i))&&0==--n)return i;return 0},_getDigitsOnRight:function(e,n){for(var i=0,a=n;a<e.length;a++)t.isNumeric(e.charAt(a))&&i++;return i},_initFocusListeners:function(){var e=this;this.options.autoHideDialCode&&this.telInput.on("mousedown"+this.ns,function(t){e.telInput.is(":focus")||e.telInput.val()||(t.preventDefault(),e.telInput.focus())}),this.telInput.on("focus"+this.ns,function(t){var n=e.telInput.val();e.telInput.data("focusVal",n),e.options.autoHideDialCode&&!n&&!e.telInput.prop("readonly")&&e.selectedCountryData.dialCode&&(e._updateVal("+"+e.selectedCountryData.dialCode,null,!0),e.telInput.one("keypress.plus"+e.ns,function(t){if(t.which==l.PLUS){var n=e.options.autoFormat&&window.intlTelInputUtils?"+":"";e.telInput.val(n)}}),setTimeout(function(){var t=e.telInput[0];if(e.isGoodBrowser){var n=e.telInput.val().length;t.setSelectionRange(n,n)}}))}),this.telInput.on("blur"+this.ns,function(){if(e.options.autoHideDialCode){var t=e.telInput.val();if("+"==t.charAt(0)){var n=e._getNumeric(t);n&&e.selectedCountryData.dialCode!=n||e.telInput.val("")}e.telInput.off("keypress.plus"+e.ns)}e.options.autoFormat&&window.intlTelInputUtils&&e.telInput.val()!=e.telInput.data("focusVal")&&e.telInput.trigger("change")})},_getNumeric:function(e){return e.replace(/\D/g,"")},_getClean:function(e){return("+"==e.charAt(0)?"+":"")+this._getNumeric(e)},_showDropdown:function(){this._setDropdownPosition();var e=this.countryList.children(".active");e.length&&this._highlightListItem(e),this.countryList.removeClass("hide"),e.length&&this._scrollTo(e),this._bindDropdownListeners(),this.selectedFlagInner.children(".arrow").addClass("up")},_setDropdownPosition:function(){var e=this.telInput.offset().top,n=t(window).scrollTop(),i=e+this.telInput.outerHeight()+this.dropdownHeight<n+t(window).height(),a=e-this.dropdownHeight>n,o=!i&&a?"-"+(this.dropdownHeight-1)+"px":"";this.countryList.css("top",o)},_bindDropdownListeners:function(){var e=this;this.countryList.on("mouseover"+this.ns,".country",function(n){e._highlightListItem(t(this))}),this.countryList.on("click"+this.ns,".country",function(n){e._selectListItem(t(this))});var n=!0;t("html").on("click"+this.ns,function(t){n||e._closeDropdown(),n=!1});var i="",a=null;t(document).on("keydown"+this.ns,function(t){t.preventDefault(),t.which==l.UP||t.which==l.DOWN?e._handleUpDownKey(t.which):t.which==l.ENTER?e._handleEnterKey():t.which==l.ESC?e._closeDropdown():(t.which>=l.A&&t.which<=l.Z||t.which==l.SPACE)&&(a&&clearTimeout(a),i+=String.fromCharCode(t.which),e._searchForCountry(i),a=setTimeout(function(){i=""},1e3))})},_handleUpDownKey:function(e){var t=this.countryList.children(".highlight").first(),n=e==l.UP?t.prev():t.next();n.length&&(n.hasClass("divider")&&(n=e==l.UP?n.prev():n.next()),this._highlightListItem(n),this._scrollTo(n))},_handleEnterKey:function(){var e=this.countryList.children(".highlight").first();e.length&&this._selectListItem(e)},_searchForCountry:function(e){for(var t=0;t<this.countries.length;t++)if(this._startsWith(this.countries[t].name,e)){var n=this.countryList.children("[data-country-code="+this.countries[t].iso2+"]").not(".preferred");this._highlightListItem(n),this._scrollTo(n,!0);break}},_startsWith:function(e,t){return e.substr(0,t.length).toUpperCase()==t},_updateVal:function(e,t,n,i,a){var o;if(this.options.autoFormat&&window.intlTelInputUtils&&this.selectedCountryData){o="number"==typeof t&&intlTelInputUtils.isValidNumber(e,this.selectedCountryData.iso2)?intlTelInputUtils.formatNumberByType(e,this.selectedCountryData.iso2,t):!i&&this.options.nationalMode&&"+"==e.charAt(0)&&intlTelInputUtils.isValidNumber(e,this.selectedCountryData.iso2)?intlTelInputUtils.formatNumberByType(e,this.selectedCountryData.iso2,intlTelInputUtils.numberFormat.NATIONAL):intlTelInputUtils.formatNumber(e,this.selectedCountryData.iso2,n,this.options.allowExtensions,a);var r=this.telInput.attr("maxlength");r&&o.length>r&&(o=o.substr(0,r))}else o=e;this.telInput.val(o)},_updateFlagFromNumber:function(e,n){e&&this.options.nationalMode&&this.selectedCountryData&&"1"==this.selectedCountryData.dialCode&&"+"!=e.charAt(0)&&("1"!=e.charAt(0)&&(e="1"+e),e="+"+e);var i=this._getDialCode(e),a=null;if(i){var o=this.countryCodes[this._getNumeric(i)];if(!(this.selectedCountryData&&-1!=t.inArray(this.selectedCountryData.iso2,o))||this._isUnknownNanp(e,i))for(var r=0;r<o.length;r++)if(o[r]){a=o[r];break}}else"+"==e.charAt(0)&&this._getNumeric(e).length&&(a="");null!==a&&this._selectFlag(a,n)},_isUnknownNanp:function(e,t){return"+1"==t&&this._getNumeric(e).length>=4},_highlightListItem:function(e){this.countryListItems.removeClass("highlight"),e.addClass("highlight")},_getCountryData:function(e,t,i){for(var a=t?n:this.countries,o=0;o<a.length;o++)if(a[o].iso2==e)return a[o];if(i)return null;throw new Error("No country data for '"+e+"'")},_selectFlag:function(e,n){this.selectedCountryData=e?this._getCountryData(e,!1,!1):{},n&&this.selectedCountryData.iso2&&(this.options.defaultCountry={iso2:this.selectedCountryData.iso2}),this.selectedFlagInner.attr("class","iti-flag "+e),e&&this.selectedFlagInner.html(""),this.selectedFlagInner.parent().find(".iti-flag-pubble-nr").remove(),t("<div class='iti-flag-pubble-nr'>+"+this.selectedCountryData.dialCode+"</div>").insertAfter(this.selectedFlagInner);var i=e?this.selectedCountryData.name+": +"+this.selectedCountryData.dialCode:"Unknown";this.selectedFlagInner.parent().attr("title",i),this._updatePlaceholder(),this.isMobile?this.countryList.val(e):(this.countryListItems.removeClass("active"),e&&this.countryListItems.find(".iti-flag."+e).first().closest(".country").addClass("active"))},_updatePlaceholder:function(){if(window.intlTelInputUtils&&!this.hadInitialPlaceholder&&this.options.autoPlaceholder&&this.selectedCountryData){var e=this.selectedCountryData.iso2,t=intlTelInputUtils.numberType[this.options.numberType||"FIXED_LINE"],n=e?intlTelInputUtils.getExampleNumber(e,this.options.nationalMode,t):"";"function"==typeof this.options.customPlaceholder&&(n=this.options.customPlaceholder(n,this.selectedCountryData)),this.telInput.attr("placeholder",n)}},_selectListItem:function(e){var t=this.isMobile?"value":"data-country-code";if(this._selectFlag(e.attr(t),!0),this.isMobile||this._closeDropdown(),this._updateDialCode(e.attr("data-dial-code"),!0),this.telInput.trigger("change"),this.telInput.focus(),this.isGoodBrowser){var n=this.telInput.val().length;this.telInput[0].setSelectionRange(n,n)}},_closeDropdown:function(){this.countryList.addClass("hide"),this.selectedFlagInner.children(".arrow").removeClass("up"),t(document).off(this.ns),t("html").off(this.ns),this.countryList.off(this.ns)},_scrollTo:function(e,t){var n=this.countryList,i=n.height(),a=n.offset().top,o=a+i,r=e.outerHeight(),s=e.offset().top,l=s+r,c=s-a+n.scrollTop(),u=i/2-r/2;if(s<a)t&&(c-=u),n.scrollTop(c);else if(l>o){t&&(c+=u);var p=i-r;n.scrollTop(c-p)}},_updateDialCode:function(e,n){var i,a=this.telInput.val();if(e="+"+e,this.options.nationalMode&&"+"!=a.charAt(0))i=a;else if(a){var o=this._getDialCode(a);if(o.length>1)i=a.replace(o,e);else{var r="+"!=a.charAt(0)?t.trim(a):"";i=e+r}}else i=!this.options.autoHideDialCode||n?e:"";this._updateVal(i,null,n)},_getDialCode:function(e){var n="";if("+"==e.charAt(0))for(var i="",a=0;a<e.length;a++){var o=e.charAt(a);if(t.isNumeric(o)&&(i+=o,this.countryCodes[i]&&(n=e.substr(0,a+1)),4==i.length))break}return n},autoCountryLoaded:function(){"auto"==this.options.defaultCountry&&(this.options.defaultCountry=t.fn[o].autoCountry,this._setInitialState(),this.autoCountryDeferred.resolve())},destroy:function(){this.isMobile||this._closeDropdown(),this.telInput.off(this.ns),this.isMobile?this.countryList.off(this.ns):(this.selectedFlagInner.parent().off(this.ns),this.telInput.closest("label").off(this.ns)),this.telInput.parent().before(this.telInput).remove()},getExtension:function(){return this.telInput.val().split(" ext. ")[1]||""},getNumber:function(e){return window.intlTelInputUtils?intlTelInputUtils.formatNumberByType(this.telInput.val(),this.selectedCountryData.iso2,e):""},getNumberType:function(){return window.intlTelInputUtils?intlTelInputUtils.getNumberType(this.telInput.val(),this.selectedCountryData.iso2):-99},getSelectedCountryData:function(){return this.selectedCountryData||{}},getValidationError:function(){return window.intlTelInputUtils?intlTelInputUtils.getValidationError(this.telInput.val(),this.selectedCountryData.iso2):-99},isValidNumber:function(){var e=t.trim(this.telInput.val()),n=this.options.nationalMode?this.selectedCountryData.iso2:"";return!!window.intlTelInputUtils&&intlTelInputUtils.isValidNumber(e,n)},loadUtils:function(e){var n=this,i=e||this.options.utilsScript;!t.fn[o].loadedUtilsScript&&i?(t.fn[o].loadedUtilsScript=!0,t.ajax({url:i,success:function(){t(".intl-tel-input input").intlTelInput("utilsLoaded")},complete:function(){n.utilsScriptDeferred.resolve()},dataType:"script",cache:!0})):this.utilsScriptDeferred.resolve()},selectCountry:function(e){e=e.toLowerCase(),this.selectedFlagInner.hasClass(e)||(this._selectFlag(e,!0),this._updateDialCode(this.selectedCountryData.dialCode,!1))},setNumber:function(e,t,n,i,a){this.options.nationalMode||"+"==e.charAt(0)||(e="+"+e),this._updateFlagFromNumber(e),this._updateVal(e,t,n,i,a)},utilsLoaded:function(){this.options.autoFormat&&this.telInput.val()&&this._updateVal(this.telInput.val()),this._updatePlaceholder()}},t.fn[o]=function(n){var i=arguments;if(void 0===n||"object"==typeof n){var a=[];return this.each(function(){if(!t.data(this,"plugin_"+o)){var i=new e(this,n),r=i._init();a.push(r[0]),a.push(r[1]),t.data(this,"plugin_"+o,i)}}),t.when.apply(null,a)}if("string"==typeof n&&"_"!==n[0]){var r;return this.each(function(){var a=t.data(this,"plugin_"+o);a instanceof e&&"function"==typeof a[n]&&(r=a[n].apply(a,Array.prototype.slice.call(i,1))),"destroy"===n&&t.data(this,"plugin_"+o,null)}),void 0!==r?r:this}},t.fn[o].getCountryData=function(){return n},t.fn[o].version="<%= version %>"}),pubblebot.define("utils/uploader",["utils/utils"],function(e){var t=window.jQueryPBm;!function(t){function n(e){var n=e.data;e.isDefaultPrevented()||(e.preventDefault(),t(e.target).ajaxSubmit(n))}function i(e){var n=e.target,i=t(n);if(!i.is("[type=submit],[type=image]")){var a=i.closest("[type=submit]");if(0===a.length)return;n=a[0]}var o=this;if(o.clk=n,"image"==n.type)if(void 0!==e.offsetX)o.clk_x=e.offsetX,o.clk_y=e.offsetY;else if("function"==typeof t.fn.offset){var r=i.offset();o.clk_x=e.pageX-r.left,o.clk_y=e.pageY-r.top}else o.clk_x=e.pageX-n.offsetLeft,o.clk_y=e.pageY-n.offsetTop;setTimeout(function(){o.clk=o.clk_x=o.clk_y=null},100)}function a(){if(t.fn.ajaxSubmit.debug){var e="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(e):window.opera&&window.opera.postError&&window.opera.postError(e)}}if(void 0==t.fn.ajaxForm){var o={};o.fileapi=void 0!==t("<input type='file'/>").get(0).files,o.formdata=void 0!==window.FormData;var r=!!t.fn.prop;t.fn.attr2=function(){if(!r)return this.attr.apply(this,arguments);var e=this.prop.apply(this,arguments);return e&&e.jquery||"string"==typeof e?e:this.attr.apply(this,arguments)},t.fn.ajaxSubmit=function(e){function n(n){var i,a,o=t.param(n,e.traditional).split("&"),r=o.length,s=[];for(i=0;i<r;i++)o[i]=o[i].replace(/\+/g," "),a=o[i].split("="),s.push([decodeURIComponent(a[0]),decodeURIComponent(a[1])]);return s}function i(n){function i(e){var t=null;try{e.contentWindow&&(t=e.contentWindow.document)}catch(e){a("cannot get iframe.contentWindow document: "+e)}if(t)return t;try{t=e.contentDocument?e.contentDocument:e.document}catch(n){a("cannot get iframe.contentDocument: "+n),t=e.document}return t}function o(){function e(){try{var t=i(v).readyState;a("state = "+t),t&&"uninitialized"==t.toLowerCase()&&setTimeout(e,50)}catch(e){a("Server abort: ",e," (",e.name,")"),l($),x&&clearTimeout(x),x=void 0}}var n=u.attr2("target"),o=u.attr2("action"),r=u.attr("enctype")||u.attr("encoding")||"multipart/form-data";k.setAttribute("target",h),s&&!/post/i.test(s)||k.setAttribute("method","POST"),o!=d.url&&k.setAttribute("action",d.url),d.skipEncodingOverride||s&&!/post/i.test(s)||u.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),d.timeout&&(x=setTimeout(function(){C=!0,l(T)},d.timeout));var c=[];try{if(d.extraData)for(var p in d.extraData)d.extraData.hasOwnProperty(p)&&(t.isPlainObject(d.extraData[p])&&d.extraData[p].hasOwnProperty("name")&&d.extraData[p].hasOwnProperty("value")?c.push(t('<input type="hidden" name="'+d.extraData[p].name+'">').val(d.extraData[p].value).appendTo(k)[0]):c.push(t('<input type="hidden" name="'+p+'">').val(d.extraData[p]).appendTo(k)[0]));d.iframeTarget||m.appendTo("body"),v.attachEvent?v.attachEvent("onload",l):v.addEventListener("load",l,!1),setTimeout(e,15);try{k.submit()}catch(e){var b=document.createElement("form").submit;b.apply(k)}}finally{k.setAttribute("action",o),k.setAttribute("enctype",r),n?k.setAttribute("target",n):u.removeAttr("target"),t(c).remove()}}function l(e){if(!g.aborted&&!D){if(A=i(v),A||(a("cannot access response document"),e=$),e===T&&g)return g.abort("timeout"),void I.reject(g,"timeout");if(e==$&&g)return g.abort("server abort"),void I.reject(g,"error","server abort");if(A&&A.location.href!=d.iframeSrc||C){v.detachEvent?v.detachEvent("onload",l):v.removeEventListener("load",l,!1);var n,o="success";try{if(C)throw"timeout";var r="xml"==d.dataType||A.XMLDocument||t.isXMLDoc(A);if(a("isXml="+r),!r&&window.opera&&(null===A.body||!A.body.innerHTML)&&--j)return a("requeing onLoad callback, DOM not available"),void setTimeout(l,250);var s=A.body?A.body:A.documentElement;g.responseText=s?s.innerHTML:null,g.responseXML=A.XMLDocument?A.XMLDocument:A,r&&(d.dataType="xml"),g.getResponseHeader=function(e){return{"content-type":d.dataType}[e.toLowerCase()]},s&&(g.status=Number(s.getAttribute("status"))||g.status,g.statusText=s.getAttribute("statusText")||g.statusText);var c=(d.dataType||"").toLowerCase(),u=/(json|script|text)/.test(c);if(u||d.textarea){var p=A.getElementsByTagName("textarea")[0];if(p)g.responseText=p.value,g.status=Number(p.getAttribute("status"))||g.status,g.statusText=p.getAttribute("statusText")||g.statusText;else if(u){var f=A.getElementsByTagName("pre")[0],h=A.getElementsByTagName("body")[0];f?g.responseText=f.textContent?f.textContent:f.innerText:h&&(g.responseText=h.textContent?h.textContent:h.innerText)}}else"xml"==c&&!g.responseXML&&g.responseText&&(g.responseXML=_(g.responseText));try{P=N(g,c,d)}catch(e){o="parsererror",g.error=n=e||o}}catch(e){a("error caught: ",e),o="error",g.error=n=e||o}g.aborted&&(a("upload aborted"),o=null),g.status&&(o=g.status>=200&&g.status<300||304===g.status?"success":"error"),"success"===o?(d.success&&d.success.call(d.context,P,"success",g),I.resolve(g.responseText,"success",g),b&&t.event.trigger("ajaxSuccess",[g,d])):o&&(void 0===n&&(n=g.statusText),d.error&&d.error.call(d.context,g,o,n),I.reject(g,"error",n),b&&t.event.trigger("ajaxError",[g,d,n])),b&&t.event.trigger("ajaxComplete",[g,d]),b&&!--t.active&&t.event.trigger("ajaxStop"),d.complete&&d.complete.call(d.context,g,o),D=!0,d.timeout&&clearTimeout(x),setTimeout(function(){d.iframeTarget?m.attr("src",d.iframeSrc):m.remove(),g.responseXML=null},100)}}}var c,p,d,b,h,m,v,g,w,y,C,x,k=u[0],I=t.Deferred();if(I.abort=function(e){g.abort(e)},n)for(p=0;p<f.length;p++)c=t(f[p]),r?c.prop("disabled",!1):c.removeAttr("disabled");if(d=t.extend(!0,{},t.ajaxSettings,e),d.context=d.context||d,h="jqFormIO"+(new Date).getTime(),d.iframeTarget?(m=t(d.iframeTarget),y=m.attr2("name"),y?h=y:m.attr2("name",h)):(m=t('<iframe name="'+h+'" src="'+d.iframeSrc+'" />'),m.css({position:"absolute",top:"-1000px",left:"-1000px"})),v=m[0],g={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(e){var n="timeout"===e?"timeout":"aborted";a("aborting upload... "+n),this.aborted=1;try{v.contentWindow.document.execCommand&&v.contentWindow.document.execCommand("Stop")}catch(e){}m.attr("src",d.iframeSrc),g.error=n,d.error&&d.error.call(d.context,g,n,e),b&&t.event.trigger("ajaxError",[g,d,n]),d.complete&&d.complete.call(d.context,g,n)}},b=d.global,b&&0==t.active++&&t.event.trigger("ajaxStart"),b&&t.event.trigger("ajaxSend",[g,d]),d.beforeSend&&!1===d.beforeSend.call(d.context,g,d))return d.global&&t.active--,I.reject(),I;if(g.aborted)return I.reject(),I;(w=k.clk)&&(y=w.name)&&!w.disabled&&(d.extraData=d.extraData||{},d.extraData[y]=w.value,"image"==w.type&&(d.extraData[y+".x"]=k.clk_x,d.extraData[y+".y"]=k.clk_y));var T=1,$=2,S=t("meta[name=csrf-token]").attr("content"),q=t("meta[name=csrf-param]").attr("content");q&&S&&(d.extraData=d.extraData||{},d.extraData[q]=S),d.forceSync?o():setTimeout(o,10);var P,A,D,j=50,_=t.parseXML||function(e,t){return window.ActiveXObject?(t=new ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(e)):t=(new DOMParser).parseFromString(e,"text/xml"),t&&t.documentElement&&"parsererror"!=t.documentElement.nodeName?t:null},E=t.parseJSON||function(e){return window.eval("("+e+")")},N=function(e,n,i){var a=e.getResponseHeader("content-type")||"",o="xml"===n||!n&&a.indexOf("xml")>=0,r=o?e.responseXML:e.responseText;return o&&"parsererror"===r.documentElement.nodeName&&t.error&&t.error("parsererror"),i&&i.dataFilter&&(r=i.dataFilter(r,n)),"string"==typeof r&&("json"===n||!n&&a.indexOf("json")>=0?r=E(r):("script"===n||!n&&a.indexOf("javascript")>=0)&&t.globalEval(r)),r};return I}if(!this.length)return a("ajaxSubmit: skipping submit process - no element selected"),this;var s,l,c,u=this;"function"==typeof e?e={success:e}:void 0===e&&(e={}),s=e.type||this.attr2("method"),l=e.url||this.attr2("action"),c="string"==typeof l?t.trim(l):"",c=c||window.location.href||"",c&&(c=(c.match(/^([^#]+)/)||[])[1]),e=t.extend(!0,{url:c,success:t.ajaxSettings.success,type:s||t.ajaxSettings.type,iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},e);var p={};if(this.trigger("form-pre-serialize",[this,e,p]),p.veto)return a("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(e.beforeSerialize&&!1===e.beforeSerialize(this,e))return a("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var d=e.traditional;void 0===d&&(d=t.ajaxSettings.traditional);var b,f=[],h=this.formToArray(e.semantic,f);if(e.data&&(e.extraData=e.data,b=t.param(e.data,d)),e.beforeSubmit&&!1===e.beforeSubmit(h,this,e))return a("ajaxSubmit: submit aborted via beforeSubmit callback"),this;if(this.trigger("form-submit-validate",[h,this,e,p]),p.veto)return a("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;var m=t.param(h,d);b&&(m=m?m+"&"+b:b),"GET"==e.type.toUpperCase()?(e.url+=(e.url.indexOf("?")>=0?"&":"?")+m,e.data=null):e.data=m;var v=[];if(e.resetForm&&v.push(function(){u.resetForm()}),e.clearForm&&v.push(function(){u.clearForm(e.includeHidden)}),!e.dataType&&e.target){var g=e.success||function(){};v.push(function(n){var i=e.replaceTarget?"replaceWith":"html";t(e.target)[i](n).each(g,arguments)})}else e.success&&v.push(e.success);if(e.success=function(t,n,i){for(var a=e.context||this,o=0,r=v.length;o<r;o++)v[o].apply(a,[t,n,i||u,u])},e.error){var w=e.error;e.error=function(t,n,i){var a=e.context||this;w.apply(a,[t,n,i,u])}}if(e.complete){var y=e.complete;e.complete=function(t,n){var i=e.context||this;y.apply(i,[t,n,u])}}var C=t("input[type=file]:enabled",this).filter(function(){return""!==t(this).val()}),x=C.length>0,k="multipart/form-data",I=u.attr("enctype")==k||u.attr("encoding")==k,T=o.fileapi&&o.formdata;a("fileAPI :"+T);var $,S=(x||I)&&!T;!1!==e.iframe&&(e.iframe||S)?e.closeKeepAlive?t.get(e.closeKeepAlive,function(){$=i(h)}):$=i(h):$=(x||I)&&T?function(i){for(var a=new FormData,o=0;o<i.length;o++)a.append(i[o].name,i[o].value);if(e.extraData){var r=n(e.extraData);for(o=0;o<r.length;o++)r[o]&&a.append(r[o][0],r[o][1])}e.data=null;var l=t.extend(!0,{},t.ajaxSettings,e,{contentType:!1,processData:!1,cache:!1,type:s||"POST"});e.uploadProgress&&(l.xhr=function(){var n=t.ajaxSettings.xhr();return n.upload&&n.upload.addEventListener("progress",function(t){var n=0,i=t.loaded||t.position,a=t.total;t.lengthComputable&&(n=Math.ceil(i/a*100)),e.uploadProgress(t,i,a,n)},!1),n}),l.data=null;var c=l.beforeSend;return l.beforeSend=function(t,n){e.formData?n.data=e.formData:n.data=a,c&&c.call(this,t,n)},t.ajax(l)}(h):t.ajax(e),u.removeData("jqxhr").data("jqxhr",$);for(var q=0;q<f.length;q++)f[q]=null;return this.trigger("form-submit-notify",[this,e]),this},t.fn.ajaxForm=function(e){if(e=e||{},e.delegation=e.delegation&&t.isFunction(t.fn.on),!e.delegation&&0===this.length){var o={s:this.selector,c:this.context};return!t.isReady&&o.s?(a("DOM not ready, queuing ajaxForm"),t(function(){t(o.s,o.c).ajaxForm(e)}),this):(a("terminating; zero elements found by selector"+(t.isReady?"":" (DOM not ready)")),this)}return e.delegation?(t(document).off("submit.form-plugin",this.selector,n).off("click.form-plugin",this.selector,i).on("submit.form-plugin",this.selector,e,n).on("click.form-plugin",this.selector,e,i),this):this.ajaxFormUnbind().bind("submit.form-plugin",e,n).bind("click.form-plugin",e,i)},t.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")},t.fn.formToArray=function(e,n){var i=[];if(0===this.length)return i;var a,r=this[0],s=this.attr("id"),l=e?r.getElementsByTagName("*"):r.elements;if(l&&!/MSIE [678]/.test(navigator.userAgent)&&(l=t(l).get()),s&&(a=t(':input[form="'+s+'"]').get(),a.length&&(l=(l||[]).concat(a))),!l||!l.length)return i;var c,u,p,d,b,f,h;for(c=0,f=l.length;c<f;c++)if(b=l[c],(p=b.name)&&!b.disabled)if(e&&r.clk&&"image"==b.type)r.clk==b&&(i.push({name:p,value:t(b).val(),type:b.type}),i.push({name:p+".x",value:r.clk_x},{name:p+".y",value:r.clk_y}));else if((d=t.fieldValue(b,!0))&&d.constructor==Array)for(n&&n.push(b),u=0,h=d.length;u<h;u++)i.push({name:p,value:d[u]});else if(o.fileapi&&"file"==b.type){n&&n.push(b);var m=b.files;if(m.length)for(u=0;u<m.length;u++)i.push({name:p,value:m[u],type:b.type});else i.push({name:p,value:"",type:b.type})}else null!==d&&void 0!==d&&(n&&n.push(b),i.push({name:p,value:d,type:b.type,required:b.required}));if(!e&&r.clk){var v=t(r.clk),g=v[0];p=g.name,p&&!g.disabled&&"image"==g.type&&(i.push({name:p,value:v.val()}),i.push({name:p+".x",value:r.clk_x},{name:p+".y",value:r.clk_y}))}return i},t.fn.formSerialize=function(e){return t.param(this.formToArray(e))},t.fn.fieldSerialize=function(e){var n=[];return this.each(function(){var i=this.name;if(i){var a=t.fieldValue(this,e);if(a&&a.constructor==Array)for(var o=0,r=a.length;o<r;o++)n.push({name:i,value:a[o]});else null!==a&&void 0!==a&&n.push({name:this.name,value:a})}}),t.param(n)},t.fn.fieldValue=function(e){for(var n=[],i=0,a=this.length;i<a;i++){var o=this[i],r=t.fieldValue(o,e);null===r||void 0===r||r.constructor==Array&&!r.length||(r.constructor==Array?t.merge(n,r):n.push(r))}return n},t.fieldValue=function(e,n){var i=e.name,a=e.type,o=e.tagName.toLowerCase();if(void 0===n&&(n=!0),n&&(!i||e.disabled||"reset"==a||"button"==a||("checkbox"==a||"radio"==a)&&!e.checked||("submit"==a||"image"==a)&&e.form&&e.form.clk!=e||"select"==o&&-1==e.selectedIndex))return null;if("select"==o){var r=e.selectedIndex;if(r<0)return null;for(var s=[],l=e.options,c="select-one"==a,u=c?r+1:l.length,p=c?r:0;p<u;p++){var d=l[p];if(d.selected){var b=d.value;if(b||(b=d.attributes&&d.attributes.value&&!d.attributes.value.specified?d.text:d.value),c)return b;s.push(b)}}return s}return t(e).val()},t.fn.clearForm=function(e){return this.each(function(){t("input,select,textarea",this).clearFields(e)})},t.fn.clearFields=t.fn.clearInputs=function(e){var n=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var i=this.type,a=this.tagName.toLowerCase();n.test(i)||"textarea"==a?this.value="":"checkbox"==i||"radio"==i?this.checked=!1:"select"==a?this.selectedIndex=-1:"file"==i?/MSIE/.test(navigator.userAgent)?t(this).replaceWith(t(this).clone(!0)):t(this).val(""):e&&(!0===e&&/hidden/.test(i)||"string"==typeof e&&t(this).is(e))&&(this.value="")})},t.fn.resetForm=function(){return this.each(function(){("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset()})},t.fn.enable=function(e){return void 0===e&&(e=!0),this.each(function(){this.disabled=!e})},t.fn.selected=function(e){return void 0===e&&(e=!0),this.each(function(){var n=this.type;if("checkbox"==n||"radio"==n)this.checked=e;else if("option"==this.tagName.toLowerCase()){var i=t(this).parent("select");e&&i[0]&&"select-one"==i[0].type&&i.find("option").selected(!1),this.selected=e}})},t.fn.ajaxSubmit.debug=!1}var o={};o.fileapi=void 0!==t("<input type='file'/>").get(0).files,o.formdata=void 0!==window.FormData,t.fn.uploadFile=function(n){function i(){I||(I=!0,function e(){if(g.sequential||(g.sequentialCount=99999),0==x.length&&0==k.length)g.afterUploadAll&&g.afterUploadAll(y),I=!1;else{if(k.length<g.sequentialCount){var t=x.shift();void 0!=t&&(k.push(t),t.removeClass(y.formGroup),t.submit())}window.setTimeout(e,100)}}())}function a(e,n,i){i.on("dragenter",function(e){e.stopPropagation(),e.preventDefault(),t(this).addClass(n.dragDropHoverClass)}),i.on("dragover",function(e){e.stopPropagation(),e.preventDefault();var i=t(this)
;i.hasClass(n.dragDropContainerClass)&&!i.hasClass(n.dragDropHoverClass)&&i.addClass(n.dragDropHoverClass)}),i.on("drop",function(i,a){i.preventDefault(),t(this).removeClass(n.dragDropHoverClass),i.orginaEvent||(i=a),e.errorLog.html("");var o=i.originalEvent.dataTransfer.files;if(!n.multiple&&o.length>1)return void(n.showError&&t("<div class='"+n.errorClass+"'>"+n.multiDragErrorStr+"</div>").appendTo(e.errorLog));0!=n.onSelect(o)&&l(n,e,o)}),i.on("dragleave",function(e){t(this).removeClass(n.dragDropHoverClass)}),t(document).on("dragenter",function(e){e.stopPropagation(),e.preventDefault()}),t(document).on("dragover",function(e){e.stopPropagation(),e.preventDefault();var i=t(this);i.hasClass(n.dragDropContainerClass)||i.removeClass(n.dragDropHoverClass)}),t(document).on("drop",function(e){e.stopPropagation(),e.preventDefault(),t(this).removeClass(n.dragDropHoverClass)})}function r(e){var t="",n=e/1024;if(parseInt(n)>1024){t=(n/1024).toFixed(2)+" MB"}else t=n.toFixed(2)+" KB";return t}function s(e){var n=[];n="string"==t.type(e)?e.split("&"):t.param(e).split("&");var i,a,o=n.length,r=[];for(i=0;i<o;i++)n[i]=n[i].replace(/\+/g," "),a=n[i].split("="),r.push([decodeURIComponent(a[0]),decodeURIComponent(a[1])]);return r}function l(e,n,i){for(var a=0;a<i.length;a++)if(c(n,e,i[a].name)){if(e.allowDuplicates||!u(n,i[a].name))if(-1!=e.maxFileSize&&i[a].size>e.maxFileSize){if(e.showError){var o=t("<div class='"+e.errorClass+"'><b>"+i[a].name+"</b> "+e.sizeErrorStr+r(e.maxFileSize)+"</div>");o.on("click",function(){o.addClass("pubble-off"),t(".pubble-cw-input-textarea").focus()}),o.appendTo(n.errorLog)}}else if(-1!=e.maxFileCount&&n.selectedFiles>=e.maxFileCount){if(e.showError){var o=t("<div class='"+e.errorClass+"'><b>"+i[a].name+"</b> "+e.maxFileCountErrorStr+e.maxFileCount+"</div>");o.on("click",function(){o.addClass("pubble-off"),t(".pubble-cw-input-textarea").focus()}),o.appendTo(n.errorLog)}}else{n.selectedFiles++,n.existingFileNames.push(i[a].name);var l=e,p=new FormData,d=e.fileName.replace("[]","");p.append(d,i[a]);var b=e.formData;if(b)for(var f=s(b),h=0;h<f.length;h++)f[h]&&p.append(f[h][0],f[h][1]);l.fileData=p;var g=new m(n,e),w="";w=e.showFileCounter?n.fileCounter+e.fileCounterStyle+i[a].name:i[a].name,e.showFileSize&&(w+=" ("+r(i[a].size)+")"),g.filename.html(w);var y=t("<form style='display:block; position:absolute;left: 150px;' class='"+n.formGroup+"' method='"+e.method+"' action='"+e.url+"' enctype='"+e.enctype+"'></form>");y.appendTo("body");var C=[];C.push(i[a].name),v(y,l,g,C,n,i[a]),n.fileCounter++}else if(e.showError){var o=t("<div class='"+e.errorClass+"'><b>"+i[a].name+"</b> "+e.duplicateErrorStr+"</div>");o.on("click",function(){o.addClass("pubble-off"),t(".pubble-cw-input-textarea").focus()}),o.appendTo(n.errorLog)}}else if(e.showError){var o=t("<div class='"+e.errorClass+"'><b>"+i[a].name+"</b> "+e.extErrorStr+e.allowedTypes+"</div>");o.on("click",function(){o.addClass("pubble-off"),t(".pubble-cw-input-textarea").focus()}),o.appendTo(n.errorLog)}}function c(e,n,i){var a=n.allowedTypes.toLowerCase().split(/[\s,]+/g),o=i.split(".").pop().toLowerCase();return!("*"!=n.allowedTypes&&t.inArray(o,a)<0)}function u(e,t){var n=!1;if(e.existingFileNames.length)for(var i=0;i<e.existingFileNames.length;i++)(e.existingFileNames[i]==t||g.duplicateStrict&&e.existingFileNames[i].toLowerCase()==t.toLowerCase())&&(n=!0);return n}function p(e,t){if(e.existingFileNames.length)for(var n=0;n<t.length;n++){var i=e.existingFileNames.indexOf(t[n]);-1!=i&&e.existingFileNames.splice(i,1)}}function d(e,t){if(e){t.show();var n=new FileReader;n.onload=function(e){t.attr("src",e.target.result)},n.readAsDataURL(e)}}function b(e,n){if(e.showFileCounter){var i=t(n.container).find(".ajax-file-upload-filename").length;n.fileCounter=i+1,t(n.container).find(".ajax-file-upload-filename").each(function(n,a){var o=t(this).html().split(e.fileCounterStyle),r=(parseInt(o[0]),i+e.fileCounterStyle+o[1]);t(this).html(r),i--})}}function f(e,n,i,a){var r="ajax-upload-id-"+(new Date).getTime(),s=t("<form tabindex='-1' method='"+i.method+"' action='"+i.url+"' enctype='"+i.enctype+"'><label for='"+r+"'>Upload</label></form>"),u="<input type='file' tabindex='-1' id='"+r+"' name='"+i.fileName+"' accept='"+i.acceptFiles+"'/>";i.multiple&&(i.fileName.indexOf("[]")!=i.fileName.length-2&&(i.fileName+="[]"),u="<input type='file' tabindex='-1' id='"+r+"' name='"+i.fileName+"' accept='"+i.acceptFiles+"' multiple/>");var p=t(u).appendTo(s);p.change(function(){e.errorLog.html("");var r=(i.allowedTypes.toLowerCase().split(","),[]);if(this.files){for(w=0;w<this.files.length;w++)r.push(this.files[w].name);if(0==i.onSelect(this.files))return}else{var u=t(this).val(),p=[];if(r.push(u),!c(e,i,u)){if(i.showError){var d=t("<div class='"+i.errorClass+"'><b>"+u+"</b> "+i.extErrorStr+i.allowedTypes+"</div>");d.on("click",function(){d.addClass("pubble-off")}),d.appendTo(e.errorLog)}return}if(p.push({name:u,size:"NA"}),0==i.onSelect(p))return}if(b(i,e),a.unbind("click"),s.hide(),f(e,n,i,a),s.addClass(n),i.serialize&&o.fileapi&&o.formdata){s.removeClass(n);var h=this.files;s.remove(),l(i,e,h)}else{for(var g="",w=0;w<r.length;w++)i.showFileCounter?g+=e.fileCounter+i.fileCounterStyle+r[w]+"<br>":g+=r[w]+"<br>",e.fileCounter++;if(-1!=i.maxFileCount&&e.selectedFiles+r.length>i.maxFileCount)return void(i.showError&&t("<div class='"+i.errorClass+"'><b>"+g+"</b> "+i.maxFileCountErrorStr+i.maxFileCount+"</div>").appendTo(e.errorLog));e.selectedFiles+=r.length;var y=new m(e,i);y.filename.html(g),v(s,i,y,r,e,null)}}),i.nestedForms?(s.css({margin:0,padding:0}),a.css({position:"relative",overflow:"hidden",cursor:"default"}),p.css({position:"absolute",cursor:"pointer",top:"0px",width:"100%",height:"100%",left:"0px","z-index":"100",opacity:"0.0",filter:"alpha(opacity=0)","-ms-filter":"alpha(opacity=0)","-khtml-opacity":"0.0","-moz-opacity":"0.0"}),s.appendTo(a)):(s.appendTo(t("body")),s.css({margin:0,padding:0,display:"block",position:"absolute",left:"-250px"}),-1!=navigator.appVersion.indexOf("MSIE ")?a.attr("for",r):a.click(function(){p.click()}))}function h(e,n){return this.statusbar=t("<div class='ajax-file-upload-statusbar'></div>").width(n.statusBarWidth),this.preview=t("<img class='ajax-file-upload-preview' />").width(n.previewWidth).height(n.previewHeight).appendTo(this.statusbar).hide(),this.filename=t("<div class='ajax-file-upload-filename'></div>").appendTo(this.statusbar),this.progressDiv=t("<div class='ajax-file-upload-progress'>").appendTo(this.statusbar).hide(),this.progressbar=t("<div class='ajax-file-upload-bar'></div>").appendTo(this.progressDiv),this.abort=t("<div>"+n.abortStr+"</div>").appendTo(this.statusbar).hide(),this.cancel=t("<div>"+n.cancelStr+"</div>").appendTo(this.statusbar).hide(),this.done=t("<div>"+n.doneStr+"</div>").appendTo(this.statusbar).hide(),this.download=t("<div>"+n.downloadStr+"</div>").appendTo(this.statusbar).hide(),this.del=t("<div>"+n.deletelStr+"</div>").appendTo(this.statusbar).hide(),this.abort.addClass("ajax-file-upload-red"),this.done.addClass("ajax-file-upload-green"),this.download.addClass("ajax-file-upload-green"),this.cancel.addClass("ajax-file-upload-red"),this.del.addClass("ajax-file-upload-red"),this}function m(n,i){var a=null;a=i.customProgressBar?new i.customProgressBar(n,i):new h(n,i),a.abort.addClass(n.formGroup),a.abort.addClass(i.abortButtonClass),a.cancel.addClass(n.formGroup),a.cancel.addClass(i.cancelButtonClass),i.extraHTML&&(a.extraHTML=t("<div class='extrahtml'>"+i.extraHTML()+"</div>").insertAfter(a.filename));var o=t(".pubble-cw-input-progress-default"),r=t(".pubble-cw-input-progress");return o.html(a.statusbar),e.addClass(r,"pubble-cw-isactive"),a}function v(e,n,a,r,l,c){var u={cache:!1,contentType:!1,processData:!1,forceSync:!1,type:n.method,data:n.formData,formData:n.fileData,dataType:n.returnType,beforeSubmit:function(i,o,c){if(0!=n.onSubmit.call(this,r)){if(n.dynamicFormData){var u=s(n.dynamicFormData());if(u)for(var d=0;d<u.length;d++)u[d]&&(void 0!=n.fileData?c.formData.append(u[d][0],u[d][1]):c.data[u[d][0]]=u[d][1])}return n.extraHTML&&t(a.extraHTML).find("input,select,textarea").each(function(e,i){void 0!=n.fileData?c.formData.append(t(this).attr("name"),t(this).val()):c.data[t(this).attr("name")]=t(this).val()}),!0}return a.statusbar.append("<div class='"+n.errorClass+"'>"+n.uploadErrorStr+"</div>"),a.cancel.show(),e.remove(),a.cancel.click(function(){x.splice(x.indexOf(e),1),p(l,r),a.statusbar.remove(),t(".pubble-cw-input-progress").removeClass("pubble-cw-isactive"),n.onCancel.call(l,r,a),l.selectedFiles-=r.length,b(n,l)}),!1},beforeSend:function(e,t){a.progressDiv.show(),a.cancel.hide(),a.done.hide(),n.showAbort&&(a.abort.show(),a.abort.click(function(){p(l,r),e.abort(),l.selectedFiles-=r.length,n.onAbort.call(l,r,a)})),o.formdata?a.progressbar.width("1%"):a.progressbar.width("5%")},uploadProgress:function(e,t,i,o){o>98&&(o=98);var r=o+"%";o>1&&a.progressbar.width(r),n.showProgress&&(a.progressbar.html(r),a.progressbar.css("text-align","center"))},success:function(i,o,s){if(a.cancel.remove(),k.pop(),t(".pubble-cw-input-progress").removeClass("pubble-cw-isactive"),"json"==n.returnType&&"object"==t.type(i)&&i.hasOwnProperty(n.customErrorKeyStr)){a.abort.hide();var c=i[n.customErrorKeyStr];return n.onError.call(this,r,200,c,a),n.showStatusAfterError?(a.progressDiv.hide(),a.statusbar.append("<span class='"+n.errorClass+"'>ERROR: "+c+"</span>")):(a.statusbar.hide(),a.statusbar.remove()),l.selectedFiles-=r.length,void e.remove()}l.responses.push(i),a.progressbar.width("100%"),n.showProgress&&(a.progressbar.html("100%"),a.progressbar.css("text-align","center")),a.abort.hide(),n.onSuccess.call(this,r,i,s,a),n.showStatusAfterSuccess?(n.showDone?(a.done.show(),a.done.click(function(){a.statusbar.hide("slow"),a.statusbar.remove()})):a.done.hide(),n.showDelete?(a.del.show(),a.del.click(function(){p(l,r),a.statusbar.hide().remove(),n.deleteCallback&&n.deleteCallback.call(this,i,a),l.selectedFiles-=r.length,b(n,l)})):a.del.hide()):(a.statusbar.hide("slow"),a.statusbar.remove()),n.showDownload&&(a.download.show(),a.download.click(function(){n.downloadCallback&&n.downloadCallback(i)})),e.remove()},error:function(i,o,s){a.cancel.remove(),k.pop(),a.abort.hide(),"abort"==i.statusText?(a.statusbar.hide("slow").remove(),b(n,l)):(n.onError.call(this,r,o,s,a),n.showStatusAfterError?(a.progressDiv.hide(),a.statusbar.append("<span class='"+n.errorClass+"'>ERROR: "+s+"</span>")):(a.statusbar.hide(),a.statusbar.remove(),t(".pubble-cw-input-progress").removeClass("pubble-cw-isactive")),l.selectedFiles-=r.length),e.remove()}};n.showPreview&&null!=c&&"image"==c.type.toLowerCase().split("/").shift()&&d(c,a.preview),n.autoSubmit?(e.ajaxForm(u),x.push(e),i()):(n.showCancel&&(a.cancel.show(),a.cancel.click(function(){x.splice(x.indexOf(e),1),p(l,r),e.remove(),a.statusbar.remove(),t(".pubble-cw-input-progress").removeClass("pubble-cw-isactive"),n.onCancel.call(l,r,a),l.selectedFiles-=r.length,b(n,l)})),e.ajaxForm(u))}var g=t.extend({url:"",method:"POST",enctype:"multipart/form-data",returnType:null,allowDuplicates:!0,duplicateStrict:!1,allowedTypes:"*",acceptFiles:"*",fileName:"file",formData:!1,dynamicFormData:!1,maxFileSize:-1,maxFileCount:-1,multiple:!0,dragDrop:!0,autoSubmit:!0,showCancel:!0,showAbort:!0,showDone:!1,showDelete:!1,showError:!0,showStatusAfterSuccess:!0,showStatusAfterError:!0,showFileCounter:!0,fileCounterStyle:"). ",showFileSize:!0,showProgress:!1,nestedForms:!0,showDownload:!1,onLoad:function(e){},onSelect:function(e){return!0},onSubmit:function(e,t){},onSuccess:function(e,t,n,i){},onError:function(e,t,n,i){},onCancel:function(e,t){},onAbort:function(e,t){},downloadCallback:!1,deleteCallback:!1,afterUploadAll:!1,serialize:!0,sequential:!1,sequentialCount:2,customProgressBar:!1,abortButtonClass:"ajax-file-upload-abort",cancelButtonClass:"ajax-file-upload-cancel",dragDropContainerClass:"ajax-upload-dragdrop",dragDropHoverClass:"state-hover",errorClass:"ajax-file-upload-error",uploadButtonClass:"ajax-file-upload",dragDropStr:"<span><b>Drag &amp; Drop Files</b></span>",uploadStr:"",abortStr:"Abort",cancelStr:"Cancel",deletelStr:"Delete",doneStr:"Done",multiDragErrorStr:"Multiple File Drag &amp; Drop is not allowed.",extErrorStr:"is not allowed. Allowed extensions: ",duplicateErrorStr:"is not allowed. File already exists.",sizeErrorStr:"is not allowed. Allowed Max size: ",uploadErrorStr:"Upload is not allowed",maxFileCountErrorStr:" is not allowed. Maximum allowed files are:",downloadStr:"Download",customErrorKeyStr:"jquery-upload-file-error",showQueueDiv:!1,statusBarWidth:400,dragdropWidth:400,showPreview:!1,previewHeight:"auto",previewWidth:"100%",extraHTML:!1,uploadQueueOrder:"top"},n);this.fileCounter=1,this.selectedFiles=0;var w="ajax-file-upload-"+(new Date).getTime();this.formGroup=w,this.errorLog=t("<div></div>"),this.responses=[],this.existingFileNames=[],o.formdata||(g.dragDrop=!1),o.formdata&&1!==g.maxFileCount||(g.multiple=!1),t(this).html("");var y=this,C=t("<div>"+g.uploadStr+"</div>");t(C).addClass(g.uploadButtonClass),function e(){if(t.fn.ajaxForm){if(g.dragDrop){var n=t('<div class="'+g.dragDropContainerClass+'" style="vertical-align:top;"></div>').width(g.dragdropWidth);t(y).append(n),t(n).append(C),t(n).append(t(g.dragDropStr)),a(y,g,n)}else t(y).append(C);t(y).append(y.errorLog),g.showQueueDiv?y.container=t("#"+g.showQueueDiv):y.container=t("<div class='ajax-file-upload-container'></div>").insertAfter(t(y)),g.onLoad.call(this,y),f(y,w,g,C)}else window.setTimeout(e,10)}(),this.startUpload=function(){t("form").each(function(e,n){t(this).hasClass(y.formGroup)&&x.push(t(this))}),x.length>=1&&i()},this.getFileCount=function(){return y.selectedFiles},this.stopUpload=function(){t("."+g.abortButtonClass).each(function(e,n){t(this).hasClass(y.formGroup)&&t(this).click()}),t("."+g.cancelButtonClass).each(function(e,n){t(this).hasClass(y.formGroup)&&t(this).click()})},this.cancelAll=function(){t("."+g.cancelButtonClass).each(function(e,n){t(this).hasClass(y.formGroup)&&t(this).click()})},this.update=function(e){g=t.extend(g,e)},this.reset=function(e){y.fileCounter=1,y.selectedFiles=0,y.errorLog.html(""),0!=e&&y.container.html("")},this.remove=function(){y.container.html(""),t(y).remove()},this.createProgress=function(e,t,n){var i=new m(this,g);i.progressDiv.show(),i.progressbar.width("100%");var a="";return a=g.showFileCounter?y.fileCounter+g.fileCounterStyle+e:e,g.showFileSize&&(a+=" ("+r(n)+")"),i.filename.html(a),y.fileCounter++,y.selectedFiles++,g.showPreview&&(i.preview.attr("src",t),i.preview.show()),g.showDownload&&(i.download.show(),i.download.click(function(){g.downloadCallback&&g.downloadCallback.call(y,[e])})),g.showDelete&&(i.del.show(),i.del.click(function(){i.statusbar.hide().remove();var t=[e];g.deleteCallback&&g.deleteCallback.call(this,t,i),y.selectedFiles-=1,b(g,y)})),i},this.getResponses=function(){return this.responses};var x=[],k=[],I=!1;return this}}(t);var n={isBadIE:function(){return-1!=navigator.appVersion.indexOf("MSIE 7.")||-1!=navigator.appVersion.indexOf("MSIE 8.")||-1!=navigator.appVersion.indexOf("MSIE 9.")},uploadAvatarCallback:function(n,i){var a=n+"",o="";o=a.indexOf("amazonaws.")>-1||a.indexOf("azureedge.")>-1?a:"https://media.pubble.io"+a,t("#mod-avatar").attr("src",o);var r={},n={contentType:"JSONP"};n.accountId=i.id,n.alias=i.alias,n.avatar=o,e.XDR(e.getEndpoints().profile,n,function(e){},new function(){},r)},uploadImg:function(i,a,o,r,s,l){var c={};c.rndid=(new Date).getTime()+""+Math.floor(1001*Math.random()),l&&(c.custom=JSON.stringify(l)),r||(r=t("#uploading_text_updates"));var u="http://upload.pubble.io";"https:"==document.location.protocol&&(u="https://upload.pubble.io"),t("#"+i).uploadFile({url:u,allowedTypes:"png,gif,jpg,jpeg,pdf,doc,docx,xls,xlsx,ppt,pptx,txt,mp3,csv,mp4",formData:c,showAbort:!1,maxFileSize:3584e4,showDone:!1,dragDrop:!1,multiple:!1,onSubmit:function(e){t(r).removeClass("pubble-off")},onError:function(n,i,a){var o=pubblebot.require("app");o.vent.trigger("app:stream:chatbox",o.box),e.addClass(t(r),"pubble-off"),t(".ajax-file-upload-statusbar").remove()},onSuccess:function(i,o,l){window.pb_uploaded_fileName=i[0],t(".ajax-file-upload-error").html(""),t(".ajax-file-upload-statusbar").remove(),t("#uploading_text_updates").html(""),n.isBadIE()?t.ajax({url:"https://media.pubble.io/imgurl/media_"+c.rndid,type:"GET",dataType:"jsonp",cache:0,success:function(n){a(n.data),t(".ajax-file-upload-statusbar").remove(),e.addClass(t(r),"pubble-off")},error:function(n){a(n.data),t(".ajax-file-upload-statusbar").remove(),e.addClass(t(r),"pubble-off")}}):(a(o,s),t(".ajax-file-upload-statusbar").remove())}})}};return n}),pubblebot.define("views/conversation",["backbone","underscore","utils/utils","text!templates/conversation.tpl","utils/appConfig"],function(e,t,n,i,a){var o=window.jQueryPBm;return window.$pubbBackbone.noConflict().View.extend({template:$UScore.template(i),className:"pubble-cw-chat-item pubmd-is-show",initialize:function(e){window.$UScore.bindAll(this,"render","tileChange"),this._id=e.model.get("id"),this.model=e.model,this.app=e.app,this.model.on("change:avatar",this.tileChange,this),this.model.on("change:alias",this.tileChange,this),this.model.on("change:content",this.tileChange,this),this.model.on("change:read",this.tileChange,this),this.model.on("change:reply_content",this.tileChange,this),this.model.on("change:replied",this.tileChange,this),this.model.on("change:moderator_reply",this.tileChange,this)},tileChange:function(){var e=this.$el.find(".pubble-cw-chat-mod");this.$el.find(".pubble-cw-chat-avatar-img").html(this.model.get("avatar")),e.html(this.model.get("alias")),this.$el.find(".pubble-cw-chat-last").html(this.model.get("reply_content")),this.model.get("accountAssigned")?(n.addClass(e,"pubble-cw-chat-mod-isperson"),e.removeClass("pubble-cw-chat-mod-ischannel"),e.removeClass("pubble-cw-chat-mod-iscommunity")):this.model.get("groupAssigned")?(n.addClass(e,"pubble-cw-chat-mod-ischannel"),e.removeClass("pubble-cw-chat-mod-isperson"),e.removeClass("pubble-cw-chat-mod-iscommunity")):this.model.get("communityAssigned")&&(n.addClass(e,"pubble-cw-chat-mod-iscommunity"),e.removeClass("pubble-cw-chat-mod-ischannel"),e.removeClass("pubble-cw-chat-mod-isperson")),this.model.get("moderator_reply")?(n.addClass(this.$el.find(".pubble-cw-chat-last"),"pubble-cw-chat-last-ismod"),this.$el.find(".pubble-cw-chat-last").removeClass("pubble-cw-chat-last-isvisitor")):(this.$el.find(".pubble-cw-chat-last").removeClass("pubble-cw-chat-last-ismod"),n.addClass(this.$el.find(".pubble-cw-chat-last"),"pubble-cw-chat-last-isvisitor")),this.model.get("read")?this.$el.removeClass("pubble-cw-chat-item-unread"):n.addClass(this.$el,"pubble-cw-chat-item-unread"),"You"==this.model.get("alias")&&(this.$el.find(".pubble-cw-chat-mod-iscommunity").html(n.headerText()),this.$el.find(".pubble-cw-chat-mod").html(n.headerText()),this.$el.find(".pubble-cw-chat-mod-isperson").html(n.headerText()))},render:function(){var e=this;return this.$el.html(this.template(this.model.toJSON())),this.$el.attr("tabindex",-1),this.$el.on("keydown",function(t){if(o(t.target),13==t.which&&!t.altKey)return e.$el.trigger("click"),!1;if(38==t.which){var i=n.getPrevByCls(e.$el,"pubmd-is-show","pubble-cw-chat-item",!1);if(null==i&&(i=e.app.$el.find(".pubble-cw-chat-item").last()),null!=i)return i.focus(),t.stopPropagation(),!1}else if(40==t.which){var i=n.getPrevByCls(e.$el,"pubmd-is-show","pubble-cw-chat-item",!0);if(null==i&&(i=e.app.$el.find(".pubble-cw-chat-item").first()),null!=i)return i.focus(),t.stopPropagation(),!1}}),""==this.model.get("avatar")&&n.addClass(this.$el,"pubble-cw-user-isguest"),n.addClass(this.$el,"pubble-cw-conv-"+this.model.get("conversationId")),this.tileChange(),this.$el.on("click",function(){var t=pubblebot.require("app");e.model.set("read",1),e.$el.removeClass("pubble-cw-chat-item-unread"),n.showHomeScreen(!1),"TT"!=e.model.get("type")?t.vent.trigger("pubble:app:msger:loadConversation",e.model):t.vent.trigger("app:trigger:q")}),e}})}),pubblebot.define("collections/posts",["underscore","backbone","utils/utils","models/post","views/post"],function(e,t,n,i,a){return window.$pubbBackbone.noConflict().Collection.extend({idAttribute:"postID",model:i,initialize:function(){},parse:function(e){return e},toJSON:function(){return e.clone(this.attributes)},clear:function(e){this._reset()}})}),pubblebot.define("text!templates/form.tpl",[],function(){return'<div class="pubble-form-frame-outofoffice pubble-off">\n    <span>We are currently out of office<br />Please try again later</span>\n</div>\n<div class="pubble-form-frame pubble-gdpr-parent pubble-md-gdpr-off">\n    <div class="pubble-form-top">\n        <div class="pubble-form-text-title pubble-lan-form-cd">Contact details</div>\n        <div class="pubble-form-text-subtitle"></div>\n        <div class="pubble-form-top-close"></div>\n    </div>\n    <div class="pubble-form-center">\n        <div class="pubble-form-section-person">\n            <div class="pubble-form-element pubble-form-person-name-container">\n                <label for="pubble-form-person-name" class="pubble-form-element-title pubble-form-element-placeholder pubble-client-color pubble-lan-form-name-text">Name<span>*</span></label>\n                <input aria-invalid="false" type="text" aria-label="Name textarea" type="text" value=""\n                    id="pubble-form-person-name" class="pubble-form-element-inputarea" />\n                <div id="pubjs-input-name-error" aria-hidden="true"\n                    class="pubble-form-error pubble-off pubble-lan-form-name-err">Name Required</div>\n            </div>\n            <div class="pubble-form-element pubble-form-person-email-container">\n                <label for="pubble-form-person-email" class="pubble-form-element-title pubble-form-element-placeholder pubble-client-color pubble-lan-form-email-re">Email<span>*</span></label>\n                <input aria-invalid="false" type="text" aria-label="Email textarea" type="text" value=""\n                    id="pubble-form-person-email" class="pubble-form-element-inputarea" />\n                <div id="pubjs-input-email-error" aria-hidden="true"\n                    class="pubble-form-error pubble-off pubble-lan-form-email-err">Email Required</div>\n            </div>\n            <div class="pubble-form-element pubble-form-person-phone-container">\n                <label for="pubble-form-person-phone"\n                    class="pubble-form-element-title pubble-client-color pubble-lan-form-phone-re">Phone<span>*</span></label>\n                <input id="pubble-form-person-phone" aria-invalid="false" type="text" aria-label="Phone input"\n                    class="pubble-form-element-inputarea-phonefake" />\n                <div class="pubble-form-phone-lib"><input type="text" name="telphone"\n                        class="pubble-cw-mobile-lib pubble-form-element-inputarea" /></div>\n                <div id="pubjs-input-phone-error" aria-hidden="true"\n                    class="pubble-form-error pubble-off pubble-lan-form-phone-err">Phone Required</div>\n            </div>\n            <div class="pubble-form-element pubble-form-person-depts-container">\n\n                <label for="pubble-form-assignee-list" class="pubble-form-element-title pubble-form-element-dept pubble-form-element-placeholder pubble-client-color">Please select department below<span>*</span></label>\n   \n                <ol class="pubble-form-assignee-list">\n                    <select name="assignee-selector" class="pubble-assign-selector">\n                      </select>\n                </ol>\n            </div>\n        </div>\n        <div class="pubble-form-section-question">\n            <div class="pubble-form-element pubble-form-question-container">\n                <label for="pubble-form-question-textarea"\n                    class="pubble-form-element-title pubble-form-element-placeholder pubble-client-color pubble-lan-form-q-text">Question<span>\n                        (required)</span></label>\n                <textarea aria-invalid="false" aria-describedby="pubjs-input-question-hint" type="text"\n                    aria-label="Question text" value="" id="pubble-form-question-textarea"\n                    class="pubble-form-element-inputarea pubble-cw-scroll"></textarea>\n                <div id="pubjs-input-question-hint">You have to ask a question</div>\n                <div id="pubjs-input-question-error" aria-hidden="true"\n                    class="pubble-form-error pubble-off pubble-lan-form-q-err">Question Required</div>\n            </div>\n        </div>\n\n        <div class="pubble-form-section-link">\n            <div class="pubble-form-element pubble-form-link">\n                <div class="pubble-form-element-title pubble-lan-form-q-link">Question Link</div>\n                <div class="pubble-form-link-actual"></div>\n            </div>\n        </div>\n    </div>\n    <div class="pubble-form-bottom">\n        <div class="pubble-gdpr">\n            <div class="pubble-gdpr-error pubble-hide pubble-lan-form-q-gdpr">\n                As you are submitting personal data, you must agree to consent before continuing.\n            </div>\n            <div class="pubble-gdpr-action" aria-role="checkbox" aria-checked="false" tabindex="0"\n            aria-labelledby="pubble-lan-cc-pconfirm">\n            </div>\n            <div class="pubble-gdpr-text">\n                <span class="pubble-lan-cc-pconfirm">I consent that any personal data I provide can be processed in\n                    accordance with the </span> <span\n                    class="pubble-gdpr-text-link pubble-md-gdprmodal pubble-lan-cc-privacy">Privacy\n                    Statement</span>.</span>\n\n            </div>\n        </div>\n        <div class="pubble-form-actionbar">\n            <button aria-disabled="true" aria-label="Submit" role="button"\n                class="pubble-form-button pubble-form-button-submit pubble-cw-btn-main pubble-lan-form-q-submit">Submit\n            </button>\n            <button aria-disabled="true" aria-label="Skip" role="button"\n                class="pubble-form-button pubble-form-button-skip pubble-lan-form-q-skip">Skip\n            </button>\n        </div>\n        <div class="pubble-form-text-footer"></div>\n        <div class="pubble-form-text-validation pubble-off pubble-lan-form-q-contact">Please add email or phone.</div>\n    </div>\n</div>\n<div class="pubble-form-frame-inprogress pubble-hide">\n    <div class="pubble-form-frame-inprogress-anim">\n\n        <div class="pubble-cw-dialog-item-waiting-ico pubble-cw-dialog-item-waiting-ico-fake">\n            <div class="pubble-cw-dialog-item-waiting-ico-dot1"></div>\n            <div class="pubble-cw-dialog-item-waiting-ico-dot2"></div>\n            <div class="pubble-cw-dialog-item-waiting-ico-dot3"></div>\n        </div>\n    </div>\n</div>\n<div class="pubble-form-frame-poweredby">\n    <div class="pubble-cw-powered">\n        <a class="pubble-cw-powered-link" href="http://pubble.io" target="_blank"></a>\n    </div>\n</div>'}),pubblebot.define("views/form",["backbone","underscore","utils/utils","text!templates/form.tpl","utils/appConfig","models/post","views/conversation","converters/converter","utils/storage"],function(e,t,n,i,a,o,r,s,l){var c=window.jQueryPBm;return window.$pubbBackbone.noConflict().View.extend({template:$UScore.template(i),className:"pubble-form",attributes:function(){return{id:this.model.get("id")+this.model.get("type")}},initialize:function(e){window.$UScore.bindAll(this,"render"),this._id=e.model.get("id"),this.model=e.model,this.render()},render:function(){var e=this;this.$el.html(this.template(this.model.toJSON()));var t=this.$el.find(".pubble-form-button-submit"),i=c(".pubble-cw-data-assignee");try{top.location!=location&&(i=c(top.document).find(".pubble-cw-data-assignee"))}catch(e){}0==i.length?e.$el.find(".pubble-form-person-depts-container").remove():(a.config.assigneeRequired&&null!=a.config.assigneeRequired?this.$el.find(".pubble-form-element-dept").html("Please select department below *"):(this.$el.find(".pubble-form-element-dept").html("Please select department below"),e.$el.find(".pubble-assign-selector").append(c("<option>",{value:"",text:"General"}))),c.each(i,function(t,n){var i=c(n);e.$el.find(".pubble-assign-selector").append(c("<option>",{value:i.attr("data"),text:i.attr("text")}))})),this.$el.find("#pubble-form-question-textarea").on("keydown",function(t){var n=t.keyCode?t.keyCode:t.which;if(!a.config.parameters.enableGdpr&&9==n)return t.preventDefault(),e.$el.find(".pubble-form-button-submit").focus(),!1});var u=this.$el,p=a.customName;p&&null!=p&&this.$el.find("#pubble-form-person-name").val(p);var d=a.emailv;d&&null!=d&&this.$el.find("#pubble-form-person-email").val(d),n.uiText(u,"form-cd","Contact details"),n.uiText(u,"form-name-text","Name<span> (required)</span>"),n.uiText(u,"form-name-err","Name Required"),n.uiText(u,"form-phone-re","Phone<span> (required)</span>"),n.uiText(u,"form-phone-text","Phone"),n.uiText(u,"form-phone-err","Phone Required"),n.uiText(u,"form-email-re","Email<span> (required)</span>"),n.uiText(u,"form-email-text","Email"),n.uiText(u,"form-email-err","Email Required"),n.uiText(u,"form-q-text","Question<span> (required)</span>"),n.uiText(u,"form-q-err","Question Required"),n.uiText(u,"form-q-link","Question Link"),n.uiText(u,"form-q-contact","Please add email or phone."),n.uiText(u,"form-q-submit","Submit"),n.uiText(u,"form-q-skip","Skip"),n.uiText(u,"form-q-contact","Please add email or phone."),n.uiText(u,"form-q-gdpr","As you are submitting personal data, you must agree to consent before continuing."),a.config.parameters.placeholders&&a.config.parameters.placeholders.gdprText?n.uiText(u,"cc-pconfirm",a.config.parameters.placeholders.gdprText):n.uiText(u,"cc-pconfirm","I consent that any personal data I provide can be processed in accordance with the"),n.uiText(u,"cc-privacy","Privacy Statement"),a.config.parameters.enableGdpr?(e.$el.find(".pubble-gdpr-action").attr("aria-required","true"),t.attr("aria-disabled","false")):(e.$el.find(".pubble-gdpr-parent").removeClass("pubble-md-gdpr-off").removeClass("pubble-md-gdpr-on"),t.attr("aria-disabled","true")),a.config.parameters.whitelabel?(this.$el.find(".pubble-cw-powered-link").remove(),this.$el.find(".pubble-cw-powered-container").attr("aria-hidden",!0),this.$el.find(".pubble-cw-powered").attr("aria-hidden",!0)):(this.$el.find(".pubble-cw-powered-container").attr("aria-hidden",!1),this.$el.find(".pubble-cw-powered").attr("aria-hidden",!1)),this.$el.find(".pubble-gdpr-action").on("keydown",function(t){32==t.keyCode&&e.$el.find(".pubble-gdpr-action").trigger("click")}),this.$el.find(".pubble-gdpr-action").on("click",function(){var i=e.$el.find(".pubble-form-frame"),a=e.$el.find(".pubble-gdpr-error"),o=e.$el.find(".pubble-gdpr-action");i.hasClass("pubble-md-gdpr-off")?(i.removeClass("pubble-md-gdpr-off"),n.addClass(i,"pubble-md-gdpr-on"),a.removeClass("pubble-show"),n.addClass(a,"pubble-hide"),i.attr("aria-checked","true"),t.attr("aria-disabled","false"),o.attr("aria-checked",!0)):(i.removeClass("pubble-md-gdpr-on"),n.addClass(i,"pubble-md-gdpr-off"),i.attr("aria-checked","false"),t.attr("aria-disabled","true"),o.attr("aria-checked",!1))}),this.$el.find(".pubble-gdpr-text-link").on("click",function(){return window.open(a.config.parameters.privacyPolicyUrl,"_blank"),!1});var b=e.$el.find(".pubble-gdpr"),f=e.$el.find(".pubble-cw-input-buttonbar-form-submit"),h=e.$el.find(".pubble-gdpr-link");return a.config.parameters.enableGdpr||(n.addClass(b,"pubble-hide"),f.attr("aria-disabled",!1),n.addClass(h,"pubble-hide")),a.config.parameters.smsRequired&&(n.addClass(this.$el.find(".pubble-form-person-phone-container"),"pubble-form-element-isrequired"),this.$el.find(".pubble-cw-mobile-lib").attr("aria-required","true")),
a.config.parameters.emailOption||a.config.parameters.nameOpion||a.config.parameters.smsOption||n.addClass(this.$el.find(".pubble-form-top"),"pubble-off"),a.config.parameters.emailRequired&&(n.addClass(this.$el.find(".pubble-form-person-email-container"),"pubble-form-element-isrequired"),this.$el.find(".pubble-form-element-inputarea").attr("aria-required","true")),a.config.parameters.nameRequired&&(n.addClass(this.$el.find(".pubble-form-person-name-container"),"pubble-form-element-isrequired"),this.$el.find("#pubble-form-person-name").attr("aria-required","true")),a.config.parameters.emailOption||this.$el.find(".pubble-form-person-email-container").remove(),a.config.parameters.smsOption?this.$el.find(".pubble-cw-mobile-lib").on("keyup change",function(e){var t=c(e.target),n=t.val().replace(/[^-0-9]/gi,"");t.val(n)}):this.$el.find(".pubble-form-person-phone-container").remove(),a.config.parameters.nameOption||this.$el.find(".pubble-form-person-name-container").remove(),setTimeout(function(){e.$el.find(".pubble-form-element-inputarea").blur(function(e){0==c(e.target).val().trim().length&&c(e.target).parents(".pubble-form-element").removeClass("pubble-form-element-focus")}),e.$el.find(".pubble-form-element-inputarea").focus(function(e){n.addClass(c(e.target).parents(".pubble-form-element"),"pubble-form-element-focus")})},200),this.$el.find(".pubble-form-link-actual").html(this.model.get("shortUrl")),"anon@pubble.co"!=this.model.get("author").email&&this.$el.find(".pubble-cw-getnotif-content-buttonbar-action-inputbox-email").find("textarea").val(this.model.get("author").email),0==this.model.get("conversationId")?(this.$el.find(".pubble-form-section-link").remove(),this.$el.find(".pubble-form-button-skip").remove()):(this.$el.find(".pubble-form-section-question").remove(),this.$el.find(".pubble-form-button-skip").remove()),this.$el.find(".pubble-form-top-close").on("click",function(){var t=e.$el.parent();t.removeClass("pubble-show"),n.addClass(t,"pubble-hide");var i=t.parent().find(".pubble-cw-chatlist-container");i.removeClass("pubble-hide"),n.addClass(i,"pubble-show"),e.$el.remove()}),t.on("click",function(){if(!n.availToPost()){var t=e.$el.find(".pubble-form-frame-outofoffice");t.removeClass("pubble-off");var u=setTimeout(function(){n.addClass(t,"pubble-off"),window.clearTimeout(u)},5e3);return!1}var p=e.$el.find(".pubble-form-frame"),d=e.$el.find(".pubble-gdpr-error");if(p.hasClass("pubble-md-gdpr-off")&&a.config.parameters.enableGdpr)return d.removeClass("pubble-hide"),n.addClass(d,"pubble-show"),!1;if(e.$el.find(".pubble-form-button-submit").hasClass("pubble-form-submitted"))return!1;var b,f="",h=e.$el.find(".pubble-form-person-name-container"),m=e.$el.find(".pubble-form-person-email-container"),v=e.$el.find(".pubble-form-person-phone-container"),g=e.$el.find(".pubble-form-question-container"),d=!1,w=e.$el.find("#pubble-form-person-name");a.config.parameters.nameOption?(b=w.val(),b=b.trim().replace("\n","").replace(/\r\n/,"")):b="",a.config.parameters.nameOption&&a.config.parameters.nameRequired&&(b.length<2?(h.find(".pubble-form-error").removeClass("pubble-off"),n.addClass(h,"pubble-form-element-error"),h.removeClass("pubble-form-element-focus"),w.attr("aria-invalid","true"),d=!0):(n.addClass(h.find(".pubble-form-error"),"pubble-off"),h.removeClass("pubble-form-element-error"),w.attr("aria-invalid","false")));var y=e.$el.find("#pubble-form-person-email");a.config.parameters.emailOption&&(f=y.val(),f=f.trim().replace("\n","").replace(/\r\n/,"")),a.config.parameters.emailOption&&a.config.parameters.emailRequired?n.isValidEmail(f)?(n.addClass(m.find(".pubble-form-error"),"pubble-off"),m.removeClass("pubble-form-element-error"),y.attr("aria-invalid","false")):(m.find(".pubble-form-error").removeClass("pubble-off"),n.addClass(m,"pubble-form-element-error"),m.removeClass("pubble-form-element-focus"),d=!0,y.attr("aria-invalid","true")):y.attr("aria-invalid","false");var C=e.$el.find(".pubble-cw-mobile-lib"),x="";if(a.config.parameters.smsOption){var k=C,I=k.val().replace(/[^-0-9]/gi,""),T=e.$el.find(".selected-flag"),$=T.attr("title").trim();x=$.substring($.indexOf("+"),$.length)+"-"+I}a.config.parameters.smsOption&&a.config.parameters.smsRequired?x.length<6||-1!==x.indexOf("-",x.length-"-".length)?(v.find(".pubble-form-error").removeClass("pubble-off"),n.addClass(v,"pubble-form-element-error"),v.removeClass("pubble-form-element-focus"),C.attr("aria-invalid","true"),d=!0):(n.addClass(v.find(".pubble-form-error"),"pubble-off"),v.removeClass("pubble-form-element-error"),C.attr("aria-invalid","false")):((x.length<6||-1!==x.indexOf("-",x.length-"-".length))&&(x=""),C.attr("aria-invalid","false"));var S=e.$el.find("#pubble-form-question-textarea"),q=S.val().trim();if(q.length<4?(g.find(".pubble-form-error").removeClass("pubble-off"),n.addClass(g,"pubble-form-element-error"),g.removeClass("pubble-form-element-focus"),d=!0,S.attr("aria-invalid","true")):(n.addClass(g.find(".pubble-form-error"),"pubble-off"),g.removeClass("pubble-form-element-error"),S.attr("aria-invalid","false")),d)return!1;n.addClass(e.$el.find(".pubble-form-button-submit"),"pubble-form-submitted"),a.config.pageURL=n.getFilterLandingPage();var P=a.config.pageURL,A={communityId:a.config.communityId,appId:a.config.appID,postToType:"app",type:"Q",visitor:!0,name:b,content:q,landingPage:P};a.config.parameters.enableGdpr&&(A.agreePrivacyPolicy=!0),x&&""!=x&&(A.phone=x),b&&""!=b&&(A.name=b),f&&""!=f&&(A.email=f);var D=pubblebot.require("app");null!=a.config.user&&0!=a.config.user.uid||(A.anon=!0),A.tempId=n.getTempId();var u={};if(D.targetAccountId>0&&(A.assignAccountIds=D.targetAccountId),D.targetgroupid>0&&(A.assignAppIds=D.targetgroupid),i.length>0){var j=e.$el.find(".pubble-assign-selector").val();if(""!=j)A.assignAppIds=j;else if(a.config.assigneeRequired&&null!=a.config.assigneeRequired)return!1}var _=e.$el.find(".pubble-form-frame-inprogress");_.removeClass("pubble-hide"),n.addClass(_,"pubble-show"),D.targetTag&&""!=D.targetTag&&(A.tags=D.targetTag),D.defaultTags&&(A.tags&&A.tags.length>0?A.tags=A.tags+","+D.defaultTags:A.tags=D.defaultTags),n.Xpost(!0,n.getEndpoints().post,A,function(e){D.email=A.email,D.sms=A.phone,D.email&&""!=D.email&&"anon@pubble.co"!=D.email&&D.$el.find(".pubble-cw-getnotif-content-transcript-email").removeClass("pubble-cw-hasnoemail"),n.setCookieValue("pb-qasked",1),D.clientName=A.name,D.shiftView("chat"),_.removeClass("pubble-show"),n.addClass(_,"pubble-hide"),D.content=A.content,D.email&&c(".pubble-cw-email-input").val(D.email),D.sms&&D.sms.length>4&&D.handleSMS(D.sms),e.data&&e.data.author&&"visitor"==e.data.author.type&&e.data.author.id&&(D.visitorId=e.data.author.id,l.set("visitor-id-"+a.config.appID,e.data.author.id)),c(".pubble-cw-isgreeting").remove(),D.$el.find(".pubble-cw-getnotif-handle").removeClass("pubble-off"),D.triggerClick?D.vent.trigger("app:trigger:chatitem"):D.robotChat(n.uiGetText("Please type your question below"),function(){},"greeting"),D.$el.find(".pubble-cw-input-textarea").attr("placeholder",n.uiGetText("Message...")),D.manChat(A.content,function(){c(".pubble-cw-panel-bottom").removeAttr("style")},1,A.tempId),c(document).trigger("app:desktop:permission"),D.updateServer(),D.nocontacted=!1,c(".pubble-cw-input-textarea-placeholder").html(n.uiGetText("Message...")),c(".pubble-cw-input-textarea-send").html(n.uiGetText("Send")),delete window.pb_uploaded_fileName,D.targetAccountId=-1,D.targetgroupid=-1,D.$el.find(".pubble-cw-input-filelist").html(""),D.$el.find(".pubble-cw-input-textarea-placeholder").removeClass("pubble-off"),n.mixlog("cw-content-submitted",{landingPage:a.config.pageURL,communityId:a.config.communityId,appId:a.config.appID,type:"question"},D.track),c(".pubble-cw-panel-dialog-item-pending").removeClass("pubble-cw-panel-dialog-item-pending"),D.conversationId=e.data.conversationId,n.invokeConversationHandler(e.data.conversationId,e.data.count),n.setCookieValue("pb-conversationId",e.data.conversationId),n.setCookieValue("pb-appId",e.data.appId),D.objectId=e.objectId,D.lastPost=e.objectId,D.shortUrl=e.shortUrl,D.author=e.author,c(".pubble-cw-tick-mod").removeClass("pubble-off"),e.data.read&&D.updateRead(),n.mixlog("bot-cw-asked",{landingPage:a.config.pageURL,communityId:a.config.communityId,appId:a.config.appID,conversationId:e.data.conversationId},D.track),c(".pubble-cw-notif-link").html(e.data.shortUrl),c(".pubble-cw-input-buttonbar-link").find(".pubble-cw-input-buttonbar-content").html(e.data.shortUrl),D.author=e.data.author;var t=new o;t=s.setPost(t,e.data),D.conversationCollection.add(t),D.updateQuestionCount();var i=D.$el.find(".pubble-cw-chat-list");t.set("type","CV"),t.set("read",1);var u=new r({model:t,app:D}),p=u.render().$el;i.prepend(p),D.vent.trigger("init:presence",D.conversationId);var d={};d.conversationId=D.conversationId,d.appId=a.config.appID,d.code="contact",D.stage="contact",D.officeHour();var b=window.setInterval(function(){D.socketConnected&&D.conversation_subscribed&&(window.clearInterval(b),setTimeout(function(){return n.addClass(c(".pubble-cw-input-processing"),"pubble-off"),D.faq(),D.credential=0,!1},200))},50),f=D.$el.attr("data-response-message");f&&null!=f&&f.length>3&&"Q"==A.type&&D.robotChat(f,function(){})},function(){},u)}),e}})}),pubblebot.define("models/form",["underscore","backbone","utils/utils"],function(e,t,n){return window.$pubbBackbone.noConflict().Model.extend({idAttribute:"postID",defaults:{id:0,nameRequired:0,emailRequired:0,smsRequired:0,type:"edit"},mtype:function(){},initialize:function(){this.get("id")}})}),pubblebot.define("eventModule",["backbone","underscore","models/post","converters/converter","utils/appConfig","utils/utils","views/post","views/conversation","views/attachment","utils/i18n"],function(e,t,n,i,a,o,r,s,l,c){var u=window.jQueryPBm;window.$pubbBackbone.noConflict();return function(e){var t=(e.initialData,{});t.app=e.app||{};var l=t.app;l.vent.bind("pubble:app:msger:loadConversation",function(e){l.shiftView("chat"),l.resetBottom(),l.loadConversation(e.get("conversationId"),l.appId,0)}),l.vent.bind("pubble:click:messenger",function(){l.$el.find(".pubble-cw-contactbot").trigger("click")}),l.vent.bind("app:transcript:success",function(){var e=u(".pubble-cw").find(".pubble-cw-getnotif-content-transcript-email");o.addClass(e,"pubble-cw-emailsent"),l.updateAria(c.getText("Transcript of conversation was sent to email address")),setTimeout(function(){e.removeClass("pubble-cw-emailsent")},5e3)}),l.vent.bind("app:conversation:transcript",function(e,t){var n={},i={contentType:"JSONP"};i.sendToAuthor=e,i.conversationId=l.conversationId,o.XDR(o.getEndpoints().transcript,i,function(e){t&&t(e)},new function(){},n)}),l.vent.bind("app:conversation:mods",function(e){var t=l.conversationMods;t||(t=[]);var n="",i=l.$el.find(".pubble-cw-top-title"),r=l.$el.find(".pubble-cw-top-status"),s=l.$el.find(".pubble-cw-top-status-community");if(""!=(n=1==l.conversationMods.length?l.conversationMods[0]:0==l.conversationMods.length?"":2==l.conversationMods.length?l.conversationMods[1]+", "+l.conversationMods[0]:l.conversationMods[l.conversationMods.length-1]+" and "+(l.conversationMods.length-1)+" more")&&0!=l.conversationMods.length&&a.config.parameters.operational)if(a.config.parameters.postAsCommunity)i.html(o.headerText());else if(i.html(n),e)r.removeClass("pubble-off").html("Online"),o.addClass(s,"pubble-off");else{var c=a.config.parameters.activeUsers,p=0;null!=c&&l.conversationMods.length>0&&u.each(c,function(e,t){for(var n=0;n<l.conversationMods.length;n++)if(l.conversationMods[n]==t.alias)return p=1,!0}),p?(r.removeClass("pubble-off").html("Online"),o.addClass(s,"pubble-off")):(o.addClass(r,"pubble-off"),s.removeClass("pubble-off").html(o.headerText()))}else i.html(o.headerText()),o.addClass(r,"pubble-off"),s.removeClass("pubble-off").html("")}),l.vent.bind("app:trigger:chatitem",function(){l.triggerClick=0;var e=new r({model:l.triggerModel}),t=e.render().$el;o.addClass(t,"pubble-cw-isadmin  pubble-cw-isfirst pubble-cw-islast pubble-cw-istrigger"),t.attr("data",l.triggerUser.id),l.$el.find(".pubble-cw-panel-dialog").append(t)}),l.vent.bind("app:welcome:header",function(e){if(!l.headerAvailable)return!1;e?o.addClass(l.$el.find(".pubble-cw-panel"),"pubble-cw-panel-welcome"):l.$el.find(".pubble-cw-panel").removeClass("pubble-cw-panel-welcome")}),l.vent.bind("app:sidebar:check",function(e,t){var n=o.getConversationID(),i=o.getConverationToken();o.getAppIdFromUrl();"-1"!=n&&"0"!=n||"-1"!=i&&"0"!=i||t&&0!=t.length?u("#pb_sidebar").removeClass("pubble-off"):a.config.parameters.disableNewActivity&&(e.noPromptime=1,o.addClass(u("#pb_sidebar"),"pubble-off"))}),l.vent.bind("app:conversations:load",function(e){var t={},n={contentType:"JSONP"};n.appId=a.config.appID,o.XDR(o.getEndpoints().loadConversations,n,function(t){if("200"!=t.code)return!1;var n=t.data;e.conversationsLoaded=1,l.vent.trigger("app:sidebar:check",e,n),l.vent.trigger("app:conversation:renders",e,n)},new function(){},t)}),l.vent.bind("app:conversation:renders",function(e,t){var r=e.$el.find(".pubble-cw-chat-list");if(t.length<1?e.botlist.length>0?(e.$el.find(".pubble-cw-panel-controls-newq").removeClass("pubble-cw-panel-controls-emptylist"),o.addClass(e.$el.find(".pubble-cw-panel-controls-newq"),"pubble-cw-panel-controls-listofone"),o.addClass(e.$el.find(".pubble-cw-panel-controls-newq"),"pubble-cw-panel-controls-channellist")):o.addClass(e.$el.find(".pubble-cw-panel-controls-newq"),"pubble-cw-panel-controls-emptylist"):(e.$el.find(".pubble-cw-panel-controls-newq").removeClass("pubble-cw-panel-controls-emptylist"),e.botlist.length>0&&o.addClass(e.$el.find(".pubble-cw-panel-controls-newq"),"pubble-cw-panel-controls-channellist")),t&&t.length>0){e.$el.find(".pubble-cw-hs-section-isconvlist").removeClass("pubble-off");for(var l=0;l<t.length;l++){var c=new n,u=t[l];if(c=i.setPost(c,u.conversationRoot),e.$el.find(".pubble-cw-conv-"+c.get("conversationId")).length>0)return!0;if(c.set("accountAssigned",u.accountAssigned),c.set("communityAssigned",u.communityAssigned),c.set("groupAssigned",u.groupAssigned),c.set("lastPostFromModerator",u.lastPostFromModerator),c.set("lastPostFromVisitor",u.lastPostFromVisitor),c.set("replied",0),u.lastReply){var p=new n;p=i.setPost(p,u.lastReply),c.set("avatar",p.get("avatar")),o.isAuthor(a,p.get("author"))?c.set("alias","You"):c.set("alias",p.get("alias")),c.set("replied",1);var d=!1;if(null!=u.lastPost&&u.lastPost.id>p.get("id")){var b=new n;b=i.setPost(b,u.lastPost),c.set("reply_content",b.get("content")),b.get("visitor")||(d=!0),c.set("moderator_reply",d)}else c.set("reply_content",p.get("content")),p.get("visitor")||(d=!0),c.set("moderator_reply",d);p.get("author").id!=c.get("author").id&&p.get("author").cookieId!=c.get("author").cookieId||c.set("moderator_reply",0)}else if(u.lastPost){var p=new n;p=i.setPost(p,u.lastPost),c.set("avatar",p.get("avatar")),o.isAuthor(a,p.get("author"))?c.set("alias","You"):c.set("alias",p.get("alias")),c.set("replied",1),c.set("reply_content",p.get("content"));var d=!1;!p.get("lastPostFromModerator")&&p.get("lastPostFromVisitor")||(d=!0),c.set("moderator_reply",d),p.get("author").id!=c.get("author").id&&p.get("author").cookieId!=c.get("author").cookieId||c.set("moderator_reply",0)}c.set("type","CV"),c.set("read",1),e.conversationCollection||(e.conversationCollection=new cps),e.conversationCollection.add(c);var f=new s({model:c,app:e}),h=f.render().$el;r.append(h)}e.updateQuestionCount(),0==e.conversationId&&e.shiftView("list"),e.vent.trigger("init:presence","")}else e.botlist.length>1&&-1==e.targetAccountId&&-1==e.targetgroupid&&e.shiftView("userlist")}),l.vent.bind("app:trigger:q",function(){l.triggerClick=1,l.$el.find(".pubble-cw-btn-newquestion-btn").trigger("click")}),l.vent.bind("app:trigger:msg",function(e,t){if(!l.$el.find(".pubble-cw-panel").hasClass("pubble-move"))return!1;if(a.config.parameters.communityBot&&e.get("author").id==a.config.parameters.communityBot.id)return!1;var n=new r({model:e}),i=n.render().$el,s=l.$el.find(".pubble-sb-bubble");i.on("click",function(n){l.$el.find(".pubble-sb-bubble-item").remove(),o.addClass(l.$el.find(".pubble-sb-bubble-welcome"),"pubble-off"),o.addClass(l.$el.find(".pubble-sb-bubble-close"),"pubble-off"),l.vent.trigger("pubble:iframe:resize","max");var i=l.$el.find(".pubble-cw-panel");if(o.addClass(i,"pubble-show"),i.removeClass("pubble-off"),t){l.triggerClick=0;var a=l.$el.find(".pubble-sb-notif");return a.find(".pubble-sb-notif-nr").html(0),o.addClass(a,"pubble-off"),l.vent.trigger("pubble:app:msger:loadConversation",e),!1}n.stopPropagation(),l.$el.find("#pb_sidebar").trigger("click"),l.triggerClick=1,l.$el.find(".pubble-cw-btn-newquestion-btn").trigger("click");var a=l.$el.find(".pubble-sb-notif");a.find(".pubble-sb-notif-nr").html(0),o.addClass(a,"pubble-off")});var s=l.$el.find(".pubble-sb-bubble");o.addClass(i,"pubble-cw-isadmin pubble-cw-isfirst"),o.addClass(i,"pubble-cw-panel-dialog-item-justin");var c=(new Date).getTime();i.attr("timestamp",c);var p=u("<div/>");p.attr("class","pubble-sb-bubble-item pubble-sb-bubble-welcome-item"+e.get("id")),i.appendTo(p);var d=l.$el.find(".pubble-sb-bubble-item-list");0==l.$el.find(".pubble-sb-bubble-welcome-item"+e.get("id")).length&&(2==d.find(".pubble-sb-bubble-item").length&&d.find(".pubble-sb-bubble-item").last().remove(),l.$el.find(".pubble-sb-bubble-welcome-item").remove(),d.prepend(p),l.$el.find(".pubble-sb-bubble-close").removeClass("pubble-off"),o.playSound());var b=d.find(".pubble-sb-bubble-item").length,f=!l.$el.find(".pubble-sb-bubble-welcome").hasClass("pubble-off"),h="";1==b?h="r":2==b&&(h="rr"),f&&(h+="w"),l.vent.trigger("pubble:iframe:resize",h),u(".pubble-cw-contactbot").removeClass("pubble-cw-ismantrigmsg"),s.removeClass("pubble-off").removeClass("pubble-move")}),l.vent.bind("pubble:trigger:run",function(){if(!navigator.cookieEnabled)return!1;if(l.greet){var e=l.greet,t=o.getCookie("pubble_trigger");if(!e.active||-1==e.delay)return!1;if(null==t||e.id!=t){l.rule=e,o.setSessionCookie("pubble_trigger",e.id);var i=a.config.parameters.activeUsers;if(i.length>0){var c=i.length;if(1==c)l.triggerUser=i[0];else{var p=c,d=Math.floor(Math.random()*(p-1+1))+1;l.triggerUser=i[d-1]}l.triggerUser||(l.triggerUser=a.config.parameters.communityBot)}else l.triggerUser=a.config.parameters.communityBot;var b=l.$el.find(".pubble-cw-chat-list");setTimeout(function(){if(l.$el.find("#pb_sidebar").hasClass("pubble-expanded"))return!1;var t=new n,i=(new Date).getTime();t.set("alias",l.triggerUser.alias),t.set("postID","10000"),t.set("id","bot-10000"),null!=l.triggerUser.avatar&&""!=l.triggerUser.avatar||(l.triggerUser.avatar=o.handleImg("",l.triggerUser.alias)),u(".pubble-cw-contactbot").removeClass("pubble-cw-ismantrigmsg"),t.set("avatar",o.imgwrapper(l.triggerUser.avatar,48)),t.set("time",o.getTime()),t.set("content",o.unescapeHTML(e.text));var a=new r({model:t});l.triggerModel=t;var c=a.render().$el,p=l.$el.find(".pubble-sb-bubble");c.on("click",function(t){l.$el.find(".pubble-sb-bubble-item").remove(),o.addClass(l.$el.find(".pubble-sb-bubble-welcome"),"pubble-off"),o.addClass(l.$el.find(".pubble-sb-bubble-close"),"pubble-off"),l.vent.trigger("pubble:iframe:resize","max"),t.stopPropagation(),l.$el.find("#pb_sidebar").trigger("click"),l.triggerClick=1,l.$el.find(".pubble-cw-btn-newquestion-btn").trigger("click"),l.conversationCollection||(l.conversationCollection=new cps);var a=new n;a.set("avatar",o.imgwrapper(l.triggerUser.avatar)),a.set("alias",l.triggerUser.alias),a.set("replied",0),a.set("id",(new Date).getTime()),a.set("content",o.unescapeHTML(e.text)),a.set("type","TT"),a.set("timediff",o.timediff(i)),a.set("conversationId","-1000"),l.conversationCollection.add(a),l.updateQuestionCount();var r=new s({model:a}),c=r.render().$el;c.find(".pubble-cw-notme").remove(),o.addClass(c,"pubble-trigger-chat"),b.prepend(c),c.trigger("click")});var p=l.$el.find(".pubble-sb-bubble");o.addClass(c,"pubble-cw-isadmin  pubble-cw-isfirst"),o.addClass(c,"pubble-cw-panel-dialog-item-justin");var d=(new Date).getTime();c.attr("timestamp",d);var f=u("<div/>");f.attr("class","pubble-sb-bubble-item pubble-sb-bubble-welcome-item"),c.appendTo(f),l.$el.find(".pubble-sb-bubble-welcome-item").remove(),f.insertAfter(l.$el.find(".pubble-cw-placement")),l.$el.find(".pubble-sb-bubble-welcome").removeClass("pubble-off"),l.$el.find(".pubble-sb-bubble-close").removeClass("pubble-off");var h=l.$el.find(".pubble-sb-bubble-item-list"),m=h.find(".pubble-sb-bubble-item").length,v="";1==m&&(v="r"),v+="w",l.vent.trigger("pubble:iframe:resize",v),o.addClass(l.$el.find(".pubble-sb-bubble-welcome"),"pubble-sb-bubble-welcome-hastrigger"),l.$el.find(".pubble-cw-panel").hasClass("pubble-move"),p.removeClass("pubble-off").removeClass("pubble-move")},1e3*e.delay)}}else{return!1;var t}}),l.vent.bind("pubble:tracker:faqnothelped",function(){var e=o.getGa(),t=o.getGaTracker();if(t.length>0&&e){e(t[0].get("name")+".send","event",{eventCategory:a.config.eventCategory,eventAction:"faq-did-not-help",eventLabel:"app_"+a.config.appID})}var n={};n=o.getGTMData(n,a),n.event_type="faq-did-not-help",o.addGTM(void 0,n,a)}),l.vent.bind("pubble:tracker:faqhelped",function(){var e=o.getGa(),t=o.getGaTracker();if(t.length>0&&e){e(t[0].get("name")+".send","event",{eventCategory:a.config.eventCategory,eventAction:"faq-helped",eventLabel:"app_"+a.config.appID})}var n={};n=o.getGTMData(n,a),n.event_type="faq-helped",o.addGTM(void 0,n,a)}),l.vent.bind("pubble:tracker:selfserved",function(){var e=o.getGa(),t=o.getGaTracker();if(t.length>0&&e){e(t[0].get("name")+".send","event",{eventCategory:a.config.eventCategory,eventAction:"user-self-served",eventLabel:"app_"+a.config.appID})}var n={};n=o.getGTMData(n,a),n.event_type="user-self-served",o.addGTM(void 0,n,a)}),l.vent.bind("pubble:tracker:faqprompt",function(){var e=o.getGa(),t=o.getGaTracker();if(t.length>0&&e){e(t[0].get("name")+".send","event",{eventCategory:a.config.eventCategory,eventAction:"faq-prompted",eventLabel:"app_"+a.config.appID})}var n={};n=o.getGTMData(n,a),n.event_type="faq-prompted",o.addGTM(void 0,n,a)}),l.vent.bind("pubble:init:messenger",function(){var e=o.getGa(),t=o.getGaTracker();if(t.length>0&&e){e(t[0].get("name")+".send","event",{eventCategory:a.config.eventCategory,eventAction:"initiate",eventLabel:"app_"+a.config.appID})}var n={};n=o.getGTMData(n,a),n.event_type="open-chat-window",o.addGTM(void 0,n,a)}),l.vent.bind("pubble:question:asked",function(e){var t=o.getGa(),n=o.getGaTracker();if(n.length>0&&t){t(n[0].get("name")+".send","event",{eventCategory:a.config.eventCategory,eventAction:"send",eventLabel:"app_"+a.config.appID})}var i={};i=o.getGTMData(i,a),i.event_type="question-submit",i.conversation_id=e,o.addGTM(void 0,i,a)}),l.vent.bind("pubble:messenger:contact",function(e){var t=o.getGa(),n=o.getGaTracker();if(n.length>0&&t){t(n[0].get("name")+".send","event",{eventCategory:a.config.eventCategory,eventAction:"contact",eventLabel:"app_"+a.config.appID})}var i={};i=o.getGTMData(i,a),i.event_type="contact-details-submit",i.conversation_id=e,o.addGTM(void 0,i,a)}),l.vent.bind("pubble:messenger:modreply",function(e){var t=o.getGa(),n=o.getGaTracker();if(n.length>0&&t){t(n[0].get("name")+".send","event",{eventCategory:a.config.eventCategory,eventAction:"admin-reply",eventLabel:"app_"+a.config.appID})}})}}),pubblebot.define("realtimeHandler",["underscore","utils/utils","utils/appConfig","utils/appConfig"],function(e,t,n,n){return function(e){var i={};i.app=e.app||{};var a=i;i.app.tearDownApp=function(){var e=!1;if("undefined"==typeof pubbleLoader&&parent&&(pubbleLoader=parent.window.pubbleLoader,"undefined"!=typeof pubbleLoader&&(e=!0)),!a.app||!a.app.$el)return!1;parent&&delete parent.window.pubbleAppStates[n.config.appID],a.app.$el.removeAttr("data-app-loaded"),a.app.$el.html(""),a.app.$el.removeAttr("class"),a.app.$el.attr("class","pubble-app"),a.app.presenceCommunityChannel&&a.app.presenceCommunityChannel.unbind(),a.app.conversationChannel&&a.app.conversationChannel.unbind(),a.app.pipes&&(a.app.pipes.disconnect(),a.app.pipes=void 0),a.app=void 0,(e||n.config.parameters.iFrame)&&parent&&(parent.window.document.getElementById("pubble_app_"+n.config.appID).removeAttribute("data-app-loaded"),delete parent.window.pubbleLoader,delete parent.window.pubble_ip_country,parent.window.pubbleLoader=null,parent.window.pubbleLoader=void 0,parent.window.pubbleApp_config=void 0,parent.window.pubbleLoader_init=void 0,parent.window.document.getElementById("pubble-livechat-iframe").remove()),delete window.pubble_ip_country,delete window.pubbleLoader,window.pubbleLoader=null,window.pubbleLoader=void 0,window.pubbleApp_config=void 0,window.pubbleLoader_init=void 0};try{parent&&void 0===parent.window.pubbleAppStates&&(parent.window.pubbleAppStates={}),parent.window.pubbleAppStates[n.config.appID]=i.app.tearDownApp}catch(e){}this.initPipe=function(){if("undefined"!=typeof Pusher){Pusher.log=function(e){"aws-dev"==n.config.parameters.activeProfile&&window.console.log(e)};var e=!1;"about:"!=document.location.protocol&&"https:"!=document.location.protocol||(e=!0);var a,o,r=n.config.parameters.activeProfile;return"aws-dev"==r?(o="b35fd5876f2f57f584c0",a="//www.pubblebot.com/pusher/auth"):"aws-prod"==r?(a="undefined"!=typeof pubbleLoader&&pubbleLoader.servers.mainDomain&&"chatify"==pubbleLoader.servers.mainDomain?"//www.chatify.com/pusher/auth":"//www.pubble.io/pusher/auth",o="fe878010389c9267d028"):"azure-wapo-prod"==r?(o="688d752925673fd11dac",a="//wapoapi.pubble.io/pusher/auth"):"azure-ms"!=r&&"mslt-wus2"!=r||(o="360cb2c22817a3bb2bb9",a="//azure.pubble.io/pusher/auth"),"mslt-wus2"==r?(o="360cb2c22817a3bb2bb9",a="//msltapi.pubble.io/pusher/auth"):n.isMsType&&(a="//build.pubble.io/pusher/auth",o="fe878010389c9267d028"),new Pusher(o,{authTransport:"jsonp",auth:{params:{communityId:n.config.communityId,page:t.getFilterLandingPage()}},encrypted:e,authEndpoint:a,cluster:"mt1"})}if("undefined"!=typeof Pubble){var s="",a="",l=!1,r=n.config.parameters.activeProfile;return"aws-dev"==r?(o="JhDXpPYuWqIgczOfDvDE",s="https://pipesdev.pubble.io",a="//www.pubblebot.com/pipes/auth",l=!0):"azure-dev"==r?(o="KgQxpvsWhdmpYewzjgsf",s="https://pipesdev.pubble.io",a="//pubbleazuredev.pubble.io/pipes/auth",l=!0):"aws-prod"==r?(a="undefined"!=typeof pubbleLoader&&pubbleLoader.servers.mainDomain&&"chatify"==pubbleLoader.servers.mainDomain?"//www.chatify.com/pipes/auth":"https://www.pubble.io/pipes/auth",o="YjqmlYrwWzdvaifzuIJB",s="https://pipes.pubble.io"):"azure-wapo-prod"==r?(o="JMzwFEMMKHMoSvMViYwH",s="https://pipes.pubble.io",a="//wapoapi.pubble.io/pipes/auth"):"azure-ms"==r||"mslt-wus2"==r?(o="EnbMWrmOlUuYZbDTvxCK",s="https://pipes.pubble.io",a="//azure.pubble.io/pipes/auth"):"learntv"==r?(o="pyRLFrNXaEtUwgVFTYCH",s="https://pipes.pubble.io",a="//learntv.pubble.io/pipes/auth"):"azure-dev"==r?(o="KgQxpvsWhdmpYewzjgsf",s="https://pipesdev.pubble.io"):n.isMsType&&(o="EnbMWrmOlUuYZbDTvxCK",s="https://pipes.pubble.io",a="//azure.pubble.io/pipes/auth"),i.app.socketConnected=!0,new Pubble.pipes(o,{host:s,authEndpoint:a,retryInterval:1e4,retryCount:3,logToConsole:l})}}}}),pubblebot.define("liveModule",["backbone","underscore","models/post","converters/converter","utils/appConfig","utils/utils","views/conversation","views/post","views/attachment","models/attachment","views/contactCard","realtimeHandler"],function(e,t,n,i,a,o,r,s,l,c,u,p){var d=window.jQueryPBm;window.$pubbBackbone.noConflict();return function(e){var t=(e.initialData,{});t.app=e.app||{};var r=t.app,b=new p({app:t.app});r.vent.bind("pubble:iframe:resize",function(e){if(!a.config.parameters.iFrame)return!1;if(a.config.parameters.iFrame&&a.isMobile&&"d"!=e&&"w"!=e&&"r"!=e&&"rr"!=e&&"rrw"!=e)return!1;r.isize&&"max"==r.isize&&r.isize,r.isize=e;var t="border: none; display: block;  position: fixed; top: auto;  bottom: 0px; visibility: visible; z-index: 2147483647; max-height: 100vh; max-width: 100vw; transition: none 0s ease 0s; background: none transparent; opacity: 1;";"bl"!=a.config.parameters.sidebarPosition?t+="left: auto; right: 0px;":t+="right: auto; left: 0px;",t+="d"==e?"height: 80px !important; width: 80px !important;":"w"==e?"height: 330px !important; width: 330px !important;":"r"==e?"height: 260px !important; width: 330px !important;":"rr"==e?"height: 390px !important; width: 330px !important;":"rrw"==e?"height: 630px !important; width: 330px !important;":"height: 80% !important; width: 400px !important;";try{var n=d(top.document).find(".pubble-iframe");n.length>0&&n.attr("style",t)}catch(e){}}),r.vent.bind("pubble:faq:atts",function(e,t){var n=e.get("attachments");n&&n.length>0&&d.each(n,function(e,n){if("link"!=n.get("attType")&&"tweet"!=n.get("attType")){var i=new l({model:n}),a=i.render().$el;t.find(".pubble-att-container").removeClass("pubble-off").append(a)}})}),r.vent.bind("app:freechat",function(e){if(!d(".pubble-cw-panel").hasClass("pubble-move"))return!1;var t=d(".pubble-sb-bubble");t.removeClass("pubble-off").removeClass("pubble-move"),t.removeAttr("timestamp");var i=new n;i.set("content",e.mbody),i.set("conversationId","0"),i.set("avatar",o.imgwrapper(e.operator_avatar,40)),i.set("alias",e.operator_name),i.set("time",(new Date).getTime()),i.set("posted",1),i.set("read",0);var l=new s({model:i});r.targetAccountId=e.operator_id;var c=l.render().$el,u=r.$el.find(".pubble-sb-bubble");o.addClass(c,"pubble-cw-isadmin pubble-cw-isfirst"),o.addClass(c,"pubble-cw-panel-dialog-item-justin");var p=d(".pubble-cw-contactbot");o.addClass(p,"pubble-cw-ismantrigmsg"),p.removeClass("pubble-cw-isautotrigmsg");var b=(new Date).getTime();c.attr("timestamp",b);var f=d("<div/>");f.attr("class","pubble-sb-bubble-item pubble-sb-bubble-welcome-item"),c.appendTo(f),r.$el.find(".pubble-sb-bubble-welcome-item").remove(),f.insertAfter(r.$el.find(".pubble-cw-placement")),o.addClass(r.$el.find(".pubble-sb-bubble-welcome","pubble-sb-bubble-welcome-hastrigger")),o.addClass(d(".pubble-sb-bubble-welcome"),"pubble-sb-bubble-welcome-hastrigger"),r.$el.find(".pubble-sb-bubble-welcome").removeClass("pubble-off"),r.$el.find(".pubble-sb-bubble-close").removeClass("pubble-off");var h=r.$el.find(".pubble-sb-bubble-item-list"),m=h.find(".pubble-sb-bubble-item").length,v="";1==m&&(v="r"),v="rrw",r.vent.trigger("pubble:iframe:resize",v),o.playSound(),u.removeClass("pubble-off").removeClass("pubble-move"),u.off("click").on("click",function(){a.invitation&&(a.invitation.pushed=1,a.invitation.accepted=1),o.addClass(t,"pubble-off"),setTimeout(function(){d(".pubble-cw-startnew").first().trigger("click"),a.pushAccepted=1},500),setTimeout(function(){var t=d('<div id="PBMSG-1200" class="pubble-cw-panel-dialog-item pubble-cw-isadmin pubble-cw-ismod-1 pubble-cw-isfirst"><div class="pubble-cw-dialog-item-avatar"><img src="'+o.imgwrapper(e.operator_avatar,40)+'"></div><div class="pubble-cw-dialog-item-header"><div class="pubble-cw-dialog-item-name">'+e.operator_name+'</div></div> <div class="pubble-cw-dialog-item-content"><div class="pubble-cw-dialog-item-middle"><div class="pubble-cw-dialog-item-text"> '+e.mbody+'</div><div class="pubble-cw-att-container pubble-off"></div></div><div class="pubble-cw-dialog-item-footer"><div class="pubble-cw-dialog-item-time"></div><div class="pubble-cw-dialog-item-ticks"><div class="pubble-cw-dialog-item-tick pubble-cw-tick-pending"></div><div class="pubble-cw-dialog-item-tick  pubble-cw-tick-server-off pubble-cw-tick-server"></div><div class="pubble-cw-dialog-item-tick   pubble-cw-tick-mod-off pubble-off  pubble-cw-tick-mod"></div></div></div></div></div>');d(".pubble-cw-panel-dialog").prepend(t)},1e3)})}),r.vent.bind("pubble:init:sms",function(){if(a.config.smsInited)return!1;a.config.smsInited=!0;var e=new u({app:r,initSms:0}),t=e.render().$el;r.$el.find(".pubble-cw-getnotif-card").html(t);var n=a.config.parameters.iso3166,i=[];if(window.pubble_ip_country&&""!=window.pubble_ip_country&&i.push(window.pubble_ip_country),n?(i.push(n),"gb"==n?(i.push("ie"),i.push("us")):"ie"==n?(i.push("gb"),
i.push("us")):"us"==n&&(i.push("gb"),i.push("us"))):i=["ie","gb","us"],a.config.defaultPrefer=i,a.config.parameters.smsOption){d("#mobile-number").intlTelInput({nationalMode:!0,numberType:"MOBILE",preferredCountries:a.config.defaultPrefer});d(".pubble-cw-getnotif-content-buttonbar-action-inputbox-sms").find(".pubble-cw-mobile-number").intlTelInput({nationalMode:!0,numberType:"MOBILE",preferredCountries:a.config.defaultPrefer})}}),r.vent.bind("app:renderAtts",function(e,n){d.each(e,function(e,i){"photo"==i.get("attType")||"video"==i.get("attType")?o.addClass(n,"pubble-cw-panel-dialog-item-hasmedia"):"file"!=i.get("attType")&&"file"!=i.get("attType")||o.addClass(n,"pubble-cw-panel-dialog-item-hasfile");var a=new l({model:i});"faq"==i.get("attType")&&(isFaq=!0);var s=a.render().$el;"faq"==i.get("attType")&&r.vent.trigger("pubble:faq:atts",i,s);var c=n.find(".pubble-cw-att-container");if("email"!=i.get("attType")&&"phone"!=i.get("attType"))c.append(s),c.removeClass("pubble-off");else{if("phone"==i.get("attType")&&o.addClass(n,"pubble-cw-contact-phone"),"email"==i.get("attType")&&o.addClass(n,"pubble-cw-contact-email"),"skip"==i.get("attType")){o.addClass(n,"pubble-cw-contact-skip"),t.app.robotChat(o.uiGetText("You opted to skip being notified. You need to stay online to get a reply. If you want to be notified when you go offline, enter your email or phone number below."),function(){});var p=new u({app:t.app,initSms:!0});el.html(p.render().$el)}var b=d('<div class="pubble-cw-dialog-item-contact"> <div class="pubble-cw-dialog-item-contact-mobile">Edit</div><div class="pubble-cw-dialog-item-contact-hover">Click to edit</div> </div>');n.prepend(b),n.on("click",function(){"email"==i.get("attType")&&d(".pubble-cw-notif-email").trigger("click"),"phone"==i.get("attType")&&d(".pubble-cw-notif-sms").trigger("click")})}})}),r.vent.bind("init:presence",function(e){a.config.parameters.activeProfile;if(t.app.pipes||(r.pipes=b.initPipe()),!r.presence_inited)if("undefined"!=typeof Pusher){r.presence_inited=1;var u="presence-community_"+a.config.communityId;r.presenceCommunityChannel=r.pipes.subscribe(u),r.presenceCommunityChannel.bind("pusher:subscription_succeeded",function(e){r.socketConnected=!0}),r.presenceCommunityChannel.bind("pusher:member_added",function(e){}),r.presenceCommunityChannel.bind("pusher:member_removed",function(e){})}else{r.presence_inited=1;var u="presence-community_"+a.config.communityId;r.presenceCommunityChannel=r.pipes.subscribe(u),r.presenceCommunityChannel.bind("pipe:subscription_succeeded",function(e){r.socketConnected=!0}),r.presenceCommunityChannel.bind("pubble:member_added",function(e){}),r.presenceCommunityChannel.bind("pubble:member_removed",function(e){})}d.each(r.conversationCollection.models,function(e,u){if(o.contains(r.converstationInited,u.get("conversationId")))return!0;r.converstationInited.push(u.get("conversationId"));var p="conversation_"+u.get("conversationId");r.conversationChannel=r.pipes.subscribe(p),r.conversationSubs.push(r.conversationChannel),r.conversationSubids.push(p),"undefined"!=typeof Pubble&&r.conversationChannel.bind("pipe:subscription_succeeded",function(e){r.conversation_subscribed=1,r.converstationSubscribedInited.push(u.get("conversationId"))}),r.conversationChannel.bind("update",function(e){if("string"==typeof e&&(e=i.stringToJson(e)),e.conversationId!=r.conversationId)return!1;if("F"==e.type||"O"==e.type||"B"==e.type||"S"==e.type)return!1;var a=new n;if(a=i.setPost(a,e),t.app.chatCollection&&d.each(t.app.chatCollection.models,function(e,t){t.get("id")==a.get("id")&&(t.set("attachments",a.get("attachments")),t.set("thirdPartyIds",a.get("thirdPartyIds")))}),r.$el.find("#PBMSG"+a.get("id")).find(".pubble-cw-dialog-item-text").html(a.get("content")),"Q"!==e.type)return!1;30==e.status||0==e.status?(r.resolveUI(),r.closeConversation=1):(r.$el.find(".pubble-cw-chatbox").removeClass("pubble-off"),o.addClass(d(".pubble-cw-endconv"),"pubble-off"),r.closeConversation=0,r.talked=0,"free"==r.stage||"default"==r.ui?r.showInput():("iscredentials"==r.ui&&(d(".pubble-cw-input-iscredentials").removeClass("pubble-off"),r.hideInput()),"faqhelp"==r.ui&&(d(".pubble-cw-input-faqhelp").removeClass("pubble-off"),r.hideInput()),"anythingelse"==r.ui&&(d(".pubble-cw-input-anythingelse").removeClass("pubble-off"),r.hideInput()))),e.read&&(r.hasRead=1,r.updateRead())}),r.conversationChannel.bind("post",function(e){"string"==typeof e&&(e=i.stringToJson(e));try{window.parent.postMessage("new_chat","*")}catch(e){}if("O"==e.type||"B"==e.type)return!1;r.latestConversation=e.conversationId;var p=new n,b=e.content;if(e.content=b,p=i.setPost(p,e),p.set("posted",1),t.app.chatCollection.add(p),"C"==e.type||"A"==e.type){if(!e.visitor&&e.author&&e.author.id==a.config.parameters.communityBot.id){if(e.content=b,p.set("content",b),"C"==e.type&&e.content&&e.content.indexOf("How do you want to be notified?")>-1){if(d(".pubble-cw-isContactMsg").length>0)return!1}if(a.config.parameters.postAsCommunity&&"C"==e.type&&e.content&&e.content.indexOf("has been assigned to your question")>-1)return!1}var f=r.$el.find(".pubble-cw-input-presence"),h=p.get("author").id>0&&p.get("author").id==f.attr("user"),m=p.get("author").cookieId==f.attr("cookeId");if((h||m)&&o.addClass(f,"pubble-hide"),!p.get("visitor")){p.get("author").id!=a.config.parameters.communityBot.id&&(r.contactDelayed=1,r.conversationMods.includes(p.get("author").alias)?r.vent.trigger("app:conversation:mods",1):(r.conversationMods.push(p.get("author").alias),r.vent.trigger("app:conversation:mods",1)));try{window.self!==window.top&&window.parent&&e.type}catch(g){}d(document).trigger("app:desktop:send",[p.get("author").alias+": "+p.get("content").replaceAll("<.*?>","")],function(){},u.get("appId")),0==r.$el.find(".pubble-cw-isadmin").length&&a.config.parameters.communityBot.id!=p.get("author").id&&r.vent.trigger("pubble:messenger:modreply",r.conversationId)}r.conversationCollection&&r.conversationCollection.models&&d.each(r.conversationCollection.models,function(t,n){if(n.get("conversationId")==e.conversationId){var i=r.$el.find(".pubble-cw-panel-notif-container");if(i.on("click",function(){i.removeClass("pubble-show"),o.addClass(i,"pubble-hide"),n.set("read",1),r.loadConversation(e.conversationId,r.appId,0)}),o.addClass(i,"pubble-show"),r.$el.find(".pubble-cw-panel-notif-author").html(p.get("alias")),r.$el.find(".pubble-cw-panel-notif-message").html(p.get("content")),setTimeout(function(){i.removeClass("pubble-show"),o.addClass(i,"pubble-hide")},3e7),e.conversationId!=r.conversationId&&(n.set("read",0),o.addClass(r.$el.find(".pubble-cw-panel-controls-newq"),"pubble-cw-newactivity")),("C"==p.get("type")||"A"==p.get("type"))&&a.config.parameters.communityBot.id!=p.get("author").id){var s=!1;p.get("visitor")||(s=!0);if(!d(".pubble-cw-chat-container").hasClass("pubble-hide")&&!p.get("visitor")&&d(".pubble-cw-input-default").hasClass("pubble-off")){var l=r.$el.find(".pubble-cw-input-iscredentials");!l.hasClass("pubble-off")&&l.find(".pubble-cw-input-buttonbar-sms").hasClass("pubble-off")&&l.find(".pubble-cw-input-buttonbar-email").hasClass("pubble-off")&&(r.stage="free",r.resetBottom(),r.$el.find(".pubble-cw-getnotif-handle").removeClass("pubble-off"))}n.set("moderator_reply",s),n.set("reply_content",p.get("content"));var c=r.$el.find(".pubble-cw-chat-last");n.set("isModReply",!p.get("visitor")),p.get("visitor")?(o.addClass(c,"pubble-cw-chat-last-isvisitor"),c.removeClass("pubble-cw-chat-last-ismod")):(o.addClass(c,"pubble-cw-chat-last-ismod"),c.removeClass("pubble-cw-chat-last-isvisitor"),n.set("avatar",p.get("avatar")),n.set("alias",p.get("alias")))}}})}var v=1,g=d(".pubble-cw-panel"),w=r.$el.find(".pubble-sb-notif");if("C"!=e.type&&"A"!=e.type||!e.author||a.config.parameters.communityBot.id==e.author.id||(g.hasClass("pubble-move")?(r.newcount=r.newcount+1,w.find(".pubble-sb-notif-nr").html(r.newcount),r.vent.trigger("app:trigger:msg",p,!0),e.conversationId!=r.conversationId?(w.find(".pubble-sb-notif-nr").html(r.newcount),w.removeClass("pubble-off")):o.addClass(w,"pubble-off")):(r.newcount=0,w.find(".pubble-sb-notif-nr").html(0),o.addClass(w,"pubble-off"))),e.conversationId!=r.conversationId)return!1;if(!p||"S"==p.get("type"))return!1;p.get("read")&&(r.updateRead(),r.hasRead=1);var y=0;if("Q"!==p.get("type")&&(r.credential=r.credential+1),0==p.get("author").id||"Q"==p.get("type")||p.get("author").id==a.config.parameters.communityBot.id||p.get("visitor")||(y=1),-1!=p.get("content").indexOf("case it takes a while to reply"))return!1;if(-1!==p.get("content").indexOf("(Optional: so that we can send you a link to this conversation)"))return!1;if(y&&(r.waitingStopped||d(".pubble-cw-dialog-item-waiting-ico-fake").parent().parent().parent().remove(),r.adminChat=!0,r.adminFirst=p.get("author").alias,r.onlineUser(p.get("author").alias),r.currentTyping==p.get("author").id&&(r.currentTyping=-1,o.addClass(r.$el.find(".pubble-cw-input-presence"),"pubble-hide"),r.$el.find(".pubble-cw-top-status").html(o.uiGetText("online")))),d(".pubble-cw-panel-dialog").find("#PBMSG"+e.id).length>0)return!1;var C=d(".pubble-cw-panel-dialog").find("#PBMSG"+e.tempId);if(C.length>0&&e.tempId){var x=e.visitor,k=new s({model:p}),I=k.render().$el;if(x?(o.addClass(I,"pubble-cw-isvisitor"),I.removeClass("pubble-cw-isadmin")):(o.addClass(I,"pubble-cw-isadmin"),I.removeClass("pubble-cw-isvisitor")),"Q"==p.get("type"));else{var T=p.get("atts"),$=!1,S=e.author.id==a.config.parameters.communityBot.id;if("F"==p.get("type")){var q={};$=!0;var P="";d.each(T,function(e,t){P+=t.get("targetId")+","});var A=/,$/gi;P=P.replace(A,"");var D={communityId:a.config.communityId,faqIds:P,contentType:"JSONP"},j=[];o.XDR(o.getEndpoints().loadFaqs,D,function(e){var t=e.data.data;t&&(d.each(t,function(e,t){var n=new c;n=i.setAtt(n,t),n.set("attType","faq"),j.push(n)}),T=j),r.vent.trigger("app:renderAtts",T,I)},function(){},q),o.addClass(d(".pubble-cw-input-processing"),"pubble-off")}"F"!==p.get("type")&&r.vent.trigger("app:renderAtts",T,I),$&&S&&(o.addClass(I,"pubble-cw-panel-dialog-item-isfaq"),o.addClass(I,"pubble-cw-isbot"),I.removeClass("pubble-cw-isadmin"),I.removeClass("pubble-cw-isvisitor"),d(".pubble-cw-input-faqhelp").removeClass("pubble-off"),r.hideInput(),o.mixlog("cw-questions-faq-prompted",{landingPage:a.config.pageURL,communityId:a.config.communityId,appId:a.config.appID,conversationId:r.conversationId},r.track)),"F"!=p.get("type")||$||(v=0,r.showInput(),r.nocontact())}r.onlines&&r.onlines.length>0&&(I.find(".pubble-cw-tick-mod").removeClass("pubble-cw-tick-mod-off"),o.addClass(I.find(".pubble-cw-tick-mod"),"pubble-cw-tick-mod-on"),I.find(".pubble-cw-tick-server").removeClass("pubble-cw-tick-server-off"),o.addClass(I.find(".pubble-cw-tick-server"),"pubble-cw-tick-server-on"),I.find(".pubble-cw-dialog-item-status").html(o.uiGetText("Seen")));var _=d(".pubble-cw-panel-dialog-item").last().prev(),E=10086;p.get("visitor")||(E=p.get("author").id+10086);var N=d("#PBMSG"+p.get("tempId"));return N.length>0?(N.hasClass("pubble-cw-islast")&&o.addClass(I,"pubble-cw-islast"),N.hasClass("pubble-cw-isfirst")&&o.addClass(I,"pubble-cw-isfirst"),I.attr("data",E)):(_.length>0&&_.attr("data")==E?o.addClass(I,"pubble-cw-islast"):(o.addClass(I,"pubble-cw-isfirst"),o.addClass(I,"pubble-cw-islast")),I.attr("data",E)),I.find(".pubble-cw-tick-server").removeClass("pubble-cw-tick-server-off"),o.addClass(I.find(".pubble-cw-tick-server"),"pubble-cw-tick-server-on"),I.parents(".pubble-cw-dialog-item-footer").find(".pubble-cw-dialog-item-status").html(o.uiGetText("Not seen yet")),C.replaceWith(I),I.hasClass("pubble-cw-islast")&&E==I.prev().attr("data")&&I.prev().removeClass("pubble-cw-islast"),!1}var L=new s({model:p}),M=L.render().$el;if(r.onlines&&r.onlines.length>0&&(M.find(".pubble-cw-tick-mod").removeClass("pubble-cw-tick-mod-off"),o.addClass(M.find(".pubble-cw-tick-mod"),"pubble-cw-tick-mod-on"),M.find(".pubble-cw-tick-server").removeClass("pubble-cw-tick-server-off"),o.addClass(M.find(".pubble-cw-tick-server"),"pubble-cw-tick-server-on"),M.find(".pubble-cw-dialog-item-status").html(o.uiGetText("Seen"))),0==e.author.id||e.visitor)o.addClass(M,"pubble-cw-isvisitor"),M.removeClass("pubble-cw-isadmin");else if(e.author.id==a.config.parameters.communityBot.id)o.addClass(M,"pubble-cw-isbot"),M.removeClass("pubble-cw-isadmin"),r.vent.trigger("app:trigger:msg",p,!0);else{var O=o.getConversationID();o.getAppIdFromUrl();o.addClass(M,"pubble-cw-isadmin"),M.removeClass("pubble-cw-isvisitor"),r.nodelay=1;var R=e.author.id+"",F=R.charAt(O.authorid-1),B=Math.ceil(F/2)+1;e.visitor||o.addClass(M,"pubble-cw-ismod-"+B);var w=d(".pubble-sb-notif");w.find(".pubble-sb-notif-nr").html(0),o.addClass(w,"pubble-off"),r.vent.trigger("app:trigger:msg",p,!0)}var T=p.get("atts"),$=!1;if("F"==p.get("type")){var q={};$=!0;var P="";d.each(T,function(e,t){P+=t.get("targetId")+","});var A=/,$/gi;P=P.replace(A,"");var D={communityId:a.config.communityId,faqIds:P,contentType:"JSONP"},j=[];o.XDR(o.getEndpoints().loadFaqs,D,function(e){r.vent.trigger("pubble:tracker:faqprompt");var t=e.data.data;t&&(d.each(t,function(e,t){var n=new c;n=i.setAtt(n,t),n.set("attType","faq"),M.find("#pb-faq-"+t.id).html(n.get("answer"))}),T=j)},function(){},q),o.addClass(d(".pubble-cw-input-processing"),"pubble-off")}var S=e.author.id==a.config.parameters.communityBot.id;if(T&&(d.each(T,function(e,t){if("link"==t.get("type")||"tweet"==t.get("type"))return!0;var n=new l({model:t}),i=n.render().$el;"faq"==t.get("attType")&&r.vent.trigger("pubble:faq:atts",t,i),"faq"==t.get("attType")&&($=!0,o.mixlog("cw-faq-prompted",{landingPage:a.config.pageURL,communityId:a.config.communityId,appId:a.config.appID,conversationId:r.conversationId,faqId:t.get("targetId")},r.track));var s=M.find(".pubble-cw-att-container");if("photo"==t.get("attType")||"video"==t.get("attType")?o.addClass(M,"pubble-cw-panel-dialog-item-hasmedia"):"file"!=t.get("attType")&&"file"!=t.get("attType")||o.addClass(M,"pubble-cw-panel-dialog-item-hasfile"),"email"!=t.get("attType")&&"phone"!=t.get("attType")&&"skip"!=t.get("attType"))s.append(i),s.removeClass("pubble-off");else{"phone"==t.get("attType")&&o.addClass(M,"pubble-cw-contact-phone"),"email"==t.get("attType")&&o.addClass(M,"pubble-cw-contact-email"),"skip"==t.get("attType")&&o.addClass(M,"pubble-cw-contact-skip");var c=d('<div class="pubble-cw-dialog-item-contact"> <div class="pubble-cw-dialog-item-contact-mobile">Edit</div><div class="pubble-cw-dialog-item-contact-hover">Click to edit</div> </div>');M.prepend(c)}}),$&&S&&(o.addClass(M,"pubble-cw-panel-dialog-item-isfaq"),d(".pubble-cw-input-faqhelp").removeClass("pubble-off"),r.hideInput(),o.mixlog("cw-questions-faq-prompted",{landingPage:a.config.pageURL,communityId:a.config.communityId,appId:a.config.appID,conversationId:r.conversationId},r.track))),"F"!=p.get("type")||$||(v=0,r.showChatbox(),r.nocontact(),o.addClass(d(".pubble-cw-input-anythingelse"),"pubble-off"),o.addClass(d(".pubble-cw-input-faqhelp"),"pubble-off")),v){var U=10086;p.get("visitor")||(U=p.get("author").id+10086);var _=d(".pubble-cw-panel-dialog-item").last();_.length>0&&_.attr("data")==U?o.addClass(M,"pubble-cw-islast"):(o.addClass(M,"pubble-cw-isfirst"),o.addClass(M,"pubble-cw-islast")),M.attr("data",U),o.addClass(M,"pubble-cw-panel-dialog-item-justin");var H=(new Date).getTime();M.attr("timestamp",H),r.dialogContainer.append(M),M.hasClass("pubble-cw-islast")&&U==M.prev().attr("data")&&M.prev().removeClass("pubble-cw-islast"),r.scrollToBottom(1500),r.scrollToBottom(2500)}}),r.conversationChannel.bind("replying",function(e){if("string"==typeof e&&(e=i.stringToJson(e)),e.conversationId!=r.conversationId)return!1;if(0==e.author.id);else{if(e.author.id!==r.author.id&&e.author.cookieId!==r.author.cookieId){for(var t=0,n=0;n<r.enters.length;n++)r.enters[n]==r.author.alias&&(t=!0);t||(r.enters.push(r.author.alias),r.joined=!0,r.notified=!0,d(".pubble-cw-dialog-item-waiting-ico").parents(".pubble-cw-isbot").remove())}r.currentTyping=e.author.id;var s=r.$el.find(".pubble-cw-input-presence");if(e.author.id!==r.author.id&&e.author.cookieId!==r.author.cookieId)if(r.$el.find("pubble-cw-input-default").hasClass("pubble-off"))s.attr("timestamp",(new Date).getTime());else{var l=o.imgwrapper(o.handleImg(e.author.avatar,e.author.alias,"40")),c=e.author.alias;a.config.parameters.postAsCommunity&&e.moderator&&(l=o.handleCommunityAvtar(a.config.parameters.community),c=o.headerText()),s.removeClass("pubble-hide"),s.find(".pubble-cw-input-presence-avatar").html(l),s.find(".pubble-cw-input-presence-username").html(c),s.attr("timestamp",(new Date).getTime()).attr("user",e.author.id).attr("cookieId",e.author.cookieId)}else s.attr("timestamp",(new Date).getTime())}})}),r.inited=!0})}}),pubblebot.define("text!templates/emojis.tpl",[],function(){return'<div class="pubble-emoji" tabindex="-1"  aria-label="" role="listitem" data=""><div class="pubble-emoji-ico"></div></div>\n<div class="pubble-emoji" tabindex="-1"  aria-label="" role="listitem" data=""><div class="pubble-emoji-ico"></div></div>\n<div class="pubble-emoji" tabindex="-1"  aria-label="" role="listitem" data=""><div class="pubble-emoji-ico"></div></div>\n<div class="pubble-emoji" tabindex="-1"  aria-label="" role="listitem" data=""><div class="pubble-emoji-ico"></div></div>\n<div class="pubble-emoji" tabindex="-1"  aria-label="" role="listitem" data=""><div class="pubble-emoji-ico"></div></div>\n<div class="pubble-emoji" tabindex="-1"  aria-label="" role="listitem" data=""><div class="pubble-emoji-ico"></div></div>\n<div class="pubble-emoji" tabindex="-1"  aria-label="" role="listitem" data=""><div class="pubble-emoji-ico"></div></div>\n<div class="pubble-emoji" tabindex="-1"  aria-label="" role="listitem" data=""><div class="pubble-emoji-ico"></div></div>\n<div class="pubble-emoji" tabindex="-1"  aria-label="" role="listitem" data=""><div class="pubble-emoji-ico"></div></div>\n\n\n<div class="pubble-emoji" tabindex="-1"  aria-label="" role="listitem" data=""><div class="pubble-emoji-ico"></div></div>\n<div class="pubble-emoji" tabindex="-1"  aria-label="" role="listitem" data=""><div class="pubble-emoji-ico"></div></div>\n<div class="pubble-emoji" tabindex="-1"  aria-label="" role="listitem" data=""><div class="pubble-emoji-ico"></div></div>\n<div class="pubble-emoji" tabindex="-1"  aria-label="" role="listitem" data=""><div class="pubble-emoji-ico"></div></div>\n<div class="pubble-emoji" tabindex="-1"  aria-label="" role="listitem" data=""><div class="pubble-emoji-ico"></div></div>\n<div class="pubble-emoji" tabindex="-1"  aria-label="" role="listitem" data=""><div class="pubble-emoji-ico"></div></div>\n<div class="pubble-emoji" tabindex="-1"  aria-label="" role="listitem" data=""><div class="pubble-emoji-ico"></div></div>\n<div class="pubble-emoji" tabindex="-1"  aria-label="" role="listitem" data=""><div class="pubble-emoji-ico"></div></div>\n<div class="pubble-emoji" tabindex="-1"  aria-label="" role="listitem" data=""><div class="pubble-emoji-ico"></div></div>\n\n<div class="pubble-emoji" tabindex="-1"  aria-label="" role="listitem" data=""><div class="pubble-emoji-ico"></div></div>\n<div class="pubble-emoji" tabindex="-1"  aria-label="" role="listitem" data=""><div class="pubble-emoji-ico"></div></div>\n<div class="pubble-emoji" tabindex="-1"  aria-label="" role="listitem" data=""><div class="pubble-emoji-ico"></div></div>\n<div class="pubble-emoji" tabindex="-1"  aria-label="" role="listitem" data=""><div class="pubble-emoji-ico"></div></div>\n<div class="pubble-emoji" tabindex="-1"  aria-label="" role="listitem" data=""><div class="pubble-emoji-ico"></div></div>\n<div class="pubble-emoji" tabindex="-1"  aria-label="" role="listitem" data=""><div class="pubble-emoji-ico"></div></div>\n<div class="pubble-emoji" tabindex="-1"  aria-label="" role="listitem" data=""><div class="pubble-emoji-ico"></div></div>\n<div class="pubble-emoji" tabindex="-1"  aria-label="" role="listitem" data=""><div class="pubble-emoji-ico"></div></div>\n<div class="pubble-emoji" tabindex="-1"  aria-label="" role="listitem" data=""><div class="pubble-emoji-ico"></div></div>\n\n<div class="pubble-emoji" tabindex="-1"  aria-label="" role="listitem" data=""><div class="pubble-emoji-ico"></div></div>\n<div class="pubble-emoji" tabindex="-1"  aria-label="" role="listitem" data=""><div class="pubble-emoji-ico"></div></div>\n<div class="pubble-emoji" tabindex="-1"  aria-label="" role="listitem" data=""><div class="pubble-emoji-ico"></div></div>\n<div class="pubble-emoji" tabindex="-1"  aria-label="" role="listitem" data=""><div class="pubble-emoji-ico"></div></div>\n<div class="pubble-emoji" tabindex="-1"  aria-label="" role="listitem" data=""><div class="pubble-emoji-ico"></div></div>\n<div class="pubble-emoji" tabindex="-1"  aria-label="" role="listitem" data=""><div class="pubble-emoji-ico"></div></div>\n<div class="pubble-emoji" tabindex="-1"  aria-label="" role="listitem" data=""><div class="pubble-emoji-ico"></div></div>\n<div class="pubble-emoji" tabindex="-1"  aria-label="" role="listitem" data=""><div class="pubble-emoji-ico"></div></div>\n<div class="pubble-emoji" tabindex="-1"  aria-label="" role="listitem" data=""><div class="pubble-emoji-ico"></div></div>\n\n<div class="pubble-emoji" tabindex="-1"  aria-label="" role="listitem" data=""><div class="pubble-emoji-ico"></div></div>\n<div class="pubble-emoji" tabindex="-1"  aria-label="" role="listitem" data=""><div class="pubble-emoji-ico"></div></div>\n<div class="pubble-emoji" tabindex="-1"  aria-label="" role="listitem" data=""><div class="pubble-emoji-ico"></div></div>\n<div class="pubble-emoji" tabindex="-1"  aria-label="" role="listitem" data=""><div class="pubble-emoji-ico"></div></div>\n<div class="pubble-emoji" tabindex="-1"  aria-label="" role="listitem" data=""><div class="pubble-emoji-ico"></div></div>\n<div class="pubble-emoji" tabindex="-1"  aria-label="" role="listitem" data=""><div class="pubble-emoji-ico"></div></div>\n<div class="pubble-emoji" tabindex="-1"  aria-label="" role="listitem" data=""><div class="pubble-emoji-ico"></div></div>\n<div class="pubble-emoji" tabindex="-1"  aria-label="" role="listitem" data=""><div class="pubble-emoji-ico"></div></div>\n<div class="pubble-emoji" tabindex="-1"  aria-label="" role="listitem" data=""><div class="pubble-emoji-ico"></div></div>\n\n<div class="pubble-emoji" tabindex="-1"  aria-label="" role="listitem" data=""><div class="pubble-emoji-ico"></div></div>\n<div class="pubble-emoji" tabindex="-1"  aria-label="" role="listitem" data=""><div class="pubble-emoji-ico"></div></div>\n<div class="pubble-emoji" tabindex="-1"  aria-label="" role="listitem" data=""><div class="pubble-emoji-ico"></div></div>\n<div class="pubble-emoji" tabindex="-1"  aria-label="" role="listitem" data=""><div class="pubble-emoji-ico"></div></div>\n<div class="pubble-emoji" tabindex="-1"  aria-label="" role="listitem" data=""><div class="pubble-emoji-ico"></div></div>\n<div class="pubble-emoji" tabindex="-1"  aria-label="" role="listitem" data=""><div class="pubble-emoji-ico"></div></div>\n<div class="pubble-emoji" tabindex="-1"  aria-label="" role="listitem" data=""><div class="pubble-emoji-ico"></div></div>\n<div class="pubble-emoji" tabindex="-1"  aria-label="" role="listitem" data=""><div class="pubble-emoji-ico"></div></div>\n<div class="pubble-emoji" tabindex="-1"  aria-label="" role="listitem" data=""><div class="pubble-emoji-ico"></div></div>'}),pubblebot.define("text!templates/form/text.tpl",[],function(){return'<div class="pubble-convform-item pubble-convform-item-istext"></div>'}),pubblebot.define("text!templates/form/cancel.tpl",[],function(){return'<div class="pubble-convform-action pubble-convform-action-iscancel"></div>'}),pubblebot.define("text!templates/form/confirm.tpl",[],function(){return'<div class="pubble-convform-action pubble-convform-action-isconfirm"></div>'}),pubblebot.define("text!templates/form/input.tpl",[],function(){return'<div class="pubble-convform-item pubble-convform-item-isinput">\n    <label class="pubble-convform-input-label"></label>\n    <input class="pubble-convform-input-area" placeholder="text here..."/>\n    <div class="pubble-convform-input-validation"></div>\n</div>'}),pubblebot.define("text!templates/form/textarea.tpl",[],function(){return'<div class="pubble-convform-item pubble-convform-item-istextarea">\n    <label class="pubble-convform-textarea-label"></label>\n    <textarea class="pubble-convform-textarea-area" placeholder="text here..."></textarea>\n    <div class="pubble-convform-textarea-validation"></div>\n</div>'}),pubblebot.define("formModule",["backbone","underscore","utils/appConfig","utils/utils","text!templates/form/text.tpl","text!templates/form/cancel.tpl","text!templates/form/confirm.tpl","text!templates/form/input.tpl","text!templates/form/textarea.tpl","utils/utils"],function(e,t,n,i,a,o,r,s,l){var c=window.jQueryPBm;window.$pubbBackbone.noConflict();return function(e){var t=(e.initialData,{});t.app=e.app||{},t.app.vent.bind("app:form:build",function(e,n){var a=n.get("attachments"),o="";if(a&&null!=a){var r=e.find(".pubble-convform-list"),s=e.find(".pubble-convform-actions");c.each(a,function(i,a){"form_data"==a.type&&(u=1),"form_template"!=a.type&&"form_data"!=a.type||("text"==a.elementType&&t.app.vent.trigger("app:form:build:text",r,a),"textarea"==a.elementType&&t.app.vent.trigger("app:form:build:textarea",r,a),"input"==a.elementType&&t.app.vent.trigger("app:form:build:input",r,a),"cancel"==a.action?t.app.vent.trigger("app:form:build:cancel",s,a,e):"submit"!=a.action&&"action"!=a.elementType||(t.app.vent.trigger("app:form:build:confirm",s,a,e,n),"true"==a.value&&(o=a.label)))});var l=n.get("thirdPartyIds"),u=0;if(l&&null!=l&&l.length>0&&c.each(l,function(e,t){"pubble-form-data"==t.provider&&(u=1)}),u){var p=n.get("time");e.find(".pubble-convform-result-text").html(i.uiGetText("Form was submitted with ")),e.find(".pubble-convform-result-value").html(o),e.find(".pubble-convform-result-time").html("("+p+")")}}}),t.app.vent.bind("app:form:build:text",function(e,t){var n=c(a);n.html(t.value),e.append(n)}),t.app.vent.bind("app:form:build:input",function(e,t){var n=c(s);n.find(".pubble-convform-input-label").html(t.label);var a=n.find("input");i.addClass(a,"pubble-input-area"),a.attr("pubble-data-index",t.order),n.find("input").val(t.value),"form_data"==t.type&&n.attr("disabled",!0),e.append(n)}),t.app.vent.bind("app:form:build:textarea",function(e,t){var n=c(l);n.find(".pubble-convform-input-label").html(t.label);var a=n.find("textarea");a.val(t.value),i.addClass(a,"pubble-input-area"),a.attr("pubble-data-index",t.order),"form_data"==t.type&&n.attr("disabled",!0),e.append(n)}),t.app.vent.bind("app:form:build:cancel",function(e,t,n){var a=c(o);if(i.addClass(a,"pubble-convform-action-style-is"+t.style),a.html(t.label),e.append(a),"form_data"==t.type)return!1;a.on("click",function(){n.find(".pubble-convform-header-minmax").trigger("click")})}),t.app.vent.bind("app:form:build:confirm",function(e,t,n,a){var o=c(r);return i.addClass(o,"pubble-convform-action-style-is"+t.style),o.html(t.label),e.append(o),"form_data"!=t.type&&(!n.find(".pubble-convform-container").hasClass("pubble-convform-status-iscompleted")&&void o.on("click",function(){var e={postId:a.get("id"),contentType:"JSONP"},o="formValue"+t.order;e[o]=t.action;var r=n.find(".pubble-input-area");c.each(r,function(t,n){var n=c(n),i="formValue"+n.attr("pubble-data-index");e[i]=n.val()}),r=a.get("attachments");var o="formValue"+t.order;e[o]="true";i.addClass(n.find(".pubble-convform-container"),"pubble-convform-status-iscompleted"),n.find(".pubble-convform-result-text").html(i.uiGetText("Form was submitted ")),i.XDR(i.getEndpoints().submitform,e,function(e){i.addClass(n.find(".pubble-convform-container"),"pubble-convform-status-iscompleted")})}))})}}),pubblebot.define("text!templates/faqsearch.tpl",[],function(){return'<div class="pubble-cw-faqsearch-textarea">\n    <textarea class="pubble-js-faqsearch pubble-js-searchfaq" maxlength="200" aria-invalid="false" type="text" tabindex="0" aria-label="Search FAQs" placeholder="search our faqs" data="Search FAQs" aria-required="true" style="height: 30px;"></textarea>\n</div>\n<button class="pubble-cw-faqsearch-button pubble-js-searchfaq" aria-label="Search FAQs" tabindex="0">\n    <div class="pubble-cw-faqsearch-button-ico"></div>\n</button>'}),pubblebot.define("text!templates/faq.tpl",[],function(){return'<div class="pubble-cw-faq-item-q"><%=question%></div>\n<div class="pubble-cw-faq-item-a"><%=answer%></div>\n<div class="pubble-cw-faq-item-att"></div>\n\x3c!--\n<button class="pubble-cw-faq-helped"> This Helped!</button>\n--\x3e'}),pubblebot.define("views/faq",["backbone","underscore","utils/utils","text!templates/faq.tpl","utils/appConfig","models/post","views/conversation","converters/converter","utils/storage"],function(e,t,n,i,a,o,r,s,l){window.jQueryPBm;return window.$pubbBackbone.noConflict().View.extend({template:$UScore.template(i),className:"pubble-cw-faq-item",attributes:function(){return{}},initialize:function(e){this.model=e.model,window.$UScore.bindAll(this,"render"),this.render()},render:function(){var e=this;return this.$el.html(this.template(this.model.toJSON())),this.$el.attr("tabindex",-1),n.addClass(this.$el,"pubmd-is-show"),this.$el.on("keydown",function(t){if(38==t.which){var i=n.getPrevByCls(e.$el,"pubmd-is-show","pubble-cw-faq-item",!1);if(null==i&&(i=e.$el.parent().find(".pubble-cw-faq-item").last()),null!=i)return i.focus(),t.stopPropagation(),!1}else if(40==t.which){var i=n.getPrevByCls(e.$el,"pubmd-is-show","pubble-cw-faq-item",!0);if(null==i&&(i=e.$el.parent().find(".pubble-cw-faq-item").first()),null!=i)return i.focus(),t.stopPropagation(),!1}}),e}})}),pubblebot.define("models/faq",["underscore","backbone"],function(e,t,n){return t.Model.extend({defaults:{id:0},to_json:function(e){return this.toJSON()}})}),pubblebot.define("views/faqsearch",["backbone","underscore","utils/utils","text!templates/faqsearch.tpl","utils/appConfig","models/post","views/conversation","converters/converter","utils/storage","views/faq","models/faq","utils/i18n"],function(e,t,n,i,a,o,r,s,l,c,u,p){var d=window.jQueryPBm;return window.$pubbBackbone.noConflict().View.extend({template:$UScore.template(i),className:"pubble-pubble-cw-faqsearch",attributes:function(){return{}},initialize:function(e){window.$UScore.bindAll(this,"render"),this.app=e.app,this.render()},render:function(){var e=this;return this.$el.html(this.template()),this.$el.find(".pubble-js-searchfaq").attr("aria-label",p.getText("Search FAQs")),this.$el.find(".pubble-js-faqsearch").attr("placeholder",p.getText("search our faqs")),this.$el.find(".pubble-js-faqsearch").on("keydown",function(t){var n=t.keyCode?t.keyCode:t.which,i=d(t.target);if(13==n&&!i.altKey)return e.$el.find(".pubble-cw-faqsearch-button").trigger("click"),t.preventDefault(),!1}),n.wrapEnterkey(this.$el.find(".pubble-cw-faqsearch-button")),this.$el.find(".pubble-cw-faqsearch-button").on("click",function(t){var i=d(t.target);if(i.hasClass("pubble-cw-faq-issearching"))return!1;n.addClass(i,"pubble-cw-faq-issearching");var o=e.$el.find(".pubble-js-faqsearch").val().trim();e.app.$el.find(".pubble-js-faqsearch").val(o);var r={},l={contentType:"JSONP"};l.searchString=o,l.pageSize=3,e.app.faqLoadMore&&(l.pageSize=10),l.communityId=a.config.communityId,l.url=n.getFilterLandingPage();var r=window.setTimeout(function(){i.removeClass("pubble-cw-faq-issearching"),window.clearTimeout(r)},3e3),p=e.app.$el.find(".pubble-cw-faq-title");p.html(""),n.XDR(n.getEndpoints().faqSearch,l,function(t){if("200"!=t.code||!t.data||null==t.data)return!1;e.app.shiftView("faqs"),
""==l.searchString?p.html(n.uiGetText("Faqs found")):p.html(n.uiGetText('FAQs for "')+l.searchString+'"');var i=d(".pubble-cw-faq-bottom");t.data.pageCount>0&&!e.app.faqLoadMore?(i.removeClass("pubble-off"),i.attr("aria-hidden",!1),i.attr("tabindex",0)):(n.addClass(i,"pubble-off"),i.attr("aria-hidden",!0),i.attr("tabindex",-1)),e.app.faqLoadMore=0;var a=t.data.data,o=e.app.$el.find(".pubble-cw-faq-list");o.html(""),d.each(a,function(e,t){var n=new u;n=s.setFaq(n,t);var i=new c({model:n});o.append(i.render().$el)})},function(){var t=d(".pubble-cw-faq-bottom");e.app.faqLoadMore=0,n.addClass(t,"pubble-off"),t.attr("aria-hidden",!0)},r)}),e}})}),pubblebot.define("text!templates/faqcontainer.tpl",[],function(){return'<div class="pubble-cw-faq-top"></div>\n<div class="pubble-cw-faq-title">FAQs results for ""</div>\n<div class="pubble-cw-faq-results pubble-cw-scroll">\n    <div class="pubble-cw-faq-list" tabindex="0" aria-label="FAQ results for your search"></div>\n    <a class="pubble-cw-faq-bottom pubble-off" aria-hidden="true">Load more results</a>\n</div>\n'}),pubblebot.define("views/faqcontainer",["backbone","underscore","utils/utils","text!templates/faqcontainer.tpl","utils/appConfig","models/post","views/conversation","converters/converter","utils/storage","views/faqsearch"],function(e,t,n,i,a,o,r,s,l,c){var u=window.jQueryPBm;return window.$pubbBackbone.noConflict().View.extend({template:$UScore.template(i),el:"#pubble-cw-faq-container",attributes:function(){return{}},initialize:function(e){window.$UScore.bindAll(this,"render"),this.app=e.app,this.render()},render:function(){var e=this;this.$el.html(this.template());var t=new c({app:e.app}),i=this.$el.find(".pubble-cw-faq-list");return i.on("keydown",function(e){var t=u(e.target);if(40==e.keyCode&&t.hasClass("pubble-cw-faq-list")){var n=i.find(".pubble-cw-faq-item");n.length>0&&n.first().focus()}}),this.$el.find(".pubble-cw-faq-top").html(t.render().$el),n.wrapEnterkey(this.$el.find(".pubble-cw-faq-bottom")),this.$el.find(".pubble-cw-faq-bottom").on("click",function(t){e.app.faqLoadMore=1,e.$el.find(".pubble-cw-faqsearch-button").trigger("click")}),e}})}),pubblebot.define("views/app",["backbone","underscore","text!templates/app.tpl","utils/utils","views/post","models/post","converters/converter","views/attachment","utils/tel","models/attachment","utils/uploader","utils/appConfig","views/conversation","collections/posts","views/form","models/form","eventModule","liveModule","views/contactCard","utils/sizedecoder","utils/storage","text!templates/emojis.tpl","formModule","views/faqsearch","views/faqcontainer","utils/i18n"],function(e,t,n,i,a,o,r,s,l,c,u,p,d,b,f,h,m,v,g,w,y,C,x,k,I,T){p.pbrpc_polling=function(e,t,n){if(!e.config.parameters.visitorTracking)return!1;var a=p.config.pageURL;if(i.isMicrosoft()||"dmag"==p.config.parameters.community.shortName)return!1;if(a.indexOf("/dashboard/contact#myenquiry")>-1)return!1;if(a.indexOf("pubble.io/ask")>-1)return!1;if(a.indexOf("askmode=true")>-1)return!1;if(a.indexOf("askmode=true")>-1)return!1;if(a.indexOf("chatify.com/ask")>-1)return!1;if(e.isPolling)return!1;var o={contentType:"JSONP"},r={};if(null==e.config.user)return!1;var s="https://livedash.pubble.io/polling/"+p.config.communityId+"/"+e.config.user.cookieId+"/",l=p.config;r.community_name=l.communityName,r.community_id=l.communityId,r.page_name=document.title,r.appId=l.appID,r.avatar=i.imgwrapper(i.handleImg(l.user.avatar,l.user.displayName,"48")),r.alias=l.user.displayName,r.userId=l.user.uid,r.cookieId=l.user.cookieId,e.customRole?r.customRole=e.customRole:r.customRole="-","Guest"==l.user.displayName&&e.customName&&(r.alias=e.customName),r.isLogged=null!==l.user&&l.user.uid>0;var c=l.pageURL;try{c=window.location.href!=window.parent.location.href?window.parent.location.href:l.pageURL}catch(e){}r.page_url=c,e.conversationId&&""!=e.conversationId&&"0"!=e.conversationId?r.conversationId=e.conversationId:r.conversationId=0,e.questionId&&""!=e.questionId&&"0"!=e.questionId?r.questionId=e.questionId:r.questionId=0,$(".pubble-cw-panel").hasClass("pubble-move")&&(r.conversationId=0,r.questionId=0),e.invitation&&(r.invitation=e.invitation),e.livedas_url_logged?r.url_logged=1:r.url_logged=0;var u=(new Date).getTime();r.onPageTime=u-e.init_Time,r.onSitetime=u-e.config.parameters.sessionStartTime,r.invitePushed=e.invitePushed,void 0!=e.pushAccepted?r.pushAccepted=e.pushAccepted:r.pushAccepted=0,r.userIp=n;var d=JSON.stringify(r);d=LZString.compressToBase64(d),o.data=d,e.isPolling=1,i.XDR(s,o,function(n){e.isPolling=0,n.data.livepush=1,e.livedas_url_logged=1,null!=n.data&&"null"!=n.data&&(n.data.pushed||n.data.accepted?(e.invitePushed=1,e.invitation&&(e.invitation.pushed=1)):(n.data.isInvite=1,t.trigger("app:freechat",n.data),e.invitePushed=1,e.pushAccepted=0,e.invitation=n.data))})};var $=window.jQueryPBm,S=window.$pubbBackbone.noConflict();return S.View.extend({template:function(e){return $UScore.template(n)(e.toJSON())},initialize:function(){$UScore.bindAll(this,"resolveUI","nocontact","seq","thanks","onlineUser","faqExpand","updateLastSeen","updateHeader","faq","handlePrompt","renderConversation","render","startup","robotChat","askName","askEmail","postComment","loadConversation","shiftView","newqstate","resetBubble","updateQuestionCount","hideInput","showInput","showChatbox","processing","resolveQuestion","officeHour","setDefaultCountry"),this.model.view=this},resolve:function(){this.reloaded||(this.hideInput(),$(".pubble-cw-input-anythingelse").removeClass("pubble-off"),i.addClass($(".pubble-cw-input-faqhelp"),"pubble-off"))},hideInput:function(){var e=$(".pubble-cw-input-actions"),t=$(".pubble-cw-input-default");i.addClass(t,"pubble-off"),i.addClass(e,"pubble-off"),setTimeout(function(){i.addClass(t,"pubble-off"),i.addClass(e,"pubble-off")},200)},showInput:function(){$(".pubble-cw-input-default").removeClass("pubble-off"),$(".pubble-cw-input-actions").removeClass("pubble-off"),i.addClass($(".pubble-cw-input-processing"),"pubble-off")},resetBottom:function(){$(".pubble-cw-input-textarea").val(""),i.addClass($(".pubble-cw-input-textarea-send"),"pubble-cw-input-textarea-send-disabled"),i.addClass($(".pubble-cw-chat-container"),"pubble-cw-isnewquestion"),$(".pubble-cw-input-default").removeClass("pubble-off"),$(".pubble-cw-input-actions").removeClass("pubble-off");var e=$(".pubble-cw-endconv");i.addClass(e,"pubble-off");var t=$(".pubble-cw-input-iscredentials");i.addClass(t,"pubble-off");var t=$(".pubble-cw-input-iscredentials");i.addClass(t,"pubble-off"),t=$(".pubble-cw-input-buttonbar-sms"),i.addClass(t,"pubble-off"),t=$(".pubble-cw-input-buttonbar-email"),i.addClass(t,"pubble-off"),$(".pubble-cw-chatbox").removeClass("pubble-gdpr-request");var n=$(".pubble-cw-input-processing");i.addClass(n,"pubble-off");var a=$(".pubble-cw-input-faqhelp");i.addClass(a,"pubble-off"),a=$(".pubble-cw-input-anythingelse"),i.addClass(a,"pubble-off");var t=$(".pubble-cw-input-pubble-cw-input-anythingelse");i.addClass(t,"pubble-off")},seq:function(e){var t=this;if(("offline.notify.link"==e||"offline.notify.hascredentials"==e)&&t.customOfflineMsg)return setTimeout(function(){t.robotChat(i.uiGetText(t.customOfflineMsg),function(){})},500),!1;var t=this,n={};n.conversationId=t.conversationId,n.appId=p.config.appID,n.code=e,i.Xpost(!0,i.getEndpoints().seq,n,function(e){})},resetBubble:function(){var e=this.$el.find(".pubble-sb-avatar"),t=this.$el.find(".pubble-sb-bubble-text"),n=this.$el.find(".pubble-sb-bubble");e.html(""),t.html(""),i.addClass(n,"pubble-move"),i.fixMobileBody(!1),i.addClass(e,"pubble-off")},scrollToBottom:function(e){var t=100;e>0&&(t=e),setTimeout(function(){var e=$(".pubble-cw-panel-middle");e.scrollTop(e.get(0).scrollHeight)},t)},updateQuestionCount:function(){var e=this,t=this.$el.find(".pubble-cw-panel-controls-newq-number");t.html(this.conversationCollection.models.length),t.removeClass("pubble-off");var n=this.$el.find(".pubble-cw-panel-controls-newq");if(!this.$el.find(".pubble-cw-chat-container").hasClass("pubble-hide")){var a=i.getCookieValue("pb-ifnewPrompted"),o=i.getCookieValue("pb-iflistPrompted");1==this.conversationCollection.length&&null==a?i.setCookieValue("pb-ifnewPrompted",1):this.conversationCollection.length>1&&null==o&&(i.addClass(this.$el.find(".pubble-cw-panel-helptext-new"),"pubble-hide"),this.$el.find(".pubble-cw-panel-helptext-new").removeClass("pubble-show"),this.$el.find(".pubble-cw-panel-helptext-list").removeClass("pubble-hide"),i.addClass(e.$el.find(".pubble-cw-panel-helptext-list"),"pubble-show"),i.setCookieValue("pb-iflistPrompted",1),setTimeout(function(){e.$el.find(".pubble-cw-panel-helptext-list").removeClass("pubble-show"),i.addClass(e.$el.find(".pubble-cw-panel-helptext-list"),"pubble-hide")},7e3))}this.conversationCollection.length<1?(i.addClass(this.$el.find(".pubble-cw-panel-controls-newq"),"pubble-cw-panel-controls-emptylist"),this.botlist.length>0&&i.addClass(this.$el.find(".pubble-cw-panel-controls-newq"),"pubble-cw-panel-controls-channellist")):this.$el.find(".pubble-cw-panel-controls-newq").removeClass("pubble-cw-panel-controls-emptylist"),1==this.conversationCollection.length?(n.removeClass("pubble-cw-panel-controls-emptylist"),i.addClass(n,"pubble-cw-panel-controls-listofone")):this.conversationCollection.length>1?(t.removeClass("pubble-off"),n.removeClass("pubble-cw-panel-controls-emptylist"),n.removeClass("pubble-cw-panel-controls-listofone")):(i.addClass(t,"pubble-off"),i.addClass(n,"pubble-cw-panel-controls-emptylist"),n.removeClass("pubble-cw-panel-controls-listofone"),this.botlist.length>0&&i.addClass(n,"pubble-cw-panel-controls-channellist"))},officeHour:function(e){var t=this;if(t.showOfficeHour=0,!p.config.parameters.operational||e)return!(t.$el.find(".pubble-cw-dialog-officehours").length>0)&&(!t.officeHourShowed&&(t.officeHourShowed=!0,setTimeout(function(){if(t.$el.find(".pubble-cw-top-status-community").html(i.uiGetText("out of office hours")).removeClass("pubble-off"),i.addClass(t.$el.find(".pubble-cw-top-status"),"pubble-off"),""==t.conversationId&&!e)return!1;var n=i.uiGetText("It's out of office hours for us right now. <br/>Your message has been received. We will notify you as soon as we can reply. Thanks!"),r=p.config.parameters.operatingSchedule.outsideOperatingHoursText;null!=r&&""!=r&&(n=r,n=i.unescapeHTML(n),n=i.handleURL(n));var s=$("<div></div>").html(n+'<div class="pubble-cw-dialog-officehours-container pubble-cw-expanded"><div class="pubble-cw-dialog-officehours-header">'+i.uiGetText("Office hours")+'</div><div class="pubble-cw-dialog-officehours-servertime pubble-cw-expanded">'+p.config.parameters.operatingSchedule.timezone+'</div><ul class="pubble-cw-dialog-officehours-list"></ul></div>');null!=p.config.parameters.operatingSchedule.operatingHours?$.each(p.config.parameters.operatingSchedule.operatingHours,function(e,t){var n='<li class="pubble-cw-dialog-officehours-list-item"><div class="pubble-cw-dialog-officehours-day" style="padding-right:5px">'+i.uiGetText(e)+' </div><div class="pubble-cw-dialog-officehours-hours">'+t+"</div></li>";s.find(".pubble-cw-dialog-officehours-list").append(n)}):s.find(".pubble-cw-dialog-officehours-container").remove(),t.scrollToBottom(),t.botTalked++;var l=new o;l.set("alias",p.config.parameters.communityBot.alias),l.set("postID","bot-"+this.botTalked),l.set("id","bot-"+this.botTalked),l.set("avatar",p.config.parameters.communityBot.avatar+"?72"),l.set("time",i.getTime()),l.set("content","");var c=new a({model:l}),u=c.render().$el;u.find(".pubble-cw-dialog-item-text").html("").append(s),i.addClass(t.$el.find(".pubble-cw-input-processing"),"pubble-off"),i.addClass(u,"pubble-cw-isbot"),u.removeClass("pubble-cw-isadmin"),i.addClass(u,"pubble-cw-panel-dialog-item-justin");var n=(new Date).getTime();u.attr("timestamp",n),$(".pubble-cw-panel-dialog").append(u),t.scrollToBottom()},2e3),!1))},nocontact:function(){var e=this;if(e.nocontacted)return!1;if(e.adminChat)return!1;"freefaq"!=e.stage&&(e.nocontacted=!0),e.joined||(e.t1=setTimeout(function(){if(""==e.conversationId)return!1;e.robotChat("<div class='pubble-cw-dialog-item-waiting-ico pubble-cw-dialog-item-waiting-ico-fake'><div class='pubble-cw-dialog-item-waiting-ico-dot1'></div><div class='pubble-cw-dialog-item-waiting-ico-dot2'></div><div class='pubble-cw-dialog-item-waiting-ico-dot3'></div></div>",function(){}),e.waitingStopped=0},2e3));var t=2e3;p.config.parameters.operational||(t=1e3),e.customOfflineMsg&&p.config.parameters.operational&&(t=2e3,e.isOnline=!1),e.newTask&&window.clearTimeout(e.newTask),e.newTask=setTimeout(function(){if(e.waitingStopped=1,e.adminChat)return $(".pubble-cw-dialog-item-waiting-ico-fake").parents(".pubble-cw-panel-dialog-item").remove(),!1;if(e.notified)return $(".pubble-cw-dialog-item-waiting-ico-fake").parents(".pubble-cw-panel-dialog-item").remove(),!1;if(e.notfied=!0,p.config.parameters.operational&&!e.joined){var t=null!=p.config.user&&p.config.user.uid>0,n=p.config.parameters.activeUsers;e.customOfflineMsg?(e.onlines&&e.onlines.length>0||n&&n.length>0)&&1:e.onlines&&e.onlines.length>0&&1,p.config.parameters.operational?e.emailProvied||e.telProvied||t?e.seq("online.noreply"):(e.seq("online.noreply.notify"),e.$el.find(".pubble-cw-getnotif-handle").removeClass("pubble-off")):e.emailProvied||e.telProvied||t?e.seq("offline.notify.hascredentials"):(e.seq("offline.notify.link"),e.$el.find(".pubble-cw-getnotif-handle").removeClass("pubble-off"))}e.joined||"freefaq"==e.stage||(e.t2=setTimeout(function(){if(""==e.conversationId)return!1;e.officeHour()},100)),setTimeout(function(){$(".pubble-cw-dialog-item-waiting-ico-fake").parent().parent().parent().remove()},1e3)},t)},thanks:function(){return!1},resolveUI:function(){$(".pubble-cw-endconv").removeClass("pubble-off");var e=this;$(".pubble-cw-input-default").hasClass("pubble-off")||(e.ui="default"),$(".pubble-cw-input-iscredentials").hasClass("pubble-off")||(e.ui="iscredentials"),$(".pubble-cw-input-faqhelp").hasClass("pubble-off")||(e.ui="faqhelp"),$(".pubble-cw-input-anythingelse").hasClass("pubble-off")||(e.ui="anythingelse"),this.hideInput(),i.addClass($(".pubble-cw-input-iscredentials"),"pubble-off"),i.addClass($(".pubble-cw-input-faqhelp"),"pubble-off"),i.addClass($(".pubble-cw-input-anythingelse"),"pubble-off")},handleGDPR:function(e){if(!p.config.parameters.enableGdpr)return $(".pubble-gdpr-parent").removeClass("pubble-md-gdpr-off").removeClass("pubble-md-gdpr-on"),!1;var t=$(".pubble-gdpr-parent");$.each(t,function(e,t){$(t).removeClass("pubble-md-gdpr-off"),i.addClass($(t),"pubble-md-gdpr-on");var n=$(t).find(".pubble-gdpr"),a=$(t).find(".pubble-gdpr-link");i.addClass(n,"pubble-hide"),a.removeClass("pubble-hide")}),"email"==e?$(".pubble-cw-panel-content").find(".pubble-cw-isemail").trigger("click"):$(".pubble-cw-panel-content").find(".pubble-cw-issms").trigger("click")},handleSMS:function(e){if(!e)return!1;var t=e.split("-");if(2==t.length){var n=$(".flag-dropdown");$.each(n,function(e,n){var a=$(n);$(".pubble-cw-mobile-number").val(t[1]);var o=a.find(".country"),r=t[0];if(r.length<2)return!1;var s=r.substring(1,r.length);$.each(o,function(e,t){var n=$(t);if(n.removeClass("highlight").removeClass("active"),n.attr("data-dial-code")==s){i.addClass(n,"highlight"),i.addClass(n,"active");var a=(n.parent().parent(),$(".selected-flag"));return $.each(a,function(e,t){t=$(t),t.attr("title",n.find(".country-name").html()+": "+n.find(".dial-code").html()),t.find(".iti-flag").removeAttr("class").addClass("iti-flag").addClass(n.attr("data-country-code")),t.find(".iti-flag-pubble-nr").remove(),$("<div class='iti-flag-pubble-nr'>"+n.find(".dial-code").html()+"</div>").insertBefore(t.find(".arrow"))}),!1}})})}else{$(".pubble-cw-getnotif-content-buttonbar-action-inputbox-sms").find(".pubble-cw-mobile-number").val(e)}},warning:function(e,t){i.mixlog("cw-warning",{landingPage:p.config.pageURL,communityId:p.config.communityId,appId:p.config.appID,conversationId:t,content:e},1)},faqExpand:function(e){var t=this;i.mixlog("cw-faq-clicked",{landingPage:p.config.pageURL,communityId:p.config.communityId,appId:p.config.appID,conversationId:t.conversationId,faqId:e.get("targetId")},t.track);var n={conversationId:t.conversationId,contentType:"JSONP",faqId:e.get("targetId"),action:"expand"},a={};return i.XDR(i.getEndpoints().interaction,n,function(){},function(){},a),!1},resolveQuestion:function(e){if(i.addClass($(".pubble-cw-att-choice"),"pubble-off"),!this.reloaded){var t=this;i.mixlog("cw-faq-helpful",{landingPage:p.config.pageURL,communityId:p.config.communityId,appId:p.config.appID,conversationId:t.conversationId,faqId:e},t.track),i.mixlog("cw-faq-faq-resolved",{landingPage:p.config.pageURL,communityId:p.config.communityId,appId:p.config.appID,conversationId:t.conversationId,faqId:e,source:"specfic"},t.track);var n={conversationId:t.conversationId,contentType:"JSONP",faqId:e,action:"helpful"},a={};i.XDR(i.getEndpoints().interaction,n,function(){t.faqHelpful=!0},function(){},a),this.adminChat||!$(".pubble-cw-input-faqhelp").hasClass("pubble-off")?(i.addClass($(".pubble-cw-input-faqhelp"),"pubble-off"),t.showChatbox()):(i.addClass($(".pubble-cw-input-faqhelp"),"pubble-off"),t.hideInput(),$(".pubble-cw-input-anythingelse").removeClass("pubble-off")),this.anything||(t.hideInput(),$(".pubble-cw-input-anythingelse").removeClass("pubble-off"),i.addClass($(".pubble-cw-input-faqhelp"),"pubble-off"))}},showChatbox:function(){this.showInput(),$(".pubble-cw-input-textarea").attr("placeholder",i.uiGetText("Message...")),$(".pubble-cw-input-textarea-placeholder").html(i.uiGetText("Message...")).removeClass("pubble-off")},updateLastSeen:function(){var e=p.config.parameters.lastOnline,t=p.config.parameters.currentTime,n=t-e,a="";n<6e4?(a=i.uiGetText("Online"),this.isOnline=!0):a="",this.updateStatus(a),this.$el.find(".pubble-cw-top-status-community").html(i.headerText()),p.config.parameters.operational||i.addClass(this.$el.find(".pubble-cw-top-status-community"),"pubble-off")},onlineUser:function(e){var t=this;if(this.onlines&&this.onlines.length>0){for(var n=0,a=0;a<this.onlines.length;a++)this.onlines[a]==e&&(n=1);n||(i.mixlog("cw-question-mod-interactions",{landingPage:p.config.pageURL,communityId:p.config.communityId,appId:p.config.appID,conversationId:t.conversationId,alias:e},t.track),this.onlines.push(e),this.updateHeader())}else i.mixlog("cw-question-mod-interactions",{landingPage:p.config.pageURL,communityId:p.config.communityId,appId:p.config.appID,conversationId:t.conversationId,alias:e},t.track),i.mixlog("cw-question-mod-interactions-unique",{landingPage:p.config.pageURL,communityId:p.config.communityId,appId:p.config.appID,conversationId:t.conversationId,alias:e},t.track),this.onlines.push(e),this.updateHeader()},updateHeader:function(){return!1},updateStatus:function(e){p.config.parameters.operational?$(".pubble-cw-top-status").html(e):$(".pubble-cw-top-status").html("")},handlePrompt:function(){var e=this,t=$(".pubble-cw-getnotif");""!=e.author.sms&&void 0!=e.author.sms||i.isValidEmail(e.author.email)&&-1===e.author.email.indexOf("anon@")?(t.removeClass("pubble-cw-getnotif-on"),t.removeClass("pubble-off"),t.attr("aria-hidden",!0),i.addClass(t,"pubble-cw-getnotif-off")):(t.removeClass("pubble-off"),t.attr("aria-hidden",!1),$(".pubble-cw-getnotif-handle").removeClass("pubble-off"))},handleFaq:function(){var e='<div class="pubble-cw-att-choice"><div class="pubble-cw-att-choice-text">'+i.uiGetText("Any of this helped?")+'</div><div class="pubble-cw-att-choice-buttons"><div class="pubble-cw-att-choice-button-yes"><div class="pubble-cw-att-choice-button-yes-ico"></div>'+i.uiGetText("Yes")+'</div><div class="pubble-cw-att-choice-button-no"><div class="pubble-cw-att-choice-button-no-ico"></div>'+i.uiGetText("No")+" </div></div></div>",t=$(e);return t.find(".pubble-cw-att-choice-button-yes").on("click",function(){t.slideUp()}),t.find(".pubble-cw-att-choice-button-no").on("click",function(){t.slideUp()}),t},newqstate:function(){$(".pubble-cw-panel-dialog").html("");var e=$(".pubble-cw-getnotif-handle");null!=p.config.user&&p.config.user.uid>0&&"account"==p.config.user.type||(i.addClass(e,"pubble-off"),e.removeClass("pubble-cw-getnotif-on")),$(".pubble-cw-input-textarea-placeholder").html(i.uiGetText("Ask your question here..."));var t=$(".pubble-cw-input-textarea-send");t.html(i.uiGetText("Ask")),i.addClass(t,"pubble-cw-input-textarea-send-disabled"),$(".pubble-cw-input-textarea").attr("placeholder",i.uiGetText("Ask your question here...")).val("")},renderConversation:function(e,t){var n=$(".pubble-cw-panel-dialog"),l=($(".pubble-cw-panel-middle"),this);if(l.talked=0,l.$el.find(".pubble-cw-chat-container").removeClass("pubble-cw-isnewquestion"),l.$el.find(".pubble-cw-input-textarea-placeholder").removeClass("pubble-off"),i.addClass(l.$el.find(".pubble-cw-endconv"),"pubble-off"),l.reloaded=!0,200==e.code){$(".pubble-cw-input-textarea").attr("placeholder",i.uiGetText("Message...")),l.author=e.conversationRoot.author;var c=0,u=e.data.data;$.each(u,function(e,t){if("G"==t.type)return c=1,!0}),l.$el.find(".pubble-cw-getnotif-handle").removeClass("pubble-off");var d=[];if(u&&u.reverse(),n.html(""),e.conversationRoot&&0!==e.conversationRoot.id){var b=e.conversationRoot;-1==window.location.href.indexOf("visitor=false")&&b&&b.author&&"visitor"==b.author.type&&b.author.id&&(l.visitorId=b.author.id);var f={},h={};h.contentType="JSONP",h.conversationId=e.conversationRoot.conversationId,l.questionId=e.conversationRoot.count,p.conversationId=l.conversationId,p.questionId=l.questionId,i.XDR(i.getEndpoints().visitor,h,function(n){var a="visitor";n&&(a="mod"),i.mixlog("cw-question-reloaded",{landingPage:p.config.pageURL,communityId:p.config.communityId,appId:p.config.appID,conversationId:e.conversationRoot.conversationId,source:a,otherPage:t},l.track)});var m=new o;m=r.setPost(m,e.conversationRoot),m.set("posted",1),l.conversationCollection.add(m),this.vent.trigger("init:presence",m.get("conversationId")),l.clientName=m.get("author").alias,l.content=m.get("content"),m.get("author").phone&&""!=m.get("author").phone&&(l.sms=m.get("author").phone,l.handleSMS(l.sms),l.handleGDPR("phone")),m.get("author").phone&&""!=m.get("author").phone&&(l.sms=m.get("author").phone,l.handleSMS(l.sms),l.handleGDPR("phone"));null!==p.config.user&&p.config.user.uid>0?p.config.user.displayName:m.get("author").alias,i.mixlog("cw-widget-loaded",{landingPage:p.config.pageURL,communityId:p.config.communityId,appId:p.config.appID,domain:document.domain,conversationId:m.get("conversationId"),otherPage:t},l.track),c||l.robotChat(i.uiGetText("Please type your question below"),function(){},"greeting");var m=new o;m=r.setPost(m,e.conversationRoot);var v=new a({model:m});m.set("posted",1),l.objectId=m.get("id");var g=v.render().$el,w={conversationId:m.get("conversationId"),contentType:"JSONP",action:"reload"};if(t&&(w.action="browse",w.landingPage=p.config.pageURL),!i.contains(l.visitedConversations,m.get("conversationId"))){l.visitedConversations.push(m.get("conversationId"));var f={};if("reload"==w.action){var y=i.getPPBLINK();"E"!=y&&"S"!=y||(w.linkType=y)}i.XDR(i.getEndpoints().qinteraction,w,function(){},function(){},f)}var C=0;if("Q"==m.get("type")){m.get("author").id>0&&(C=1);var x=window.location.href;if(-1==x.indexOf("visitor=false")&&x.indexOf("PPBPID=")>-1){var k=i.getPPBPID(),y=i.getPPBLINK(),I=i.getPPBUID();if(I&&null!=I&&I.length>0){var T={};T.cookieId=I,T.contentType="JSONP",i.XDR(i.getEndpoints().setCookie,T,function(e){})}if(k.trim().length>0){var T={};T.postId=k,T.contentType="JSONP",T.appId=p.config.appID,"E"!=y&&"S"!=y&&"K"!=y||(T.linkType=y),i.XDR(i.getEndpoints().backvisit,T,function(e){})}}}if("Q"==m.get("type")){i.addClass(g,"pubble-cw-isvisitor"),g.removeClass("pubble-cw-isadmin");var S=m.get("author").email;if("anon@pubble.co"==m.get("author").email&&(S=""),""==S&&p.config.user.uid>0&&i.isAuthor(p,m.get("author"))&&(S=p.config.user.email),$(".pubble-cw-email-input").val(S),""!=S){l.handleGDPR("email"),l.$el.find(".pubble-cw-getnotif-content-transcript-email").removeClass("pubble-cw-hasnoemail");var q=l.$el.find(".pubble-cw-getnotif-content-transcript-email").find(".pubble-cw-btn-transcript-email");q.attr("aria-hidden",!1),q.attr("tabindex",0),q.attr("aria-disabled",!1)}l.email=S}else m.get("author").id==p.config.parameters.communityBot.id&&"G"!=m.get("type")?(i.addClass(g,"pubble-cw-isbot"),g.removeClass("pubble-cw-isadmin")):m.get("visitor")?(i.addClass(g,"pubble-cw-isvisitor"),g.removeClass("pubble-cw-isadmin")):(i.addClass(g,"pubble-cw-isadmin"),g.removeClass("pubble-cw-isvisitor"));$(".pubble-cw-notif-link").html(m.get("shortUrl")),"Q"==m.get("type")&&(l.sms&&""!=l.sms||m.get("author").phone&&""!=m.get("author").phone&&(l.sms=m.get("author").phone,l.handleSMS(l.sms),l.handleGDPR("phone")));var P=$(".pubble-cw-getnotif");P.removeClass("pubble-off").removeClass("pubble-cw-getnotif-on"),i.addClass(P,"pubble-cw-getnotif-off"),l.conversationId=m.get("conversationId"),l.questionId=m.get("count"),p.conversationId=l.conversationId,p.questionId=l.questionId,l.vent.trigger("init:presence",l.conversationId),l.stage="free",l.botTalked=4;$(".pubble-sb-bubble");null!==p.config.user&&p.config.user.uid>0&&"account"==p.config.user.type?l.clientName=p.config.user.displayName:l.clientName=m.get("author").alias,l.clicked=1;var A=($(".pubble-sb-bubble"),i.getCookieValue("pb-notiftimer"));"20"!=m.get("status")&&"40"!=m.get("status")||null!=A||null==A&&i.setShortCookie("pb-notiftimer","true"),n.append(g),"Q"==m.get("type")&&l.updateServer(),$(".pubble-cw-input-textarea-placeholder").html(i.uiGetText("Message")),$(".pubble-cw-input-textarea-send").html(i.uiGetText("Send"));var D=!1,j=!1,_=!1;l.chatCollection.clear(),$.each(u,function(e,t){var c=1,u=new o;u=r.setPost(u,t),"F"==u.get("type")&&u.set("content",i.uiGetText("These FAQs may help")),u.get("visitor")||u.get("author").id!=p.config.parameters.communityBot.id||p.config.parameters.postAsCommunity&&"C"==u.get("type")&&u.get("content")&&u.get("content").indexOf("has been assigned to your question")>-1&&u.set("content","An agent has been assigned to your question."),u.get("visitor")||u.get("author").id==p.config.parameters.communityBot.id||(_=!0,l.conversationMods.includes(u.get("author").alias)||(l.conversationMods.push(u.get("author").alias),l.vent.trigger("app:conversation:mods")));var b=new a({model:u});u.set("posted",1);var f=b.render().$el,h=u.get("atts");if(l.chatCollection.add(u),h&&h.length>0){var m=!1,v=f.find(".pubble-cw-att-container");$.each(h,function(e,t){if("link"==t.get("type")||"tweet"==t.get("type"))return!0;var n=new s({model:t}),a=n.render().$el;"faq"==t.get("attType")&&(m=!0,l.vent.trigger("pubble:faq:atts",t,a)),"photo"==t.get("attType")||"video"==t.get("attType")?i.addClass(f,"pubble-cw-panel-dialog-item-hasmedia"):"file"!=t.get("attType")&&"file"!=t.get("attType")||i.addClass(f,"pubble-cw-panel-dialog-item-hasfile"),"email"!=t.get("attType")&&"phone"!=t.get("attType")&&"skip"!=t.get("attType")?(v.append(a),v.removeClass("pubble-off")):("phone"==t.get("attType")&&i.addClass(f,"pubble-cw-contact-phone"),"email"==t.get("attType")&&i.addClass(f,"pubble-cw-contact-email"),"skip"==t.get("attType")&&u.get("type"))}),m&&i.addClass(f,"pubble-cw-panel-dialog-item-isfaq")}if(m||"F"!=u.get("type")||(c=0),"Q"==u.get("type"))return!0;if(0==u.get("author").id||"Q"==u.get("type")||u.get("author").id==l.author.id&&u.get("visitor")?(i.addClass(f,"pubble-cw-isvisitor"),f.removeClass("pubble-cw-isadmin")):u.get("author").id!=p.config.parameters.communityBot.id&&!u.get("author").bot||"G"==u.get("type")?u.get("visitor")?(i.addClass(f,"pubble-cw-isvisitor"),f.removeClass("pubble-cw-isadmin")):(i.addClass(f,"pubble-cw-isadmin"),f.removeClass("pubble-cw-isvisitor")):(i.addClass(f,"pubble-cw-isbot"),f.removeClass("pubble-cw-isadmin")),f.find(".pubble-cw-tick-server").removeClass("pubble-cw-tick-server-off"),i.addClass(f.find(".pubble-cw-tick-server"),"pubble-cw-tick-server-on"),f.parents(".pubble-cw-dialog-item-footer").find(".pubble-cw-dialog-item-status").html(i.uiGetText("Not seen yet")),D&&(j=!0),(u.get("content").indexOf("case it takes a while to reply")>-1||u.get("content").indexOf("How do you want to be notified")>-1)&&($(".pubble-cw-isContactMsg").remove(),D=!0),c){var g=10086;u.get("visitor")||(g=u.get("author").id+10086);var w=$(".pubble-cw-panel-dialog-item").last();if(w.length>0&&w.attr("data")==g?i.addClass(f,"pubble-cw-islast"):(i.addClass(f,"pubble-cw-isfirst"),i.addClass(f,"pubble-cw-islast")),f.attr("data",g),"G"==u.get("type")?n.prepend(f):n.append(f),f.hasClass("pubble-cw-islast")&&g==f.prev().attr("data")&&f.prev().removeClass("pubble-cw-islast"),0==u.get("author").id||"Q"==u.get("type")||u.get("author").id==l.author.id);else if(u.get("author").id==p.config.parameters.communityBot.id);else if(!u.get("visitor")||l.onlines&&l.onlines.length>0){var y=$(".pubble-cw-tick-mod");$.each(y,function(e,t){$(t).removeClass("pubble-cw-tick-mod-off"),i.addClass($(t),"pubble-cw-tick-mod-on"),$(t).parents(".pubble-cw-dialog-item-footer").find(".pubble-cw-dialog-item-status").html(i.uiGetText("Seen"))})}}u.get("author").id>0&&d.push(u.get("author").id)}),m.get("author")&&(m.get("author").id>0||""!=m.get("author").email&&"anon@pubble.co"!=m.get("author").email||""!=m.get("author").phone)&&(j=!0),j||C||_||(l.stage="contact",l.$el.find(".pubble-cw-input-iscredentials").removeClass("pubble-off"),l.hideInput()),l.vent.trigger("app:conversation:mods"),l.$el.find(".pubble-cw-panel").hasClass("pubble-move")&&!p.isMobile||l.scrollToBottom(),30==e.conversationRoot.status?(l.resolveUI(),l.closeConversation=1):i.addClass(l.$el.find(".pubble-cw-endconv"),"pubble-off"),$(".pubble-cw-chatbox").removeClass("pubble-off"),i.addClass($(".pubble-cw-invalidq"),"pubble-off"),l.handlePrompt();var P=$(".pubble-cw-getnotif");P.removeClass("pubble-cw-getnotif-on"),i.addClass(P,"pubble-cw-getnotif-off")}else{var E=i.getRefer();i.mixlog("cw-fatal-error",{landingPage:p.config.pageURL,landingPage2:window.location.href,communityId:p.config.communityId,appId:p.config.appID,position:"2",conversationId:l.conversationId,referrer:E},l.track),l.robotChat(i.uiGetText("Ooops....something went wrong. Please click below to ask a new question"),function(){}),i.addClass($(".pubble-cw-chatbox"),"pubble-off")}}},greeting:function(e,t){e&&e.hasClass("pubble-cw-contact-username")&&(e=e.parent().find(".pubble-cw-contact-title"));var n=e.attr("data-name");void 0==n&&(n=e.attr("data-tag-name")),e&&void 0!=n&&(t.$el.find(".pubble-cw-top-title").html(n),p.config.parameters.operational||i.addClass(t.$el.find(".pubble-cw-top-status-community"),"pubble-off"),i.addClass(t.$el.find(".pubble-cw-top-status"),"pubble-off"),setTimeout(function(){0==t.$el.find(".pubble-cw-istrigger").length&&($(".pubble-cw-isgreeting").remove(),t.robotChat(i.uiGetText("Please type your question below"),function(){},"greeting",!0))},1e3))},loadConversation:function(e,t,n,a){this.vent.trigger("app:conversation:mods",0),this.vent.trigger("app:welcome:header",!0),this.conversationMods=[],this.vent.trigger("app:conversation:mods",0);var o=this;o.skippedFaq=0,delete o.promptedText,$(document).trigger("app:desktop:permission"),this.showOfficeHour=1,this.officeHourShowed=0,this.$el.find(".pubble-cw-chatlist-loading").removeClass("pubble-off"),this.$el.find(".pubble-cw-panel-dialog").html("");this.$el.find(".pubble-cw-top-status-community"),this.$el.find(".pubble-cw-top-status");this.$el.find(".pubble-cw-top-title").removeClass("pubble-off").html(i.headerText()),this.stage="free";var s={conversationId:e,contentType:"JSONP",postTypes:"Q,A,C,F,N,P,E,K,G",pageSize:500,appId:t,sort:"dateCreated"};a&&(delete s.conversationId,s.conversationToken=a);var o=this,l={};return i.XDR(i.getEndpoints().conversation,s,function(t){if("404"==t.code)return o.$el.find(".pubble-cw-btn-newquestion-btn2").first().trigger("click"),i.addClass($(".pubble-cw-chatlist-loading"),"pubble-off"),!1;if("414"==t.code||"413"==t.code){
var a=o.$el.find(".pubble-cw-modal-expire");return a.removeClass("pubble-hide"),i.addClass(a,"pubble-show"),$(".pubble-cw-input-textarea").blur(),!1}i.invokeConversationHandler(e,t.conversationRoot.count),i.addClass($(".pubble-cw-chatlist-loading"),"pubble-off");var l=p.config.parameters.conversations;if(0==l.length&&o.conversationCollection&&o.conversationCollection.models.length>0&&(l=o.conversationCollection.models),0==l.length&&(o.$el.find(".pubble-cw-panel-controls-newq").removeClass("pubble-cw-panel-controls-emptylist"),i.addClass(o.$el.find(".pubble-cw-panel-controls-newq"),"pubble-cw-panel-controls-listofone")),-1==window.location.href.indexOf("visitor=false")&&i.setCookieValue("pb-conversationId",e),"200"!=t.code&&!t.conversationRoot)return!1;s.conversationId=t.conversationRoot.conversationId,i.XDR(i.getEndpoints().assignees,s,function(e){if("200"==e.code){var t=e.data,n="";if(null!=t&&t.length>0&&($.each(e.data,function(e,t){t.name=r.decodeHtml(t.name),o.conversationMods.includes(t.name)||o.conversationMods.push(t.name)}),o.vent.trigger("app:conversation:mods",0)),""!=n){n=n.trim();var i=/,$/gi;n=n.replace(i,"")}}}),o.renderConversation(t,n),o.$el.find(".pubble-cw-emailsent").removeClass("pubble-cw-emailsent")},function(){},l),!1},processing:function(){var e=this;if(this.adminChat)i.mixlog("cw-faq-faq-nofaq-query-2",{landingPage:p.config.pageURL,communityId:p.config.communityId,appId:p.config.appID,conversationId:this.conversationId,content:this.content},this.track),this.showInput();else{$(".pubble-cw-input-processing").removeClass("pubble-off");var t=0,n=window.setInterval(function(){e.socketConnected&&e.conversation_subscribed?(window.clearInterval(n),setTimeout(function(){i.addClass($(".pubble-cw-input-processing"),"pubble-off"),e.faq()},200)):++t>10&&(i.addClass($(".pubble-cw-input-processing"),"pubble-off"),e.faq())},200)}},faq:function(e,t){var n=this;if(!e&&n.promptedText&&(e=n.promptedText),!n.content||-1==n.content.indexOf("?")||!p.config.parameters.promptFaq){var a=n.helloWords,o=a.split(","),r=!0,s=n.content.toLowerCase().trim(),l=0;if($.each(o,function(e,t){if(s==t.toLowerCase().trim()){if(!n.skippedFaq){var a=!1;return null!=p.config.user&&p.config.user.uid>0&&"account"==p.config.user.type?a=1:n.sms&&""!=n.sms?a=1:n.email&&""!=n.email&&(a=1),a&&n.robotChat(i.uiGetText("Hello, how can we help?"),function(){}),n.skippedFaq=1,l=1,!1}return!1}}),l)return n.showInput(),i.addClass($(".pubble-cw-input-processing"),"pubble-off"),!1;if((t||n.skippedFaq)&&(r=1),!r||!p.config.parameters.promptFaq)return $(".pubble-cw-input-textarea-placeholder").html(i.uiGetText("Your message here...")),n.showInput(),i.addClass($(".pubble-cw-input-processing"),"pubble-off"),n.nocontact(),i.mixlog("cw-faq-faq-nofaq-query-1",{landingPage:p.config.pageURL,communityId:p.config.communityId,appId:p.config.appID,conversationId:n.conversationId,content:n.content,hasQuestionMark:-1==n.content.indexOf("?")},n.track),!1}n.faqChecked=1,i.mixlog("cw-faq-faq-faq-query",{landingPage:p.config.pageURL,communityId:p.config.communityId,appId:p.config.appID,conversationId:n.conversationId,content:n.content},n.track);var c={communityId:p.config.communityId,appId:p.config.appID,conversationId:n.conversationId,ignoreEmptyResult:!0,code:"faq"};void 0!=e&&(c.searchTerm=e);delete n.promptedText,i.Xpost(!0,i.getEndpoints().faq,c,function(e){n.skippedFaq=0,setTimeout(function(){$(".pubble-cw-input-processing").hasClass("pubble-off")||n.showInput()},2e4),"404"!=e.code&&"400"!=e.code||("freefaq"!=n.stage&&"contact"!=n.stage||n.nocontact(),n.stage="free",n.showInput())})},shiftView:function(e,t){var n=this.$el.find(".pubble-cw-chatlist-container"),a=this.$el.find(".pubble-cw-chat-container"),o=this.$el.find(".pubble-cw-contactlist-container"),r=this.$el.find(".pubble-cw-form-container"),s=this.$el.find(".pubble-cw-faq-container"),l=this.$el.find(".pubble-cw-getnotif-handle"),c=this.$el.find(".pubble-cw-top-list"),u=this.$el.find(".pubble-cw-top-assign"),d=this.$el.find(".pubble-cw-top-conv"),b=this.$el.find(".pubble-cw-top-faq");if(t&&t&&(p.config.parameters.searchFaq||this.conversationCollection.models.length>0)&&(e="list"),"chat"==e&&this.vent.trigger("app:welcome:header",!0),"faqs"==e)this.vent.trigger("app:welcome:header",!0),i.showHomeScreen(!1),i.showView(s,"style"),i.showView(b),i.hideView(a),i.hideView(r),i.hideView(n),i.hideView(u),i.hideView(o),i.hideView(a),i.hideView(c,!0),i.hideView(l,!0),i.hideView(d,!0);else if("userlist"==e)this.vent.trigger("app:welcome:header",!0),i.showView(o),i.showView(u),i.hideView(a),i.hideView(n),i.hideView(l,!0),i.hideView(s,!1,"style"),i.hideView(b,!0),i.hideView(c,!0),i.hideView(d,!0),i.hideView(r),i.showHomeScreen(!1);else if("list"==e)i.hideView(u,!0),i.hideView(d,!0),i.hideView(l,!0),i.hideView(s,!1,"style"),i.showView(c),i.showView(n),i.hideView(a),i.hideView(o),i.hideView(r),i.hideView(b,!0),this.vent.trigger("app:welcome:header",!1),i.showHomeScreen(!0);else{i.hideView(u,!0),i.hideView(c,!0),i.showView(d),i.hideView(n),i.hideView(b,!0),this.$el.find(".pubble-cw-panel").removeClass("pubble-move"),i.fixMobileBody(!0);var f=this.$el.find(".pubble-cw-shadow");i.showView(f);var h=this.$el.find(".pubble-sb-bubble");i.hideView(h),i.hideView(s,!1,"style");var m=this.$el.find("#pb_sidebar");i.addClass(m,"pubble-expanded"),m.attr("aria-label",i.uiGetText("Close Livechat")),i.handleContainer(this.$el,!0),this.vent.trigger("pubble:iframe:resize","max"),i.hideView(o),i.hideView(r),i.showView(a),i.showHomeScreen(!1);var v=this;setTimeout(function(){v.$el.find(".pubble-cw-input-textarea").val("").focus().trigger("click")},100),this.scrollToBottom()}},resetUI:function(e){var t=$(e.target);if(!i.isInside(t,".pubble-cw-input-textarea-emoji-list-container")&&!t.hasClass("pubble-cw-action-emoji")&&!t.hasClass("pubble-cw-input-textarea-emoji-list-container")){var n=$(".pubble-cw-input-textarea-emoji-list-container"),a=$(".pubble-cw-action-emoji");i.hideView(n,!1,"style"),n.find(".pubble-emoji-sronly").html(T.getText("Emoji list collapsed")),a.attr("aria-expanded",!1)}},render:function(){var e=this;e.pushClicked=0,p.isMobile=i.isMobile();var t=i.getConversationID(),n=i.getConverationToken(),a=i.getAppIdFromUrl();window.msg_app=e,p.config.contactFirst=!1,window.xxx=e,p.init_Time=(new Date).getTime();var s={};$UScore.extend(s,S.Events),this.vent=s,this.conversationMods=[],this.eventModule=new m({app:e}),this.formModule=new x({app:e}),this.liveModule=new v({app:e});var l=$("#pubble_app_"+p.config.appID),c=l.attr("data-app-callback");if(this.locale=l.attr("data-app-locale"),this.defaultTags=l.attr("data-app-tags"),null!=c){var f;try{f=p.config.parameters.iFrame?window.parent.window:window,i.executeFunctionByName(c,f,[])}catch(ee){}}e.clientName=l.attr("data-user-name"),p.customName=e.clientName,p.config.assigneeRequired=l.attr("data-assignee-required"),e.customOfflineMsg=l.attr("data-offline-msg"),"36164"==p.config.appID&&(e.customOfflineMsg="Thank you for getting in touch. We are currently assisting a high number of customers at this time. One of our team will reply to your question as quickly as possible. If you include your email or phone number you will receive a message when we have replied.'"),e.email=l.attr("data-user-email"),p.email=e.email,p.customRole=l.attr("data-user-type"),"before"==p.config.parameters.requestContact&&(p.config.contactFirst=!0),$(document).on("click",this.resetUI);var h={contentType:"JSONP"};if(i.XDR(i.getEndpoints().getIp,h,function(t){var n={};200==t.code&&(n.ip=t.ip,null!=t.data&&(n=t.data,n.ip=t.ip),t.data.country&&(window.pubble_ip_country=t.data.country.toLowerCase(),(!e.sms||e.sms.length<3)&&e.setDefaultCountry(window.pubble_ip_country+"")))}),!p.config.parameters.active)return!1;var e=this;V=i.getFilterLandingPage(),p.config.pageURL=V;var l=$("#pubble_app_"+p.config.appID);if(null!=l.attr("data-landingpage")&&(p.config.pageURL=l.attr("data-landingpage"),V=p.config.pageURL),p.config.visitorId&&(e.visitorId=p.config.visitorId),e.ui="",e.anything=!1,this.joined=!1,this.newcount=0,this.reloaded=!1,e.conversationId="",e.questionId=0,p.conversationId="",p.questionId="",e.presence_inited=0,e.latestConversation=0,e.officeHourShowed=0,e.converstationInited=[],e.converstationSubscribedInited=[],e.visitedConversations=[],e.targetAccountId=-1,e.targetTag="",e.targetgroupid=-1,e.skippedFaq=0,e.helloWords="Hi,Hello,Hola,hallo,helo,hey,howdy,holla, holloa, halloo, halloa",delete e.promptedText,e.botClicked=0,e.showOfficeHour=1,window.pubble_proActiveChat=0,e.timeout&&(clearTimeout(e.timeout),delete e.timeout),e.t1&&(clearTimeout(e.t2),delete e.t1),e.t2&&(clearTimeout(e.t2),delete e.t2),e.notified=!1,this.adminChat=!1,this.adminFirst="",this.inited=!1,e.clicked=0,e.closeConversation=0,e.notifclicked=0,e.hasRead=0,e.track=1,e.socketConnected=0,e.faqChecked=0,e.onlines=[],e.enters=[],e.conversationSubs=[],e.conversationSubids=[],e.nocontacted=!1,e.linkClicked=0,e.updateAria=function(t){var n=e.$el.find(".pubble-cw-main-arialive");n.html(t);var i=setTimeout(function(){window.clearTimeout(i),n.html("")},2e3)},e.pusher&&e.conversationId){var g="conversation_"+e.conversationId;try{g&&e.pusher&&e.pusher.unsubscribe(g)}catch(E){}}p.config.parameters.rules&&p.config.parameters.rules.length>0&&$.each(p.config.parameters.rules,function(t,n){"greet"==n.action?e.greet=n:"intro"==n.action&&(e.intro=n)}),this.$el.html(this.template(this.model)),"en"!=this.locale&&i.addClass(e.$el,"pubble-cw-notenglish"),p.config.parameters.iFrame&&$(document).prop("title","Live chat - "+p.config.appName),i.addClass(this.$el.find(".pubble-cw-contactbot"),"pubble-sb-theme-"+p.config.parameters.sidebarTheme);var w=this.$el.find(".pubble-cw-hs-section-isconvlist");w.on("keydown",function(e){var t=$(e.target);if(40==e.keyCode&&t.hasClass("pubble-cw-hs-section-isconvlist")){var n=w.find(".pubble-cw-chat-item");n.length>0&&n.first().focus()}});var q=this.$el.find(".pubble-cw-panel-dialog");this.$el.on("keydown",function(t){9==t.keyCode?i.addClass(e.$el,"pubble-user-is-tabbing"):27==t.keyCode?e.$el.find(".pubble-cw").hasClass("pubble-move")||e.$el.find("#pb_sidebar").trigger("click"):!t.altKey||67!=t.keyCode&&89!=t.keyCode||e.$el.find(".pubble-cw-getnotif").hasClass("pubble-cw-getnotif-off")||e.$el.find(".pubble-cw-getnotif-content-close-btn").trigger("click")}),q.on("keydown",function(e){var t=$(e.target);if(40==e.keyCode&&t.hasClass("pubble-cw-panel-dialog")){var n=q.find(".pubble-cw-panel-dialog-item");n.length>0&&n.first().focus()}});var P=this.$el.find("#pb_sidebar");P.on("keydown",function(t){if(9==t.keyCode&&!t.shiftKey&&!e.$el.find(".pubble-cw").hasClass("pubble-move"))return e.$el.find(".pubble-cw-panel-controls-newq").focus(),t.stopPropagation(),!1}),i.eventWrapper(P),new I({app:e}).render();var A=new k({app:e});this.$el.find(".pubble-cw-hs-content-faqsearch").html(A.render().$el),p.config.parameters.searchFaq||i.hideView(e.$el.find(".pubble-cw-hs-section-isfaq"),!0),i.showHomeScreen=function(t){var n=e.$el.find(".pubble-cw-homescreen-container");t?i.showView(n):i.hideView(n)},i.addClass(this.$el,"pubble-opt-templatecolor-is"+p.config.parameters.theme),i.addClass(this.$el,"pubble-opt-template-is"+p.config.parameters.template);var D=p.config.parameters.conversations;p.config.parameters.disableNewActivity&&(i.addClass($(".pubble-cw-input-endconv-create"),"pubble-off"),i.addClass($(".pubble-cw-btn-newquestion-btn1"),"pubble-off")),e.$el.find(".pubble-cw-input-textarea").attr("placeholder",i.uiGetText("Ask your question here..."));var j=i.getCookieValue("pb-conversationId"),_=i.getCookieValue("pb-qasked");null!=j&&j.length>5||null!=_?e.vent.trigger("app:conversations:load",e):e.vent.trigger("app:sidebar:check",this,D),i.addClass(e.$el.find(".pubble-cw-panel-controls-newq-number"),"pubble-off"),e.vent.trigger("pubble:iframe:resize","d");var E=this.$el;i.uiText(E,"app-sb-text","Questions<br> Comment or Message"),i.uiText(E,"app-textarea-text","Message..."),i.uiText(E,"app-expire-text","For security reasons and to help protect your data, the conversation link has expired.<br/>Please use the button below to generate a new secure link (which will be sent to you via email or text), or ask a new question."),i.uiText(E,"app-newlink","Generate link"),i.uiText(E,"app-newq","Ask new question"),i.uiText(E,"expire-text2","A new secure link to the conversation was sent to you. Please access it from your email/text to continue the conversation."),i.uiText(E,"app-gdpr-title","GDPR Privacy and Compliance"),i.uiText(E,"app-deleteme","Please erase my personal data as defined in Article 4(1) GDPR. Deletion steps will be sent via email / Text."),i.uiText(E,"deleteme-btn","Delete me"),i.uiText(E,"app-deleteme-confirmtext","An email/text was sent to you. If u want to continue the 'Delete me' process please follow instructions in that message"),i.uiText(E,"app-with","with"),i.uiText(E,"app-privacy-opts","Please select an option below"),i.uiText(E,"app-newlink","Generate link"),i.uiText(E,"app-privacy-click","click tile to start messaging"),i.uiText(E,"app-panel-1","Revisit old conversations"),i.uiText(E,"app-panel-2","Want to ask a question?"),i.uiText(E,"app-panel-3","You have a new reply to another question"),i.uiText(E,"app-help-1","Click here to ask a question"),i.uiText(E,"app-help-2","Click to view your previous asked questions or ask a new one"),i.uiText(E,"app-rating-success","Thanks for taking the time to vote!"),i.uiText(E,"app-back","Back"),i.uiText(E,"pubble-cw-top-faq-1","FAQs"),i.uiText(E,"pubble-cw-top-faq-2","search our faqs"),i.uiText(E,"pubble-cw-hs-title-1","Previous conversations"),i.uiText(E,"pubble-cw-hs-title-2","Search FAQs"),i.uiText(E,"pubble-cw-hs-button","Ask a question"),i.uiText(E,"app-transcript-1","Transcript of conversation was sent to email address"),i.uiText(E,"app-transcript-2","Send transcript to email"),i.uiText(E,"app-transcript-3","Please enter email above to send transcript via email"),i.uiText(E,"app-transcript-4","Email transcript"),i.uiText(E,"app-transcript-5","Open link with the conversation transcript"),i.uiText(E,"app-transcript-6","View transcript"),i.uiText(E,"app-transcript-7","Get notified when you receive a message to the questions you ask"),i.uiText(E,"app-transcript-8","Transcript of conversation was sent to email address"),i.uiText(E,"app-transcript-9","Send transcript to email"),i.uiText(E,"app-transcript-11","Email transcript"),i.uiText(E,"app-transcript-10","Please enter email above to send transcript via email"),i.uiText(E,"app-transcript-12","Open link with the conversation transcript"),i.uiText(E,"app-transcript-13","View transcript"),i.uiText(E,"app-transcript-14","You can revisit conversation by using this link "),i.uiText(E,"app-transcript-15","If you are not this user you can clear all the data and all conversations and ask a new question "),i.uiText(E,"app-transcript-16","Close"),i.uiText(E,"app-addnewq","Ask a question"),i.uiText(E,"app-istyping","is typing..."),i.uiText(E,"app-emoji","Emoji"),i.uiText(E,"app-skip","Skip"),i.uiText(E,"app-send","Send"),i.uiText(E,"app-sms","Text"),i.uiText(E,"app-email","Email"),i.uiText(E,"app-link","Link"),i.uiText(E,"app-send","Send"),i.uiText(E,"app-validnum","Please add a valid number"),i.uiText(E,"app-submit","Submit"),i.uiText(E,"app-gdpragree","In order to submit contact details you have to agree to GDPR listed below"),p.config.parameters.placeholders&&p.config.parameters.placeholders.gdprText?i.uiText(E,"cc-pconfirm",p.config.parameters.placeholders.gdprText):i.uiText(E,"cc-pconfirm","I consent that any personal data I provide can be processed in accordance with the"),i.uiText(E,"cc-privacy","Privacy Statement"),i.uiText(E,"app-validemail","Please provide a valid email!"),i.uiText(E,"app-enteremail","enter email"),i.uiText(E,"app-gotit","Got it"),i.uiText(E,"app-processing","Processing"),i.uiText(E,"app-anythingelse","Have another question?"),i.uiText(E,"app-faqhelp","Did these FAQs help?"),i.uiText(E,"app-yes","Yes"),i.uiText(E,"app-no","No"),i.uiText(E,"app-share","This will share your location with the moderator. Continue?"),i.uiText(E,"app-Cancel","Cancel"),i.uiText(E,"app-chatclosed","Chat Closed"),i.uiText(E,"app-newchat","New Chat"),i.uiText(E,"app-newconvconfirm","Opening a new conversation will close this one permanently. Are you sure?"),i.uiText(E,"app-newq","New Question"),i.uiText(E,"app-cancel","Cancel"),i.uiText(E,"app-askc","Ask community"),i.uiText(E,"app-asknewq","Ask a question"),this.$el.find(".pubble-lan-cc-enteremail").attr("placeholder",i.uiGetText("enter your email"));var N=l.attr("pubble-data-customcls");N&&i.addClass(this.$el,N),p.refreshurl=l.attr("pubble-data-refreshurl");var l=$("#pubble_app_"+p.config.appID);null==l.attr("data-app-isask")&&null==l.attr("data-app-noiframe")&&p.config.parameters.iFrame&&(e.vent.trigger("pubble:iframe:resize","d"),i.addClass(this.$el,"pubble-cw-isiniframe"),$("body").attr("style","overflow:hidden; zoom:1"));var L=null!=p.config.user&&p.config.user.uid>0;if(L){this.$el.find(".pubble-cw-getnotif-content-transcript-email").removeClass("pubble-cw-hasnoemail");var M=e.$el.find(".pubble-cw-getnotif-content-transcript-email").find(".pubble-cw-btn-transcript-email");M.attr("aria-hidden",!1),M.attr("tabindex",0),M.attr("aria-disabled",!1)}i.addClass(this.$el.find(".pubble-cw"),"pubble-sb-"+p.config.parameters.sidebarIcon),i.addClass(this.$el.find(".pubble-cw"),"pubble-cw-"+p.config.parameters.background),e.intro&&e.intro.active?(e.headerAvailable=1,e.$el.find(".pubble-cw-panel-top-welcome-title").find("span").html(e.intro.title),e.$el.find(".pubble-cw-panel-top-welcome-msg").find("span").html(i.unescapeHTML(e.intro.text)),i.addClass(e.$el,"pubble-opt-screen-welcome"),i.addClass(e.$el.find("pubble-cw-panel"),"pubble-cw-panel-welcome")):e.$el.removeClass("pubble-opt-screen-welcome");var l=$("#pubble_app_"+p.config.appID);if(null==l.attr("data-app-isask")&&null==l.attr("data-app-noiframe")&&("bl"==p.config.parameters.sidebarPosition?(i.addClass(e.$el,"pubble-opt-pos-left"),e.$el.removeClass("pubble-opt-pos-right")):(i.addClass(e.$el,"pubble-opt-pos-right"),e.$el.removeClass("pubble-opt-pos-left"))),i.addClass(this.$el,"pubble-app"),this.$el.find(".pubble-cw-powered-link").removeAttr("href").removeAttr("target"),this.$el.find(".pubble-cw-action-post").on("click",function(){e.$el.find(".pubble-cw-input-textarea-send").trigger("click"),e.$el.find(".pubble-cw-chatbox").removeClass("pubble-cw-textarea-hastext"),i.hideView(e.$el.find(".pubble-cw-action-post"),!1,"style");var t=e.$el.find(".pubble-cw-action-att"),n=e.$el.find(".pubble-cw-action-post");n.removeClass("pubble-show"),i.addClass(n,"pubble-hide"),t.removeClass("pubble-hide"),i.addClass(t,"pubble-show"),e.$el.find(".pubble-cw-input-textarea").focus()}),p.isMobile){var O=this.$el.find(".pubble-cw-input-textarea");O.on("keyup",function(){var t=O.val().trim().length,n=e.$el.find(".pubble-cw-action-att"),a=e.$el.find(".pubble-cw-action-post");t>0?(n.removeClass("pubble-show"),i.addClass(n,"pubble-hide"),a.removeClass("pubble-hide"),i.addClass(a,"pubble-show")):(a.removeClass("pubble-show"),i.addClass(a,"pubble-hide"),n.removeClass("pubble-hide"),i.addClass(n,"pubble-show"))})}var L=null!=p.config.user&&p.config.user.uid>0&&"account"==p.config.user.type;if(L){i.addClass(this.$el,"pubble-cw-loginuser");var R=i.imgwrapper(i.handleImg(p.config.user.avatar,p.config.user.displayName,"48"));this.$el.find(".pubble-cw-logged-avatar").html(R),this.$el.find(".pubble-cw-getnotif-handle").removeClass("pubble-off"),this.$el.find(".pubble-cw-getnotif-handle-ico-avatar").html(R),this.$el.find(".pubble-cw-logged-username").html(p.config.user.displayName),this.$el.find(".pubble-cw-logged-text").html(i.uiGetText("You are currently logged in."))}p.config.parameters.enableGdpr||($(".pubble-cw-chatbox").removeClass("pubble-gdpr-request"),this.$el.find(".pubble-gdpr").remove(),this.$el.find(".pubble-cw-input-buttonbar-form-submit").attr("aria-disabled",!1),this.$el.find(".pubble-gdpr-parent").removeClass("pubble-md-gdpr-off")),this.$el.attr("style","display:none"),i.addClass(this.$el,"pubble-cw-app-visi"),p.config.parameters.fileUpload||this.$el.find(".pubble-cw-action-att").remove(),this.$el.find(".pubble-cw-getnotif-content-close-btn").on("click",function(){e.$el.find(".pubble-cw-getnotif-handle").trigger("click")}),this.$el.find(".pubble-cw-getnotif-content-close-btn").on("keydown",function(t){if(9==t.keyCode&&!t.shiftKey)return e.$el.find(".pubble-cw-panel-controls-newq").focus(),t.preventDefault(),!1}),this.$el.find(".pubble-sb-bubble-close").on("click",function(t){t.stopPropagation(),t.preventDefault();var n=e.$el.find(".pubble-sb-bubble");i.addClass(n,"pubble-move"),e.$el.find(".pubble-sb-bubble-item").remove(),e.vent.trigger("pubble:iframe:resize","d")}),this.$el.find(".pubble-cw-expire-killsession").on("click",function(t){t.stopPropagation(),t.preventDefault();var n=e.$el.find(".pubble-cw-expire-killsession");if(e.$el.find(".pubble-sb-close").trigger("click"),e.$el.find(".pubble-cw-expire-newquestion").trigger("click"),n.hasClass("pubble-disabled"))return!1;var a=e.$el.find(".pubble-sb-bubble");i.addClass(a,"pubble-move")}),this.$el.find(".pubble-cw-expire-newlink").on("click",function(t){t.stopPropagation(),t.preventDefault();var n=e.$el.find(".pubble-cw-expire-step1"),a=e.$el.find(".pubble-cw-expire-step2");n.removeClass("pubble-show"),i.addClass(n,"pubble-hide"),a.removeClass("pubble-hide"),i.addClass(a,"pubble-show"),e.$el.find(".pubble-cw-expire-killsession").removeClass("pubble-disabled").html(i.uiGetText("Close"));var o=i.getConverationToken(),r=i.getConversationID();if("-1"==o&&"-1"==r)return!1;var s={},l={conversationToken:o,contentType:"JSONP"};"-1"!=r&&(l.conversationId=r,delete l.conversationToken),i.XDR(i.getEndpoints().tokenReset,l,function(){},function(){},s)}),this.$el.find(".pubble-cw-hs-section-isnewconv").on("click",function(t){t.stopPropagation(),t.preventDefault(),e.$el.find(".pubble-cw-btn-newquestion-btn").trigger("click"),i.addClass(e.$el.find(".pubble-cw-chatlist-loading"),"pubble-hide")}),this.$el.find(".pubble-cw-expire-newquestion").on("click",function(t){t.stopPropagation(),t.preventDefault(),$(".pubble-cw-btn-newquestion-btn").trigger("click"),i.addClass(e.$el.find(".pubble-cw-chatlist-loading"),"pubble-hide")}),this.$el.find(".pubble-cw-gdprmodal-close").on("click",function(){var t=e.$el.find(".pubble-cw-gdprmodal");t.removeClass("pubble-show"),i.addClass(t,"pubble-hide")}),this.$el.find(".pubble-cw-gdprmodal-deleteme-btn").on("click",function(){var t=e.$el.find(".pubble-cw-gdprmodal-deleteme-confirm");t.removeClass("pubble-hide"),i.addClass(t,"pubble-show");var n=e.$el.find(".pubble-cw-gdprmodal-deleteme-btn");n.removeClass("pubble-show"),i.addClass(n,"pubble-hide");var a=e.$el.find(".pubble-cw-gdprmodal-deleteme-text");a.removeClass("pubble-show"),i.addClass(a,"pubble-hide"),setTimeout(function(){a.removeClass("pubble-hide"),i.addClass(a,"pubble-show"),n.removeClass("pubble-hide"),i.addClass(n,"pubble-show"),t.removeClass("pubble-show"),i.addClass(t,"pubble-hide")},8e3)}),this.$el.find(".pubble-sb-bubble-textarea").on("click",function(e){e.stopPropagation(),e.preventDefault(),$(e.target).parents(".pubble-sb-bubble").find(".pubble-cw-panel-dialog-item").trigger("click")}),i.wrapEnterkey(this.$el.find(".pubble-cw-action-emoji")),this.$el.find(".pubble-cw-action-emoji").on("click",function(t){t.stopPropagation(),t.preventDefault();var n=e.$el.find(".pubble-cw-action-emoji"),a=e.$el.find(".pubble-emoji-list-container"),o=e.$el.find(".pubble-emoji-list"),r=o.find(".pubble-emoji");if(a.off("keydown").on("keydown",function(e){var t=$(e.target);if((40==e.keyCode||39==e.keyCode)&&t.hasClass("pubble-emoji-list-container")){var n=o.find(".pubble-emoji");n.length>0&&n.first().focus()}}),0==r.length){o.html(C),r=o.find(".pubble-emoji"),i.addClass(r,"pubmd-is-show");var s=e.$el.find(".pubble-cw-input-textarea");$.each(r,function(n,o){var l=$(o);l.index=n,l.on("keydown",function(i){i.stopPropagation(),t.preventDefault();var a=$(i.target);a.hasClass("pubble-emoji")||(a=a.parent());var o,s=0,l=i.which;if(13==l&&(s=1),9==l||27==l)return i.preventDefault(),e.$el.find(".pubble-cw-action-emoji").trigger("click").focus(),!1;if(37==l){var o=a.prev();null!=o&&o.hasClass("pubble-emoji")||(o=r.last())}else if(38==l)n>8&&(B=n-9,o=r.eq(B));else if(39==l){var o=a.next();null!=o&&o.hasClass("pubble-emoji")||(o=r.first())}else if(40==l)n<44&&(B=n+9,o=r.eq(B));else if(13==l)return i.preventDefault(),a.trigger("click"),!1;return o?(o.hasClass("pubble-emoji")||(o=o.parent()),r.attr("tabindex",-1),o.attr("tabindex",0),o.get(0).focus(),!1):s?($(this).trigger("click"),!1):void 0}),e.$el.find(".pubble-cw-getnotif-drawer").on("keydown",function(t){9==t.keyCode&&t.shiftKey&&(!E.altKey||67!=E.keyCode&&89!=E.keyCode||(e.$el.find(".pubble-cw-getnotif-content-close-bt").trigger("click"),e.updateAria(T.getText("closed"))))}),l.on("click",function(t){t.preventDefault(),t.stopPropagation();var n=$(t.target);i.addClass(e.$el.find(".pubble-cw-chatbox"),"pubble-cw-textarea-hastext"),i.showView(e.$el.find(".pubble-cw-action-post"),"style"),n.hasClass("pubble-emoji")||(n=n.parents(".pubble-emoji"));var o=n.parents(".pubble-cw-input-textarea-emoji-list-container");i.hideView(o,!1,"style"),o.parents(".pubble-cw-chatbox").find(".pubble-cw-action-emoji").attr("aria-expanded",!1),i.addClass(o,"pubble-hide"),o.removeClass("pubble-show"),a.find(".pubble-emoji-sronly").html(T.getText("Emoji list expanded"));var r=s.val().trim();r.length>0?s.val(r+""+n.attr("data")):s.val(n.attr("data")),s.focus()})})}var l=o.find(".pubble-emoji");l.attr("tabindex",-1),l.first().attr("tabindex",0);var c=e.$el.find(".pubble-cw-input-textarea-emoji-list-container"),n=e.$el.find(".pubble-cw-action-emoji");return c.hasClass("pubble-hide")?(i.showView(c,"style"),n.attr("aria-expanded",!0),a.find(".pubble-emoji").first().focus(),a.find(".pubble-emoji-sronly").html(T.getText("Emoji list expanded"))):(i.hideView(c,!1,"style"),n.attr("aria-expanded",!1),a.find(".pubble-emoji-sronly").html(T.getText("Emoji list collapsed"))),!1}),this.$el.find(".pubble-cw-contactlist-container").find(".pubble-cw-btn-newquestion").html(i.uiGetText("Ask")+" "+i.headerText());var F=$(".pubble-cw-contactbot");if(top.location!=location)try{var B=$(top.document).find(".pubble-iframe");B.length>0&&(F=$(top.document).find(".pubble-cw-contactbot"))}catch(ee){}var U=e.$el.find(".pubble-cw-contact-list");this.botlist=[],this.addedlist=[],$.each(F,function(t,n){var i=$(n);if(void 0!=i.attr("data-accountId")||void 0!=i.attr("data-groupid")||void 0!=i.attr("data-tag")){var a={};a.accountId=i.attr("data-accountId"),a.groupid=i.attr("data-groupid"),a.tag=i.attr("data-tag");var o=i.attr("data-name");if(void 0==o&&(o=i.attr("data-tag-name")),void 0!=o){if(e.addedlist.includes(o))return!0;e.addedlist.push(o),a.name=o,e.botlist.push(a)}}});var H=p.config.parameters.directAssignees;$.each(e.botlist,function(t,n){var a=i.imgwrapper(i.handleImg("",n.name));(n.groupid||n.tag)&&(a="<img src='https://cdn.pubble.io/pubblebot/cw/images/pubble-group1.png' class='avatar'/>");var o=n.name,r=n.name;H&&null!=H&&$.each(H,function(e,t){n.accountId==t.id&&"account"==t.type?(a=i.imgwrapper(i.handleImg(t.avatar,t.name)),r=t.name,""!=t.desc&&(o=t.name,r=t.desc)):"app"==t.type&&n.groupid==t.id&&(a="<img src='https://cdn.pubble.io/pubblebot/cw/images/pubble-group1.png' class='avatar'/>",r=t.name)}),E.tag&&""!=E.tag&&(a="<img src='https://cdn.pubble.io/pubblebot/cw/images/pubble-group1.png' class='avatar'/>");var s='<div class="pubble-cw-contact-item"><div class="pubble-cw-contact-avatar">'+a+'</div><div class="pubble-cw-contact-title"';n.accountId&&(s=s+' data-accountId="'+n.accountId+'"'),n.groupid&&(s=s+' data-groupid="'+n.groupid+'"'),n.tag&&(s=s+' data-tag="'+n.tag+'"'),s=s+' data-name="'+o+'">'+o+'</div><div class="pubble-cw-contact-username">'+r+"</div></div>";var l=$(s);n.accountId&&(l.addClass("pubble-cw-contact-user-"+n.accountId),l.find(".pubble-cw-contact-username").html(i.uiGetText("community staff"))),n.tag?(l.addClass("pubble-cw-contact-tag"),l.find(".pubble-cw-contact-username").html(i.uiGetText("TAG"))):(l.addClass("pubble-cw-contact-group-"+n.groupId),l.find(".pubble-cw-contact-username").html(i.uiGetText("group"))),n.accountId&&l.addClass("pubble-cw-contact-ismod"),n.groupid&&l.addClass("pubble-cw-contact-ischannel"),n.tag&&l.addClass("pubble-cw-contact-istag pubble-cw-contact-ismod"),l.on("click",function(t){n.accountId&&(e.targetAccountId=n.accountId),n.groupid&&(e.targetgroupid=n.groupid),n.tag&&(e.targetTag=n.tag),$(".pubble-cw-btn-newquestion-btn").trigger("click"),e.greeting($(t.target),e),e.$el.find(".pubble-cw-top-title").html(n.name),p.config.parameters.operational||(i.addClass(e.$el.find(".pubble-cw-top-status-community"),"pubble-off"),i.addClass(e.$el.find(".pubble-cw-top-status"),"pubble-off"))}),U.append(l)}),this.$el.find(".pubble-cw-modal-close-button").on("click",function(){var t=e.$el.find(".pubble-cw-modal");t.removeClass("pubble-show"),i.addClass(t,"pubble-hide")}),p.config.parameters.fileUpload&&setTimeout(function(){var t={};i.wrapEnterkey(e.$el.find(".pubble-cw-action-att")),e.$el.find(".pubble-cw-action-att").off("click").on("click",function(t){if(t.stopPropagation(),$(t.target).hasClass("pubble-cw-action-att"))return e.$el.find(".pubble-cw-action-att").find("input").trigger("click"),!1}),u.uploadImg("pubble-cw-input-trigger",function(e,t){var n=$(".ajax-file-upload");n.find("form").length>1&&n.find("form").first().remove();var i="";i=e.indexOf("amazonaws.")>-1||e.indexOf("azureedge.")?e:e.endsWith("jpeg")||e.endsWith("jpg")||e.endsWith("png")||e.endsWith("gif")?"https://media.pubble.io"+e:"http://files.pubble.io"+e,$(".pubble-cw-input-filelist").html(i),$(".pubble-cw-input-textarea-send").trigger("click")},{user:"guest"},$("#uploading_text_updates"),p.config.account,t)},150),$(".pubble-cw-panel-content").on("click",function(e){$(e.target)}),p.config.parameters.whitelabel?(i.addClass(this.$el.find(".pubble-cw-panel"),"pubble-cw-wl"),this.$el.find(".pubble-cw-powered-container").attr("aria-hidden",!0),this.$el.find(".pubble-cw-powered").attr("aria-hidden",!0),this.$el.find(".pubble-cw-powered-link").remove()):(this.$el.find(".pubble-cw-powered-container").attr("aria-hidden",!1),this.$el.find(".pubble-cw-powered").attr("aria-hidden",!1));var G=$(".pubble-custom-pos");0==G.length?this.$el.appendTo("body"):(this.$el.appendTo(G),e.$el.removeClass("pubble-opt-pos-right").removeClass("pubble-opt-pos-left").removeClass("pubble-opt-pos-inside"),i.addClass(e.$el,"pubble-opt-pos-inside"),e.$el.find(".pubble-cw").removeClass("pubble-move").removeClass("pubble-off")),p.config.customCss&&(-1==p.config.customCss.indexOf("<style>")?this.$el.find(".pubble-cw-contactbot-custom").html("<style>"+p.config.customCss+"</style>"):this.$el.find(".pubble-cw-contactbot-custom").html(p.config.customCss)),p.config.parameters.emailOption||(this.$el.find(".pubble-cw-input-button-email").remove(),this.$el.find(".pubble-cw-notif-email").remove()),p.config.parameters.skipOption||this.$el.find(".pubble-cw-input-button-skip").remove(),p.config.parameters.smsOption||(this.$el.find(".pubble-cw-input-button-sms").remove(),this.$el.find(".pubble-cw-notif-sms").remove()),p.config.parameters.emailOption||p.config.parameters.smsOption||this.$el.find(".pubble-cw-input-button-skip").remove(),p.config.parameters.emailOption||p.config.parameters.smsOption||(this.$el.find(".pubble-cw-notif-text").html(""),this.$el.find(".pubble-cw-notif-text2").html(i.uiGetText("revisit this conversation on: "))),this.updateLastSeen(),this.$el.find(".pubble-cw-input-buttonbar-any-yes").on("click",function(){e.stage="freefaq",i.mixlog("cw-faq-faq-anythingelse",{landingPage:p.config.pageURL,communityId:p.config.communityId,appId:p.config.appID,conversationId:e.conversationId,answer:"yes"},e.track),e.anything=!0,
i.addClass($(".pubble-cw-input-anythingelse"),"pubble-off"),e.showChatbox(),e.nocontact()}),this.$el.find(".pubble-cw-input-buttonbar-any-no").on("click",function(){e.stage="free",i.mixlog("cw-faq-faq-anythingelse",{landingPage:p.config.pageURL,communityId:p.config.communityId,appId:p.config.appID,conversationId:e.conversationId,answer:"no"},e.track);var t={conversationId:e.conversationId,contentType:"JSONP"};e.anything=!0,e.vent.trigger("pubble:tracker:selfserved");var n={};i.XDR(i.getEndpoints().close,t,function(){},function(){},n),$(".pubble-cw-endconv").removeClass("pubble-off"),i.addClass($(".pubble-cw-input-anythingelse"),"pubble-off")}),this.$el.find(".pubble-cw-input-buttonbar-faq-yes").on("click",function(){e.stage="anythingelse",i.mixlog("cw-faq-faq-resolved",{landingPage:p.config.pageURL,communityId:p.config.communityId,appId:p.config.appID,conversationId:e.conversationId,source:"general"},e.track),i.mixlog("cw-faq-faq-general",{landingPage:p.config.pageURL,communityId:p.config.communityId,appId:p.config.appID,conversationId:e.conversationId,answer:"yes"},e.track);var t={conversationId:e.conversationId,contentType:"JSONP",action:"somehelpful"};e.vent.trigger("pubble:tracker:faqhelped");var n={};i.XDR(i.getEndpoints().interaction,t,function(){e.faqHepful=!0},function(){},n),this.adminChat?(i.addClass($(".pubble-cw-input-faqhelp"),"pubble-off"),e.showChatbox()):(i.addClass($(".pubble-cw-input-faqhelp"),"pubble-off"),e.hideInput(),$(".pubble-cw-input-anythingelse").removeClass("pubble-off"))}),this.$el.find(".pubble-cw-input-buttonbar-faq-no").on("click",function(){e.stage="free",i.mixlog("cw-faq-faq-general",{landingPage:p.config.pageURL,communityId:p.config.communityId,appId:p.config.appID,conversationId:e.conversationId,answer:"no"},e.track);var t={conversationId:e.conversationId,contentType:"JSONP",action:"nonehelpful"};e.vent.trigger("pubble:tracker:faqnothelped");var n={};i.XDR(i.getEndpoints().interaction,t,function(){e.faqHepful=!0,e.anything=!0},function(){},n),e.nocontact(),i.addClass($(".pubble-cw-input-faqhelp"),"pubble-off"),e.showChatbox()}),this.$el.find(".pubble-cw-input-button-sms").on("click",function(){p.config.parameters.skipOption&&(e.contactDelayed=1,e.$el.find(".pubble-cw-input-waiting").removeClass("pubble-cw-animate")),e.setCountryCode(".pubble-cw-input-buttonbar-sms");Math.ceil(1e4*Math.random());i.mixlog("cw-credential-inputbox",{landingPage:p.config.pageURL,communityId:p.config.communityId,appId:p.config.appID,conversationId:e.conversationId,type:"sms"},e.track),i.addClass(e.$el.find(".pubble-cw-input-buttonbar"),"pubble-off"),p.config.parameters.enableGdpr&&i.addClass(e.$el.find(".pubble-cw-chatbox"),"pubble-gdpr-request"),e.$el.find(".pubble-cw-input-buttonbar-sms").removeClass("pubble-off"),setTimeout(function(){e.$el.find(".pubble-cw-input-buttonbar-phonewidget").find("input").val("").focus().trigger("click")},100)}),this.$el.find(".pubble-cw-input-button-email").on("click",function(){p.config.parameters.skipOption&&(e.contactDelayed=1,e.$el.find(".pubble-cw-input-waiting").removeClass("pubble-cw-animate")),i.addClass(e.$el.find(".pubble-cw-input-buttonbar"),"pubble-off"),e.$el.find(".pubble-cw-input-buttonbar-email").removeClass("pubble-off"),p.config.parameters.enableGdpr&&i.addClass(e.$el.find(".pubble-cw-chatbox"),"pubble-gdpr-request"),setTimeout(function(){e.$el.find(".pubble-cw-input-email").find("input").val("").focus().trigger("click")},100),i.mixlog("cw-credential-inputbox",{landingPage:p.config.pageURL,communityId:p.config.communityId,appId:p.config.appID,conversationId:e.conversationId,type:"email"},e.track)}),this.$el.find(".pubble-cw-input-buttonbar-phone-submit").on("click",function(){var t=e.$el.find(".pubble-cw-input-buttonbar-sms"),n=e.$el.find(".pubble-cw-chatbox").find(".pubble-gdpr-error");if(p.config.parameters.enableGdpr){if(t.hasClass("pubble-md-gdpr-off"))return!1;n.removeClass("pubble-show"),i.addClass(n,"pubble-hide")}e.thanks(),e.stage="free";var a=$("#mobile-number"),o=a.val().replace(/[^-0-9]/gi,"").replace(/\b(0+)/gi,"");if(o.length<4){var r=$(".pubble-cw-input-phone-fail");return r.removeClass("pubble-off"),e.updateAria(T.getText("Please add a valid number")),r.off("click").on("click",function(){i.addClass(r,"pubble-off")}),!1}e.updateAria(T.getText("Thanks!")),i.addClass($(".pubble-cw-input-phone-fail"),"pubble-off");var s=$(".pubble-cw-input-buttonbar-phonewidget").find(".selected-flag"),l=s.attr("title").trim(),c=l.substring(l.indexOf("+"),l.length)+"-"+o;$(".pubble-cw-getnotif-content-buttonbar-action-inputbox-sms").find(".pubble-cw-mobile-number").val(o),i.mixlog("cw-credential-inputbox-success",{landingPage:p.config.pageURL,communityId:p.config.communityId,appId:p.config.appID,conversationId:e.conversationId,type:"sms"},e.track),e.handleSMS(c),e.handleGDPR("phone"),e.$el.find(".pubble-cw-issms").trigger("click"),p.config.contactFirst?(e.sms=c,e.manChat(c,function(){},1,-10001),e.askStep(e)):e.submitPhone(e,c)}),this.$el.find(".pubble-cw-input-container").find(".pubble-gdpr-action").on("click",function(){var t;t=e.$el.find(".pubble-cw-input-buttonbar-sms").hasClass("pubble-off")?e.$el.find(".pubble-cw-input-buttonbar-email"):e.$el.find(".pubble-cw-input-buttonbar-sms");var n=t.find(".pubble-cw-input-buttonbar-submit"),a=e.$el.find(".pubble-cw-input-container").find(".pubble-gdpr-error");t.hasClass("pubble-md-gdpr-on")?(n.attr("aria-disabled",!0),t.removeClass("pubble-md-gdpr-on"),i.addClass(t,"pubble-md-gdpr-off")):(t.removeClass("pubble-md-gdpr-off"),i.addClass(t,"pubble-md-gdpr-on"),a.removeClass("pubble-show"),i.addClass(a,"pubble-hide"),n.attr("aria-disabled",!1))}),this.$el.find(".pubble-cw-input-container").find(".pubble-gdpr-text-link").on("click",function(){return window.open(p.config.parameters.privacyPolicyUrl,"_blank"),!1}),this.$el.find(".pubble-cw-input-buttonbar-email-submit").on("click",function(){var t=e.$el.find(".pubble-cw-input-buttonbar-email"),n=e.$el.find(".pubble-cw-chatbox").find(".pubble-gdpr-error");if(p.config.parameters.enableGdpr){if(t.hasClass("pubble-md-gdpr-off"))return!1;n.removeClass("pubble-show"),i.addClass(n,"pubble-hide")}e.stage="free";var a=$(".pubble-cw-input-buttonbar-email").find("input"),o=a.val().trim();if(i.isValidEmail(o)){e.thanks(),e.updateAria(T.getText("Thanks!")),i.mixlog("cw-credential-inputbox-success",{landingPage:p.config.pageURL,communityId:p.config.communityId,appId:p.config.appID,conversationId:e.conversationId,type:"email"},e.track);e.conversationId;if(e.email=o,e.handleGDPR("email"),$(".pubble-cw-email-input").val(o),o&&""!=o){e.$el.find(".pubble-cw-getnotif-content-transcript-email").removeClass("pubble-cw-hasnoemail");var r=e.$el.find(".pubble-cw-getnotif-content-transcript-email").find(".pubble-cw-btn-transcript-email");r.attr("aria-hidden",!1),r.attr("tabindex",0),r.attr("aria-disabled",!1)}i.addClass($(".pubble-cw-input-buttonbar-email"),"pubble-off"),p.config.parameters.enableGdpr||$(".pubble-cw-chatbox").removeClass("pubble-gdpr-request"),i.addClass($(".pubble-cw-input-iscredentials"),"pubble-off"),$(".pubble-cw-input-processing").removeClass("pubble-off"),p.config.contactFirst?(e.cemail=o,e.manChat(o,function(){},1,-10001),e.askStep(e)):e.submitEmail(e,o)}else{var s=$(".pubble-cw-input-email-fail");s.removeClass("pubble-off"),e.updateAria(T.getText("Please provide a valid email!")),s.off("click").on("click",function(){i.addClass(s,"pubble-off")})}}),$(".pubble-cw-input-buttonbar-got-submit").on("click",function(){return $(".pubble-cw-input-buttonbar-back").trigger("click"),!1}),$(".pubble-cw-input-button-skip").on("click",function(){e.robotChat(i.uiGetText("You opted to skip being notified. You need to stay online to get a reply. If you want to be notified when you go offline, enter your email or phone number below."),function(){}),e.seq("notify.skip"),e.stage="free",p.config.parameters.skipOption&&(e.contactDelayed=1,e.$el.find(".pubble-cw-input-waiting").removeClass("pubble-cw-animate")),i.addClass($(".pubble-cw-input-iscredentials"),"pubble-off");var t={conversationId:e.conversationId,contentType:"JSONP",action:"skipcontact"},n={};i.XDR(i.getEndpoints().qinteraction,t,function(){},function(){},n),e.handlePrompt(),e.processing(),e.faqChecked||e.nocontact(),e.$el.find(".pubble-cw-input-textarea").val("").focus().trigger("click")}),this.$el.find(".pubble-cw-input-button-link").on("click",function(){if(!e.linkClicked){i.mixlog("cw-credential-inputbox",{landingPage:p.config.pageURL,communityId:p.config.communityId,appId:p.config.appID,conversationId:e.conversationId,type:"link"},e.track);var t={conversationId:e.conversationId,contentType:"JSONP",action:"linkcontact"},n={};i.XDR(i.getEndpoints().qinteraction,t,function(){},function(){},n)}e.linkClicked=1,i.addClass(e.$el.find(".pubble-cw-input-buttonbar"),"pubble-off"),e.$el.find(".pubble-cw-input-buttonbar-link").removeClass("pubble-off")}),$(".pubble-cw-input-buttonbar-back").on("click",function(){e.$el.find(".pubble-cw-input-buttonbar").removeClass("pubble-off");var t=e.$el.find(".pubble-cw-chatbox").find(".pubble-gdpr-error");t.removeClass("pubble-show"),i.addClass(t,"pubble-hide"),i.addClass(e.$el.find(".pubble-cw-input-buttonbar-sms"),"pubble-off"),i.addClass(e.$el.find(".pubble-cw-input-buttonbar-email"),"pubble-off"),i.addClass(e.$el.find(".pubble-cw-input-buttonbar-link"),"pubble-off"),e.$el.find(".pubble-cw-chatbox").removeClass("pubble-gdpr-request")}),this.$el.find(".pubble-cw-input-button-skip").on("click",function(){i.addClass(e.$el.find(".pubble-cw-input-iscredentials"),"pubble-off"),i.mixlog("cw-credential-inputbox",{landingPage:p.config.pageURL,communityId:p.config.communityId,appId:p.config.appID,conversationId:e.conversationId,type:"skip"},e.track),i.mixlog("cw-credential-inputbox-success",{landingPage:p.config.pageURL,communityId:p.config.communityId,appId:p.config.appID,conversationId:e.conversationId,type:"skip"},e.track)}),i.wrapEnterkey(this.$el.find(".pubble-cw-getnotif-handle")),this.$el.find(".pubble-cw-getnotif-handle").on("click",function(){e.$el.find(".pubble-cw-getnotif-text").removeClass("pubble-off"),e.notifclicked||i.mixlog("cw-alert-clicked",{landingPage:p.config.pageURL,communityId:p.config.communityId,appId:p.config.appID,conversationId:e.conversationId},e.track),e.notifclicked=1;var t=$(".pubble-cw-getnotif");t.hasClass("pubble-cw-getnotif-off")?(t.removeClass("pubble-off").removeClass("pubble-cw-getnotif-off").addClass("pubble-cw-getnotif-on"),t.removeAttr("style"),t.attr("aria-hidden",!1),t.find(".pubble-cw-card-input").attr("tabindex",0)):(t.removeClass("pubble-cw-getnotif-on").addClass("pubble-cw-getnotif-off"),t.attr("style","display:none"),t.attr("aria-hidden",!0),t.find(".pubble-cw-card-input").attr("tabindex",-1)),$(".pubble-cw-getnotif-content-main").removeClass("pubble-off")}),p.isMobile?this.$el.find(".pubble-cw").addClass("pubble-cw-ismobile"):this.$el.addClass("pubble-cw-isdesktop");this.$el.find(".pubble-sb-avatar"),this.$el.find(".pubble-sb-bubble-text"),this.$el.find(".pubble-sb-bubble");try{p.config.parameters.sidebarDelay&&1e3*parseInt(p.config.parameters.sidebarDelay)}catch(ee){}var z=1;"false"==this.$el.attr("data-app-trigger")&&(z=0),z&&this.vent.trigger("pubble:trigger:run");p.config.communityId;this.$el.find(".pubble-cw-top-secondary-1").html(i.uiGetText("With ")+" "+i.headerText()),this.$el.find(".pubble-cw-top-title").html(i.headerText()),this.$el.find(".pubble-cw-top-status-community").html(i.headerText()),this.dialogContainer=this.$el.find(".pubble-cw-panel-dialog"),this.dialogPanel=this.$el.find(".pubble-cw-panel-dialog"),this.diaglogPanelParent=this.$el.find(".pubble-cw-panel-middle"),this.presenceContainer=this.$el.find(".pubble-cw-input-presence"),e.sendPresense=1,e.askedagain=0,e.botStage=0,e.botTalked=0,e.stage="start",e.asked=0,e.named=0,e.emailed=0,e.lastPost=0,e.appId=p.config.appID,this.talked=0,e.ignoreConversation=!1,e.conversationId=0,e.questionId=0,p.conversationId="",p.questionId="",e.conversationCollection=new b,e.chatCollection=new b,e.conversationLoaded=0,e.$el.find(".pubble-cw-input-textarea-placeholder").removeClass("pubble-off"),"9392"==p.config.appID&&this.vent.trigger("init:presence","");var V=window.location.href,Q=V.indexOf("askmode=true")>-1||V.indexOf("pubble.io/ask")>-1||V.indexOf("pubblebot.com/ask")>-1||V.indexOf("chatify.com/ask")>-1,W=window.location.href.indexOf("PPBCT")>-1;if(i.getAppIdFromUrl()!=p.config.appID&&(W=0),Q){e.shiftView("chat",!0);var X=e.$el.find(".pubble-sb-bubble");if(i.addClass(X,"pubble-hide"),$(".pubble-cw-panel").removeClass("pubble-move").removeClass("pubble-off"),i.addClass($(".pubble-cw-contactbot"),"pubble-hide"),!W&&(null==j||j.length<5)){e.$el.find(".pubble-cw-btn-newquestion").first().trigger("click"),$(".pubble-cw-btn-newquestion-btn1").trigger("click"),i.hideView(e.$el.find(".pubble-cw-conv"));var J=!1;null!=p.config.user&&p.config.user.uid>0&&"account"==p.config.user.type?J=1:(e.setContact(e),e.sms&&""!=e.sms?J=1:e.email&&""!=e.email&&(J=1)),p.config.contactFirst&&!J?e.contactStep(e,!0):(e.askStep(e,!1),i.showView($(".pubble-cw-top-list"),!0),setTimeout(function(){e.$el.find(".pubble-cw-input-textarea").attr("placeholder",i.uiGetText("Ask your question here...")).focus().trigger("click"),$(".pubble-cw-input-textarea-placeholder").html(i.uiGetText("Ask your question here..."))},100))}}if(("0"==t||"-1"==t&&W)&&"-1"==n){this.stage="free",this.talked=1;var K=i.getRefer();i.mixlog("cw-fatal-error",{landingPage:p.config.pageURL,landingPage2:window.location.href,communityId:p.config.communityId,appId:p.config.appID,position:"3",conversationId:e.conversationId,referrer:K},e.track),setTimeout(function(){e.conversationLoaded=!0,e.$el.find(".pubble-cw-contactbot").trigger("click"),e.$el.find(".pubble-cw-btn-newquestion").first().trigger("click")},500)}else if(0==t||"-1"==t||e.newQ||"-1"!=a&&a!=e.appId)if(0==n||"-1"==n||e.newQ||a!=e.appId){var j=i.getCookieValue("pb-conversationId"),Y=i.getCookieValue("pb-appId");""==Y||null==Y||Y==p.config.appID?null!=j&&j.length>5&&!e.newQ?(this.stage="free",this.talked=1,e.loadConversation(j,e.appId,1,void 0,function(){e.$el.find(".pubble-cw-panel-controls-newq").trigger("click")}),e.$el.find(".pubble-cw-input-textarea-placeholder").removeClass("pubble-off"),e.conversationId=j):e.$el.find(".pubble-cw-btn-newquestion-btn").first().trigger("click"):setTimeout(function(){e.conversationLoaded=!0,e.$el.find(".pubble-cw-contactbot").trigger("click"),e.$el.find(".pubble-cw-btn-newquestion").first().trigger("click"),e.shiftView("chat")},200)}else this.stage="free",this.talked=1,e.$el.find(".pubble-cw-input-textarea-placeholder").removeClass("pubble-off"),e.loadConversation("",e.appId,0,n),setTimeout(function(){e.conversationLoaded=!0,e.$el.find(".pubble-cw-contactbot").trigger("click"),e.shiftView("chat")},100);else{var E=e.$el.find(".pubble-cw-panel");E.removeClass("pubble-move"),i.fixMobileBody(!0);var Z=e.$el.find(".pubble-cw-shadow");i.addClass(Z,"pubble-show"),Z.removeClass("pubble-hide");var X=e.$el.find(".pubble-sb-bubble");i.addClass(X,"pubble-hide");var P=e.$el.find("#pb_sidebar");i.addClass(P,"pubble-expanded"),P.attr("aria-label",i.uiGetText("Close Livechat")),i.handleContainer(this.$el,!0),e.vent.trigger("pubble:iframe:resize","max");var ee=e.$el.find(".pubble-cw-modal-expire");ee.removeClass("pubble-hide"),i.addClass(ee,"pubble-show"),$(".pubble-cw-input-textarea").blur()}var te=this.$el.find(".pubble-cw-custom-button");if(te.length>0){$(".pubble-cw pubble-cw-contactbot").remove();"false"==te.attr("sidebar")&&$(".pubble-cw-panel-controls").hide(),te.on("click",function(){var t=e.$el.find(".pubble-cw-panel");i.addClass(t,"pubble-move"),i.fixMobileBody(!1);var n=e.$el.find(".pubble-cw-shadow");i.addClass(n,"pubble-hide"),n.removeClass("pubble-show"),e.$el.find(".pubble-sb-bubble").removeClass("pubble-hide");var a=e.$el.find("#pb_sidebar");a.removeClass("pubble-expanded"),a.attr("aria-label",i.uiGetText("Open Livechat")),e.vent.trigger("pubble:iframe:resize","d"),i.handleContainer(this.$el,!1)})}this.$el.find(".pubble-cw-panel-controls-hide").on("click",function(){var t=e.$el.find(".pubble-cw-panel");i.addClass(t,"pubble-move"),i.fixMobileBody(!1);var n=e.$el.find(".pubble-cw-shadow");i.addClass(n,"pubble-show"),n.removeClass("pubble-hide");var a=e.$el.find(".pubble-sb-bubble");a.removeClass("pubble-hide");var o=e.$el.find("#pb_sidebar");o.removeClass("pubble-expanded"),o.attr("aria-label",i.uiGetText("Open Livechat")),i.handleContainer(this.$el,!1),e.vent.trigger("pubble:iframe:resize","d"),e.newcount=0,e.latestConversation=0;var r=$(".pubble-sb-notif");r.find(".pubble-sb-notif-nr").html(0),i.addClass(r,"pubble-off"),a.find(".pubble-sb-bubble-item-one").html(""),i.addClass(a,"pubble-move"),i.fixMobileBody(!1),i.mixlog("cw-widget-hide",{landingPage:p.config.pageURL,communityId:p.config.communityId,appId:p.config.appID,domain:document.domain,conversationId:e.conversationId},e.track)});var ne=this.$el.find(".pubble-cw-panel-controls-close");this.$el.find(".pubble-sb-close").on("click",function(){return ne.trigger("click"),top.location!=location&&i.addClass($()),!1}),ne.on("click",function(){e.triggerClick=0;var t=e.$el.find(".pubble-cw-panel");e.resetBubble(),e.newcount=0,e.$el.find("#pb_sidebar").removeClass("pubble-sidebar-show");var n=$(".pubble-sb-notif");n.find(".pubble-sb-notif-nr").html(0),i.addClass(n,"pubble-off"),i.addClass(t,"pubble-move"),i.fixMobileBody(!1);var a=e.$el.find(".pubble-cw-shadow");i.addClass(a,"pubble-hide"),a.removeClass("pubble-show"),e.$el.find(".pubble-sb-bubble").removeClass("pubble-hide");var o=e.$el.find("#pb_sidebar");o.removeClass("pubble-expanded"),o.attr("aria-label",i.uiGetText("Open Livechat")),i.handleContainer(this.$el,!1),e.vent.trigger("pubble:iframe:resize","d"),i.mixlog("cw-widget-closed",{landingPage:p.config.pageURL,communityId:p.config.communityId,appId:p.config.appID,domain:document.domain,conversationId:e.conversationId},e.track)}),setInterval(function(){var e=(new Date).getTime();$(".pubble-cw-input-presence").each(function(){var t=$(this).attr("timestamp");t&&e-t>6e3&&i.addClass($(this),"pubble-hide")})},2e3),setInterval(function(){var e=(new Date).getTime();$(".pubble-cw-panel-dialog-item-justin").each(function(){var t=$(this).attr("timestamp");t&&e-t>1e3&&$(this).removeClass("pubble-cw-panel-dialog-item-justin")})},1e3),i.wrapEnterkey(e.$el.find(".pubble-cw-panel-controls-newq")),e.$el.find(".pubble-cw-panel-controls-newq").on("keydown",function(t){if(9==t.keyCode&&t.shiftKey&&!e.$el.find(".pubble-cw").hasClass("pubble-move"))return e.$el.find("#pb_sidebar").focus(),t.stopPropagation(),!1}),e.$el.find(".pubble-cw-panel-controls-newq").on("click",function(){e.triggerClick=0,e.skippedFaq=0,delete e.promptedText,p.pushAccepted=0,p.config.smsInited||e.vent.trigger("pubble:init:sms"),e.conversationsLoaded||e.vent.trigger("app:conversations:load",e),$(".pubble-cw-panel-controls-newq").removeClass("pubble-cw-newactivity"),i.addClass($(".pubble-cw-chatlist-loading"),"pubble-off"),e.$el.find(".pubble-cw-getnotif").hasClass("pubble-cw-getnotif-on")&&e.$el.find(".pubble-cw-getnotif-content-close-btn").trigger("click"),p.config.parameters.searchFaq?(i.setCookieValue("pb-conversationId",""),e.shiftView("list")):e.conversationCollection.models.length>0?(i.setCookieValue("pb-conversationId",""),e.shiftView("list")):e.botlist.length>1?e.shiftView("userlist"):$(".pubble-cw-btn-newquestion-btn").trigger("click")}),$(".pubble-cw-btn-newquestion-btn1").on("click",function(){e.targetAccountId=-1,e.targetgroupid=-1,e.targetTag="",e.skippedFaq=0,delete e.promptedText,e.$el.find(".pubble-cw-top-title").html(i.headerText()),p.config.parameters.operational?(i.addClass(e.$el.find(".pubble-cw-top-status-community"),"pubble-off"),e.$el.find(".pubble-cw-top-status").removeClass("pubble-off")):(i.addClass(e.$el.find(".pubble-cw-top-status"),"pubble-off"),p.config.parameters.operational||i.addClass(e.$el.find(".pubble-cw-top-status-community"),"pubble-off")),$(".pubble-cw-btn-newquestion-btn").trigger("click")}),$(".pubble-cw-btn-newquestion-btn2").on("click",function(){e.targetAccountId=0,e.targetgroupid=0,e.targetTag="",e.skippedFaq=0,delete e.promptedText;var t=e.$el.find(".pubble-cw-modal-expire");t.removeClass("pubble-show"),i.addClass(t,"pubble-hide"),e.$el.find(".pubble-cw-top-title").html(i.headerText()),p.config.parameters.operational?(i.addClass(e.$el.find(".pubble-cw-top-status-community"),"pubble-off"),e.$el.find(".pubble-cw-top-status").removeClass("pubble-off")):(i.addClass(e.$el.find(".pubble-cw-top-status"),"pubble-off"),p.config.parameters.operational||i.addClass(e.$el.find(".pubble-cw-top-status-community"),"pubble-off")),$(".pubble-cw-btn-newquestion-btn").trigger("click")}),$(".pubble-cw-btn-newquestion-btn3").on("click",function(){e.targetAccountId=-1,e.targetgroupid=-1,e.targetTag="",e.skippedFaq=0,delete e.promptedText,e.$el.find(".pubble-cw-top-title").html(i.headerText()),p.config.parameters.operational?(i.addClass(e.$el.find(".pubble-cw-top-status-community"),"pubble-off"),e.$el.find(".pubble-cw-top-status").removeClass("pubble-off")):(i.addClass(e.$el.find(".pubble-cw-top-status"),"pubble-off"),p.config.parameters.operational||i.addClass(e.$el.find(".pubble-cw-top-status-community"),"pubble-off")),$(".pubble-cw-btn-newquestion-btn").trigger("click")}),e.$el.find(".pubble-cw-btn-newquestion-btn").on("click",function(){i.showHomeScreen(!1),e.$el.find(".pubble-cw-emailsent").removeClass("pubble-cw-emailsent"),e.officeHourShowed=!1,e.smsInited||e.vent.trigger("pubble:init:sms");var t=e.$el.find(".pubble-cw-modal-expire");if(t.removeClass("pubble-show"),i.addClass(t,"pubble-hide"),p.config.parameters.skipOption&&(delete e.contactDelayed,e.$el.find(".pubble-cw-input-waiting").removeClass("pubble-cw-animate")),$(".pubble-cw-chatbox").removeClass("pubble-off"),i.addClass($(".pubble-cw-invalidq"),"pubble-off"),e.vent.trigger("pubble:init:messenger"),e.$el.find(".pubble-cw-input-buttonbar").removeClass("pubble-off"),e.$el.find(".pubble-cw-input-textarea-placeholder").removeClass("pubble-off"),e.botlist.length>1&&-1==e.targetAccountId&&-1==e.targetgroupid&&""==e.targetTag)return e.shiftView("userlist"),!1;var n=$(".pubble-cw-contactlist-container");n.removeClass("pubble-show"),i.addClass(n,"pubble-hide");var a=$(".pubble-cw-modal");a.removeClass("pubble-show"),i.addClass(a,"pubble-hide"),a.find(".pubble-cw-modal-video").html(""),a.find(".pubble-cw-modal-img").html(""),i.addClass(a.find(".pubble-cw-modal-img-container"),"pubble-off"),i.addClass(a.find(".pubble-cw-modal-video-container"),"pubble-off");var o=$(".pubble-cw-getnotif");o.removeClass("pubble-cw-getnotif-on"),i.addClass(o,"pubble-cw-getnotif-off");var r=null!=p.config.user&&p.config.user.uid>0&&"account"==p.config.user.type,s=e.$el.find(".pubble-cw-getnotif-handle");r?s.removeClass("pubble-off"):i.addClass(s,"pubble-off"),e.resetBottom(),e.t1&&(clearTimeout(e.t2),delete e.t1),e.t2&&(clearTimeout(e.t2),delete e.t2),e.shiftView("chat"),e.newQ=!0,e.stage="q",e.showOfficeHour=1,this.officeHourShowed=0,this.smsInited=0,e.ui="",e.anything=!1,e.joined=!1,this.newcount=0,this.reloaded=!1,e.conversationId="",p.conversationId="",p.questionId="",p.config.user=lpQA.config.user,e.timeout&&(clearTimeout(e.timeout),delete e.timeout),e.notified=!1,e.adminChat=!1,e.adminFirst="",e.inited=!1,e.clicked=0,e.closeConversation=0,e.notifclicked=0,e.hasRead=0,e.faqChecked=0,e.linkClicked=0,e.nocontacted=!1,this.joined=!1,i.setCookieValue("pb-conversationId",""),i.setCookieValue("pb-appId",""),i.mixlog("cw-newconv",{landingPage:p.config.pageURL,communityId:p.config.communityId,appId:p.config.appID,domain:document.domain,source:"top"},e.track),e.shiftView("chat"),e.newqstate();var l=!1;null!=p.config.user&&p.config.user.uid>0&&"account"==p.config.user.type?l=1:(e.setContact(e),e.sms&&""!=e.sms?l=1:e.email&&""!=e.email&&(l=1)),p.config.contactFirst&&!l?e.contactStep(e,!0):e.askStep(e,!1),p.isMobile||$(".pubble-cw-input-textarea-actual").focus()}),$(".pubble-cw-input-newq-cancel").on("click",function(){i.addClass($(".pubble-cw-newq"),"pubble-off"),$(".pubble-cw-chat").removeClass("pubble-off")}),$(".pubble-cw-reopen").on("click",function(){$(".pubble-cw-chatbox").removeClass("pubble-off"),i.addClass($(".pubble-cw-endconv"),"pubble-off"),e.showInput(),e.closeConversation=0,e.talked=0,e.$el.find(".pubble-cw-input-textarea-placeholder").removeClass("pubble-off"),e.ui="",i.mixlog("bot-cw-reopen",{landingPage:p.config.pageURL,communityId:p.config.communityId,appId:p.config.appID,domain:document.domain},e.track);var t={},n={conversationId:e.conversationId,contentType:"JSONP"};i.XDR(i.getEndpoints().openp,n,function(e){},function(){},t)}),i.wrapEnterkey(e.$el.find(".pubble-cw-startnew")),e.$el.find(".pubble-cw-startnew").on("click",function(){return e.newQ=!0,i.mixlog("cw-newconv",{landingPage:p.config.pageURL,communityId:p.config.communityId,appId:p.config.appID,domain:document.domain,source:"startnew"},e.track),p.pushAccepted=0,i.setCookieValue("pb-conversationId",""),i.setCookieValue("pb-appId",""),$(".pubble-cw-btn-newquestion-btn").trigger("click"),!1}),e.$el.find(".pubble-cw-input-textarea-skip").on("click",function(){$(".pubble-cw-panel-bottom").removeClass("pubble-cw-emailchatbox"),i.mixlog("bot-cw-email-skipbtn",{landingPage:p.config.pageURL,communityId:p.config.communityId,appId:p.config.appID},e.track),e.stage="free",$(".pubble-cw-input-textarea").attr("placeholder",i.uiGetText("Message...")),$(".pubble-cw-input-textarea-placeholder").html(i.uiGetText("Message...")),e.author.email="anon@pubble.co";var t=$(".pubble-cw-getnotif");i.isValidEmail(e.author.email)&&-1===e.author.email.indexOf("anon@")?(t.removeClass("pubble-cw-getnotif-on"),t.removeClass("pubble-off"),i.addClass(t,"pubble-cw-getnotif-off"),$(".pubble-cw-getnotif-content-buttonbar-action-inputbox").find("textarea").val(data.content)):(t.removeClass("pubble-off"),setTimeout(function(){t.removeClass("pubble-cw-getnotif-off"),i.addClass(t,"pubble-cw-getnotif-on")},500)),setTimeout(function(){if(!e.nodelay){if(0==e.hasRead){var n={};n.conversationId=e.conversationId,n.appId=p.config.appID,n.code="delay",i.Xpost(!0,i.getEndpoints().seq,n,function(e){})}t.hasClass("pubble-cw-getnotif-off")&&!e.notifclicked&&(t.removeClass("pubble-cw-getnotif-off"),t.removeClass("pubble-off"),i.addClass(t,"pubble-cw-getnotif-on"))}},4e4)}),e.applyTrigger=function(t){if(t.off("click").on("click",function(t){e.triggerBtnClick(t)}),top.location!=location)try{$(top.document).find(".pubble-iframe").length>0&&$(top.document).find(".pubble-cw-contactbot").off("click").on("click",function(t){e.triggerBtnClick(t)})}catch(e){}};var ie=$(".pubble-cw-contactbot");e.applyTrigger(ie);var ae=ie.length;setTimeout(function(){var t=$(".pubble-cw-contactbot"),n=t.length;n!=ae&&e.applyTrigger(t),setTimeout(function(){var t=$(".pubble-cw-contactbot"),i=t.length;n!=i&&e.applyTrigger(t)},3e3)},3e3),e.triggerBtnClick=function(t){var n=e.$el.find("#pb_sidebar");if(n.hasClass("pubble-expanded"))return n.find(".pubble-sb-close").trigger("click"),!1;var a=e.$el.find(".pubble-sb-notif");a.find(".pubble-sb-notif-nr").html(0),i.addClass(a,"pubble-off"),p.config.smsInited||e.vent.trigger("pubble:init:sms"),e.$el.find(".pubble-cw-panel").removeClass("pubble-off");var o=$(t.target);e.$el.find("#pb_sidebar").removeClass("pubble-sidebar-show"),o.hasClass("pubble-cw-contactbot")||(o=o.parents(".pubble-cw-contactbot"));var r=i.getCookieValue("pb-conversationId");if(e.conversationLoaded,e.conversationLoaded)e.conversationLoaded=0,e.greeting(o,e),e.shiftView("chat");else if(void 0!=o.attr("data-tag"))e.targetTag=o.attr("data-tag"),$(".pubble-cw-btn-newquestion-btn").trigger("click"),e.greeting(o,e);else if(void 0!=o.attr("data-accountId"))e.targetAccountId=o.attr("data-accountId"),$(".pubble-cw-btn-newquestion-btn").trigger("click"),e.greeting(o,e);else if(void 0!=o.attr("data-groupid"))e.targetgroupid=o.attr("data-groupid"),$(".pubble-cw-btn-newquestion-btn").trigger("click"),e.greeting(o,e);else{if(0!=e.latestConversation){if(e.latestConversation!=e.conversationId){if(e.loadConversation(e.latestConversation,e.appId,0),e.shiftView("chat"),e.vent.trigger("app:welcome:header",!0),e.conversationCollection){$.each(e.conversationCollection.models,function(t,n){n.get("conversationId")==e.latestConversation&&n.set("read",1)});var s=0;$.each(e.conversationCollection.models,function(e,t){t.get("read")||s++}),0==s&&e.$el.find(".pubble-cw-panel-controls-newq").removeClass("pubble-cw-newactivity")}return e.latestConversation=0,!1}return e.latestConversation=0,e.shiftView("chat"),e.vent.trigger("app:welcome:header",!0),!1}$(".pubble-cw-chat-container").hasClass("pubble-hide");r&&null!=r&&r.length>0&&!e.botClicked?e.shiftView("chat"):e.conversationCollection.models.length>0?e.shiftView("list"):e.botlist.length>1&&-1==e.targetAccountId&&""==e.targetTag&&-1==e.targetgroupid?e.shiftView("userlist"):e.$el.find(".pubble-cw-form-container").hasClass("pubble-show")||(e.shiftView("chat",!0),e.newqstate())}e.latestConversation=0,e.botClicked=1,e.$el.find(".pubble-cw-panel").removeClass("pubble-move"),i.fixMobileBody(!0);var l=e.$el.find(".pubble-cw-shadow");i.addClass(l,"pubble-show"),l.removeClass("pubble-hide");var c=e.$el.find(".pubble-sb-bubble");i.addClass(c,"pubble-hide");var u=e.$el.find("#pb_sidebar");if(i.addClass(u,"pubble-expanded"),u.attr("aria-label",i.uiGetText("Close Livechat")),i.handleContainer(this.$el,!0),e.vent.trigger("pubble:iframe:resize","max"),e.clicked)return!1;if(e.clicked=1,i.mixlog("cw-sidebar-clicked",{landingPage:p.config.pageURL,communityId:p.config.communityId,appId:p.config.appID,domain:document.domain},e.track),"start"==e.stage){if(e.conversationCollection.models.length>0)return!1;var d=0;e.setContact(e),e.sms&&""!=e.sms?d=1:e.email&&""!=e.email&&(d=1),p.config.contactFirst&&!d?(e.vent.trigger("pubble:init:messenger"),e.contactStep(e,!0)):(e.vent.trigger("pubble:init:messenger"),e.askStep(e,!1))}e.scrollToBottom()},-1==window.location.href.indexOf("#myenquiry")&&-1==window.location.href.indexOf("?myenquiry")||this.$el.find("#pb_sidebar").hasClass("pubble-off")||this.$el.find(".pubble-cw-contactbot").trigger("click"),this.$el.find(".pubble-cw-input-textarea").on("keyup",$UScore.debounce(function(t){if(13==t.keyCode)return!1;if(""!==e.clientName&&"q"!==e.stage&&"name"!==e.stage&&"start"!==e.stage){var n=e.$el.find(".pubble-cw-input-textarea").val(),a=i.getEndpoints().replying+"?contentType=JSONP&postId="+e.objectId+"&accountId=&name="+e.clientName,o=!1;if(p.config.user&&e.author&&p.config.user.uid==e.author.id&&(o=!0),0==p.config.user.uid&&(o=!0),e.author&&(p.config.user.uid>0&&p.config.user.uid==e.author.id||p.config.user.cookieId==e.author.cookieId||i.getCookie("pubble_gen_uid")==e.author.cookieId)&&(o=!0),window.location.href.indexOf("visitor=false")>-1&&(o=0==p.config.user.uid),o&&(a=i.getEndpoints().replying+"?contentType=JSONP&visitor=true&postId="+e.objectId+"&accountId=&name="+e.clientName+"&content="+n),!e.objectId)return!1;$.ajax({url:a,data:"",type:"GET",cache:0,dataType:"jsonp",success:function(e){},error:function(e){}})}},1500)),this.$el.find(".pubble-cw-input-textarea").on("keyup",function(t){var n=t.target||t.srcElement;($(n).val().trim().length>0?(i.addClass(e.$el.find(".pubble-cw-input-textarea-placeholder"),"pubble-off"),i.addClass(e.$el.find(".pubble-cw-chatbox"),"pubble-cw-textarea-hastext"),i.showView(e.$el.find(".pubble-cw-action-post"),"style")):(e.$el.find(".pubble-cw-chatbox").removeClass("pubble-cw-textarea-hastext"),i.hideView(e.$el.find(".pubble-cw-action-post"),!1,"style")),n&&n.scrollHeight<121)&&(n.style.height="55px",n.scrollHeight>0&&(n.style.height=n.scrollHeight+"px",$(n).attr("style","height:"+n.scrollHeight+"px !important;"),$(".pubble-cw-panel-bottom").attr("style","height:"+(20+n.scrollHeight-20)+"px"),$(".pubble-cw-panel-middle"),$(".pubble-cw-panel-middle").attr("style","bottom:"+(20+n.scrollHeight-20)+"px")))}),
this.$el.find(".pubble-cw-input-textarea").on("keydown",function(t){t.stopPropagation();var n=t.target||t.srcElement,i=-1;t.shiftKey&&13==t.which?i=2:13!=t.keyCode&&10!=t.keyCode||(i=1);var a=$(n).val().trim();if(1==i)return t.preventDefault(),""!=a&&e.$el.find(".pubble-cw-input-textarea-send").trigger("click"),!1;if($(".pubble-cw-input-textarea-send-disabled").removeClass("pubble-cw-input-textarea-send-disabled"),e.talked=1,n&&n.scrollHeight<121){n.style.height="55px";if(n.scrollHeight>0){n.style.height=n.scrollHeight+"px",$(n).attr("style","height:"+n.scrollHeight+"px !important;"),$(".pubble-cw-panel-bottom").attr("style","height:"+(20+n.scrollHeight-20)+"px");$(".pubble-cw-panel-middle");$(".pubble-cw-panel-middle").attr("style","bottom:"+(20+n.scrollHeight-20)+"px")}}}),this.$el.find(".pubble-cw-input-textarea-send").on("click",function(t){e.sendPresense=1;var n=e.stage,a=e.$el.find(".pubble-cw-input-textarea"),s=e.$el.find(".pubble-cw-input-filelist"),l=s.html().trim(),c=a.val().trim();if("undefined"==c&&(i.mixlog("cw-fatal-error-1",{landingPage:p.config.pageURL,landingPage2:window.location.href,communityId:p.config.communityId,appId:p.config.appID,content:c,stage:n,position:"1",conversationId:e.conversationId,length:a.length},e.track),e.updateAria(T.getText("Content Required"))),c&&""!=c||l.length>0&&void 0!=window.pb_uploaded_fileName&&(c=""+window.pb_uploaded_fileName),c&&"undefined"!=c&&(c.length>0||l.length>0))if(""==c&&l.length>0&&void 0!=window.pb_uploaded_fileName&&(c=""+window.pb_uploaded_fileName),"start"!=n&&"freechat"!=n||"0"!=e.conversationId||(n="q"),"q"==n){if(!window.pubble_proActiveChat&&("How are you"==c||"hi there"==c||"Hi there"==c||"how are you"==c||c.length<4))return e.askedagain=1,$(".pubble-cw-panel-dialog-item-pending").removeClass("pubble-cw-panel-dialog-item-pending"),e.manChat(c,function(){},1,-101),e.updateAria(T.getText("Please type a question")),e.robotChat(i.uiGetText("Please type a question"),function(){},1,-100),$(".pubble-cw-panel-bottom").removeAttr("style"),$(".pubble-cw-input-textarea").val(""),i.addClass($(".pubble-cw-input-textarea-send"),"pubble-cw-input-textarea-send-disabled"),n="start",i.mixlog("cw-question-contentcheck",{landingPage:p.config.pageURL,communityId:p.config.communityId,appId:p.config.appID,content:c,length:"invalid"},e.track),!1;i.mixlog("cw-question-contentcheck",{landingPage:p.config.pageURL,communityId:p.config.communityId,appId:p.config.appID,content:c,length:"valid"},e.track),window.pubble_proActiveChat=0,e.content=c,p.config.pageURL=i.getFilterLandingPage();var u=$("#pubble_app_"+p.config.appID);null!=u.attr("data-landingpage")&&(p.config.pageURL=u.attr("data-landingpage"));var b=p.config.pageURL;b=i.filterPubbleParas(b),p.refreshurl&&(b=window.location.href,b=i.filterPubbleParas(b));var f={communityId:p.config.communityId,appId:p.config.appID,postToType:"app",type:"Q",visitor:!0,name:e.clientName,content:c,landingPage:b};p.pushAccepted&&(f.tags="livedash"),p.customRole&&(f.tags&&""!=f.tags?f.tags=f.tags+","+p.customRole:f.tags=p.customRole),l.length>0&&(f.attachments=l),null!=p.config.user&&p.config.user.uid>0||(e.sms&&""!=e.sms?f.phone=e.sms:e.email&&""!=e.email&&(f.email=e.email)),null==p.config.user||0==p.config.user.uid?(f.anon=!0,f.postAsVisitor=!0):f.postAsVisitor=p.config.user.postAsVisitor;var h={};if(f.tempId=i.getTempId(),"undefined"==f.content)return!1;if(e.manChat(c,function(){$(".pubble-cw-panel-bottom").removeAttr("style")},1,f.tempId),$(".pubble-cw-panel-bottom").removeAttr("style"),e.hideInput(),$(".pubble-cw-input-processing").removeClass("pubble-off"),2==e.triggerClick&&e.rule?(f.greetRuleId=e.rule.id,triggerClick=0,e.targetAccountId>0?f.assignAccountIds=e.targetAccountId:p.config.parameters.assignGreeting&&e.triggerUser.id!=p.config.parameters.communityBot.id&&(f.assignAccountIds=e.triggerUser.id)):e.targetAccountId>0&&(f.assignAccountIds=e.targetAccountId),e.targetTag&&""!=e.targetTag&&(f.tags&&f.tags.length>0?f.tags=f.tags+","+e.targetTag:f.tags=e.targetTag),e.defaultTags&&(f.tags&&f.tags.length>0?f.tags=f.tags+","+e.defaultTags:f.tags=e.defaultTags),e.targetgroupid>0&&(f.assignAppIds=e.targetgroupid),e.targetAccountId>0||e.targetgroupid,"undefined"==f.content)return e.updateAria(T.getText("Content Required")),e.warning("no content in q",""),!1;if(null!=f.content.toLowerCase().match("<.*onerr")||null!=f.content.toLowerCase().match("<.*onload"))return e.warning(f.content,""),!1;if(-1!=f.content.indexOf("prompt(/XSSPOSED/"))return e.warning(f.content,""),!1;-1==window.location.href.indexOf("visitor=false")&&e.visitorId&&(f.visitorId=e.visitorId),p.config.parameters.enableGdpr&&"Q"==f.type&&(f.agreePrivacyPolicy=!0),p.config.visitorId&&(f.visitorId=p.config.visitorId),null!=p.config.user&&p.config.user.uid>0&&"account"==p.config.user.type&&(delete f.visotrId,delete f.agreePrivacyPolicy);var u=$("#pubble_app_"+p.config.appID),m=u.attr("data-assign-group");null!=m&&(f.assignAppIds=m);var v=u.attr("data-assign-user");null!=v&&(f.assignAccountIds=v);new Date;if(i.availToPost())i.Xpost(!0,i.getEndpoints().post,f,function(t){var n=e.$el.attr("data-response-message");if(n&&null!=n&&n.length>3&&"Q"==f.type&&e.robotChat(n,function(){}),e.updateAria(T.getText("Message sent")),$(".pubble-cw-chat-container").removeClass("pubble-cw-isnewquestion"),e.$el.find(".pubble-cw-chatbox").removeClass("pubble-cw-textarea-hastext"),i.hideView(e.$el.find(".pubble-cw-action-post"),!1,"style"),i.setCookieValue("pb-qasked",1),"Q"==f.type&&$(".pubble-cw-input-textarea").val(""),f.greetRuleId){e.$el.find(".pubble-trigger-chat").remove();var a=e.conversationCollection.find(function(e){return"-1000"==e.get("conversationId")});a&&e.conversationCollection.remove(a)}var s=new o;s=r.setPost(s,t.data),e.conversationCollection.add(s),i.invokeConversationHandler(t.data.conversationId,t.data.count),$(".pubble-cw-input-textarea").attr("placeholder",i.uiGetText("Message...")),e.vent.trigger("init:presence",e.conversationId),$(document).trigger("app:desktop:permission"),e.vent.trigger("pubble:question:asked",t.data.conversationId),e.updateServer(),e.nocontacted=!1,$(".pubble-cw-input-textarea-placeholder").html(i.uiGetText("Message...")),$(".pubble-cw-input-textarea-send").html(i.uiGetText("Send")),e.targetAccountId=-1,e.targetgroupid=-1,e.targetTag="",e.skippedFaq=0,delete e.promptedText,e.$el.find(".pubble-cw-input-filelist").html(""),delete window.pb_uploaded_fileName,e.$el.find(".pubble-cw-input-textarea-placeholder").removeClass("pubble-off"),c&&-1!=c.indexOf("?")?i.mixlog("cw-content-submitted",{landingPage:p.config.pageURL,communityId:p.config.communityId,appId:p.config.appID,type:"question"},e.track):i.mixlog("cw-content-submitted",{landingPage:p.config.pageURL,communityId:p.config.communityId,appId:p.config.appID,type:"message"},e.track),$(".pubble-cw-panel-dialog-item-pending").removeClass("pubble-cw-panel-dialog-item-pending"),e.conversationId=t.data.conversationId,e.questionId=t.data.count,p.conversationId=e.conversationId,p.questionId=e.questionId,i.setCookieValue("pb-conversationId",t.data.conversationId),i.setCookieValue("pb-appId",t.data.appId),e.objectId=t.objectId,e.lastPost=t.objectId,e.shortUrl=t.shortUrl,e.author=t.author,$(".pubble-cw-tick-mod").removeClass("pubble-off"),t.data.read&&e.updateRead(),i.mixlog("bot-cw-asked",{landingPage:p.config.pageURL,communityId:p.config.communityId,appId:p.config.appID,conversationId:t.data.conversationId},e.track),$(".pubble-cw-notif-link").html(t.data.shortUrl),$(".pubble-cw-input-buttonbar-link").find(".pubble-cw-input-buttonbar-content").html(t.data.shortUrl),e.author=t.data.author,e.updateQuestionCount();var l=e.$el.find(".pubble-cw-chat-list");s.set("type","CV"),s.set("read",1);var u=new d({model:s,app:e}),b=u.render().$el;l.prepend(b),$(".pubble-cw-hs-section-isconvlist").removeClass("pubble-off");var h={};h.conversationId=e.conversationId,h.appId=p.config.appID,h.code="contact",e.stage="contact",e.credential=0;var m=0;if(null!=p.config.user&&p.config.user.uid>0&&"account"==p.config.user.type?m=1:e.sms&&""!=e.sms?m=1:e.email&&""!=e.email&&(m=1),"Q"==f.type){if(e.email&&e.email.length>2){$(".pubble-cw-email-input").val(e.email),e.$el.find(".pubble-cw-getnotif-content-transcript-email").removeClass("pubble-cw-hasnoemail");var v=e.$el.find(".pubble-cw-getnotif-content-transcript-email").find(".pubble-cw-btn-transcript-email");v.attr("aria-hidden",!1),v.attr("tabindex",0),v.attr("aria-disabled",!1)}e.sms&&e.sms.length>5&&e.handleSMS(e.sms),m&&$(".pubble-cw-getnotif-handle").removeClass("pubble-off")}if(p.config.contactFirst){$(".pubble-cw-input-processing").removeClass("pubble-off");var g=0,w=window.setInterval(function(){e.socketConnected&&e.conversation_subscribed?(window.clearInterval(w),setTimeout(function(){i.addClass($(".pubble-cw-input-processing"),"pubble-off"),e.faq()},200)):++g>20&&i.addClass($(".pubble-cw-input-processing"),"pubble-off")},200);return!1}if(m)i.addClass($(".pubble-cw-input-processing"),"pubble-off"),e.faqinterval=setInterval(function(){i.contains(e.converstationSubscribedInited,e.conversationId)&&(e.faq(),window.clearInterval(e.faqinterval))},2600);else{var y=e.helloWords,C=y.split(","),x=e.content.toLowerCase().trim(),k=0;$.each(C,function(e,t){if(x==t.toLowerCase().trim())return k=1,!1}),k?(e.robotChat(i.uiGetText("Hello, how can we help?"),function(){}),e.showInput(),i.addClass($(".pubble-cw-input-processing"),"pubble-off")):e.contactStep(e,!1)}},function(){},h);else{$(".pubble-cw-panel-dialog-item-pending").remove(),e.officeHour(!0);var u=e.$el.find(".pubble-cw-input-outofoffice");u.removeClass("pubble-off");var h=setTimeout(function(){i.addClass(u,"pubble-off"),i.addClass(e.$el.find(".pubble-cw-input-processing"),"pubble-off");var t=e.$el.find(".pubble-cw-input-default");t.removeClass("pubble-off"),t.find("textarea").val(f.content),window.clearTimeout(h)},5e3)}}else if("name"==n);else if("email"==n){$(".pubble-cw-panel-bottom").removeClass("pubble-cw-emailchatbox"),c=c.trim().replace("\n","").replace(/\r\n/,""),""!==c&&(e.author.email=c),i.isValidEmail(e.author.email)&&c.indexOf("anon@"),i.mixlog("bot-cw-email-edit",{landingPage:p.config.pageURL,communityId:p.config.communityId,appId:p.config.appID,valid:!0},e.track);var f={contentType:"JSONP",email:c,anon:!0,conversationId:e.conversationId,postNotification:!1,emailPermalink:!0,postUrlSeq:!0,systemNotification:!0,permalink:!0},h={};p.config.parameters.enableGdpr&&(f.agreePrivacyPolicy=!0),$(".pubble-cw-panel-bottom").removeAttr("style"),e.email=c;var h={};if("undefined"==c)return!1;if(null!=c.toLowerCase().match("<.*onerr")||null!=c.toLowerCase().match("<.*onload"))return e.warning(c,e.conversationId),!1;if(-1!=c.indexOf("prompt(/XSSPOSED/"))return e.warning(c,e.conversationId),!1;i.XDR(i.getEndpoints().editEmail,f,function(t){if($(".pubble-cw-panel-bottom").removeClass("pubble-gdpr-request"),"200"!=t.code)return!1;e.emailProvied=!0,e.stage="free",-1==window.location.href.indexOf("visitor=false")&&"visitor"==t.data.type&&(e.visitorId=t.data.id,y.set("visitor-id-"+p.config.appID,t.data.id)),$(".pubble-cw-panel-dialog-item-pending").removeClass("pubble-cw-panel-dialog-item-pending"),$(".pubble-cw-input-textarea").attr("placeholder",i.uiGetText("Message...")),$(".pubble-cw-tick-server-off").removeClass("pubble-off");var n=$(".pubble-cw-getnotif");i.isValidEmail(e.author.email)&&-1===e.author.email.indexOf("anon@")?(n.removeClass("pubble-cw-getnotif-on"),n.removeClass("pubble-off"),i.addClass(n,"pubble-cw-getnotif-off"),$(".pubble-cw-getnotif-content-buttonbar-action-inputbox").find("textarea").val(f.content)):(n.removeClass("pubble-cw-getnotif-off"),n.removeClass("pubble-off"),i.addClass(n,"pubble-cw-getnotif-on")),setTimeout(function(){if(!e.nodelay){if(0==e.hasRead){var t={};t.conversationId=e.conversationId,t.appId=p.config.appID,t.code="delay",i.Xpost(!0,i.getEndpoints().seq,t,function(e){})}n.hasClass("pubble-cw-getnotif-off")&&!e.notifclicked&&(n.removeClass("pubble-cw-getnotif-off"),n.removeClass("pubble-off"),i.addClass(n,"pubble-cw-getnotif-on"))}},4e4)},function(){},h)}else{var g=i.getTempId();if("undefined"==c||0==e.conversationId){var w=i.getRefer();return i.mixlog("cw-fatal-error",{landingPage:p.config.pageURL,landingPage2:window.location.href,communityId:p.config.communityId,appId:p.config.appID,content:c,stage:n,position:"1",conversationId:e.conversationId,referrer:w},e.track),!1}l.length>0&&(c=""),e.manChat(c,function(){var t;"freefaq"==e.stage&&(t=e.stage),l=e.$el.find(".pubble-cw-input-filelist").html().trim(),e.postComment(c,p.config.appID,e.conversationId,g,l,t),$(".pubble-cw-panel-bottom").removeAttr("style")},1,g),$(".pubble-cw-panel-bottom").removeAttr("style")}$(".pubble-cw-panel-bottom").removeAttr("style"),0==l.length&&a.val(""),i.addClass($(".pubble-cw-input-textarea-send"),"pubble-cw-input-textarea-send-disabled"),$(".pubble-cw-panel-middle").removeAttr("style"),a.attr("style","height:56px !important;")})},postComment:function(e,t,n,a,o,r){var s=this,l={communityId:p.config.communityId,appId:p.config.appID,postToType:"app",conversationId:n,type:"C",content:e};s.$el.find(".pubble-cw-input-filelist").html(""),delete window.pb_uploaded_fileName,o.length>0&&(l.attachments=o,l.content=""),null==p.config.user||0==p.config.user.uid?(l.anon=!0,l.name=s.clientName,l.postAsVisitor=!0):l.postAsVisitor=p.config.user.postAsVisitor,-1==window.location.href.indexOf("visitor=false")||this.newQ?(l.visitor=!0,s.visitorId&&(l.visitorId=s.visitorId)):(l.visitor=!1,l.anon=!1),p.config.visitorId&&(l.visitorId=p.config.visitorId),null!=p.config.user&&p.config.user.uid>0&&"account"==p.config.user.type&&(delete l.vistorId,delete l.agreePrivacyPolicy),a&&(l.tempId=a);if($(".pubble-cw-panel-bottom").removeAttr("style"),e){if(null!=e.toLowerCase().match("<.*onerr")||null!=e.toLowerCase().match("<.*onload"))return s.warning(e,n),!1;if(-1!=e.indexOf("prompt(/XSSPOSED/"))return s.warning(e,n),!1}if(r&&"freefaq"==r&&!s.adminChat&&(s.hideInput(),$(".pubble-cw-input-processing").removeClass("pubble-off")),-1==window.location.href.indexOf("visitor=false")&&s.visitorId&&(l.visitorId=s.visitorId),p.config.parameters.enableGdpr&&"Q"==l.type&&(l.agreePrivacyPolicy=!0),"Q"==l.type&&!i.availToPost())return!1;i.Xpost(!0,i.getEndpoints().post,l,function(e){return s.updateAria(T.getText("Message sent")),s.$el.find(".pubble-cw-input-filelist").html(""),delete window.pb_uploaded_fileName,"406"==e.code?($("#PBMSG"+l.tempId).remove(),s.robotChat(i.uiGetText("To join the conversation, please reply from the moderator section"),function(){}),!1):s.stage&&"contact"==s.stage&&!s.skippedFaq?(s.promptedText=l.content,s.skippedFaq=1,s.contactStep(s,!1),!1):r&&"freefaq"==r&&!s.adminChat||s.skippedFaq?(s.faq(l.content),!1):("free"==s.stage&&s.officeHour(),s.updateServer(),delete window.pb_uploaded_fileName,s.$el.find(".pubble-cw-input-filelist").html(""),delete window.pb_uploaded_fileName,s.$el.find(".pubble-cw-input-textarea-placeholder").removeClass("pubble-off"),$(".pubble-cw-panel-dialog-item-pending").removeClass("pubble-cw-panel-dialog-item-pending"),void(s.lastPost=e.objectId))})},askName:function(){},askEmail:function(){var e=this,t="Cool ";t+=" Whats your email (so we can follow-up)? ",e.robotChat(t,function(){e.stage="email"})},startup:function(){this.render()},robotChat:function(e,t,n,r){this.botTalked++;var s=new o;s.set("alias",p.config.parameters.communityBot.alias),s.set("postID","bot-"+this.botTalked),s.set("id","bot-"+this.botTalked),s.set("avatar",p.config.parameters.communityBot.avatar+"?72"),s.set("time",i.getTime()),s.set("content",e);var l=new a({model:s}),c=l.render().$el;i.addClass(c,"pubble-cw-isbot"),c.removeClass("pubble-cw-isadmin"),n&&"contact"==n&&(i.addClass(c,"pubble-cw-isContactMsg"),$(".pubble-cw-isContactMsg").remove()),n&&"greeting"==n&&(i.addClass(c,"pubble-cw-isgreeting"),$(".pubble-cw-isgreeting").remove()),i.addClass(c,"pubble-cw-panel-dialog-item-justin");var u=(new Date).getTime();c.attr("timestamp",u),$(".pubble-cw-panel-dialog").append(c),r||this.scrollToBottom(),t()},updateServer:function(){var e=$(".pubble-cw-tick-server");$.each(e,function(e,t){var n=$(t);n.removeClass("pubble-off"),n.hasClass("pubble-cw-tick-server-off")&&(n.removeClass("pubble-cw-tick-server-off"),i.addClass(n,"pubble-cw-tick-server-on"),n.parents(".pubble-cw-dialog-item-footer").find(".pubble-cw-dialog-item-status").html(i.uiGetText("Not seen yet")))})},updateRead:function(){var e=$(".pubble-cw-tick-mod");$.each(e,function(e,t){var n=$(t);n.hasClass("pubble-off")&&n.removeClass("pubble-off"),n.hasClass("pubble-cw-tick-mod-off")&&(n.removeClass("pubble-cw-tick-mod-off"),i.addClass(n,"pubble-cw-tick-mod-on"),n.parents(".pubble-cw-dialog-item-footer").find(".pubble-cw-dialog-item-status").html(i.uiGetText("Seen")))})},submitPhone:function(e,t){var n={contentType:"JSONP",phone:t,conversationId:e.conversationId,postNotification:!1,postUrlSeq:!1,permalink:!0};p.config.parameters.enableGdpr&&(n.agreePrivacyPolicy=!0);var a={};if(i.addClass($(".pubble-cw-input-buttonbar-sms"),"pubble-off"),$(".pubble-cw-chatbox").removeClass("pubble-gdpr-request"),i.addClass($(".pubble-cw-input-iscredentials"),"pubble-off"),e.handlePrompt(),e.sms=n.phone,t){if(null!=t.toLowerCase().match("<.*onerr")||null!=t.toLowerCase().match("<.*onload"))return e.warning(t,e.conversationId),!1;if(-1!=t.indexOf("prompt(/XSSPOSED/"))return e.warning(t,e.conversationId),!1}i.XDR(i.getEndpoints().editPhone,n,function(t){if($(".pubble-cw-panel-bottom").removeClass("pubble-gdpr-request"),"200"!=t.code)return!1;-1==window.location.href.indexOf("visitor=false")&&"visitor"==t.data.type&&(e.visitorId=t.data.id,y.set("visitor-id-"+p.config.appID,t.data.id)),e.vent.trigger("pubble:messenger:contact",e.conversationId),e.telProvied=!0,p.config.contactFirst&&""==e.conversationId?e.askStep(e):(e.processing(),e.faqChecked||e.nocontact())},function(){},a)},submitEmail:function(e,t){e.handlePrompt();var n={},a={contentType:"JSONP",email:t,conversationId:e.conversationId,postNotification:!1,postUrlSeq:!1,permalink:!0};if(p.config.parameters.enableGdpr&&(a.agreePrivacyPolicy=!0),t){if(null!=t.toLowerCase().match("<.*onerr")||null!=t.toLowerCase().match("<.*onload"))return e.warning(t,e.conversationId),!1;if(-1!=t.indexOf("prompt(/XSSPOSED/"))return e.warning(t,e.conversationId),!1}i.XDR(i.getEndpoints().editEmail,a,function(n){if($(".pubble-cw-panel-bottom").removeClass("pubble-gdpr-request"),"200"!=n.code)return!1;-1==window.location.href.indexOf("visitor=false")&&"visitor"==n.data.type&&(e.visitorId=n.data.id,y.set("visitor-id-"+p.config.appID,n.data.id)),e.vent.trigger("pubble:messenger:contact",e.conversationId),e.emailProvied=!0,p.config.contactFirst&&""==e.conversationId?e.askStep(e):(e.processing(),e.faqChecked||e.nocontact(),"anon@pubble.co"!=t&&$(".pubble-cw-getnotif-content-buttonbar-action-inputbox-email").find("textarea").val(t))},function(){},n)},askStep:function(e,t){e.triggerClick?(e.vent.trigger("app:trigger:chatitem"),e.triggerClick=2):setTimeout(function(){e.targetAccountId&&-1!=e.targetAccountId||e.targetgroupid&&-1!=e.targetgroupid||e.targetTag&&""!=e.targetTag||e.robotChat(i.uiGetText("Please type your question below"),function(){},"greeting",!0)},1e3),e.stage="q",e.clientName||(e.clientName="Guest"),i.addClass($(".pubble-cw-input-processing"),"pubble-off"),$(".pubble-cw-input-default").removeClass("pubble-off"),i.addClass($(".pubble-cw-input-iscredentials"),"pubble-off"),$(".pubble-cw-input-textarea-placeholder").html(i.uiGetText("Ask your question here..."))},setContact:function(e){p.isPubble?(null!=p.config.user&&p.config.user.uid>0&&null!=p.config.user.email&&(e.email=p.config.user.email),null!=p.config.user&&p.config.user.uid>0&&null!=p.config.user.displayName&&(e.clientName=p.config.user.displayName),null!=p.config.user&&p.config.user.uid>0&&null!=p.config.user.phone&&(e.sms=p.config.user.phone)):(null!=p.config.user&&p.config.user.uid>0&&null!=p.config.user.email&&"account"!=p.config.user.type&&(e.email=p.config.user.email),null!=p.config.user&&p.config.user.uid>0&&null!=p.config.user.displayName&&"account"!=p.config.user.type&&(e.clientName=p.config.user.displayName),null!=p.config.user&&p.config.user.uid>0&&null!=p.config.user.phone&&"account"!=p.config.user.type&&(e.sms=p.config.user.phone))},contactStep:function(e,t){var n=0;if(null!=p.config.user&&p.config.user.uid>0&&"account"==p.config.user.type?n=1:e.sms&&""!=e.sms?n=1:e.email&&""!=e.email&&(n=1),n)return e.stage="freechat",!1;var a=new h;if(e.author||(e.author={},e.author.alias="Guest",e.author.email=""),e.author.alias=r.decodeHtml(e.author.alias),a.set("author",e.author),a.set("type","newq"),a.set("conversationId",0),t){var o=new f({model:a}),s=o.render().$el;0==e.conversationCollection.models.length&&p.config.contactFirst&&i.addClass(s.find(".pubble-form-top-close"),"pubble-off"),s.find(".pubble-form-top-close").on("click",function(){e.conversationCollection.models.length>0&&e.shiftView("list")});var l=p.config.parameters.iso3166,c=[];window.pubble_ip_country&&""!=window.pubble_ip_country&&c.push(window.pubble_ip_country),l?(c.push(l),"gb"==l?(c.push("ie"),c.push("us")):"ie"==l?(c.push("gb"),c.push("us")):"us"==l&&(c.push("gb"),c.push("us"))):c=["ie","gb","us"],p.config.parameters.smsOption&&s.find(".pubble-cw-mobile-lib").intlTelInput({nationalMode:!0,numberType:"MOBILE",preferredCountries:c});var u=e.$el.find(".pubble-cw-form-container");return u.html(s),u.removeClass("pubble-hide"),i.addClass(u,"pubble-show"),i.addClass(e.$el.find(".pubble-cw-chat-container"),"pubble-hide"),!1}if(i.addClass($(".pubble-cw-input-processing"),"pubble-off"),(p.config.parameters.emailOption||p.config.parameters.smsOption)&&e.robotChat(i.uiGetText("How do you want to be notified?"),function(){},"contact"),p.config.parameters.emailOption||p.config.parameters.smsOption){if(p.config.parameters.skipOption){e.contactDelayed=0;var d=e.$el.find(".pubble-cw-input-button-skip");d.attr("arial-lable",T.getText("skipping contact details in 15 seconds. Click to skip now")),setTimeout(function(){e.$el.hasClass("pubble-user-is-tabbing")&&d.focus()},1e3),setTimeout(function(){0==e.contactDelayed&&e.$el.find(".pubble-cw-input-button-skip").trigger("click"),e.$el.find(".pubble-cw-input-waiting").removeClass("pubble-cw-animate")},15e3)}var b={};b.conversationId=e.conversationId,b.appId=p.config.appID,b.code="notify.options",e.hideInput(),$(".pubble-cw-input-iscredentials").removeClass("pubble-off"),e.$el.find(".pubble-cw-input-buttonbar").removeClass("pubble-off"),p.config.parameters.skipOption&&i.addClass(e.$el.find(".pubble-cw-input-waiting"),"pubble-cw-animate"),i.Xpost(!0,i.getEndpoints().seq,b,function(e){})}else{e.seq("notify.skip"),i.addClass($(".pubble-cw-input-iscredentials"),"pubble-off");var m={conversationId:e.conversationId,contentType:"JSONP",action:"skipcontact"},v={};i.XDR(i.getEndpoints().qinteraction,m,function(){},function(){},v),e.handlePrompt(),e.processing(),e.faqChecked||e.nocontact()}},setDefaultCountry:function(e){if(!e||""==e||"-"==e)return!1;var t=$(".flag-dropdown");$.each(t,function(t,n){var a=$(n),o=a.find(".country");$.each(o,function(t,n){var a=$(n);if(a.removeClass("highlight").removeClass("active"),a.attr("data-country-code")==e){i.addClass(a,"highlight"),i.addClass(a,"active");var o=(a.parent().parent(),$(".selected-flag"));return $.each(o,function(e,t){t=$(t),t.attr("title",a.find(".country-name").html()+": "+a.find(".dial-code").html()),t.find(".iti-flag").removeAttr("class").addClass("iti-flag").addClass(a.attr("data-country-code")),t.find(".iti-flag-pubble-nr").remove(),$("<div class='iti-flag-pubble-nr'>"+a.find(".dial-code").html()+"</div>").insertBefore(t.find(".arrow"))}),!1}})})},setCountryCode:function(e){return!1},manChat:function(e,t,n,s,l){this.botTalked++;var c=new o;c.set("alias","Me"),c.set("postID","bot-"+this.botTalked),c.set("id","bot-"+this.botTalked),c.set("avatar",""),c.set("time",i.getTime()),l&&c.set("posted",1),window.location.href.indexOf("visitor=false")>-1&&c.set("avatar",p.config.user.avatar),s&&c.set("id",s),c.set("content",r.emjos.shortnameToImage(r.setContent(e)));var u=new a({model:c}),d=u.render().$el,b=0;d.attr("data",10086),window.location.href.indexOf("visitor=false")>-1?this.newQ?(i.addClass(d,"pubble-cw-isvisitor"),d.removeClass("pubble-cw-isadmin")):(i.addClass(d,"pubble-cw-isadmin"),d.removeClass("pubble-cw-isvisitor")):(i.addClass(d,"pubble-cw-isvisitor"),d.removeClass("pubble-cw-isadmin")),n&&i.addClass(d,"pubble-cw-panel-dialog-item-pending");var f=$(".pubble-cw-panel-dialog-item").last(),b=10086;f.length>0&&f.attr("data")==b?i.addClass(d,"pubble-cw-islast"):(i.addClass(d,"pubble-cw-isfirst"),i.addClass(d,"pubble-cw-islast")),d.attr("data",b),i.addClass(d,"pubble-cw-panel-dialog-item-justin");var h=(new Date).getTime();d.attr("timestamp",h),""!=e&&$(".pubble-cw-panel-dialog").append(d),d.hasClass("pubble-cw-islast")&&b==d.prev().attr("data")&&d.prev().removeClass("pubble-cw-islast");$(".pubble-cw-panel-dialog");this.scrollToBottom(),t()}})}),window.isWindowActive=!0,window.iswindowonfocus=!0,document.addEventListener("visibilitychange",visibleChangeHandler,!1),function(e){function t(t,n){var i;return e.Notification?i=new e.Notification(t,{icon:v(n.icon)?n.icon:n.icon.x32,body:n.body||b,tag:n.tag||b}):e.webkitNotifications?(i=e.webkitNotifications.createNotification(n.icon,t,n.body),i.show()):navigator.mozNotification?(i=navigator.mozNotification.createNotification(t,n.body,n.icon),i.show()):e.external&&e.external.msIsSiteMode()&&(e.external.msSiteModeClearIconOverlay(),e.external.msSiteModeSetIconOverlay(v(n.icon)?n.icon:n.icon.x16,t),e.external.msSiteModeActivate(),i={ieVerification:h+1}),i.onclick=function(e){try{window.focus(),this.cancel()}catch(e){}},i}function n(t){return{close:function(){t&&(t.close?t.close():e.external&&e.external.msIsSiteMode()&&t.ieVerification===h&&e.external.msSiteModeClearIconOverlay())}}}function i(t){if(f){var n=m(t)?t:y;e.webkitNotifications&&e.webkitNotifications.checkPermission?e.webkitNotifications.requestPermission(n):e.Notification&&e.Notification.requestPermission&&e.Notification.requestPermission(n)}}function a(){var t;if(f)try{return e.Notification&&e.Notification.permissionLevel?t=e.Notification.permissionLevel():e.webkitNotifications&&e.webkitNotifications.checkPermission?t=u[e.webkitNotifications.checkPermission()]:navigator.mozNotification?t=c:e.Notification&&e.Notification.permission?t=e.Notification.permission:e.external&&void 0!==e.external.msIsSiteMode()&&(t=e.external.msIsSiteMode()?c:l),t}catch(e){return}}function o(e){return e&&g(e)&&w(C,e),C}function r(){return!C.pageVisibility||(document.hidden||document.msHidden||document.mozHidden||document.webkitHidden)}function s(i,o){var s,l;return f&&r()&&v(i)&&o&&(v(o.icon)||g(o.icon))&&a()===c&&(s=t(i,o)),l=n(s),C.autoClose&&s&&!s.ieVerification&&s.addEventListener&&s.addEventListener("show",function(){var t=l;e.setTimeout(function(){t.close()},C.autoClose)}),l}var l="default",c="granted",u=[c,l,"denied"],p={pageVisibility:!1,autoClose:0},d={},b="",f=function(){var t=!1;try{t=!!(e.Notification||e.webkitNotifications||navigator.mozNotification||e.external&&void 0!==e.external.msIsSiteMode())}catch(e){}return t}(),h=Math.floor(10*Math.random()+1),m=function(e){return e&&e.constructor===Function},v=function(e){return e&&e.constructor===String},g=function(e){return e&&e.constructor===Object},w=function(e,t){var n,i;for(n in t)i=t[n],n in e&&(e[n]===i||n in d&&d[n]===i)||(e[n]=i);return e},y=function(){},C=p;e.notify={PERMISSION_DEFAULT:l,PERMISSION_GRANTED:c,PERMISSION_DENIED:"denied",isSupported:f,config:o,createNotification:s,permissionLevel:a,requestPermission:i},m(Object.seal)&&Object.seal(e.notify)}(window),pubblebot.define("desktopModule",["jQueryPB","utils/utils","utils/appConfig"],function(e,t,n){var e=window.jQueryPBm;e(window).blur(function(){window.iswindowonfocus=!1}),e(window).focus(function(){window.iswindowonfocus=!0});var i=function(a){var o={};o.app={},e(document).bind("app:desktop:test",function(){}),e(document).bind("app:desktop:send",function(a,r,s,l){if(t.isMsStack()||"dmag"==n.config.parameters.community.shortName)return!1;if(window.isWindowActive&&window.iswindowonfocus);else try{document.getElementById("pqmq-beep").muted=!1,document.getElementById("pqmq-beep").play()}catch(e){}var r=e("<div/>").html(r).text().replace("<.*?>",""),c=notify.isSupported,u=notify.permissionLevel();if(icon="https://cdn.pubble.io/resources/dashboard/img/favicon300x_64x64.png",o.app.community&&o.app.community.whitelabel&&(icon="https://cdn.pubble.io/resources/dashboard/img/notif_wl_ico64v2.png"),c)if(u==notify.PERMISSION_DEFAULT);else if(u==notify.PERMISSION_GRANTED){i.notification={title:"You got a new notification",body:r,icon:icon},notify.config({pageVisibility:!0,autoClose:1e4});var p;if(window.isWindowActive&&window.iswindowonfocus)return!1;if(window.webkitNotifications?p=window.webkitNotifications.createNotification(i.notification.icon,i.notification.title,i.notification.body):window.Notification&&(p=new Notification(i.notification.title,{body:i.notification.body,icon:i.notification.icon,requireInteraction:!0,tag:l})),!p)return!1;p.onclick=function(){e(".pubble-cw-panel").hasClass("pubble-move")&&e(".pubble-cw-contactbot").trigger("click"),window.focus(),this.cancel?this.cancel():this.close&&this.close()}}}),e(document).bind("app:desktop:permission",function(){var e=notify.isSupported,t=notify.permissionLevel();e&&(notify.requestPermission(),t==notify.PERMISSION_DEFAULT?notify.requestPermission():notify.PERMISSION_GRANTED)})};return i}),pubblebot.define("app",["backbone","underscore","models/app","views/app","utils/appConfig","desktopModule"],function(e,t,n,i,a,o){var r=(window.$pubbBackbone.noConflict(),new n),s="#PQAQ_section",l=a.get("CN");return null!=l&&null!=document.getElementById("pubble_app_"+l)&&(s="#pubble_app_"+l),o(),new i({model:r,el:s})});